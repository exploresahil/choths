/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-client_node_modules_sanity_lib__chunks_index-7415496d_js"],{

/***/ "(app-client)/./node_modules/@rexxars/react-json-inspector/json-inspector.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/json-inspector.js ***!
  \**********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var React = __webpack_require__(/*! react */ \"(app-client)/./node_modules/next/dist/compiled/react/index.js\");\nvar createReactClass = __webpack_require__(/*! create-react-class */ \"(app-client)/./node_modules/create-react-class/index.js\");\nvar debounce = __webpack_require__(/*! debounce */ \"(app-client)/./node_modules/debounce/index.js\");\n\nvar h = React.createElement;\nvar Leaf = __webpack_require__(/*! ./lib/leaf */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/lib/leaf.js\");\nvar SearchBar = __webpack_require__(/*! ./lib/search-bar */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/lib/search-bar.js\");\n\nvar filterer = __webpack_require__(/*! ./lib/filterer */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/lib/filterer.js\");\nvar isEmpty = __webpack_require__(/*! ./lib/is-empty */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/lib/is-empty.js\");\nvar lens = __webpack_require__(/*! ./lib/lens */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/lib/lens.js\");\nvar noop = __webpack_require__(/*! ./lib/noop */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/lib/noop.js\");\n\nmodule.exports = createReactClass({\n    getDefaultProps: function() {\n        return {\n            data: null,\n            search: SearchBar,\n            searchOptions: {\n                debounceTime: 0\n            },\n            className: '',\n            id: 'json-' + Date.now(),\n            onClick: noop,\n            filterOptions: {\n                cacheResults: true,\n                ignoreCase: false\n            },\n            validateQuery: function(query) {\n                return query.length >= 2;\n            },\n            /**\n             * Decide whether the leaf node at given `keypath` should be\n             * expanded initially.\n             * @param  {String} keypath\n             * @param  {Any} value\n             * @return {Boolean}\n             */\n            isExpanded: function(keypath, value) {\n                return false;\n            },\n            verboseShowOriginal: false\n        };\n    },\n    getInitialState: function() {\n        return {\n            query: this.props.query || ''\n        };\n    },\n    render: function() {\n        var p = this.props;\n        var s = this.state;\n\n        var isQueryValid = (\n            s.query !== '' &&\n            p.validateQuery(s.query)\n        );\n\n        var data = (\n            isQueryValid ?\n                s.filterer(s.query) :\n                p.data\n        );\n\n        var isNotFound = (\n            isQueryValid &&\n            isEmpty(data)\n        );\n\n        return h('div', { className: 'json-inspector ' + p.className },\n            this.renderToolbar(),\n            (\n                isNotFound ?\n                    h('div', { className: 'json-inspector__not-found' }, 'Nothing found') :\n                    h(Leaf, {\n                        data: data,\n                        onClick: p.onClick,\n                        id: p.id,\n                        getOriginal: this.getOriginal,\n                        query: (\n                            isQueryValid ?\n                                new RegExp(\n                                        s.query,\n                                        (p.filterOptions.ignoreCase ? 'i' : '')\n                                ) :\n                                null\n                        ),\n                        label: 'root',\n                        root: true,\n                        isExpanded: p.isExpanded,\n                        interactiveLabel: p.interactiveLabel,\n                        verboseShowOriginal: p.verboseShowOriginal\n                    })\n            )\n        );\n    },\n    renderToolbar: function() {\n        var search = this.props.search;\n\n        if (search) {\n            return h('div', { className: 'json-inspector__toolbar' },\n                h(search, {\n                    onChange: debounce(this.search, this.props.searchOptions.debounceTime),\n                    data: this.props.data,\n                    query: this.state.query\n                })\n            );\n        }\n    },\n    search: function(query) {\n        this.setState({\n            query: query\n        });\n    },\n    componentWillMount: function() {\n        this.createFilterer(this.props.data, this.props.filterOptions);\n    },\n    componentWillReceiveProps: function(p) {\n        this.createFilterer(p.data, p.filterOptions);\n\n        var isReceivingNewQuery = (\n            typeof p.query === 'string' &&\n            p.query !== this.state.query\n        );\n\n        if (isReceivingNewQuery) {\n            this.setState({\n                query: p.query\n            });\n        }\n    },\n    shouldComponentUpdate: function (p, s) {\n        return (\n            p.query !== this.props.query ||\n            s.query !== this.state.query ||\n            p.data !== this.props.data ||\n            p.onClick !== this.props.onClick\n        );\n    },\n    createFilterer: function(data, options) {\n        this.setState({\n            filterer: filterer(data, options)\n        });\n    },\n    getOriginal: function(path) {\n        return lens(this.props.data, path);\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2pzb24taW5zcGVjdG9yLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBLFlBQVksbUJBQU8sQ0FBQyw0RUFBTztBQUMzQix1QkFBdUIsbUJBQU8sQ0FBQyxtRkFBb0I7QUFDbkQsZUFBZSxtQkFBTyxDQUFDLCtEQUFVOztBQUVqQztBQUNBLFdBQVcsbUJBQU8sQ0FBQyx5RkFBWTtBQUMvQixnQkFBZ0IsbUJBQU8sQ0FBQyxxR0FBa0I7O0FBRTFDLGVBQWUsbUJBQU8sQ0FBQyxpR0FBZ0I7QUFDdkMsY0FBYyxtQkFBTyxDQUFDLGlHQUFnQjtBQUN0QyxXQUFXLG1CQUFPLENBQUMseUZBQVk7QUFDL0IsV0FBVyxtQkFBTyxDQUFDLHlGQUFZOztBQUUvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQyx3QkFBd0IsS0FBSztBQUM3Qix3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMEJBQTBCLDRDQUE0QztBQUN0RTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isd0NBQXdDO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEIsc0NBQXNDO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQHJleHhhcnMvcmVhY3QtanNvbi1pbnNwZWN0b3IvanNvbi1pbnNwZWN0b3IuanM/OGYyOSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIGNyZWF0ZVJlYWN0Q2xhc3MgPSByZXF1aXJlKCdjcmVhdGUtcmVhY3QtY2xhc3MnKTtcbnZhciBkZWJvdW5jZSA9IHJlcXVpcmUoJ2RlYm91bmNlJyk7XG5cbnZhciBoID0gUmVhY3QuY3JlYXRlRWxlbWVudDtcbnZhciBMZWFmID0gcmVxdWlyZSgnLi9saWIvbGVhZicpO1xudmFyIFNlYXJjaEJhciA9IHJlcXVpcmUoJy4vbGliL3NlYXJjaC1iYXInKTtcblxudmFyIGZpbHRlcmVyID0gcmVxdWlyZSgnLi9saWIvZmlsdGVyZXInKTtcbnZhciBpc0VtcHR5ID0gcmVxdWlyZSgnLi9saWIvaXMtZW1wdHknKTtcbnZhciBsZW5zID0gcmVxdWlyZSgnLi9saWIvbGVucycpO1xudmFyIG5vb3AgPSByZXF1aXJlKCcuL2xpYi9ub29wJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlUmVhY3RDbGFzcyh7XG4gICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICBzZWFyY2g6IFNlYXJjaEJhcixcbiAgICAgICAgICAgIHNlYXJjaE9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBkZWJvdW5jZVRpbWU6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGFzc05hbWU6ICcnLFxuICAgICAgICAgICAgaWQ6ICdqc29uLScgKyBEYXRlLm5vdygpLFxuICAgICAgICAgICAgb25DbGljazogbm9vcCxcbiAgICAgICAgICAgIGZpbHRlck9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBjYWNoZVJlc3VsdHM6IHRydWUsXG4gICAgICAgICAgICAgICAgaWdub3JlQ2FzZTogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2YWxpZGF0ZVF1ZXJ5OiBmdW5jdGlvbihxdWVyeSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBxdWVyeS5sZW5ndGggPj0gMjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY2lkZSB3aGV0aGVyIHRoZSBsZWFmIG5vZGUgYXQgZ2l2ZW4gYGtleXBhdGhgIHNob3VsZCBiZVxuICAgICAgICAgICAgICogZXhwYW5kZWQgaW5pdGlhbGx5LlxuICAgICAgICAgICAgICogQHBhcmFtICB7U3RyaW5nfSBrZXlwYXRoXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtBbnl9IHZhbHVlXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpc0V4cGFuZGVkOiBmdW5jdGlvbihrZXlwYXRoLCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2ZXJib3NlU2hvd09yaWdpbmFsOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH0sXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHF1ZXJ5OiB0aGlzLnByb3BzLnF1ZXJ5IHx8ICcnXG4gICAgICAgIH07XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcCA9IHRoaXMucHJvcHM7XG4gICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICB2YXIgaXNRdWVyeVZhbGlkID0gKFxuICAgICAgICAgICAgcy5xdWVyeSAhPT0gJycgJiZcbiAgICAgICAgICAgIHAudmFsaWRhdGVRdWVyeShzLnF1ZXJ5KVxuICAgICAgICApO1xuXG4gICAgICAgIHZhciBkYXRhID0gKFxuICAgICAgICAgICAgaXNRdWVyeVZhbGlkID9cbiAgICAgICAgICAgICAgICBzLmZpbHRlcmVyKHMucXVlcnkpIDpcbiAgICAgICAgICAgICAgICBwLmRhdGFcbiAgICAgICAgKTtcblxuICAgICAgICB2YXIgaXNOb3RGb3VuZCA9IChcbiAgICAgICAgICAgIGlzUXVlcnlWYWxpZCAmJlxuICAgICAgICAgICAgaXNFbXB0eShkYXRhKVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBoKCdkaXYnLCB7IGNsYXNzTmFtZTogJ2pzb24taW5zcGVjdG9yICcgKyBwLmNsYXNzTmFtZSB9LFxuICAgICAgICAgICAgdGhpcy5yZW5kZXJUb29sYmFyKCksXG4gICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgaXNOb3RGb3VuZCA/XG4gICAgICAgICAgICAgICAgICAgIGgoJ2RpdicsIHsgY2xhc3NOYW1lOiAnanNvbi1pbnNwZWN0b3JfX25vdC1mb3VuZCcgfSwgJ05vdGhpbmcgZm91bmQnKSA6XG4gICAgICAgICAgICAgICAgICAgIGgoTGVhZiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHAub25DbGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBwLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0T3JpZ2luYWw6IHRoaXMuZ2V0T3JpZ2luYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeTogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUXVlcnlWYWxpZCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSZWdFeHAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5xdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocC5maWx0ZXJPcHRpb25zLmlnbm9yZUNhc2UgPyAnaScgOiAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ3Jvb3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRXhwYW5kZWQ6IHAuaXNFeHBhbmRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVyYWN0aXZlTGFiZWw6IHAuaW50ZXJhY3RpdmVMYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmJvc2VTaG93T3JpZ2luYWw6IHAudmVyYm9zZVNob3dPcmlnaW5hbFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH0sXG4gICAgcmVuZGVyVG9vbGJhcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZWFyY2ggPSB0aGlzLnByb3BzLnNlYXJjaDtcblxuICAgICAgICBpZiAoc2VhcmNoKSB7XG4gICAgICAgICAgICByZXR1cm4gaCgnZGl2JywgeyBjbGFzc05hbWU6ICdqc29uLWluc3BlY3Rvcl9fdG9vbGJhcicgfSxcbiAgICAgICAgICAgICAgICBoKHNlYXJjaCwge1xuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZGVib3VuY2UodGhpcy5zZWFyY2gsIHRoaXMucHJvcHMuc2VhcmNoT3B0aW9ucy5kZWJvdW5jZVRpbWUpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLnByb3BzLmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB0aGlzLnN0YXRlLnF1ZXJ5XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHNlYXJjaDogZnVuY3Rpb24ocXVlcnkpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBxdWVyeTogcXVlcnlcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmNyZWF0ZUZpbHRlcmVyKHRoaXMucHJvcHMuZGF0YSwgdGhpcy5wcm9wcy5maWx0ZXJPcHRpb25zKTtcbiAgICB9LFxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uKHApIHtcbiAgICAgICAgdGhpcy5jcmVhdGVGaWx0ZXJlcihwLmRhdGEsIHAuZmlsdGVyT3B0aW9ucyk7XG5cbiAgICAgICAgdmFyIGlzUmVjZWl2aW5nTmV3UXVlcnkgPSAoXG4gICAgICAgICAgICB0eXBlb2YgcC5xdWVyeSA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHAucXVlcnkgIT09IHRoaXMuc3RhdGUucXVlcnlcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoaXNSZWNlaXZpbmdOZXdRdWVyeSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgcXVlcnk6IHAucXVlcnlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGU6IGZ1bmN0aW9uIChwLCBzKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBwLnF1ZXJ5ICE9PSB0aGlzLnByb3BzLnF1ZXJ5IHx8XG4gICAgICAgICAgICBzLnF1ZXJ5ICE9PSB0aGlzLnN0YXRlLnF1ZXJ5IHx8XG4gICAgICAgICAgICBwLmRhdGEgIT09IHRoaXMucHJvcHMuZGF0YSB8fFxuICAgICAgICAgICAgcC5vbkNsaWNrICE9PSB0aGlzLnByb3BzLm9uQ2xpY2tcbiAgICAgICAgKTtcbiAgICB9LFxuICAgIGNyZWF0ZUZpbHRlcmVyOiBmdW5jdGlvbihkYXRhLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZmlsdGVyZXI6IGZpbHRlcmVyKGRhdGEsIG9wdGlvbnMpXG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0T3JpZ2luYWw6IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICAgICAgcmV0dXJuIGxlbnModGhpcy5wcm9wcy5kYXRhLCBwYXRoKTtcbiAgICB9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/@rexxars/react-json-inspector/json-inspector.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/@rexxars/react-json-inspector/lib/filterer.js":
/*!********************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/filterer.js ***!
  \********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var keys = Object.keys;\n\nvar isPrimitive = __webpack_require__(/*! ./is-primitive */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/lib/is-primitive.js\");\nvar isEmpty = __webpack_require__(/*! ./is-empty */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/lib/is-empty.js\");\n\nmodule.exports = function(data, options) {\n    options || (options = { cacheResults: true });\n\n    var cache = {};\n\n    return function(query) {\n        if (!options.cacheResults) {\n           return find(data, query, options);\n        }\n\n        var subquery;\n\n        if (!cache[query]) {\n            for (var i = query.length - 1; i > 0; i -= 1) {\n                subquery = query.substr(0, i);\n\n                if (cache[subquery]) {\n                    cache[query] = find(cache[subquery], query, options);\n                    break;\n                }\n            }\n        }\n\n        if (!cache[query]) {\n            cache[query] = find(data, query, options);\n        }\n\n        return cache[query];\n    };\n};\n\nfunction find(data, query, options) {\n    return keys(data).reduce(function(acc, key) {\n        var value = data[key];\n        var matches;\n\n        if (isPrimitive(value)) {\n            if (contains(query, key, options) || contains(query, value, options)) {\n                acc[key] = value;\n            }\n        } else {\n            if (contains(query, key, options)) {\n                acc[key] = value;\n            } else {\n                matches = find(value, query, options);\n\n                if (!isEmpty(matches)) {\n                    Object.assign(acc, pair(key, matches));\n                }\n            }\n        }\n\n        return acc;\n    }, {});\n}\n\nfunction contains(query, string, options) {\n    if (string) {\n        var haystack = String(string);\n        var needle = query;\n\n        if (options.ignoreCase) {\n            haystack = haystack.toLowerCase();\n            needle = needle.toLowerCase();\n        }\n\n        return haystack.indexOf(needle) !== -1;\n    }\n}\n\nfunction pair(key, value) {\n    var p = {};\n    p[key] = value;\n    return p;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi9maWx0ZXJlci5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxrQkFBa0IsbUJBQU8sQ0FBQyxxR0FBZ0I7QUFDMUMsY0FBYyxtQkFBTyxDQUFDLDZGQUFZOztBQUVsQztBQUNBLDRCQUE0QixvQkFBb0I7O0FBRWhEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsMkNBQTJDLE9BQU87QUFDbEQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi9maWx0ZXJlci5qcz8zODE1Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBrZXlzID0gT2JqZWN0LmtleXM7XG5cbnZhciBpc1ByaW1pdGl2ZSA9IHJlcXVpcmUoJy4vaXMtcHJpbWl0aXZlJyk7XG52YXIgaXNFbXB0eSA9IHJlcXVpcmUoJy4vaXMtZW1wdHknKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkYXRhLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHsgY2FjaGVSZXN1bHRzOiB0cnVlIH0pO1xuXG4gICAgdmFyIGNhY2hlID0ge307XG5cbiAgICByZXR1cm4gZnVuY3Rpb24ocXVlcnkpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zLmNhY2hlUmVzdWx0cykge1xuICAgICAgICAgICByZXR1cm4gZmluZChkYXRhLCBxdWVyeSwgb3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc3VicXVlcnk7XG5cbiAgICAgICAgaWYgKCFjYWNoZVtxdWVyeV0pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBxdWVyeS5sZW5ndGggLSAxOyBpID4gMDsgaSAtPSAxKSB7XG4gICAgICAgICAgICAgICAgc3VicXVlcnkgPSBxdWVyeS5zdWJzdHIoMCwgaSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVbc3VicXVlcnldKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlW3F1ZXJ5XSA9IGZpbmQoY2FjaGVbc3VicXVlcnldLCBxdWVyeSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY2FjaGVbcXVlcnldKSB7XG4gICAgICAgICAgICBjYWNoZVtxdWVyeV0gPSBmaW5kKGRhdGEsIHF1ZXJ5LCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYWNoZVtxdWVyeV07XG4gICAgfTtcbn07XG5cbmZ1bmN0aW9uIGZpbmQoZGF0YSwgcXVlcnksIG9wdGlvbnMpIHtcbiAgICByZXR1cm4ga2V5cyhkYXRhKS5yZWR1Y2UoZnVuY3Rpb24oYWNjLCBrZXkpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gZGF0YVtrZXldO1xuICAgICAgICB2YXIgbWF0Y2hlcztcblxuICAgICAgICBpZiAoaXNQcmltaXRpdmUodmFsdWUpKSB7XG4gICAgICAgICAgICBpZiAoY29udGFpbnMocXVlcnksIGtleSwgb3B0aW9ucykgfHwgY29udGFpbnMocXVlcnksIHZhbHVlLCBvcHRpb25zKSkge1xuICAgICAgICAgICAgICAgIGFjY1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoY29udGFpbnMocXVlcnksIGtleSwgb3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICBhY2Nba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVzID0gZmluZCh2YWx1ZSwgcXVlcnksIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFpc0VtcHR5KG1hdGNoZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYWNjLCBwYWlyKGtleSwgbWF0Y2hlcykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xufVxuXG5mdW5jdGlvbiBjb250YWlucyhxdWVyeSwgc3RyaW5nLCBvcHRpb25zKSB7XG4gICAgaWYgKHN0cmluZykge1xuICAgICAgICB2YXIgaGF5c3RhY2sgPSBTdHJpbmcoc3RyaW5nKTtcbiAgICAgICAgdmFyIG5lZWRsZSA9IHF1ZXJ5O1xuXG4gICAgICAgIGlmIChvcHRpb25zLmlnbm9yZUNhc2UpIHtcbiAgICAgICAgICAgIGhheXN0YWNrID0gaGF5c3RhY2sudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIG5lZWRsZSA9IG5lZWRsZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGhheXN0YWNrLmluZGV4T2YobmVlZGxlKSAhPT0gLTE7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwYWlyKGtleSwgdmFsdWUpIHtcbiAgICB2YXIgcCA9IHt9O1xuICAgIHBba2V5XSA9IHZhbHVlO1xuICAgIHJldHVybiBwO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/@rexxars/react-json-inspector/lib/filterer.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/@rexxars/react-json-inspector/lib/highlighter.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/highlighter.js ***!
  \***********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var React = __webpack_require__(/*! react */ \"(app-client)/./node_modules/next/dist/compiled/react/index.js\");\nvar createReactClass = __webpack_require__(/*! create-react-class */ \"(app-client)/./node_modules/create-react-class/index.js\");\nvar h = React.createElement;\n\nmodule.exports = createReactClass({\n    getDefaultProps: function() {\n        return {\n            string: '',\n            highlight: ''\n        };\n    },\n    shouldComponentUpdate: function(p) {\n        return p.highlight !== this.props.highlight;\n    },\n    render: function() {\n        var p = this.props,\n            highlightStart = p.string.search(p.highlight);\n\n        if (!p.highlight || highlightStart === -1) {\n            return h('span', null, p.string);\n        }\n        var highlightLength = p.highlight.source.length,\n            highlightString = p.string.substr(highlightStart, highlightLength);\n        return h('span', null,\n            p.string.split(p.highlight).map(function(part, index) {\n                return h('span', { key: index },\n                    index > 0 ?\n                        h('span', { className: 'json-inspector__hl' }, highlightString) :\n                        null,\n                    part);\n            }));\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi9oaWdobGlnaHRlci5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBQSxZQUFZLG1CQUFPLENBQUMsNEVBQU87QUFDM0IsdUJBQXVCLG1CQUFPLENBQUMsbUZBQW9CO0FBQ25EOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxZQUFZO0FBQy9DO0FBQ0Esb0NBQW9DLGlDQUFpQztBQUNyRTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQHJleHhhcnMvcmVhY3QtanNvbi1pbnNwZWN0b3IvbGliL2hpZ2hsaWdodGVyLmpzP2Q0NWEiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG52YXIgaCA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQ7XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlUmVhY3RDbGFzcyh7XG4gICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0cmluZzogJycsXG4gICAgICAgICAgICBoaWdobGlnaHQ6ICcnXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGU6IGZ1bmN0aW9uKHApIHtcbiAgICAgICAgcmV0dXJuIHAuaGlnaGxpZ2h0ICE9PSB0aGlzLnByb3BzLmhpZ2hsaWdodDtcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBwID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIGhpZ2hsaWdodFN0YXJ0ID0gcC5zdHJpbmcuc2VhcmNoKHAuaGlnaGxpZ2h0KTtcblxuICAgICAgICBpZiAoIXAuaGlnaGxpZ2h0IHx8IGhpZ2hsaWdodFN0YXJ0ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGgoJ3NwYW4nLCBudWxsLCBwLnN0cmluZyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhpZ2hsaWdodExlbmd0aCA9IHAuaGlnaGxpZ2h0LnNvdXJjZS5sZW5ndGgsXG4gICAgICAgICAgICBoaWdobGlnaHRTdHJpbmcgPSBwLnN0cmluZy5zdWJzdHIoaGlnaGxpZ2h0U3RhcnQsIGhpZ2hsaWdodExlbmd0aCk7XG4gICAgICAgIHJldHVybiBoKCdzcGFuJywgbnVsbCxcbiAgICAgICAgICAgIHAuc3RyaW5nLnNwbGl0KHAuaGlnaGxpZ2h0KS5tYXAoZnVuY3Rpb24ocGFydCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaCgnc3BhbicsIHsga2V5OiBpbmRleCB9LFxuICAgICAgICAgICAgICAgICAgICBpbmRleCA+IDAgP1xuICAgICAgICAgICAgICAgICAgICAgICAgaCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnanNvbi1pbnNwZWN0b3JfX2hsJyB9LCBoaWdobGlnaHRTdHJpbmcpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHBhcnQpO1xuICAgICAgICAgICAgfSkpO1xuICAgIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/@rexxars/react-json-inspector/lib/highlighter.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/@rexxars/react-json-inspector/lib/is-empty.js":
/*!********************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/is-empty.js ***!
  \********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("module.exports = function(object) {\n    return Object.keys(object).length === 0;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi9pcy1lbXB0eS5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi9pcy1lbXB0eS5qcz9mYzBjIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iamVjdCkubGVuZ3RoID09PSAwO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/@rexxars/react-json-inspector/lib/is-empty.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/@rexxars/react-json-inspector/lib/is-primitive.js":
/*!************************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/is-primitive.js ***!
  \************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var type = __webpack_require__(/*! ./type */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/lib/type.js\");\n\nfunction isPrimitive(value) {\n    var t = type(value);\n    return t !== 'Object' && t !== 'Array';\n}\n\nmodule.exports = isPrimitive;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi9pcy1wcmltaXRpdmUuanMuanMiLCJtYXBwaW5ncyI6IkFBQUEsV0FBVyxtQkFBTyxDQUFDLHFGQUFROztBQUUzQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQHJleHhhcnMvcmVhY3QtanNvbi1pbnNwZWN0b3IvbGliL2lzLXByaW1pdGl2ZS5qcz9iYTIxIl0sInNvdXJjZXNDb250ZW50IjpbInZhciB0eXBlID0gcmVxdWlyZSgnLi90eXBlJyk7XG5cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKHZhbHVlKSB7XG4gICAgdmFyIHQgPSB0eXBlKHZhbHVlKTtcbiAgICByZXR1cm4gdCAhPT0gJ09iamVjdCcgJiYgdCAhPT0gJ0FycmF5Jztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1ByaW1pdGl2ZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/@rexxars/react-json-inspector/lib/is-primitive.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/@rexxars/react-json-inspector/lib/leaf.js":
/*!****************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/leaf.js ***!
  \****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var React = __webpack_require__(/*! react */ \"(app-client)/./node_modules/next/dist/compiled/react/index.js\");\nvar createReactClass = __webpack_require__(/*! create-react-class */ \"(app-client)/./node_modules/create-react-class/index.js\");\n\nvar md5omatic = __webpack_require__(/*! md5-o-matic */ \"(app-client)/./node_modules/md5-o-matic/lib/md5omatic.js\");\n\nvar uid = __webpack_require__(/*! ./uid */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/lib/uid.js\");\nvar type = __webpack_require__(/*! ./type */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/lib/type.js\");\nvar isPrimitive = __webpack_require__(/*! ./is-primitive */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/lib/is-primitive.js\");\n\nvar Highlighter = __webpack_require__(/*! ./highlighter */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/lib/highlighter.js\");\n\nvar h = React.createElement;\nvar PATH_PREFIX = '.root.';\n\nvar Leaf = createReactClass({\n    getInitialState: function() {\n        return {\n            expanded: this._isInitiallyExpanded(this.props)\n        };\n    },\n    getDefaultProps: function() {\n        return {\n            root: false,\n            prefix: ''\n        };\n    },\n    render: function() {\n        var id = 'id_' + uid();\n        var p = this.props;\n\n        var d = {\n            path: this.keypath(),\n            key: p.label.toString(),\n            value: p.data\n        };\n\n        var onLabelClick = this._onClick.bind(this, d);\n\n        return h('div', { className: this.getClassName(), id: 'leaf-' + this._rootPath() },\n            h('input', { className: 'json-inspector__radio', type: 'radio', name: p.id, id: id, tabIndex: -1 }),\n            h('label', { className: 'json-inspector__line', htmlFor: id, onClick: onLabelClick },\n                h('div', { className: 'json-inspector__flatpath' },\n                    d.path),\n                h('span', { className: 'json-inspector__key' },\n                    this.format(d.key),\n                    ':',\n                    this.renderInteractiveLabel(d.key, true)),\n                this.renderTitle(),\n                this.renderShowOriginalButton()),\n            this.renderChildren());\n    },\n    renderTitle: function() {\n        var data = this.data();\n        var t = type(data);\n\n        switch (t) {\n            case 'Array':\n                var length = data.length\n                return h('span', { className: 'json-inspector__value json-inspector__value_helper' },\n                    (length > 0 ? '[…] ' : '[] ') + items(length));\n            case 'Object':\n                var keys = Object.keys(data).length\n                return h('span', { className: 'json-inspector__value json-inspector__value_helper' },\n                    (keys > 0 ? '{…} ' : '{} ') + properties(keys));\n            default:\n                return h('span', { className: 'json-inspector__value json-inspector__value_' + t.toLowerCase() },\n                    this.format(String(data)),\n                    this.renderInteractiveLabel(data, false));\n        }\n    },\n    renderChildren: function() {\n        var p = this.props;\n        var childPrefix = this._rootPath();\n        var data = this.data();\n\n        if (this.state.expanded && !isPrimitive(data)) {\n            return Object.keys(data).map(function(key) {\n                var value = data[key];\n\n                var shouldGetOriginal = !this.state.original || (p.verboseShowOriginal ? p.query : false);\n\n                return h(Leaf, {\n                    data: value,\n                    label: key,\n                    prefix: childPrefix,\n                    onClick: p.onClick,\n                    id: p.id,\n                    query: p.query,\n                    getOriginal: shouldGetOriginal ? p.getOriginal : null,\n                    key: getLeafKey(key, value),\n                    isExpanded: p.isExpanded,\n                    interactiveLabel: p.interactiveLabel,\n                    verboseShowOriginal: p.verboseShowOriginal\n                });\n            }, this);\n        }\n\n        return null;\n    },\n    renderShowOriginalButton: function() {\n        var p = this.props;\n\n        if (isPrimitive(p.data) || this.state.original || !p.getOriginal || !p.query || contains(this.keypath(), p.query)) {\n            return null;\n        }\n\n        return h('span', {\n            className: 'json-inspector__show-original',\n            onClick: this._onShowOriginalClick\n        });\n    },\n    renderInteractiveLabel: function(originalValue, isKey) {\n        if (typeof this.props.interactiveLabel === 'function') {\n            return h(this.props.interactiveLabel, {\n                // The distinction between `value` and `originalValue` is\n                // provided to have backwards compatibility.\n                value: String(originalValue),\n                originalValue: originalValue,\n                isKey: isKey,\n                keypath: this.keypath()\n            });\n        }\n\n        return null;\n    },\n    componentWillReceiveProps: function(p) {\n        if (p.query) {\n            this.setState({\n                expanded: !contains(p.label, p.query)\n            });\n        }\n\n        // Restore original expansion state when switching from search mode\n        // to full browse mode.\n        if (this.props.query && !p.query) {\n            this.setState({\n                expanded: this._isInitiallyExpanded(p)\n            });\n        }\n    },\n    _rootPath: function() {\n        return this.props.prefix + '.' + this.props.label;\n    },\n    keypath: function() {\n        return this._rootPath().substr(PATH_PREFIX.length);\n    },\n    data: function() {\n        return this.state.original || this.props.data;\n    },\n    format: function(string) {\n        return h(Highlighter, {\n            string: string,\n            highlight: this.props.query\n        });\n    },\n    getClassName: function() {\n        var cn = 'json-inspector__leaf';\n\n        if (this.props.root) {\n            cn += ' json-inspector__leaf_root';\n        }\n\n        if (this.state.expanded) {\n            cn += ' json-inspector__leaf_expanded';\n        }\n\n        if (!isPrimitive(this.props.data)) {\n            cn += ' json-inspector__leaf_composite';\n        }\n\n        return cn;\n    },\n    toggle: function() {\n        this.setState({\n            expanded: !this.state.expanded\n        });\n    },\n    _onClick: function(data, e) {\n        this.toggle();\n        this.props.onClick(data);\n\n        e.stopPropagation();\n    },\n    _onShowOriginalClick: function(e) {\n        this.setState({\n            original: this.props.getOriginal(this.keypath())\n        });\n\n        e.stopPropagation();\n    },\n    _isInitiallyExpanded: function(p) {\n        var keypath = this.keypath();\n\n        if (p.root) {\n            return true;\n        }\n\n        if (!p.query) {\n            return p.isExpanded(keypath, p.data);\n        } else {\n            // When a search query is specified, first check if the keypath\n            // contains the search query: if it does, then the current leaf\n            // is itself a search result and there is no need to expand further.\n            //\n            // Having a `getOriginal` function passed signalizes that current\n            // leaf only displays a subset of data, thus should be rendered\n            // expanded to reveal the children that is being searched for.\n            return !contains(keypath, p.query) && (typeof p.getOriginal === 'function');\n        }\n    }\n});\n\nfunction items(count) {\n    return count + (count === 1 ? ' item' : ' items');\n}\n\nfunction properties(count) {\n    return count + (count === 1 ? ' property' : ' properties');\n}\n\nfunction getLeafKey(key, value) {\n    if (isPrimitive(value)) {\n        // TODO: Sanitize `value` better.\n        var hash = md5omatic(String(value));\n        return key + ':' + hash;\n    } else {\n        return key + '[' + type(value) + ']';\n    }\n}\n\nfunction contains(string, substring) {\n    return string.indexOf(substring) !== -1;\n}\n\nmodule.exports = Leaf;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi9sZWFmLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBLFlBQVksbUJBQU8sQ0FBQyw0RUFBTztBQUMzQix1QkFBdUIsbUJBQU8sQ0FBQyxtRkFBb0I7O0FBRW5ELGdCQUFnQixtQkFBTyxDQUFDLDZFQUFhOztBQUVyQyxVQUFVLG1CQUFPLENBQUMsbUZBQU87QUFDekIsV0FBVyxtQkFBTyxDQUFDLHFGQUFRO0FBQzNCLGtCQUFrQixtQkFBTyxDQUFDLHFHQUFnQjs7QUFFMUMsa0JBQWtCLG1CQUFPLENBQUMsbUdBQWU7O0FBRXpDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLDBCQUEwQixnRUFBZ0U7QUFDMUYseUJBQXlCLHFGQUFxRjtBQUM5Ryx5QkFBeUIsdUVBQXVFO0FBQ2hHLDJCQUEyQix1Q0FBdUM7QUFDbEU7QUFDQSw0QkFBNEIsa0NBQWtDO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGlFQUFpRTtBQUNwRztBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsaUVBQWlFO0FBQ3BHLGtDQUFrQyxHQUFHLFFBQVE7QUFDN0M7QUFDQSxtQ0FBbUMsNkVBQTZFO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi9sZWFmLmpzPzlmNGUiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG5cbnZhciBtZDVvbWF0aWMgPSByZXF1aXJlKCdtZDUtby1tYXRpYycpO1xuXG52YXIgdWlkID0gcmVxdWlyZSgnLi91aWQnKTtcbnZhciB0eXBlID0gcmVxdWlyZSgnLi90eXBlJyk7XG52YXIgaXNQcmltaXRpdmUgPSByZXF1aXJlKCcuL2lzLXByaW1pdGl2ZScpO1xuXG52YXIgSGlnaGxpZ2h0ZXIgPSByZXF1aXJlKCcuL2hpZ2hsaWdodGVyJyk7XG5cbnZhciBoID0gUmVhY3QuY3JlYXRlRWxlbWVudDtcbnZhciBQQVRIX1BSRUZJWCA9ICcucm9vdC4nO1xuXG52YXIgTGVhZiA9IGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBleHBhbmRlZDogdGhpcy5faXNJbml0aWFsbHlFeHBhbmRlZCh0aGlzLnByb3BzKVxuICAgICAgICB9O1xuICAgIH0sXG4gICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvb3Q6IGZhbHNlLFxuICAgICAgICAgICAgcHJlZml4OiAnJ1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGlkID0gJ2lkXycgKyB1aWQoKTtcbiAgICAgICAgdmFyIHAgPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIHZhciBkID0ge1xuICAgICAgICAgICAgcGF0aDogdGhpcy5rZXlwYXRoKCksXG4gICAgICAgICAgICBrZXk6IHAubGFiZWwudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHZhbHVlOiBwLmRhdGFcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgb25MYWJlbENsaWNrID0gdGhpcy5fb25DbGljay5iaW5kKHRoaXMsIGQpO1xuXG4gICAgICAgIHJldHVybiBoKCdkaXYnLCB7IGNsYXNzTmFtZTogdGhpcy5nZXRDbGFzc05hbWUoKSwgaWQ6ICdsZWFmLScgKyB0aGlzLl9yb290UGF0aCgpIH0sXG4gICAgICAgICAgICBoKCdpbnB1dCcsIHsgY2xhc3NOYW1lOiAnanNvbi1pbnNwZWN0b3JfX3JhZGlvJywgdHlwZTogJ3JhZGlvJywgbmFtZTogcC5pZCwgaWQ6IGlkLCB0YWJJbmRleDogLTEgfSksXG4gICAgICAgICAgICBoKCdsYWJlbCcsIHsgY2xhc3NOYW1lOiAnanNvbi1pbnNwZWN0b3JfX2xpbmUnLCBodG1sRm9yOiBpZCwgb25DbGljazogb25MYWJlbENsaWNrIH0sXG4gICAgICAgICAgICAgICAgaCgnZGl2JywgeyBjbGFzc05hbWU6ICdqc29uLWluc3BlY3Rvcl9fZmxhdHBhdGgnIH0sXG4gICAgICAgICAgICAgICAgICAgIGQucGF0aCksXG4gICAgICAgICAgICAgICAgaCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnanNvbi1pbnNwZWN0b3JfX2tleScgfSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtYXQoZC5rZXkpLFxuICAgICAgICAgICAgICAgICAgICAnOicsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVySW50ZXJhY3RpdmVMYWJlbChkLmtleSwgdHJ1ZSkpLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVGl0bGUoKSxcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNob3dPcmlnaW5hbEJ1dHRvbigpKSxcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ2hpbGRyZW4oKSk7XG4gICAgfSxcbiAgICByZW5kZXJUaXRsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBkYXRhID0gdGhpcy5kYXRhKCk7XG4gICAgICAgIHZhciB0ID0gdHlwZShkYXRhKTtcblxuICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgIGNhc2UgJ0FycmF5JzpcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gZGF0YS5sZW5ndGhcbiAgICAgICAgICAgICAgICByZXR1cm4gaCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnanNvbi1pbnNwZWN0b3JfX3ZhbHVlIGpzb24taW5zcGVjdG9yX192YWx1ZV9oZWxwZXInIH0sXG4gICAgICAgICAgICAgICAgICAgIChsZW5ndGggPiAwID8gJ1vigKZdICcgOiAnW10gJykgKyBpdGVtcyhsZW5ndGgpKTtcbiAgICAgICAgICAgIGNhc2UgJ09iamVjdCc6XG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGhcbiAgICAgICAgICAgICAgICByZXR1cm4gaCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnanNvbi1pbnNwZWN0b3JfX3ZhbHVlIGpzb24taW5zcGVjdG9yX192YWx1ZV9oZWxwZXInIH0sXG4gICAgICAgICAgICAgICAgICAgIChrZXlzID4gMCA/ICd74oCmfSAnIDogJ3t9ICcpICsgcHJvcGVydGllcyhrZXlzKSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBoKCdzcGFuJywgeyBjbGFzc05hbWU6ICdqc29uLWluc3BlY3Rvcl9fdmFsdWUganNvbi1pbnNwZWN0b3JfX3ZhbHVlXycgKyB0LnRvTG93ZXJDYXNlKCkgfSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtYXQoU3RyaW5nKGRhdGEpKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJJbnRlcmFjdGl2ZUxhYmVsKGRhdGEsIGZhbHNlKSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJlbmRlckNoaWxkcmVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHAgPSB0aGlzLnByb3BzO1xuICAgICAgICB2YXIgY2hpbGRQcmVmaXggPSB0aGlzLl9yb290UGF0aCgpO1xuICAgICAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YSgpO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmV4cGFuZGVkICYmICFpc1ByaW1pdGl2ZShkYXRhKSkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGRhdGEpLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBkYXRhW2tleV07XG5cbiAgICAgICAgICAgICAgICB2YXIgc2hvdWxkR2V0T3JpZ2luYWwgPSAhdGhpcy5zdGF0ZS5vcmlnaW5hbCB8fCAocC52ZXJib3NlU2hvd09yaWdpbmFsID8gcC5xdWVyeSA6IGZhbHNlKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBoKExlYWYsIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBrZXksXG4gICAgICAgICAgICAgICAgICAgIHByZWZpeDogY2hpbGRQcmVmaXgsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHAub25DbGljayxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHAuaWQsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBwLnF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICBnZXRPcmlnaW5hbDogc2hvdWxkR2V0T3JpZ2luYWwgPyBwLmdldE9yaWdpbmFsIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAga2V5OiBnZXRMZWFmS2V5KGtleSwgdmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICBpc0V4cGFuZGVkOiBwLmlzRXhwYW5kZWQsXG4gICAgICAgICAgICAgICAgICAgIGludGVyYWN0aXZlTGFiZWw6IHAuaW50ZXJhY3RpdmVMYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgdmVyYm9zZVNob3dPcmlnaW5hbDogcC52ZXJib3NlU2hvd09yaWdpbmFsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgcmVuZGVyU2hvd09yaWdpbmFsQnV0dG9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHAgPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIGlmIChpc1ByaW1pdGl2ZShwLmRhdGEpIHx8IHRoaXMuc3RhdGUub3JpZ2luYWwgfHwgIXAuZ2V0T3JpZ2luYWwgfHwgIXAucXVlcnkgfHwgY29udGFpbnModGhpcy5rZXlwYXRoKCksIHAucXVlcnkpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBoKCdzcGFuJywge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiAnanNvbi1pbnNwZWN0b3JfX3Nob3ctb3JpZ2luYWwnLFxuICAgICAgICAgICAgb25DbGljazogdGhpcy5fb25TaG93T3JpZ2luYWxDbGlja1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHJlbmRlckludGVyYWN0aXZlTGFiZWw6IGZ1bmN0aW9uKG9yaWdpbmFsVmFsdWUsIGlzS2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5pbnRlcmFjdGl2ZUxhYmVsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gaCh0aGlzLnByb3BzLmludGVyYWN0aXZlTGFiZWwsIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgZGlzdGluY3Rpb24gYmV0d2VlbiBgdmFsdWVgIGFuZCBgb3JpZ2luYWxWYWx1ZWAgaXNcbiAgICAgICAgICAgICAgICAvLyBwcm92aWRlZCB0byBoYXZlIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICAgICAgICAgICAgICAgIHZhbHVlOiBTdHJpbmcob3JpZ2luYWxWYWx1ZSksXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxWYWx1ZTogb3JpZ2luYWxWYWx1ZSxcbiAgICAgICAgICAgICAgICBpc0tleTogaXNLZXksXG4gICAgICAgICAgICAgICAga2V5cGF0aDogdGhpcy5rZXlwYXRoKClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbihwKSB7XG4gICAgICAgIGlmIChwLnF1ZXJ5KSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBleHBhbmRlZDogIWNvbnRhaW5zKHAubGFiZWwsIHAucXVlcnkpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlc3RvcmUgb3JpZ2luYWwgZXhwYW5zaW9uIHN0YXRlIHdoZW4gc3dpdGNoaW5nIGZyb20gc2VhcmNoIG1vZGVcbiAgICAgICAgLy8gdG8gZnVsbCBicm93c2UgbW9kZS5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMucXVlcnkgJiYgIXAucXVlcnkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGV4cGFuZGVkOiB0aGlzLl9pc0luaXRpYWxseUV4cGFuZGVkKHApXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgX3Jvb3RQYXRoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMucHJlZml4ICsgJy4nICsgdGhpcy5wcm9wcy5sYWJlbDtcbiAgICB9LFxuICAgIGtleXBhdGg6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcm9vdFBhdGgoKS5zdWJzdHIoUEFUSF9QUkVGSVgubGVuZ3RoKTtcbiAgICB9LFxuICAgIGRhdGE6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5vcmlnaW5hbCB8fCB0aGlzLnByb3BzLmRhdGE7XG4gICAgfSxcbiAgICBmb3JtYXQ6IGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgICByZXR1cm4gaChIaWdobGlnaHRlciwge1xuICAgICAgICAgICAgc3RyaW5nOiBzdHJpbmcsXG4gICAgICAgICAgICBoaWdobGlnaHQ6IHRoaXMucHJvcHMucXVlcnlcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRDbGFzc05hbWU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY24gPSAnanNvbi1pbnNwZWN0b3JfX2xlYWYnO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnJvb3QpIHtcbiAgICAgICAgICAgIGNuICs9ICcganNvbi1pbnNwZWN0b3JfX2xlYWZfcm9vdCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5leHBhbmRlZCkge1xuICAgICAgICAgICAgY24gKz0gJyBqc29uLWluc3BlY3Rvcl9fbGVhZl9leHBhbmRlZCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzUHJpbWl0aXZlKHRoaXMucHJvcHMuZGF0YSkpIHtcbiAgICAgICAgICAgIGNuICs9ICcganNvbi1pbnNwZWN0b3JfX2xlYWZfY29tcG9zaXRlJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjbjtcbiAgICB9LFxuICAgIHRvZ2dsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZXhwYW5kZWQ6ICF0aGlzLnN0YXRlLmV4cGFuZGVkXG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgX29uQ2xpY2s6IGZ1bmN0aW9uKGRhdGEsIGUpIHtcbiAgICAgICAgdGhpcy50b2dnbGUoKTtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNsaWNrKGRhdGEpO1xuXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSxcbiAgICBfb25TaG93T3JpZ2luYWxDbGljazogZnVuY3Rpb24oZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIG9yaWdpbmFsOiB0aGlzLnByb3BzLmdldE9yaWdpbmFsKHRoaXMua2V5cGF0aCgpKVxuICAgICAgICB9KTtcblxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0sXG4gICAgX2lzSW5pdGlhbGx5RXhwYW5kZWQ6IGZ1bmN0aW9uKHApIHtcbiAgICAgICAgdmFyIGtleXBhdGggPSB0aGlzLmtleXBhdGgoKTtcblxuICAgICAgICBpZiAocC5yb290KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcC5xdWVyeSkge1xuICAgICAgICAgICAgcmV0dXJuIHAuaXNFeHBhbmRlZChrZXlwYXRoLCBwLmRhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gV2hlbiBhIHNlYXJjaCBxdWVyeSBpcyBzcGVjaWZpZWQsIGZpcnN0IGNoZWNrIGlmIHRoZSBrZXlwYXRoXG4gICAgICAgICAgICAvLyBjb250YWlucyB0aGUgc2VhcmNoIHF1ZXJ5OiBpZiBpdCBkb2VzLCB0aGVuIHRoZSBjdXJyZW50IGxlYWZcbiAgICAgICAgICAgIC8vIGlzIGl0c2VsZiBhIHNlYXJjaCByZXN1bHQgYW5kIHRoZXJlIGlzIG5vIG5lZWQgdG8gZXhwYW5kIGZ1cnRoZXIuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gSGF2aW5nIGEgYGdldE9yaWdpbmFsYCBmdW5jdGlvbiBwYXNzZWQgc2lnbmFsaXplcyB0aGF0IGN1cnJlbnRcbiAgICAgICAgICAgIC8vIGxlYWYgb25seSBkaXNwbGF5cyBhIHN1YnNldCBvZiBkYXRhLCB0aHVzIHNob3VsZCBiZSByZW5kZXJlZFxuICAgICAgICAgICAgLy8gZXhwYW5kZWQgdG8gcmV2ZWFsIHRoZSBjaGlsZHJlbiB0aGF0IGlzIGJlaW5nIHNlYXJjaGVkIGZvci5cbiAgICAgICAgICAgIHJldHVybiAhY29udGFpbnMoa2V5cGF0aCwgcC5xdWVyeSkgJiYgKHR5cGVvZiBwLmdldE9yaWdpbmFsID09PSAnZnVuY3Rpb24nKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiBpdGVtcyhjb3VudCkge1xuICAgIHJldHVybiBjb3VudCArIChjb3VudCA9PT0gMSA/ICcgaXRlbScgOiAnIGl0ZW1zJyk7XG59XG5cbmZ1bmN0aW9uIHByb3BlcnRpZXMoY291bnQpIHtcbiAgICByZXR1cm4gY291bnQgKyAoY291bnQgPT09IDEgPyAnIHByb3BlcnR5JyA6ICcgcHJvcGVydGllcycpO1xufVxuXG5mdW5jdGlvbiBnZXRMZWFmS2V5KGtleSwgdmFsdWUpIHtcbiAgICBpZiAoaXNQcmltaXRpdmUodmFsdWUpKSB7XG4gICAgICAgIC8vIFRPRE86IFNhbml0aXplIGB2YWx1ZWAgYmV0dGVyLlxuICAgICAgICB2YXIgaGFzaCA9IG1kNW9tYXRpYyhTdHJpbmcodmFsdWUpKTtcbiAgICAgICAgcmV0dXJuIGtleSArICc6JyArIGhhc2g7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGtleSArICdbJyArIHR5cGUodmFsdWUpICsgJ10nO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY29udGFpbnMoc3RyaW5nLCBzdWJzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLmluZGV4T2Yoc3Vic3RyaW5nKSAhPT0gLTE7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTGVhZjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/@rexxars/react-json-inspector/lib/leaf.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/@rexxars/react-json-inspector/lib/lens.js":
/*!****************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/lens.js ***!
  \****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var type = __webpack_require__(/*! ./type */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/lib/type.js\");\n\nvar PATH_DELIMITER = '.';\n\nfunction lens(data, path) {\n    var p = path.split(PATH_DELIMITER);\n    var segment = p.shift();\n\n    if (!segment) {\n        return data;\n    }\n\n    var t = type(data);\n\n    if (t === 'Array' && data[integer(segment)]) {\n        return lens(data[integer(segment)], p.join(PATH_DELIMITER));\n    } else if (t === 'Object' && data[segment]) {\n        return lens(data[segment], p.join(PATH_DELIMITER));\n    }\n}\n\nfunction integer(string) {\n    return parseInt(string, 10);\n}\n\nmodule.exports = lens;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi9sZW5zLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBLFdBQVcsbUJBQU8sQ0FBQyxxRkFBUTs7QUFFM0I7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi9sZW5zLmpzP2I0NTQiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHR5cGUgPSByZXF1aXJlKCcuL3R5cGUnKTtcblxudmFyIFBBVEhfREVMSU1JVEVSID0gJy4nO1xuXG5mdW5jdGlvbiBsZW5zKGRhdGEsIHBhdGgpIHtcbiAgICB2YXIgcCA9IHBhdGguc3BsaXQoUEFUSF9ERUxJTUlURVIpO1xuICAgIHZhciBzZWdtZW50ID0gcC5zaGlmdCgpO1xuXG4gICAgaWYgKCFzZWdtZW50KSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIHZhciB0ID0gdHlwZShkYXRhKTtcblxuICAgIGlmICh0ID09PSAnQXJyYXknICYmIGRhdGFbaW50ZWdlcihzZWdtZW50KV0pIHtcbiAgICAgICAgcmV0dXJuIGxlbnMoZGF0YVtpbnRlZ2VyKHNlZ21lbnQpXSwgcC5qb2luKFBBVEhfREVMSU1JVEVSKSk7XG4gICAgfSBlbHNlIGlmICh0ID09PSAnT2JqZWN0JyAmJiBkYXRhW3NlZ21lbnRdKSB7XG4gICAgICAgIHJldHVybiBsZW5zKGRhdGFbc2VnbWVudF0sIHAuam9pbihQQVRIX0RFTElNSVRFUikpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaW50ZWdlcihzdHJpbmcpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQoc3RyaW5nLCAxMCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbGVucztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/@rexxars/react-json-inspector/lib/lens.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/@rexxars/react-json-inspector/lib/noop.js":
/*!****************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/noop.js ***!
  \****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("module.exports = function() {};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi9ub29wLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvbm9vcC5qcz85OGI3Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/@rexxars/react-json-inspector/lib/noop.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/@rexxars/react-json-inspector/lib/search-bar.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/search-bar.js ***!
  \**********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var React = __webpack_require__(/*! react */ \"(app-client)/./node_modules/next/dist/compiled/react/index.js\");\nvar createReactClass = __webpack_require__(/*! create-react-class */ \"(app-client)/./node_modules/create-react-class/index.js\");\n\nvar h = React.createElement;\nvar noop = __webpack_require__(/*! ./noop */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/lib/noop.js\");\n\nmodule.exports = createReactClass({\n    getDefaultProps: function() {\n        return {\n            onChange: noop\n        };\n    },\n    render: function() {\n        return h('input', {\n            className: 'json-inspector__search',\n            type: 'search',\n            placeholder: 'Search',\n            onChange: this.onChange\n        });\n    },\n    onChange: function(e) {\n        this.props.onChange(e.target.value);\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi9zZWFyY2gtYmFyLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBLFlBQVksbUJBQU8sQ0FBQyw0RUFBTztBQUMzQix1QkFBdUIsbUJBQU8sQ0FBQyxtRkFBb0I7O0FBRW5EO0FBQ0EsV0FBVyxtQkFBTyxDQUFDLHFGQUFROztBQUUzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQHJleHhhcnMvcmVhY3QtanNvbi1pbnNwZWN0b3IvbGliL3NlYXJjaC1iYXIuanM/YjdjNiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIGNyZWF0ZVJlYWN0Q2xhc3MgPSByZXF1aXJlKCdjcmVhdGUtcmVhY3QtY2xhc3MnKTtcblxudmFyIGggPSBSZWFjdC5jcmVhdGVFbGVtZW50O1xudmFyIG5vb3AgPSByZXF1aXJlKCcuL25vb3AnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVSZWFjdENsYXNzKHtcbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25DaGFuZ2U6IG5vb3BcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBoKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ2pzb24taW5zcGVjdG9yX19zZWFyY2gnLFxuICAgICAgICAgICAgdHlwZTogJ3NlYXJjaCcsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1NlYXJjaCcsXG4gICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5vbkNoYW5nZVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIG9uQ2hhbmdlOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UoZS50YXJnZXQudmFsdWUpO1xuICAgIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/@rexxars/react-json-inspector/lib/search-bar.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/@rexxars/react-json-inspector/lib/type.js":
/*!****************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/type.js ***!
  \****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("module.exports = function(value) {\n    return Object.prototype.toString.call(value).slice(8, -1);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi90eXBlLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQHJleHhhcnMvcmVhY3QtanNvbi1pbnNwZWN0b3IvbGliL3R5cGUuanM/ZmIzMCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkuc2xpY2UoOCwgLTEpO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/@rexxars/react-json-inspector/lib/type.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/@rexxars/react-json-inspector/lib/uid.js":
/*!***************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/uid.js ***!
  \***************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var id = Math.ceil(Math.random() * 10);\n\nmodule.exports = function() {\n    return ++id;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi91aWQuanMuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvdWlkLmpzPzhlMWEiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGlkID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICsraWQ7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/@rexxars/react-json-inspector/lib/uid.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/create-react-class/factory.js":
/*!****************************************************!*\
  !*** ./node_modules/create-react-class/factory.js ***!
  \****************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n\n\nvar _assign = __webpack_require__(/*! object-assign */ \"(app-client)/./node_modules/next/dist/build/polyfills/object-assign.js\");\n\n// -- Inlined from fbjs --\n\nvar emptyObject = {};\n\nif (true) {\n  Object.freeze(emptyObject);\n}\n\nvar validateFormat = function validateFormat(format) {};\n\nif (true) {\n  validateFormat = function validateFormat(format) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  };\n}\n\nfunction _invariant(condition, format, a, b, c, d, e, f) {\n  validateFormat(format);\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n}\n\nvar warning = function(){};\n\nif (true) {\n  var printWarning = function printWarning(format) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var argIndex = 0;\n    var message = 'Warning: ' + format.replace(/%s/g, function () {\n      return args[argIndex++];\n    });\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n\n  warning = function warning(condition, format) {\n    if (format === undefined) {\n      throw new Error('`warning(condition, format, ...args)` requires a warning ' + 'message argument');\n    }\n\n    if (format.indexOf('Failed Composite propType: ') === 0) {\n      return; // Ignore CompositeComponent proptype check.\n    }\n\n    if (!condition) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n        args[_key2 - 2] = arguments[_key2];\n      }\n\n      printWarning.apply(undefined, [format].concat(args));\n    }\n  };\n}\n\n// /-- Inlined from fbjs --\n\nvar MIXINS_KEY = 'mixins';\n\n// Helper function to allow the creation of anonymous functions which do not\n// have .name set to the name of the variable being assigned to.\nfunction identity(fn) {\n  return fn;\n}\n\nvar ReactPropTypeLocationNames;\nif (true) {\n  ReactPropTypeLocationNames = {\n    prop: 'prop',\n    context: 'context',\n    childContext: 'child context'\n  };\n} else {}\n\nfunction factory(ReactComponent, isValidElement, ReactNoopUpdateQueue) {\n  /**\n   * Policies that describe methods in `ReactClassInterface`.\n   */\n\n  var injectedMixins = [];\n\n  /**\n   * Composite components are higher-level components that compose other composite\n   * or host components.\n   *\n   * To create a new type of `ReactClass`, pass a specification of\n   * your new class to `React.createClass`. The only requirement of your class\n   * specification is that you implement a `render` method.\n   *\n   *   var MyComponent = React.createClass({\n   *     render: function() {\n   *       return <div>Hello World</div>;\n   *     }\n   *   });\n   *\n   * The class specification supports a specific protocol of methods that have\n   * special meaning (e.g. `render`). See `ReactClassInterface` for\n   * more the comprehensive protocol. Any other properties and methods in the\n   * class specification will be available on the prototype.\n   *\n   * @interface ReactClassInterface\n   * @internal\n   */\n  var ReactClassInterface = {\n    /**\n     * An array of Mixin objects to include when defining your component.\n     *\n     * @type {array}\n     * @optional\n     */\n    mixins: 'DEFINE_MANY',\n\n    /**\n     * An object containing properties and methods that should be defined on\n     * the component's constructor instead of its prototype (static methods).\n     *\n     * @type {object}\n     * @optional\n     */\n    statics: 'DEFINE_MANY',\n\n    /**\n     * Definition of prop types for this component.\n     *\n     * @type {object}\n     * @optional\n     */\n    propTypes: 'DEFINE_MANY',\n\n    /**\n     * Definition of context types for this component.\n     *\n     * @type {object}\n     * @optional\n     */\n    contextTypes: 'DEFINE_MANY',\n\n    /**\n     * Definition of context types this component sets for its children.\n     *\n     * @type {object}\n     * @optional\n     */\n    childContextTypes: 'DEFINE_MANY',\n\n    // ==== Definition methods ====\n\n    /**\n     * Invoked when the component is mounted. Values in the mapping will be set on\n     * `this.props` if that prop is not specified (i.e. using an `in` check).\n     *\n     * This method is invoked before `getInitialState` and therefore cannot rely\n     * on `this.state` or use `this.setState`.\n     *\n     * @return {object}\n     * @optional\n     */\n    getDefaultProps: 'DEFINE_MANY_MERGED',\n\n    /**\n     * Invoked once before the component is mounted. The return value will be used\n     * as the initial value of `this.state`.\n     *\n     *   getInitialState: function() {\n     *     return {\n     *       isOn: false,\n     *       fooBaz: new BazFoo()\n     *     }\n     *   }\n     *\n     * @return {object}\n     * @optional\n     */\n    getInitialState: 'DEFINE_MANY_MERGED',\n\n    /**\n     * @return {object}\n     * @optional\n     */\n    getChildContext: 'DEFINE_MANY_MERGED',\n\n    /**\n     * Uses props from `this.props` and state from `this.state` to render the\n     * structure of the component.\n     *\n     * No guarantees are made about when or how often this method is invoked, so\n     * it must not have side effects.\n     *\n     *   render: function() {\n     *     var name = this.props.name;\n     *     return <div>Hello, {name}!</div>;\n     *   }\n     *\n     * @return {ReactComponent}\n     * @required\n     */\n    render: 'DEFINE_ONCE',\n\n    // ==== Delegate methods ====\n\n    /**\n     * Invoked when the component is initially created and about to be mounted.\n     * This may have side effects, but any external subscriptions or data created\n     * by this method must be cleaned up in `componentWillUnmount`.\n     *\n     * @optional\n     */\n    componentWillMount: 'DEFINE_MANY',\n\n    /**\n     * Invoked when the component has been mounted and has a DOM representation.\n     * However, there is no guarantee that the DOM node is in the document.\n     *\n     * Use this as an opportunity to operate on the DOM when the component has\n     * been mounted (initialized and rendered) for the first time.\n     *\n     * @param {DOMElement} rootNode DOM element representing the component.\n     * @optional\n     */\n    componentDidMount: 'DEFINE_MANY',\n\n    /**\n     * Invoked before the component receives new props.\n     *\n     * Use this as an opportunity to react to a prop transition by updating the\n     * state using `this.setState`. Current props are accessed via `this.props`.\n     *\n     *   componentWillReceiveProps: function(nextProps, nextContext) {\n     *     this.setState({\n     *       likesIncreasing: nextProps.likeCount > this.props.likeCount\n     *     });\n     *   }\n     *\n     * NOTE: There is no equivalent `componentWillReceiveState`. An incoming prop\n     * transition may cause a state change, but the opposite is not true. If you\n     * need it, you are probably looking for `componentWillUpdate`.\n     *\n     * @param {object} nextProps\n     * @optional\n     */\n    componentWillReceiveProps: 'DEFINE_MANY',\n\n    /**\n     * Invoked while deciding if the component should be updated as a result of\n     * receiving new props, state and/or context.\n     *\n     * Use this as an opportunity to `return false` when you're certain that the\n     * transition to the new props/state/context will not require a component\n     * update.\n     *\n     *   shouldComponentUpdate: function(nextProps, nextState, nextContext) {\n     *     return !equal(nextProps, this.props) ||\n     *       !equal(nextState, this.state) ||\n     *       !equal(nextContext, this.context);\n     *   }\n     *\n     * @param {object} nextProps\n     * @param {?object} nextState\n     * @param {?object} nextContext\n     * @return {boolean} True if the component should update.\n     * @optional\n     */\n    shouldComponentUpdate: 'DEFINE_ONCE',\n\n    /**\n     * Invoked when the component is about to update due to a transition from\n     * `this.props`, `this.state` and `this.context` to `nextProps`, `nextState`\n     * and `nextContext`.\n     *\n     * Use this as an opportunity to perform preparation before an update occurs.\n     *\n     * NOTE: You **cannot** use `this.setState()` in this method.\n     *\n     * @param {object} nextProps\n     * @param {?object} nextState\n     * @param {?object} nextContext\n     * @param {ReactReconcileTransaction} transaction\n     * @optional\n     */\n    componentWillUpdate: 'DEFINE_MANY',\n\n    /**\n     * Invoked when the component's DOM representation has been updated.\n     *\n     * Use this as an opportunity to operate on the DOM when the component has\n     * been updated.\n     *\n     * @param {object} prevProps\n     * @param {?object} prevState\n     * @param {?object} prevContext\n     * @param {DOMElement} rootNode DOM element representing the component.\n     * @optional\n     */\n    componentDidUpdate: 'DEFINE_MANY',\n\n    /**\n     * Invoked when the component is about to be removed from its parent and have\n     * its DOM representation destroyed.\n     *\n     * Use this as an opportunity to deallocate any external resources.\n     *\n     * NOTE: There is no `componentDidUnmount` since your component will have been\n     * destroyed by that point.\n     *\n     * @optional\n     */\n    componentWillUnmount: 'DEFINE_MANY',\n\n    /**\n     * Replacement for (deprecated) `componentWillMount`.\n     *\n     * @optional\n     */\n    UNSAFE_componentWillMount: 'DEFINE_MANY',\n\n    /**\n     * Replacement for (deprecated) `componentWillReceiveProps`.\n     *\n     * @optional\n     */\n    UNSAFE_componentWillReceiveProps: 'DEFINE_MANY',\n\n    /**\n     * Replacement for (deprecated) `componentWillUpdate`.\n     *\n     * @optional\n     */\n    UNSAFE_componentWillUpdate: 'DEFINE_MANY',\n\n    // ==== Advanced methods ====\n\n    /**\n     * Updates the component's currently mounted DOM representation.\n     *\n     * By default, this implements React's rendering and reconciliation algorithm.\n     * Sophisticated clients may wish to override this.\n     *\n     * @param {ReactReconcileTransaction} transaction\n     * @internal\n     * @overridable\n     */\n    updateComponent: 'OVERRIDE_BASE'\n  };\n\n  /**\n   * Similar to ReactClassInterface but for static methods.\n   */\n  var ReactClassStaticInterface = {\n    /**\n     * This method is invoked after a component is instantiated and when it\n     * receives new props. Return an object to update state in response to\n     * prop changes. Return null to indicate no change to state.\n     *\n     * If an object is returned, its keys will be merged into the existing state.\n     *\n     * @return {object || null}\n     * @optional\n     */\n    getDerivedStateFromProps: 'DEFINE_MANY_MERGED'\n  };\n\n  /**\n   * Mapping from class specification keys to special processing functions.\n   *\n   * Although these are declared like instance properties in the specification\n   * when defining classes using `React.createClass`, they are actually static\n   * and are accessible on the constructor instead of the prototype. Despite\n   * being static, they must be defined outside of the \"statics\" key under\n   * which all other static methods are defined.\n   */\n  var RESERVED_SPEC_KEYS = {\n    displayName: function(Constructor, displayName) {\n      Constructor.displayName = displayName;\n    },\n    mixins: function(Constructor, mixins) {\n      if (mixins) {\n        for (var i = 0; i < mixins.length; i++) {\n          mixSpecIntoComponent(Constructor, mixins[i]);\n        }\n      }\n    },\n    childContextTypes: function(Constructor, childContextTypes) {\n      if (true) {\n        validateTypeDef(Constructor, childContextTypes, 'childContext');\n      }\n      Constructor.childContextTypes = _assign(\n        {},\n        Constructor.childContextTypes,\n        childContextTypes\n      );\n    },\n    contextTypes: function(Constructor, contextTypes) {\n      if (true) {\n        validateTypeDef(Constructor, contextTypes, 'context');\n      }\n      Constructor.contextTypes = _assign(\n        {},\n        Constructor.contextTypes,\n        contextTypes\n      );\n    },\n    /**\n     * Special case getDefaultProps which should move into statics but requires\n     * automatic merging.\n     */\n    getDefaultProps: function(Constructor, getDefaultProps) {\n      if (Constructor.getDefaultProps) {\n        Constructor.getDefaultProps = createMergedResultFunction(\n          Constructor.getDefaultProps,\n          getDefaultProps\n        );\n      } else {\n        Constructor.getDefaultProps = getDefaultProps;\n      }\n    },\n    propTypes: function(Constructor, propTypes) {\n      if (true) {\n        validateTypeDef(Constructor, propTypes, 'prop');\n      }\n      Constructor.propTypes = _assign({}, Constructor.propTypes, propTypes);\n    },\n    statics: function(Constructor, statics) {\n      mixStaticSpecIntoComponent(Constructor, statics);\n    },\n    autobind: function() {}\n  };\n\n  function validateTypeDef(Constructor, typeDef, location) {\n    for (var propName in typeDef) {\n      if (typeDef.hasOwnProperty(propName)) {\n        // use a warning instead of an _invariant so components\n        // don't show up in prod but only in __DEV__\n        if (true) {\n          warning(\n            typeof typeDef[propName] === 'function',\n            '%s: %s type `%s` is invalid; it must be a function, usually from ' +\n              'React.PropTypes.',\n            Constructor.displayName || 'ReactClass',\n            ReactPropTypeLocationNames[location],\n            propName\n          );\n        }\n      }\n    }\n  }\n\n  function validateMethodOverride(isAlreadyDefined, name) {\n    var specPolicy = ReactClassInterface.hasOwnProperty(name)\n      ? ReactClassInterface[name]\n      : null;\n\n    // Disallow overriding of base class methods unless explicitly allowed.\n    if (ReactClassMixin.hasOwnProperty(name)) {\n      _invariant(\n        specPolicy === 'OVERRIDE_BASE',\n        'ReactClassInterface: You are attempting to override ' +\n          '`%s` from your class specification. Ensure that your method names ' +\n          'do not overlap with React methods.',\n        name\n      );\n    }\n\n    // Disallow defining methods more than once unless explicitly allowed.\n    if (isAlreadyDefined) {\n      _invariant(\n        specPolicy === 'DEFINE_MANY' || specPolicy === 'DEFINE_MANY_MERGED',\n        'ReactClassInterface: You are attempting to define ' +\n          '`%s` on your component more than once. This conflict may be due ' +\n          'to a mixin.',\n        name\n      );\n    }\n  }\n\n  /**\n   * Mixin helper which handles policy validation and reserved\n   * specification keys when building React classes.\n   */\n  function mixSpecIntoComponent(Constructor, spec) {\n    if (!spec) {\n      if (true) {\n        var typeofSpec = typeof spec;\n        var isMixinValid = typeofSpec === 'object' && spec !== null;\n\n        if (true) {\n          warning(\n            isMixinValid,\n            \"%s: You're attempting to include a mixin that is either null \" +\n              'or not an object. Check the mixins included by the component, ' +\n              'as well as any mixins they include themselves. ' +\n              'Expected object but got %s.',\n            Constructor.displayName || 'ReactClass',\n            spec === null ? null : typeofSpec\n          );\n        }\n      }\n\n      return;\n    }\n\n    _invariant(\n      typeof spec !== 'function',\n      \"ReactClass: You're attempting to \" +\n        'use a component class or function as a mixin. Instead, just use a ' +\n        'regular object.'\n    );\n    _invariant(\n      !isValidElement(spec),\n      \"ReactClass: You're attempting to \" +\n        'use a component as a mixin. Instead, just use a regular object.'\n    );\n\n    var proto = Constructor.prototype;\n    var autoBindPairs = proto.__reactAutoBindPairs;\n\n    // By handling mixins before any other properties, we ensure the same\n    // chaining order is applied to methods with DEFINE_MANY policy, whether\n    // mixins are listed before or after these methods in the spec.\n    if (spec.hasOwnProperty(MIXINS_KEY)) {\n      RESERVED_SPEC_KEYS.mixins(Constructor, spec.mixins);\n    }\n\n    for (var name in spec) {\n      if (!spec.hasOwnProperty(name)) {\n        continue;\n      }\n\n      if (name === MIXINS_KEY) {\n        // We have already handled mixins in a special case above.\n        continue;\n      }\n\n      var property = spec[name];\n      var isAlreadyDefined = proto.hasOwnProperty(name);\n      validateMethodOverride(isAlreadyDefined, name);\n\n      if (RESERVED_SPEC_KEYS.hasOwnProperty(name)) {\n        RESERVED_SPEC_KEYS[name](Constructor, property);\n      } else {\n        // Setup methods on prototype:\n        // The following member methods should not be automatically bound:\n        // 1. Expected ReactClass methods (in the \"interface\").\n        // 2. Overridden methods (that were mixed in).\n        var isReactClassMethod = ReactClassInterface.hasOwnProperty(name);\n        var isFunction = typeof property === 'function';\n        var shouldAutoBind =\n          isFunction &&\n          !isReactClassMethod &&\n          !isAlreadyDefined &&\n          spec.autobind !== false;\n\n        if (shouldAutoBind) {\n          autoBindPairs.push(name, property);\n          proto[name] = property;\n        } else {\n          if (isAlreadyDefined) {\n            var specPolicy = ReactClassInterface[name];\n\n            // These cases should already be caught by validateMethodOverride.\n            _invariant(\n              isReactClassMethod &&\n                (specPolicy === 'DEFINE_MANY_MERGED' ||\n                  specPolicy === 'DEFINE_MANY'),\n              'ReactClass: Unexpected spec policy %s for key %s ' +\n                'when mixing in component specs.',\n              specPolicy,\n              name\n            );\n\n            // For methods which are defined more than once, call the existing\n            // methods before calling the new property, merging if appropriate.\n            if (specPolicy === 'DEFINE_MANY_MERGED') {\n              proto[name] = createMergedResultFunction(proto[name], property);\n            } else if (specPolicy === 'DEFINE_MANY') {\n              proto[name] = createChainedFunction(proto[name], property);\n            }\n          } else {\n            proto[name] = property;\n            if (true) {\n              // Add verbose displayName to the function, which helps when looking\n              // at profiling tools.\n              if (typeof property === 'function' && spec.displayName) {\n                proto[name].displayName = spec.displayName + '_' + name;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  function mixStaticSpecIntoComponent(Constructor, statics) {\n    if (!statics) {\n      return;\n    }\n\n    for (var name in statics) {\n      var property = statics[name];\n      if (!statics.hasOwnProperty(name)) {\n        continue;\n      }\n\n      var isReserved = name in RESERVED_SPEC_KEYS;\n      _invariant(\n        !isReserved,\n        'ReactClass: You are attempting to define a reserved ' +\n          'property, `%s`, that shouldn\\'t be on the \"statics\" key. Define it ' +\n          'as an instance property instead; it will still be accessible on the ' +\n          'constructor.',\n        name\n      );\n\n      var isAlreadyDefined = name in Constructor;\n      if (isAlreadyDefined) {\n        var specPolicy = ReactClassStaticInterface.hasOwnProperty(name)\n          ? ReactClassStaticInterface[name]\n          : null;\n\n        _invariant(\n          specPolicy === 'DEFINE_MANY_MERGED',\n          'ReactClass: You are attempting to define ' +\n            '`%s` on your component more than once. This conflict may be ' +\n            'due to a mixin.',\n          name\n        );\n\n        Constructor[name] = createMergedResultFunction(Constructor[name], property);\n\n        return;\n      }\n\n      Constructor[name] = property;\n    }\n  }\n\n  /**\n   * Merge two objects, but throw if both contain the same key.\n   *\n   * @param {object} one The first object, which is mutated.\n   * @param {object} two The second object\n   * @return {object} one after it has been mutated to contain everything in two.\n   */\n  function mergeIntoWithNoDuplicateKeys(one, two) {\n    _invariant(\n      one && two && typeof one === 'object' && typeof two === 'object',\n      'mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.'\n    );\n\n    for (var key in two) {\n      if (two.hasOwnProperty(key)) {\n        _invariant(\n          one[key] === undefined,\n          'mergeIntoWithNoDuplicateKeys(): ' +\n            'Tried to merge two objects with the same key: `%s`. This conflict ' +\n            'may be due to a mixin; in particular, this may be caused by two ' +\n            'getInitialState() or getDefaultProps() methods returning objects ' +\n            'with clashing keys.',\n          key\n        );\n        one[key] = two[key];\n      }\n    }\n    return one;\n  }\n\n  /**\n   * Creates a function that invokes two functions and merges their return values.\n   *\n   * @param {function} one Function to invoke first.\n   * @param {function} two Function to invoke second.\n   * @return {function} Function that invokes the two argument functions.\n   * @private\n   */\n  function createMergedResultFunction(one, two) {\n    return function mergedResult() {\n      var a = one.apply(this, arguments);\n      var b = two.apply(this, arguments);\n      if (a == null) {\n        return b;\n      } else if (b == null) {\n        return a;\n      }\n      var c = {};\n      mergeIntoWithNoDuplicateKeys(c, a);\n      mergeIntoWithNoDuplicateKeys(c, b);\n      return c;\n    };\n  }\n\n  /**\n   * Creates a function that invokes two functions and ignores their return vales.\n   *\n   * @param {function} one Function to invoke first.\n   * @param {function} two Function to invoke second.\n   * @return {function} Function that invokes the two argument functions.\n   * @private\n   */\n  function createChainedFunction(one, two) {\n    return function chainedFunction() {\n      one.apply(this, arguments);\n      two.apply(this, arguments);\n    };\n  }\n\n  /**\n   * Binds a method to the component.\n   *\n   * @param {object} component Component whose method is going to be bound.\n   * @param {function} method Method to be bound.\n   * @return {function} The bound method.\n   */\n  function bindAutoBindMethod(component, method) {\n    var boundMethod = method.bind(component);\n    if (true) {\n      boundMethod.__reactBoundContext = component;\n      boundMethod.__reactBoundMethod = method;\n      boundMethod.__reactBoundArguments = null;\n      var componentName = component.constructor.displayName;\n      var _bind = boundMethod.bind;\n      boundMethod.bind = function(newThis) {\n        for (\n          var _len = arguments.length,\n            args = Array(_len > 1 ? _len - 1 : 0),\n            _key = 1;\n          _key < _len;\n          _key++\n        ) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        // User is trying to bind() an autobound method; we effectively will\n        // ignore the value of \"this\" that the user is trying to use, so\n        // let's warn.\n        if (newThis !== component && newThis !== null) {\n          if (true) {\n            warning(\n              false,\n              'bind(): React component methods may only be bound to the ' +\n                'component instance. See %s',\n              componentName\n            );\n          }\n        } else if (!args.length) {\n          if (true) {\n            warning(\n              false,\n              'bind(): You are binding a component method to the component. ' +\n                'React does this for you automatically in a high-performance ' +\n                'way, so you can safely remove this call. See %s',\n              componentName\n            );\n          }\n          return boundMethod;\n        }\n        var reboundMethod = _bind.apply(boundMethod, arguments);\n        reboundMethod.__reactBoundContext = component;\n        reboundMethod.__reactBoundMethod = method;\n        reboundMethod.__reactBoundArguments = args;\n        return reboundMethod;\n      };\n    }\n    return boundMethod;\n  }\n\n  /**\n   * Binds all auto-bound methods in a component.\n   *\n   * @param {object} component Component whose method is going to be bound.\n   */\n  function bindAutoBindMethods(component) {\n    var pairs = component.__reactAutoBindPairs;\n    for (var i = 0; i < pairs.length; i += 2) {\n      var autoBindKey = pairs[i];\n      var method = pairs[i + 1];\n      component[autoBindKey] = bindAutoBindMethod(component, method);\n    }\n  }\n\n  var IsMountedPreMixin = {\n    componentDidMount: function() {\n      this.__isMounted = true;\n    }\n  };\n\n  var IsMountedPostMixin = {\n    componentWillUnmount: function() {\n      this.__isMounted = false;\n    }\n  };\n\n  /**\n   * Add more to the ReactClass base class. These are all legacy features and\n   * therefore not already part of the modern ReactComponent.\n   */\n  var ReactClassMixin = {\n    /**\n     * TODO: This will be deprecated because state should always keep a consistent\n     * type signature and the only use case for this, is to avoid that.\n     */\n    replaceState: function(newState, callback) {\n      this.updater.enqueueReplaceState(this, newState, callback);\n    },\n\n    /**\n     * Checks whether or not this composite component is mounted.\n     * @return {boolean} True if mounted, false otherwise.\n     * @protected\n     * @final\n     */\n    isMounted: function() {\n      if (true) {\n        warning(\n          this.__didWarnIsMounted,\n          '%s: isMounted is deprecated. Instead, make sure to clean up ' +\n            'subscriptions and pending requests in componentWillUnmount to ' +\n            'prevent memory leaks.',\n          (this.constructor && this.constructor.displayName) ||\n            this.name ||\n            'Component'\n        );\n        this.__didWarnIsMounted = true;\n      }\n      return !!this.__isMounted;\n    }\n  };\n\n  var ReactClassComponent = function() {};\n  _assign(\n    ReactClassComponent.prototype,\n    ReactComponent.prototype,\n    ReactClassMixin\n  );\n\n  /**\n   * Creates a composite component class given a class specification.\n   * See https://facebook.github.io/react/docs/top-level-api.html#react.createclass\n   *\n   * @param {object} spec Class specification (which must define `render`).\n   * @return {function} Component constructor function.\n   * @public\n   */\n  function createClass(spec) {\n    // To keep our warnings more understandable, we'll use a little hack here to\n    // ensure that Constructor.name !== 'Constructor'. This makes sure we don't\n    // unnecessarily identify a class without displayName as 'Constructor'.\n    var Constructor = identity(function(props, context, updater) {\n      // This constructor gets overridden by mocks. The argument is used\n      // by mocks to assert on what gets mounted.\n\n      if (true) {\n        warning(\n          this instanceof Constructor,\n          'Something is calling a React component directly. Use a factory or ' +\n            'JSX instead. See: https://fb.me/react-legacyfactory'\n        );\n      }\n\n      // Wire up auto-binding\n      if (this.__reactAutoBindPairs.length) {\n        bindAutoBindMethods(this);\n      }\n\n      this.props = props;\n      this.context = context;\n      this.refs = emptyObject;\n      this.updater = updater || ReactNoopUpdateQueue;\n\n      this.state = null;\n\n      // ReactClasses doesn't have constructors. Instead, they use the\n      // getInitialState and componentWillMount methods for initialization.\n\n      var initialState = this.getInitialState ? this.getInitialState() : null;\n      if (true) {\n        // We allow auto-mocks to proceed as if they're returning null.\n        if (\n          initialState === undefined &&\n          this.getInitialState._isMockFunction\n        ) {\n          // This is probably bad practice. Consider warning here and\n          // deprecating this convenience.\n          initialState = null;\n        }\n      }\n      _invariant(\n        typeof initialState === 'object' && !Array.isArray(initialState),\n        '%s.getInitialState(): must return an object or null',\n        Constructor.displayName || 'ReactCompositeComponent'\n      );\n\n      this.state = initialState;\n    });\n    Constructor.prototype = new ReactClassComponent();\n    Constructor.prototype.constructor = Constructor;\n    Constructor.prototype.__reactAutoBindPairs = [];\n\n    injectedMixins.forEach(mixSpecIntoComponent.bind(null, Constructor));\n\n    mixSpecIntoComponent(Constructor, IsMountedPreMixin);\n    mixSpecIntoComponent(Constructor, spec);\n    mixSpecIntoComponent(Constructor, IsMountedPostMixin);\n\n    // Initialize the defaultProps property after all mixins have been merged.\n    if (Constructor.getDefaultProps) {\n      Constructor.defaultProps = Constructor.getDefaultProps();\n    }\n\n    if (true) {\n      // This is a tag to indicate that the use of these method names is ok,\n      // since it's used with createClass. If it's not, then it's likely a\n      // mistake so we'll warn you to use the static property, property\n      // initializer or constructor respectively.\n      if (Constructor.getDefaultProps) {\n        Constructor.getDefaultProps.isReactClassApproved = {};\n      }\n      if (Constructor.prototype.getInitialState) {\n        Constructor.prototype.getInitialState.isReactClassApproved = {};\n      }\n    }\n\n    _invariant(\n      Constructor.prototype.render,\n      'createClass(...): Class specification must implement a `render` method.'\n    );\n\n    if (true) {\n      warning(\n        !Constructor.prototype.componentShouldUpdate,\n        '%s has a method called ' +\n          'componentShouldUpdate(). Did you mean shouldComponentUpdate()? ' +\n          'The name is phrased as a question because the function is ' +\n          'expected to return a value.',\n        spec.displayName || 'A component'\n      );\n      warning(\n        !Constructor.prototype.componentWillRecieveProps,\n        '%s has a method called ' +\n          'componentWillRecieveProps(). Did you mean componentWillReceiveProps()?',\n        spec.displayName || 'A component'\n      );\n      warning(\n        !Constructor.prototype.UNSAFE_componentWillRecieveProps,\n        '%s has a method called UNSAFE_componentWillRecieveProps(). ' +\n          'Did you mean UNSAFE_componentWillReceiveProps()?',\n        spec.displayName || 'A component'\n      );\n    }\n\n    // Reduce time spent doing lookups by setting these on the prototype.\n    for (var methodName in ReactClassInterface) {\n      if (!Constructor.prototype[methodName]) {\n        Constructor.prototype[methodName] = null;\n      }\n    }\n\n    return Constructor;\n  }\n\n  return createClass;\n}\n\nmodule.exports = factory;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9mYWN0b3J5LmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVhOztBQUViLGNBQWMsbUJBQU8sQ0FBQyw2RkFBZTs7QUFFckM7O0FBRUE7O0FBRUEsSUFBSSxJQUFxQztBQUN6QztBQUNBOztBQUVBOztBQUVBLElBQUksSUFBcUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0RBQXNEO0FBQ3RELE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsSUFBSSxJQUFxQztBQUN6QztBQUNBLHVGQUF1RixhQUFhO0FBQ3BHO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxjQUFjO0FBQ2Q7O0FBRUE7QUFDQSw2RkFBNkYsZUFBZTtBQUM1RztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJLElBQXFDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLEtBQUssRUFFTjs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFD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d0M7QUFDeEMsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxJQUFxQztBQUNqRDtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsSUFBcUM7QUFDL0M7QUFDQTs7QUFFQSxZQUFZLElBQXFDO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBLGdCQUFnQixJQUFxQztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVB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QTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSxJQUFxQztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvY3JlYXRlLXJlYWN0LWNsYXNzL2ZhY3RvcnkuanM/NGI3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfYXNzaWduID0gcmVxdWlyZSgnb2JqZWN0LWFzc2lnbicpO1xuXG4vLyAtLSBJbmxpbmVkIGZyb20gZmJqcyAtLVxuXG52YXIgZW1wdHlPYmplY3QgPSB7fTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgT2JqZWN0LmZyZWV6ZShlbXB0eU9iamVjdCk7XG59XG5cbnZhciB2YWxpZGF0ZUZvcm1hdCA9IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybWF0KGZvcm1hdCkge307XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhbGlkYXRlRm9ybWF0ID0gZnVuY3Rpb24gdmFsaWRhdGVGb3JtYXQoZm9ybWF0KSB7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50Jyk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBfaW52YXJpYW50KGNvbmRpdGlvbiwgZm9ybWF0LCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIHZhbGlkYXRlRm9ybWF0KGZvcm1hdCk7XG5cbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB2YXIgZXJyb3I7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcignTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArICdmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYXJncyA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTtcbiAgICAgIH0pKTtcbiAgICAgIGVycm9yLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7XG4gICAgfVxuXG4gICAgZXJyb3IuZnJhbWVzVG9Qb3AgPSAxOyAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IGludmFyaWFudCdzIG93biBmcmFtZVxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbnZhciB3YXJuaW5nID0gZnVuY3Rpb24oKXt9O1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICB2YXIgcHJpbnRXYXJuaW5nID0gZnVuY3Rpb24gcHJpbnRXYXJuaW5nKGZvcm1hdCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgdmFyIGFyZ0luZGV4ID0gMDtcbiAgICB2YXIgbWVzc2FnZSA9ICdXYXJuaW5nOiAnICsgZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBhcmdzW2FyZ0luZGV4KytdO1xuICAgIH0pO1xuICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAvLyAtLS0gV2VsY29tZSB0byBkZWJ1Z2dpbmcgUmVhY3QgLS0tXG4gICAgICAvLyBUaGlzIGVycm9yIHdhcyB0aHJvd24gYXMgYSBjb252ZW5pZW5jZSBzbyB0aGF0IHlvdSBjYW4gdXNlIHRoaXMgc3RhY2tcbiAgICAgIC8vIHRvIGZpbmQgdGhlIGNhbGxzaXRlIHRoYXQgY2F1c2VkIHRoaXMgd2FybmluZyB0byBmaXJlLlxuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH0gY2F0Y2ggKHgpIHt9XG4gIH07XG5cbiAgd2FybmluZyA9IGZ1bmN0aW9uIHdhcm5pbmcoY29uZGl0aW9uLCBmb3JtYXQpIHtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYHdhcm5pbmcoY29uZGl0aW9uLCBmb3JtYXQsIC4uLmFyZ3MpYCByZXF1aXJlcyBhIHdhcm5pbmcgJyArICdtZXNzYWdlIGFyZ3VtZW50Jyk7XG4gICAgfVxuXG4gICAgaWYgKGZvcm1hdC5pbmRleE9mKCdGYWlsZWQgQ29tcG9zaXRlIHByb3BUeXBlOiAnKSA9PT0gMCkge1xuICAgICAgcmV0dXJuOyAvLyBJZ25vcmUgQ29tcG9zaXRlQ29tcG9uZW50IHByb3B0eXBlIGNoZWNrLlxuICAgIH1cblxuICAgIGlmICghY29uZGl0aW9uKSB7XG4gICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiA+IDIgPyBfbGVuMiAtIDIgOiAwKSwgX2tleTIgPSAyOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgIGFyZ3NbX2tleTIgLSAyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICB9XG5cbiAgICAgIHByaW50V2FybmluZy5hcHBseSh1bmRlZmluZWQsIFtmb3JtYXRdLmNvbmNhdChhcmdzKSk7XG4gICAgfVxuICB9O1xufVxuXG4vLyAvLS0gSW5saW5lZCBmcm9tIGZianMgLS1cblxudmFyIE1JWElOU19LRVkgPSAnbWl4aW5zJztcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGFsbG93IHRoZSBjcmVhdGlvbiBvZiBhbm9ueW1vdXMgZnVuY3Rpb25zIHdoaWNoIGRvIG5vdFxuLy8gaGF2ZSAubmFtZSBzZXQgdG8gdGhlIG5hbWUgb2YgdGhlIHZhcmlhYmxlIGJlaW5nIGFzc2lnbmVkIHRvLlxuZnVuY3Rpb24gaWRlbnRpdHkoZm4pIHtcbiAgcmV0dXJuIGZuO1xufVxuXG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXM7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHtcbiAgICBwcm9wOiAncHJvcCcsXG4gICAgY29udGV4dDogJ2NvbnRleHQnLFxuICAgIGNoaWxkQ29udGV4dDogJ2NoaWxkIGNvbnRleHQnXG4gIH07XG59IGVsc2Uge1xuICBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHt9O1xufVxuXG5mdW5jdGlvbiBmYWN0b3J5KFJlYWN0Q29tcG9uZW50LCBpc1ZhbGlkRWxlbWVudCwgUmVhY3ROb29wVXBkYXRlUXVldWUpIHtcbiAgLyoqXG4gICAqIFBvbGljaWVzIHRoYXQgZGVzY3JpYmUgbWV0aG9kcyBpbiBgUmVhY3RDbGFzc0ludGVyZmFjZWAuXG4gICAqL1xuXG4gIHZhciBpbmplY3RlZE1peGlucyA9IFtdO1xuXG4gIC8qKlxuICAgKiBDb21wb3NpdGUgY29tcG9uZW50cyBhcmUgaGlnaGVyLWxldmVsIGNvbXBvbmVudHMgdGhhdCBjb21wb3NlIG90aGVyIGNvbXBvc2l0ZVxuICAgKiBvciBob3N0IGNvbXBvbmVudHMuXG4gICAqXG4gICAqIFRvIGNyZWF0ZSBhIG5ldyB0eXBlIG9mIGBSZWFjdENsYXNzYCwgcGFzcyBhIHNwZWNpZmljYXRpb24gb2ZcbiAgICogeW91ciBuZXcgY2xhc3MgdG8gYFJlYWN0LmNyZWF0ZUNsYXNzYC4gVGhlIG9ubHkgcmVxdWlyZW1lbnQgb2YgeW91ciBjbGFzc1xuICAgKiBzcGVjaWZpY2F0aW9uIGlzIHRoYXQgeW91IGltcGxlbWVudCBhIGByZW5kZXJgIG1ldGhvZC5cbiAgICpcbiAgICogICB2YXIgTXlDb21wb25lbnQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAqICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgKiAgICAgICByZXR1cm4gPGRpdj5IZWxsbyBXb3JsZDwvZGl2PjtcbiAgICogICAgIH1cbiAgICogICB9KTtcbiAgICpcbiAgICogVGhlIGNsYXNzIHNwZWNpZmljYXRpb24gc3VwcG9ydHMgYSBzcGVjaWZpYyBwcm90b2NvbCBvZiBtZXRob2RzIHRoYXQgaGF2ZVxuICAgKiBzcGVjaWFsIG1lYW5pbmcgKGUuZy4gYHJlbmRlcmApLiBTZWUgYFJlYWN0Q2xhc3NJbnRlcmZhY2VgIGZvclxuICAgKiBtb3JlIHRoZSBjb21wcmVoZW5zaXZlIHByb3RvY29sLiBBbnkgb3RoZXIgcHJvcGVydGllcyBhbmQgbWV0aG9kcyBpbiB0aGVcbiAgICogY2xhc3Mgc3BlY2lmaWNhdGlvbiB3aWxsIGJlIGF2YWlsYWJsZSBvbiB0aGUgcHJvdG90eXBlLlxuICAgKlxuICAgKiBAaW50ZXJmYWNlIFJlYWN0Q2xhc3NJbnRlcmZhY2VcbiAgICogQGludGVybmFsXG4gICAqL1xuICB2YXIgUmVhY3RDbGFzc0ludGVyZmFjZSA9IHtcbiAgICAvKipcbiAgICAgKiBBbiBhcnJheSBvZiBNaXhpbiBvYmplY3RzIHRvIGluY2x1ZGUgd2hlbiBkZWZpbmluZyB5b3VyIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHthcnJheX1cbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBtaXhpbnM6ICdERUZJTkVfTUFOWScsXG5cbiAgICAvKipcbiAgICAgKiBBbiBvYmplY3QgY29udGFpbmluZyBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzIHRoYXQgc2hvdWxkIGJlIGRlZmluZWQgb25cbiAgICAgKiB0aGUgY29tcG9uZW50J3MgY29uc3RydWN0b3IgaW5zdGVhZCBvZiBpdHMgcHJvdG90eXBlIChzdGF0aWMgbWV0aG9kcykuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgICAqIEBvcHRpb25hbFxuICAgICAqL1xuICAgIHN0YXRpY3M6ICdERUZJTkVfTUFOWScsXG5cbiAgICAvKipcbiAgICAgKiBEZWZpbml0aW9uIG9mIHByb3AgdHlwZXMgZm9yIHRoaXMgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHR5cGUge29iamVjdH1cbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBwcm9wVHlwZXM6ICdERUZJTkVfTUFOWScsXG5cbiAgICAvKipcbiAgICAgKiBEZWZpbml0aW9uIG9mIGNvbnRleHQgdHlwZXMgZm9yIHRoaXMgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHR5cGUge29iamVjdH1cbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBjb250ZXh0VHlwZXM6ICdERUZJTkVfTUFOWScsXG5cbiAgICAvKipcbiAgICAgKiBEZWZpbml0aW9uIG9mIGNvbnRleHQgdHlwZXMgdGhpcyBjb21wb25lbnQgc2V0cyBmb3IgaXRzIGNoaWxkcmVuLlxuICAgICAqXG4gICAgICogQHR5cGUge29iamVjdH1cbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBjaGlsZENvbnRleHRUeXBlczogJ0RFRklORV9NQU5ZJyxcblxuICAgIC8vID09PT0gRGVmaW5pdGlvbiBtZXRob2RzID09PT1cblxuICAgIC8qKlxuICAgICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIG1vdW50ZWQuIFZhbHVlcyBpbiB0aGUgbWFwcGluZyB3aWxsIGJlIHNldCBvblxuICAgICAqIGB0aGlzLnByb3BzYCBpZiB0aGF0IHByb3AgaXMgbm90IHNwZWNpZmllZCAoaS5lLiB1c2luZyBhbiBgaW5gIGNoZWNrKS5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludm9rZWQgYmVmb3JlIGBnZXRJbml0aWFsU3RhdGVgIGFuZCB0aGVyZWZvcmUgY2Fubm90IHJlbHlcbiAgICAgKiBvbiBgdGhpcy5zdGF0ZWAgb3IgdXNlIGB0aGlzLnNldFN0YXRlYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge29iamVjdH1cbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBnZXREZWZhdWx0UHJvcHM6ICdERUZJTkVfTUFOWV9NRVJHRUQnLFxuXG4gICAgLyoqXG4gICAgICogSW52b2tlZCBvbmNlIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIG1vdW50ZWQuIFRoZSByZXR1cm4gdmFsdWUgd2lsbCBiZSB1c2VkXG4gICAgICogYXMgdGhlIGluaXRpYWwgdmFsdWUgb2YgYHRoaXMuc3RhdGVgLlxuICAgICAqXG4gICAgICogICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAqICAgICByZXR1cm4ge1xuICAgICAqICAgICAgIGlzT246IGZhbHNlLFxuICAgICAqICAgICAgIGZvb0JhejogbmV3IEJhekZvbygpXG4gICAgICogICAgIH1cbiAgICAgKiAgIH1cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge29iamVjdH1cbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBnZXRJbml0aWFsU3RhdGU6ICdERUZJTkVfTUFOWV9NRVJHRUQnLFxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7b2JqZWN0fVxuICAgICAqIEBvcHRpb25hbFxuICAgICAqL1xuICAgIGdldENoaWxkQ29udGV4dDogJ0RFRklORV9NQU5ZX01FUkdFRCcsXG5cbiAgICAvKipcbiAgICAgKiBVc2VzIHByb3BzIGZyb20gYHRoaXMucHJvcHNgIGFuZCBzdGF0ZSBmcm9tIGB0aGlzLnN0YXRlYCB0byByZW5kZXIgdGhlXG4gICAgICogc3RydWN0dXJlIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBObyBndWFyYW50ZWVzIGFyZSBtYWRlIGFib3V0IHdoZW4gb3IgaG93IG9mdGVuIHRoaXMgbWV0aG9kIGlzIGludm9rZWQsIHNvXG4gICAgICogaXQgbXVzdCBub3QgaGF2ZSBzaWRlIGVmZmVjdHMuXG4gICAgICpcbiAgICAgKiAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICogICAgIHZhciBuYW1lID0gdGhpcy5wcm9wcy5uYW1lO1xuICAgICAqICAgICByZXR1cm4gPGRpdj5IZWxsbywge25hbWV9ITwvZGl2PjtcbiAgICAgKiAgIH1cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1JlYWN0Q29tcG9uZW50fVxuICAgICAqIEByZXF1aXJlZFxuICAgICAqL1xuICAgIHJlbmRlcjogJ0RFRklORV9PTkNFJyxcblxuICAgIC8vID09PT0gRGVsZWdhdGUgbWV0aG9kcyA9PT09XG5cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBpbml0aWFsbHkgY3JlYXRlZCBhbmQgYWJvdXQgdG8gYmUgbW91bnRlZC5cbiAgICAgKiBUaGlzIG1heSBoYXZlIHNpZGUgZWZmZWN0cywgYnV0IGFueSBleHRlcm5hbCBzdWJzY3JpcHRpb25zIG9yIGRhdGEgY3JlYXRlZFxuICAgICAqIGJ5IHRoaXMgbWV0aG9kIG11c3QgYmUgY2xlYW5lZCB1cCBpbiBgY29tcG9uZW50V2lsbFVubW91bnRgLlxuICAgICAqXG4gICAgICogQG9wdGlvbmFsXG4gICAgICovXG4gICAgY29tcG9uZW50V2lsbE1vdW50OiAnREVGSU5FX01BTlknLFxuXG4gICAgLyoqXG4gICAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaGFzIGJlZW4gbW91bnRlZCBhbmQgaGFzIGEgRE9NIHJlcHJlc2VudGF0aW9uLlxuICAgICAqIEhvd2V2ZXIsIHRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IHRoZSBET00gbm9kZSBpcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byBvcGVyYXRlIG9uIHRoZSBET00gd2hlbiB0aGUgY29tcG9uZW50IGhhc1xuICAgICAqIGJlZW4gbW91bnRlZCAoaW5pdGlhbGl6ZWQgYW5kIHJlbmRlcmVkKSBmb3IgdGhlIGZpcnN0IHRpbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHJvb3ROb2RlIERPTSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgY29tcG9uZW50LlxuICAgICAqIEBvcHRpb25hbFxuICAgICAqL1xuICAgIGNvbXBvbmVudERpZE1vdW50OiAnREVGSU5FX01BTlknLFxuXG4gICAgLyoqXG4gICAgICogSW52b2tlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCByZWNlaXZlcyBuZXcgcHJvcHMuXG4gICAgICpcbiAgICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byByZWFjdCB0byBhIHByb3AgdHJhbnNpdGlvbiBieSB1cGRhdGluZyB0aGVcbiAgICAgKiBzdGF0ZSB1c2luZyBgdGhpcy5zZXRTdGF0ZWAuIEN1cnJlbnQgcHJvcHMgYXJlIGFjY2Vzc2VkIHZpYSBgdGhpcy5wcm9wc2AuXG4gICAgICpcbiAgICAgKiAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uKG5leHRQcm9wcywgbmV4dENvbnRleHQpIHtcbiAgICAgKiAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICogICAgICAgbGlrZXNJbmNyZWFzaW5nOiBuZXh0UHJvcHMubGlrZUNvdW50ID4gdGhpcy5wcm9wcy5saWtlQ291bnRcbiAgICAgKiAgICAgfSk7XG4gICAgICogICB9XG4gICAgICpcbiAgICAgKiBOT1RFOiBUaGVyZSBpcyBubyBlcXVpdmFsZW50IGBjb21wb25lbnRXaWxsUmVjZWl2ZVN0YXRlYC4gQW4gaW5jb21pbmcgcHJvcFxuICAgICAqIHRyYW5zaXRpb24gbWF5IGNhdXNlIGEgc3RhdGUgY2hhbmdlLCBidXQgdGhlIG9wcG9zaXRlIGlzIG5vdCB0cnVlLiBJZiB5b3VcbiAgICAgKiBuZWVkIGl0LCB5b3UgYXJlIHByb2JhYmx5IGxvb2tpbmcgZm9yIGBjb21wb25lbnRXaWxsVXBkYXRlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiAnREVGSU5FX01BTlknLFxuXG4gICAgLyoqXG4gICAgICogSW52b2tlZCB3aGlsZSBkZWNpZGluZyBpZiB0aGUgY29tcG9uZW50IHNob3VsZCBiZSB1cGRhdGVkIGFzIGEgcmVzdWx0IG9mXG4gICAgICogcmVjZWl2aW5nIG5ldyBwcm9wcywgc3RhdGUgYW5kL29yIGNvbnRleHQuXG4gICAgICpcbiAgICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byBgcmV0dXJuIGZhbHNlYCB3aGVuIHlvdSdyZSBjZXJ0YWluIHRoYXQgdGhlXG4gICAgICogdHJhbnNpdGlvbiB0byB0aGUgbmV3IHByb3BzL3N0YXRlL2NvbnRleHQgd2lsbCBub3QgcmVxdWlyZSBhIGNvbXBvbmVudFxuICAgICAqIHVwZGF0ZS5cbiAgICAgKlxuICAgICAqICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiBmdW5jdGlvbihuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQpIHtcbiAgICAgKiAgICAgcmV0dXJuICFlcXVhbChuZXh0UHJvcHMsIHRoaXMucHJvcHMpIHx8XG4gICAgICogICAgICAgIWVxdWFsKG5leHRTdGF0ZSwgdGhpcy5zdGF0ZSkgfHxcbiAgICAgKiAgICAgICAhZXF1YWwobmV4dENvbnRleHQsIHRoaXMuY29udGV4dCk7XG4gICAgICogICB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0U3RhdGVcbiAgICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRDb250ZXh0XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgY29tcG9uZW50IHNob3VsZCB1cGRhdGUuXG4gICAgICogQG9wdGlvbmFsXG4gICAgICovXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiAnREVGSU5FX09OQ0UnLFxuXG4gICAgLyoqXG4gICAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgYWJvdXQgdG8gdXBkYXRlIGR1ZSB0byBhIHRyYW5zaXRpb24gZnJvbVxuICAgICAqIGB0aGlzLnByb3BzYCwgYHRoaXMuc3RhdGVgIGFuZCBgdGhpcy5jb250ZXh0YCB0byBgbmV4dFByb3BzYCwgYG5leHRTdGF0ZWBcbiAgICAgKiBhbmQgYG5leHRDb250ZXh0YC5cbiAgICAgKlxuICAgICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIHBlcmZvcm0gcHJlcGFyYXRpb24gYmVmb3JlIGFuIHVwZGF0ZSBvY2N1cnMuXG4gICAgICpcbiAgICAgKiBOT1RFOiBZb3UgKipjYW5ub3QqKiB1c2UgYHRoaXMuc2V0U3RhdGUoKWAgaW4gdGhpcyBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0U3RhdGVcbiAgICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRDb250ZXh0XG4gICAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgICAqIEBvcHRpb25hbFxuICAgICAqL1xuICAgIGNvbXBvbmVudFdpbGxVcGRhdGU6ICdERUZJTkVfTUFOWScsXG5cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCdzIERPTSByZXByZXNlbnRhdGlvbiBoYXMgYmVlbiB1cGRhdGVkLlxuICAgICAqXG4gICAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gb3BlcmF0ZSBvbiB0aGUgRE9NIHdoZW4gdGhlIGNvbXBvbmVudCBoYXNcbiAgICAgKiBiZWVuIHVwZGF0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gcHJldlByb3BzXG4gICAgICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2U3RhdGVcbiAgICAgKiBAcGFyYW0gez9vYmplY3R9IHByZXZDb250ZXh0XG4gICAgICogQHBhcmFtIHtET01FbGVtZW50fSByb290Tm9kZSBET00gZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIGNvbXBvbmVudC5cbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBjb21wb25lbnREaWRVcGRhdGU6ICdERUZJTkVfTUFOWScsXG5cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBhYm91dCB0byBiZSByZW1vdmVkIGZyb20gaXRzIHBhcmVudCBhbmQgaGF2ZVxuICAgICAqIGl0cyBET00gcmVwcmVzZW50YXRpb24gZGVzdHJveWVkLlxuICAgICAqXG4gICAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gZGVhbGxvY2F0ZSBhbnkgZXh0ZXJuYWwgcmVzb3VyY2VzLlxuICAgICAqXG4gICAgICogTk9URTogVGhlcmUgaXMgbm8gYGNvbXBvbmVudERpZFVubW91bnRgIHNpbmNlIHlvdXIgY29tcG9uZW50IHdpbGwgaGF2ZSBiZWVuXG4gICAgICogZGVzdHJveWVkIGJ5IHRoYXQgcG9pbnQuXG4gICAgICpcbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudDogJ0RFRklORV9NQU5ZJyxcblxuICAgIC8qKlxuICAgICAqIFJlcGxhY2VtZW50IGZvciAoZGVwcmVjYXRlZCkgYGNvbXBvbmVudFdpbGxNb3VudGAuXG4gICAgICpcbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBVTlNBRkVfY29tcG9uZW50V2lsbE1vdW50OiAnREVGSU5FX01BTlknLFxuXG4gICAgLyoqXG4gICAgICogUmVwbGFjZW1lbnQgZm9yIChkZXByZWNhdGVkKSBgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wc2AuXG4gICAgICpcbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBVTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogJ0RFRklORV9NQU5ZJyxcblxuICAgIC8qKlxuICAgICAqIFJlcGxhY2VtZW50IGZvciAoZGVwcmVjYXRlZCkgYGNvbXBvbmVudFdpbGxVcGRhdGVgLlxuICAgICAqXG4gICAgICogQG9wdGlvbmFsXG4gICAgICovXG4gICAgVU5TQUZFX2NvbXBvbmVudFdpbGxVcGRhdGU6ICdERUZJTkVfTUFOWScsXG5cbiAgICAvLyA9PT09IEFkdmFuY2VkIG1ldGhvZHMgPT09PVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY29tcG9uZW50J3MgY3VycmVudGx5IG1vdW50ZWQgRE9NIHJlcHJlc2VudGF0aW9uLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgdGhpcyBpbXBsZW1lbnRzIFJlYWN0J3MgcmVuZGVyaW5nIGFuZCByZWNvbmNpbGlhdGlvbiBhbGdvcml0aG0uXG4gICAgICogU29waGlzdGljYXRlZCBjbGllbnRzIG1heSB3aXNoIHRvIG92ZXJyaWRlIHRoaXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAgICogQGludGVybmFsXG4gICAgICogQG92ZXJyaWRhYmxlXG4gICAgICovXG4gICAgdXBkYXRlQ29tcG9uZW50OiAnT1ZFUlJJREVfQkFTRSdcbiAgfTtcblxuICAvKipcbiAgICogU2ltaWxhciB0byBSZWFjdENsYXNzSW50ZXJmYWNlIGJ1dCBmb3Igc3RhdGljIG1ldGhvZHMuXG4gICAqL1xuICB2YXIgUmVhY3RDbGFzc1N0YXRpY0ludGVyZmFjZSA9IHtcbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnZva2VkIGFmdGVyIGEgY29tcG9uZW50IGlzIGluc3RhbnRpYXRlZCBhbmQgd2hlbiBpdFxuICAgICAqIHJlY2VpdmVzIG5ldyBwcm9wcy4gUmV0dXJuIGFuIG9iamVjdCB0byB1cGRhdGUgc3RhdGUgaW4gcmVzcG9uc2UgdG9cbiAgICAgKiBwcm9wIGNoYW5nZXMuIFJldHVybiBudWxsIHRvIGluZGljYXRlIG5vIGNoYW5nZSB0byBzdGF0ZS5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyByZXR1cm5lZCwgaXRzIGtleXMgd2lsbCBiZSBtZXJnZWQgaW50byB0aGUgZXhpc3Rpbmcgc3RhdGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtvYmplY3QgfHwgbnVsbH1cbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHM6ICdERUZJTkVfTUFOWV9NRVJHRUQnXG4gIH07XG5cbiAgLyoqXG4gICAqIE1hcHBpbmcgZnJvbSBjbGFzcyBzcGVjaWZpY2F0aW9uIGtleXMgdG8gc3BlY2lhbCBwcm9jZXNzaW5nIGZ1bmN0aW9ucy5cbiAgICpcbiAgICogQWx0aG91Z2ggdGhlc2UgYXJlIGRlY2xhcmVkIGxpa2UgaW5zdGFuY2UgcHJvcGVydGllcyBpbiB0aGUgc3BlY2lmaWNhdGlvblxuICAgKiB3aGVuIGRlZmluaW5nIGNsYXNzZXMgdXNpbmcgYFJlYWN0LmNyZWF0ZUNsYXNzYCwgdGhleSBhcmUgYWN0dWFsbHkgc3RhdGljXG4gICAqIGFuZCBhcmUgYWNjZXNzaWJsZSBvbiB0aGUgY29uc3RydWN0b3IgaW5zdGVhZCBvZiB0aGUgcHJvdG90eXBlLiBEZXNwaXRlXG4gICAqIGJlaW5nIHN0YXRpYywgdGhleSBtdXN0IGJlIGRlZmluZWQgb3V0c2lkZSBvZiB0aGUgXCJzdGF0aWNzXCIga2V5IHVuZGVyXG4gICAqIHdoaWNoIGFsbCBvdGhlciBzdGF0aWMgbWV0aG9kcyBhcmUgZGVmaW5lZC5cbiAgICovXG4gIHZhciBSRVNFUlZFRF9TUEVDX0tFWVMgPSB7XG4gICAgZGlzcGxheU5hbWU6IGZ1bmN0aW9uKENvbnN0cnVjdG9yLCBkaXNwbGF5TmFtZSkge1xuICAgICAgQ29uc3RydWN0b3IuZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZTtcbiAgICB9LFxuICAgIG1peGluczogZnVuY3Rpb24oQ29uc3RydWN0b3IsIG1peGlucykge1xuICAgICAgaWYgKG1peGlucykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1peGlucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIG1peFNwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBtaXhpbnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBjaGlsZENvbnRleHRUeXBlczogZnVuY3Rpb24oQ29uc3RydWN0b3IsIGNoaWxkQ29udGV4dFR5cGVzKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YWxpZGF0ZVR5cGVEZWYoQ29uc3RydWN0b3IsIGNoaWxkQ29udGV4dFR5cGVzLCAnY2hpbGRDb250ZXh0Jyk7XG4gICAgICB9XG4gICAgICBDb25zdHJ1Y3Rvci5jaGlsZENvbnRleHRUeXBlcyA9IF9hc3NpZ24oXG4gICAgICAgIHt9LFxuICAgICAgICBDb25zdHJ1Y3Rvci5jaGlsZENvbnRleHRUeXBlcyxcbiAgICAgICAgY2hpbGRDb250ZXh0VHlwZXNcbiAgICAgICk7XG4gICAgfSxcbiAgICBjb250ZXh0VHlwZXM6IGZ1bmN0aW9uKENvbnN0cnVjdG9yLCBjb250ZXh0VHlwZXMpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgY29udGV4dFR5cGVzLCAnY29udGV4dCcpO1xuICAgICAgfVxuICAgICAgQ29uc3RydWN0b3IuY29udGV4dFR5cGVzID0gX2Fzc2lnbihcbiAgICAgICAge30sXG4gICAgICAgIENvbnN0cnVjdG9yLmNvbnRleHRUeXBlcyxcbiAgICAgICAgY29udGV4dFR5cGVzXG4gICAgICApO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogU3BlY2lhbCBjYXNlIGdldERlZmF1bHRQcm9wcyB3aGljaCBzaG91bGQgbW92ZSBpbnRvIHN0YXRpY3MgYnV0IHJlcXVpcmVzXG4gICAgICogYXV0b21hdGljIG1lcmdpbmcuXG4gICAgICovXG4gICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbihDb25zdHJ1Y3RvciwgZ2V0RGVmYXVsdFByb3BzKSB7XG4gICAgICBpZiAoQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcyA9IGNyZWF0ZU1lcmdlZFJlc3VsdEZ1bmN0aW9uKFxuICAgICAgICAgIENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcyxcbiAgICAgICAgICBnZXREZWZhdWx0UHJvcHNcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcyA9IGdldERlZmF1bHRQcm9wcztcbiAgICAgIH1cbiAgICB9LFxuICAgIHByb3BUeXBlczogZnVuY3Rpb24oQ29uc3RydWN0b3IsIHByb3BUeXBlcykge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgdmFsaWRhdGVUeXBlRGVmKENvbnN0cnVjdG9yLCBwcm9wVHlwZXMsICdwcm9wJyk7XG4gICAgICB9XG4gICAgICBDb25zdHJ1Y3Rvci5wcm9wVHlwZXMgPSBfYXNzaWduKHt9LCBDb25zdHJ1Y3Rvci5wcm9wVHlwZXMsIHByb3BUeXBlcyk7XG4gICAgfSxcbiAgICBzdGF0aWNzOiBmdW5jdGlvbihDb25zdHJ1Y3Rvciwgc3RhdGljcykge1xuICAgICAgbWl4U3RhdGljU3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIHN0YXRpY3MpO1xuICAgIH0sXG4gICAgYXV0b2JpbmQ6IGZ1bmN0aW9uKCkge31cbiAgfTtcblxuICBmdW5jdGlvbiB2YWxpZGF0ZVR5cGVEZWYoQ29uc3RydWN0b3IsIHR5cGVEZWYsIGxvY2F0aW9uKSB7XG4gICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gdHlwZURlZikge1xuICAgICAgaWYgKHR5cGVEZWYuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIC8vIHVzZSBhIHdhcm5pbmcgaW5zdGVhZCBvZiBhbiBfaW52YXJpYW50IHNvIGNvbXBvbmVudHNcbiAgICAgICAgLy8gZG9uJ3Qgc2hvdyB1cCBpbiBwcm9kIGJ1dCBvbmx5IGluIF9fREVWX19cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICB3YXJuaW5nKFxuICAgICAgICAgICAgdHlwZW9mIHR5cGVEZWZbcHJvcE5hbWVdID09PSAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgJyVzOiAlcyB0eXBlIGAlc2AgaXMgaW52YWxpZDsgaXQgbXVzdCBiZSBhIGZ1bmN0aW9uLCB1c3VhbGx5IGZyb20gJyArXG4gICAgICAgICAgICAgICdSZWFjdC5Qcm9wVHlwZXMuJyxcbiAgICAgICAgICAgIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lIHx8ICdSZWFjdENsYXNzJyxcbiAgICAgICAgICAgIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXSxcbiAgICAgICAgICAgIHByb3BOYW1lXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlTWV0aG9kT3ZlcnJpZGUoaXNBbHJlYWR5RGVmaW5lZCwgbmFtZSkge1xuICAgIHZhciBzcGVjUG9saWN5ID0gUmVhY3RDbGFzc0ludGVyZmFjZS5oYXNPd25Qcm9wZXJ0eShuYW1lKVxuICAgICAgPyBSZWFjdENsYXNzSW50ZXJmYWNlW25hbWVdXG4gICAgICA6IG51bGw7XG5cbiAgICAvLyBEaXNhbGxvdyBvdmVycmlkaW5nIG9mIGJhc2UgY2xhc3MgbWV0aG9kcyB1bmxlc3MgZXhwbGljaXRseSBhbGxvd2VkLlxuICAgIGlmIChSZWFjdENsYXNzTWl4aW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIF9pbnZhcmlhbnQoXG4gICAgICAgIHNwZWNQb2xpY3kgPT09ICdPVkVSUklERV9CQVNFJyxcbiAgICAgICAgJ1JlYWN0Q2xhc3NJbnRlcmZhY2U6IFlvdSBhcmUgYXR0ZW1wdGluZyB0byBvdmVycmlkZSAnICtcbiAgICAgICAgICAnYCVzYCBmcm9tIHlvdXIgY2xhc3Mgc3BlY2lmaWNhdGlvbi4gRW5zdXJlIHRoYXQgeW91ciBtZXRob2QgbmFtZXMgJyArXG4gICAgICAgICAgJ2RvIG5vdCBvdmVybGFwIHdpdGggUmVhY3QgbWV0aG9kcy4nLFxuICAgICAgICBuYW1lXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIERpc2FsbG93IGRlZmluaW5nIG1ldGhvZHMgbW9yZSB0aGFuIG9uY2UgdW5sZXNzIGV4cGxpY2l0bHkgYWxsb3dlZC5cbiAgICBpZiAoaXNBbHJlYWR5RGVmaW5lZCkge1xuICAgICAgX2ludmFyaWFudChcbiAgICAgICAgc3BlY1BvbGljeSA9PT0gJ0RFRklORV9NQU5ZJyB8fCBzcGVjUG9saWN5ID09PSAnREVGSU5FX01BTllfTUVSR0VEJyxcbiAgICAgICAgJ1JlYWN0Q2xhc3NJbnRlcmZhY2U6IFlvdSBhcmUgYXR0ZW1wdGluZyB0byBkZWZpbmUgJyArXG4gICAgICAgICAgJ2Alc2Agb24geW91ciBjb21wb25lbnQgbW9yZSB0aGFuIG9uY2UuIFRoaXMgY29uZmxpY3QgbWF5IGJlIGR1ZSAnICtcbiAgICAgICAgICAndG8gYSBtaXhpbi4nLFxuICAgICAgICBuYW1lXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNaXhpbiBoZWxwZXIgd2hpY2ggaGFuZGxlcyBwb2xpY3kgdmFsaWRhdGlvbiBhbmQgcmVzZXJ2ZWRcbiAgICogc3BlY2lmaWNhdGlvbiBrZXlzIHdoZW4gYnVpbGRpbmcgUmVhY3QgY2xhc3Nlcy5cbiAgICovXG4gIGZ1bmN0aW9uIG1peFNwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBzcGVjKSB7XG4gICAgaWYgKCFzcGVjKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YXIgdHlwZW9mU3BlYyA9IHR5cGVvZiBzcGVjO1xuICAgICAgICB2YXIgaXNNaXhpblZhbGlkID0gdHlwZW9mU3BlYyA9PT0gJ29iamVjdCcgJiYgc3BlYyAhPT0gbnVsbDtcblxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIHdhcm5pbmcoXG4gICAgICAgICAgICBpc01peGluVmFsaWQsXG4gICAgICAgICAgICBcIiVzOiBZb3UncmUgYXR0ZW1wdGluZyB0byBpbmNsdWRlIGEgbWl4aW4gdGhhdCBpcyBlaXRoZXIgbnVsbCBcIiArXG4gICAgICAgICAgICAgICdvciBub3QgYW4gb2JqZWN0LiBDaGVjayB0aGUgbWl4aW5zIGluY2x1ZGVkIGJ5IHRoZSBjb21wb25lbnQsICcgK1xuICAgICAgICAgICAgICAnYXMgd2VsbCBhcyBhbnkgbWl4aW5zIHRoZXkgaW5jbHVkZSB0aGVtc2VsdmVzLiAnICtcbiAgICAgICAgICAgICAgJ0V4cGVjdGVkIG9iamVjdCBidXQgZ290ICVzLicsXG4gICAgICAgICAgICBDb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCAnUmVhY3RDbGFzcycsXG4gICAgICAgICAgICBzcGVjID09PSBudWxsID8gbnVsbCA6IHR5cGVvZlNwZWNcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBfaW52YXJpYW50KFxuICAgICAgdHlwZW9mIHNwZWMgIT09ICdmdW5jdGlvbicsXG4gICAgICBcIlJlYWN0Q2xhc3M6IFlvdSdyZSBhdHRlbXB0aW5nIHRvIFwiICtcbiAgICAgICAgJ3VzZSBhIGNvbXBvbmVudCBjbGFzcyBvciBmdW5jdGlvbiBhcyBhIG1peGluLiBJbnN0ZWFkLCBqdXN0IHVzZSBhICcgK1xuICAgICAgICAncmVndWxhciBvYmplY3QuJ1xuICAgICk7XG4gICAgX2ludmFyaWFudChcbiAgICAgICFpc1ZhbGlkRWxlbWVudChzcGVjKSxcbiAgICAgIFwiUmVhY3RDbGFzczogWW91J3JlIGF0dGVtcHRpbmcgdG8gXCIgK1xuICAgICAgICAndXNlIGEgY29tcG9uZW50IGFzIGEgbWl4aW4uIEluc3RlYWQsIGp1c3QgdXNlIGEgcmVndWxhciBvYmplY3QuJ1xuICAgICk7XG5cbiAgICB2YXIgcHJvdG8gPSBDb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG4gICAgdmFyIGF1dG9CaW5kUGFpcnMgPSBwcm90by5fX3JlYWN0QXV0b0JpbmRQYWlycztcblxuICAgIC8vIEJ5IGhhbmRsaW5nIG1peGlucyBiZWZvcmUgYW55IG90aGVyIHByb3BlcnRpZXMsIHdlIGVuc3VyZSB0aGUgc2FtZVxuICAgIC8vIGNoYWluaW5nIG9yZGVyIGlzIGFwcGxpZWQgdG8gbWV0aG9kcyB3aXRoIERFRklORV9NQU5ZIHBvbGljeSwgd2hldGhlclxuICAgIC8vIG1peGlucyBhcmUgbGlzdGVkIGJlZm9yZSBvciBhZnRlciB0aGVzZSBtZXRob2RzIGluIHRoZSBzcGVjLlxuICAgIGlmIChzcGVjLmhhc093blByb3BlcnR5KE1JWElOU19LRVkpKSB7XG4gICAgICBSRVNFUlZFRF9TUEVDX0tFWVMubWl4aW5zKENvbnN0cnVjdG9yLCBzcGVjLm1peGlucyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgbmFtZSBpbiBzcGVjKSB7XG4gICAgICBpZiAoIXNwZWMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChuYW1lID09PSBNSVhJTlNfS0VZKSB7XG4gICAgICAgIC8vIFdlIGhhdmUgYWxyZWFkeSBoYW5kbGVkIG1peGlucyBpbiBhIHNwZWNpYWwgY2FzZSBhYm92ZS5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBwcm9wZXJ0eSA9IHNwZWNbbmFtZV07XG4gICAgICB2YXIgaXNBbHJlYWR5RGVmaW5lZCA9IHByb3RvLmhhc093blByb3BlcnR5KG5hbWUpO1xuICAgICAgdmFsaWRhdGVNZXRob2RPdmVycmlkZShpc0FscmVhZHlEZWZpbmVkLCBuYW1lKTtcblxuICAgICAgaWYgKFJFU0VSVkVEX1NQRUNfS0VZUy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBSRVNFUlZFRF9TUEVDX0tFWVNbbmFtZV0oQ29uc3RydWN0b3IsIHByb3BlcnR5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFNldHVwIG1ldGhvZHMgb24gcHJvdG90eXBlOlxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIG1lbWJlciBtZXRob2RzIHNob3VsZCBub3QgYmUgYXV0b21hdGljYWxseSBib3VuZDpcbiAgICAgICAgLy8gMS4gRXhwZWN0ZWQgUmVhY3RDbGFzcyBtZXRob2RzIChpbiB0aGUgXCJpbnRlcmZhY2VcIikuXG4gICAgICAgIC8vIDIuIE92ZXJyaWRkZW4gbWV0aG9kcyAodGhhdCB3ZXJlIG1peGVkIGluKS5cbiAgICAgICAgdmFyIGlzUmVhY3RDbGFzc01ldGhvZCA9IFJlYWN0Q2xhc3NJbnRlcmZhY2UuaGFzT3duUHJvcGVydHkobmFtZSk7XG4gICAgICAgIHZhciBpc0Z1bmN0aW9uID0gdHlwZW9mIHByb3BlcnR5ID09PSAnZnVuY3Rpb24nO1xuICAgICAgICB2YXIgc2hvdWxkQXV0b0JpbmQgPVxuICAgICAgICAgIGlzRnVuY3Rpb24gJiZcbiAgICAgICAgICAhaXNSZWFjdENsYXNzTWV0aG9kICYmXG4gICAgICAgICAgIWlzQWxyZWFkeURlZmluZWQgJiZcbiAgICAgICAgICBzcGVjLmF1dG9iaW5kICE9PSBmYWxzZTtcblxuICAgICAgICBpZiAoc2hvdWxkQXV0b0JpbmQpIHtcbiAgICAgICAgICBhdXRvQmluZFBhaXJzLnB1c2gobmFtZSwgcHJvcGVydHkpO1xuICAgICAgICAgIHByb3RvW25hbWVdID0gcHJvcGVydHk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGlzQWxyZWFkeURlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBzcGVjUG9saWN5ID0gUmVhY3RDbGFzc0ludGVyZmFjZVtuYW1lXTtcblxuICAgICAgICAgICAgLy8gVGhlc2UgY2FzZXMgc2hvdWxkIGFscmVhZHkgYmUgY2F1Z2h0IGJ5IHZhbGlkYXRlTWV0aG9kT3ZlcnJpZGUuXG4gICAgICAgICAgICBfaW52YXJpYW50KFxuICAgICAgICAgICAgICBpc1JlYWN0Q2xhc3NNZXRob2QgJiZcbiAgICAgICAgICAgICAgICAoc3BlY1BvbGljeSA9PT0gJ0RFRklORV9NQU5ZX01FUkdFRCcgfHxcbiAgICAgICAgICAgICAgICAgIHNwZWNQb2xpY3kgPT09ICdERUZJTkVfTUFOWScpLFxuICAgICAgICAgICAgICAnUmVhY3RDbGFzczogVW5leHBlY3RlZCBzcGVjIHBvbGljeSAlcyBmb3Iga2V5ICVzICcgK1xuICAgICAgICAgICAgICAgICd3aGVuIG1peGluZyBpbiBjb21wb25lbnQgc3BlY3MuJyxcbiAgICAgICAgICAgICAgc3BlY1BvbGljeSxcbiAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gRm9yIG1ldGhvZHMgd2hpY2ggYXJlIGRlZmluZWQgbW9yZSB0aGFuIG9uY2UsIGNhbGwgdGhlIGV4aXN0aW5nXG4gICAgICAgICAgICAvLyBtZXRob2RzIGJlZm9yZSBjYWxsaW5nIHRoZSBuZXcgcHJvcGVydHksIG1lcmdpbmcgaWYgYXBwcm9wcmlhdGUuXG4gICAgICAgICAgICBpZiAoc3BlY1BvbGljeSA9PT0gJ0RFRklORV9NQU5ZX01FUkdFRCcpIHtcbiAgICAgICAgICAgICAgcHJvdG9bbmFtZV0gPSBjcmVhdGVNZXJnZWRSZXN1bHRGdW5jdGlvbihwcm90b1tuYW1lXSwgcHJvcGVydHkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzcGVjUG9saWN5ID09PSAnREVGSU5FX01BTlknKSB7XG4gICAgICAgICAgICAgIHByb3RvW25hbWVdID0gY3JlYXRlQ2hhaW5lZEZ1bmN0aW9uKHByb3RvW25hbWVdLCBwcm9wZXJ0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb3RvW25hbWVdID0gcHJvcGVydHk7XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAvLyBBZGQgdmVyYm9zZSBkaXNwbGF5TmFtZSB0byB0aGUgZnVuY3Rpb24sIHdoaWNoIGhlbHBzIHdoZW4gbG9va2luZ1xuICAgICAgICAgICAgICAvLyBhdCBwcm9maWxpbmcgdG9vbHMuXG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcGVydHkgPT09ICdmdW5jdGlvbicgJiYgc3BlYy5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgICAgICAgIHByb3RvW25hbWVdLmRpc3BsYXlOYW1lID0gc3BlYy5kaXNwbGF5TmFtZSArICdfJyArIG5hbWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtaXhTdGF0aWNTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3RhdGljcykge1xuICAgIGlmICghc3RhdGljcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAodmFyIG5hbWUgaW4gc3RhdGljcykge1xuICAgICAgdmFyIHByb3BlcnR5ID0gc3RhdGljc1tuYW1lXTtcbiAgICAgIGlmICghc3RhdGljcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGlzUmVzZXJ2ZWQgPSBuYW1lIGluIFJFU0VSVkVEX1NQRUNfS0VZUztcbiAgICAgIF9pbnZhcmlhbnQoXG4gICAgICAgICFpc1Jlc2VydmVkLFxuICAgICAgICAnUmVhY3RDbGFzczogWW91IGFyZSBhdHRlbXB0aW5nIHRvIGRlZmluZSBhIHJlc2VydmVkICcgK1xuICAgICAgICAgICdwcm9wZXJ0eSwgYCVzYCwgdGhhdCBzaG91bGRuXFwndCBiZSBvbiB0aGUgXCJzdGF0aWNzXCIga2V5LiBEZWZpbmUgaXQgJyArXG4gICAgICAgICAgJ2FzIGFuIGluc3RhbmNlIHByb3BlcnR5IGluc3RlYWQ7IGl0IHdpbGwgc3RpbGwgYmUgYWNjZXNzaWJsZSBvbiB0aGUgJyArXG4gICAgICAgICAgJ2NvbnN0cnVjdG9yLicsXG4gICAgICAgIG5hbWVcbiAgICAgICk7XG5cbiAgICAgIHZhciBpc0FscmVhZHlEZWZpbmVkID0gbmFtZSBpbiBDb25zdHJ1Y3RvcjtcbiAgICAgIGlmIChpc0FscmVhZHlEZWZpbmVkKSB7XG4gICAgICAgIHZhciBzcGVjUG9saWN5ID0gUmVhY3RDbGFzc1N0YXRpY0ludGVyZmFjZS5oYXNPd25Qcm9wZXJ0eShuYW1lKVxuICAgICAgICAgID8gUmVhY3RDbGFzc1N0YXRpY0ludGVyZmFjZVtuYW1lXVxuICAgICAgICAgIDogbnVsbDtcblxuICAgICAgICBfaW52YXJpYW50KFxuICAgICAgICAgIHNwZWNQb2xpY3kgPT09ICdERUZJTkVfTUFOWV9NRVJHRUQnLFxuICAgICAgICAgICdSZWFjdENsYXNzOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gZGVmaW5lICcgK1xuICAgICAgICAgICAgJ2Alc2Agb24geW91ciBjb21wb25lbnQgbW9yZSB0aGFuIG9uY2UuIFRoaXMgY29uZmxpY3QgbWF5IGJlICcgK1xuICAgICAgICAgICAgJ2R1ZSB0byBhIG1peGluLicsXG4gICAgICAgICAgbmFtZVxuICAgICAgICApO1xuXG4gICAgICAgIENvbnN0cnVjdG9yW25hbWVdID0gY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24oQ29uc3RydWN0b3JbbmFtZV0sIHByb3BlcnR5KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIENvbnN0cnVjdG9yW25hbWVdID0gcHJvcGVydHk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1lcmdlIHR3byBvYmplY3RzLCBidXQgdGhyb3cgaWYgYm90aCBjb250YWluIHRoZSBzYW1lIGtleS5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG9uZSBUaGUgZmlyc3Qgb2JqZWN0LCB3aGljaCBpcyBtdXRhdGVkLlxuICAgKiBAcGFyYW0ge29iamVjdH0gdHdvIFRoZSBzZWNvbmQgb2JqZWN0XG4gICAqIEByZXR1cm4ge29iamVjdH0gb25lIGFmdGVyIGl0IGhhcyBiZWVuIG11dGF0ZWQgdG8gY29udGFpbiBldmVyeXRoaW5nIGluIHR3by5cbiAgICovXG4gIGZ1bmN0aW9uIG1lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMob25lLCB0d28pIHtcbiAgICBfaW52YXJpYW50KFxuICAgICAgb25lICYmIHR3byAmJiB0eXBlb2Ygb25lID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdHdvID09PSAnb2JqZWN0JyxcbiAgICAgICdtZXJnZUludG9XaXRoTm9EdXBsaWNhdGVLZXlzKCk6IENhbm5vdCBtZXJnZSBub24tb2JqZWN0cy4nXG4gICAgKTtcblxuICAgIGZvciAodmFyIGtleSBpbiB0d28pIHtcbiAgICAgIGlmICh0d28uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBfaW52YXJpYW50KFxuICAgICAgICAgIG9uZVtrZXldID09PSB1bmRlZmluZWQsXG4gICAgICAgICAgJ21lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoKTogJyArXG4gICAgICAgICAgICAnVHJpZWQgdG8gbWVyZ2UgdHdvIG9iamVjdHMgd2l0aCB0aGUgc2FtZSBrZXk6IGAlc2AuIFRoaXMgY29uZmxpY3QgJyArXG4gICAgICAgICAgICAnbWF5IGJlIGR1ZSB0byBhIG1peGluOyBpbiBwYXJ0aWN1bGFyLCB0aGlzIG1heSBiZSBjYXVzZWQgYnkgdHdvICcgK1xuICAgICAgICAgICAgJ2dldEluaXRpYWxTdGF0ZSgpIG9yIGdldERlZmF1bHRQcm9wcygpIG1ldGhvZHMgcmV0dXJuaW5nIG9iamVjdHMgJyArXG4gICAgICAgICAgICAnd2l0aCBjbGFzaGluZyBrZXlzLicsXG4gICAgICAgICAga2V5XG4gICAgICAgICk7XG4gICAgICAgIG9uZVtrZXldID0gdHdvW2tleV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvbmU7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0d28gZnVuY3Rpb25zIGFuZCBtZXJnZXMgdGhlaXIgcmV0dXJuIHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25lIEZ1bmN0aW9uIHRvIGludm9rZSBmaXJzdC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gdHdvIEZ1bmN0aW9uIHRvIGludm9rZSBzZWNvbmQuXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9ufSBGdW5jdGlvbiB0aGF0IGludm9rZXMgdGhlIHR3byBhcmd1bWVudCBmdW5jdGlvbnMuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmdW5jdGlvbiBjcmVhdGVNZXJnZWRSZXN1bHRGdW5jdGlvbihvbmUsIHR3bykge1xuICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWRSZXN1bHQoKSB7XG4gICAgICB2YXIgYSA9IG9uZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIGIgPSB0d28uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIGlmIChhID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGI7XG4gICAgICB9IGVsc2UgaWYgKGIgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gYTtcbiAgICAgIH1cbiAgICAgIHZhciBjID0ge307XG4gICAgICBtZXJnZUludG9XaXRoTm9EdXBsaWNhdGVLZXlzKGMsIGEpO1xuICAgICAgbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cyhjLCBiKTtcbiAgICAgIHJldHVybiBjO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0d28gZnVuY3Rpb25zIGFuZCBpZ25vcmVzIHRoZWlyIHJldHVybiB2YWxlcy5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25lIEZ1bmN0aW9uIHRvIGludm9rZSBmaXJzdC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gdHdvIEZ1bmN0aW9uIHRvIGludm9rZSBzZWNvbmQuXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9ufSBGdW5jdGlvbiB0aGF0IGludm9rZXMgdGhlIHR3byBhcmd1bWVudCBmdW5jdGlvbnMuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmdW5jdGlvbiBjcmVhdGVDaGFpbmVkRnVuY3Rpb24ob25lLCB0d28pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gY2hhaW5lZEZ1bmN0aW9uKCkge1xuICAgICAgb25lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB0d28uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEJpbmRzIGEgbWV0aG9kIHRvIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb21wb25lbnQgQ29tcG9uZW50IHdob3NlIG1ldGhvZCBpcyBnb2luZyB0byBiZSBib3VuZC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gbWV0aG9kIE1ldGhvZCB0byBiZSBib3VuZC5cbiAgICogQHJldHVybiB7ZnVuY3Rpb259IFRoZSBib3VuZCBtZXRob2QuXG4gICAqL1xuICBmdW5jdGlvbiBiaW5kQXV0b0JpbmRNZXRob2QoY29tcG9uZW50LCBtZXRob2QpIHtcbiAgICB2YXIgYm91bmRNZXRob2QgPSBtZXRob2QuYmluZChjb21wb25lbnQpO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBib3VuZE1ldGhvZC5fX3JlYWN0Qm91bmRDb250ZXh0ID0gY29tcG9uZW50O1xuICAgICAgYm91bmRNZXRob2QuX19yZWFjdEJvdW5kTWV0aG9kID0gbWV0aG9kO1xuICAgICAgYm91bmRNZXRob2QuX19yZWFjdEJvdW5kQXJndW1lbnRzID0gbnVsbDtcbiAgICAgIHZhciBjb21wb25lbnROYW1lID0gY29tcG9uZW50LmNvbnN0cnVjdG9yLmRpc3BsYXlOYW1lO1xuICAgICAgdmFyIF9iaW5kID0gYm91bmRNZXRob2QuYmluZDtcbiAgICAgIGJvdW5kTWV0aG9kLmJpbmQgPSBmdW5jdGlvbihuZXdUaGlzKSB7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgdmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLFxuICAgICAgICAgICAgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSxcbiAgICAgICAgICAgIF9rZXkgPSAxO1xuICAgICAgICAgIF9rZXkgPCBfbGVuO1xuICAgICAgICAgIF9rZXkrK1xuICAgICAgICApIHtcbiAgICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVzZXIgaXMgdHJ5aW5nIHRvIGJpbmQoKSBhbiBhdXRvYm91bmQgbWV0aG9kOyB3ZSBlZmZlY3RpdmVseSB3aWxsXG4gICAgICAgIC8vIGlnbm9yZSB0aGUgdmFsdWUgb2YgXCJ0aGlzXCIgdGhhdCB0aGUgdXNlciBpcyB0cnlpbmcgdG8gdXNlLCBzb1xuICAgICAgICAvLyBsZXQncyB3YXJuLlxuICAgICAgICBpZiAobmV3VGhpcyAhPT0gY29tcG9uZW50ICYmIG5ld1RoaXMgIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgd2FybmluZyhcbiAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICdiaW5kKCk6IFJlYWN0IGNvbXBvbmVudCBtZXRob2RzIG1heSBvbmx5IGJlIGJvdW5kIHRvIHRoZSAnICtcbiAgICAgICAgICAgICAgICAnY29tcG9uZW50IGluc3RhbmNlLiBTZWUgJXMnLFxuICAgICAgICAgICAgICBjb21wb25lbnROYW1lXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghYXJncy5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgd2FybmluZyhcbiAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICdiaW5kKCk6IFlvdSBhcmUgYmluZGluZyBhIGNvbXBvbmVudCBtZXRob2QgdG8gdGhlIGNvbXBvbmVudC4gJyArXG4gICAgICAgICAgICAgICAgJ1JlYWN0IGRvZXMgdGhpcyBmb3IgeW91IGF1dG9tYXRpY2FsbHkgaW4gYSBoaWdoLXBlcmZvcm1hbmNlICcgK1xuICAgICAgICAgICAgICAgICd3YXksIHNvIHlvdSBjYW4gc2FmZWx5IHJlbW92ZSB0aGlzIGNhbGwuIFNlZSAlcycsXG4gICAgICAgICAgICAgIGNvbXBvbmVudE5hbWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBib3VuZE1ldGhvZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVib3VuZE1ldGhvZCA9IF9iaW5kLmFwcGx5KGJvdW5kTWV0aG9kLCBhcmd1bWVudHMpO1xuICAgICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZENvbnRleHQgPSBjb21wb25lbnQ7XG4gICAgICAgIHJlYm91bmRNZXRob2QuX19yZWFjdEJvdW5kTWV0aG9kID0gbWV0aG9kO1xuICAgICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZEFyZ3VtZW50cyA9IGFyZ3M7XG4gICAgICAgIHJldHVybiByZWJvdW5kTWV0aG9kO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGJvdW5kTWV0aG9kO1xuICB9XG5cbiAgLyoqXG4gICAqIEJpbmRzIGFsbCBhdXRvLWJvdW5kIG1ldGhvZHMgaW4gYSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb21wb25lbnQgQ29tcG9uZW50IHdob3NlIG1ldGhvZCBpcyBnb2luZyB0byBiZSBib3VuZC5cbiAgICovXG4gIGZ1bmN0aW9uIGJpbmRBdXRvQmluZE1ldGhvZHMoY29tcG9uZW50KSB7XG4gICAgdmFyIHBhaXJzID0gY29tcG9uZW50Ll9fcmVhY3RBdXRvQmluZFBhaXJzO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFpcnMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgIHZhciBhdXRvQmluZEtleSA9IHBhaXJzW2ldO1xuICAgICAgdmFyIG1ldGhvZCA9IHBhaXJzW2kgKyAxXTtcbiAgICAgIGNvbXBvbmVudFthdXRvQmluZEtleV0gPSBiaW5kQXV0b0JpbmRNZXRob2QoY29tcG9uZW50LCBtZXRob2QpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBJc01vdW50ZWRQcmVNaXhpbiA9IHtcbiAgICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLl9faXNNb3VudGVkID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIElzTW91bnRlZFBvc3RNaXhpbiA9IHtcbiAgICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLl9faXNNb3VudGVkID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgbW9yZSB0byB0aGUgUmVhY3RDbGFzcyBiYXNlIGNsYXNzLiBUaGVzZSBhcmUgYWxsIGxlZ2FjeSBmZWF0dXJlcyBhbmRcbiAgICogdGhlcmVmb3JlIG5vdCBhbHJlYWR5IHBhcnQgb2YgdGhlIG1vZGVybiBSZWFjdENvbXBvbmVudC5cbiAgICovXG4gIHZhciBSZWFjdENsYXNzTWl4aW4gPSB7XG4gICAgLyoqXG4gICAgICogVE9ETzogVGhpcyB3aWxsIGJlIGRlcHJlY2F0ZWQgYmVjYXVzZSBzdGF0ZSBzaG91bGQgYWx3YXlzIGtlZXAgYSBjb25zaXN0ZW50XG4gICAgICogdHlwZSBzaWduYXR1cmUgYW5kIHRoZSBvbmx5IHVzZSBjYXNlIGZvciB0aGlzLCBpcyB0byBhdm9pZCB0aGF0LlxuICAgICAqL1xuICAgIHJlcGxhY2VTdGF0ZTogZnVuY3Rpb24obmV3U3RhdGUsIGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZVJlcGxhY2VTdGF0ZSh0aGlzLCBuZXdTdGF0ZSwgY2FsbGJhY2spO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVja3Mgd2hldGhlciBvciBub3QgdGhpcyBjb21wb3NpdGUgY29tcG9uZW50IGlzIG1vdW50ZWQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBtb3VudGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBmaW5hbFxuICAgICAqL1xuICAgIGlzTW91bnRlZDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuaW5nKFxuICAgICAgICAgIHRoaXMuX19kaWRXYXJuSXNNb3VudGVkLFxuICAgICAgICAgICclczogaXNNb3VudGVkIGlzIGRlcHJlY2F0ZWQuIEluc3RlYWQsIG1ha2Ugc3VyZSB0byBjbGVhbiB1cCAnICtcbiAgICAgICAgICAgICdzdWJzY3JpcHRpb25zIGFuZCBwZW5kaW5nIHJlcXVlc3RzIGluIGNvbXBvbmVudFdpbGxVbm1vdW50IHRvICcgK1xuICAgICAgICAgICAgJ3ByZXZlbnQgbWVtb3J5IGxlYWtzLicsXG4gICAgICAgICAgKHRoaXMuY29uc3RydWN0b3IgJiYgdGhpcy5jb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSkgfHxcbiAgICAgICAgICAgIHRoaXMubmFtZSB8fFxuICAgICAgICAgICAgJ0NvbXBvbmVudCdcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fX2RpZFdhcm5Jc01vdW50ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuICEhdGhpcy5fX2lzTW91bnRlZDtcbiAgICB9XG4gIH07XG5cbiAgdmFyIFJlYWN0Q2xhc3NDb21wb25lbnQgPSBmdW5jdGlvbigpIHt9O1xuICBfYXNzaWduKFxuICAgIFJlYWN0Q2xhc3NDb21wb25lbnQucHJvdG90eXBlLFxuICAgIFJlYWN0Q29tcG9uZW50LnByb3RvdHlwZSxcbiAgICBSZWFjdENsYXNzTWl4aW5cbiAgKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNvbXBvc2l0ZSBjb21wb25lbnQgY2xhc3MgZ2l2ZW4gYSBjbGFzcyBzcGVjaWZpY2F0aW9uLlxuICAgKiBTZWUgaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90b3AtbGV2ZWwtYXBpLmh0bWwjcmVhY3QuY3JlYXRlY2xhc3NcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IHNwZWMgQ2xhc3Mgc3BlY2lmaWNhdGlvbiAod2hpY2ggbXVzdCBkZWZpbmUgYHJlbmRlcmApLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbn0gQ29tcG9uZW50IGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBmdW5jdGlvbiBjcmVhdGVDbGFzcyhzcGVjKSB7XG4gICAgLy8gVG8ga2VlcCBvdXIgd2FybmluZ3MgbW9yZSB1bmRlcnN0YW5kYWJsZSwgd2UnbGwgdXNlIGEgbGl0dGxlIGhhY2sgaGVyZSB0b1xuICAgIC8vIGVuc3VyZSB0aGF0IENvbnN0cnVjdG9yLm5hbWUgIT09ICdDb25zdHJ1Y3RvcicuIFRoaXMgbWFrZXMgc3VyZSB3ZSBkb24ndFxuICAgIC8vIHVubmVjZXNzYXJpbHkgaWRlbnRpZnkgYSBjbGFzcyB3aXRob3V0IGRpc3BsYXlOYW1lIGFzICdDb25zdHJ1Y3RvcicuXG4gICAgdmFyIENvbnN0cnVjdG9yID0gaWRlbnRpdHkoZnVuY3Rpb24ocHJvcHMsIGNvbnRleHQsIHVwZGF0ZXIpIHtcbiAgICAgIC8vIFRoaXMgY29uc3RydWN0b3IgZ2V0cyBvdmVycmlkZGVuIGJ5IG1vY2tzLiBUaGUgYXJndW1lbnQgaXMgdXNlZFxuICAgICAgLy8gYnkgbW9ja3MgdG8gYXNzZXJ0IG9uIHdoYXQgZ2V0cyBtb3VudGVkLlxuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuaW5nKFxuICAgICAgICAgIHRoaXMgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcixcbiAgICAgICAgICAnU29tZXRoaW5nIGlzIGNhbGxpbmcgYSBSZWFjdCBjb21wb25lbnQgZGlyZWN0bHkuIFVzZSBhIGZhY3Rvcnkgb3IgJyArXG4gICAgICAgICAgICAnSlNYIGluc3RlYWQuIFNlZTogaHR0cHM6Ly9mYi5tZS9yZWFjdC1sZWdhY3lmYWN0b3J5J1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBXaXJlIHVwIGF1dG8tYmluZGluZ1xuICAgICAgaWYgKHRoaXMuX19yZWFjdEF1dG9CaW5kUGFpcnMubGVuZ3RoKSB7XG4gICAgICAgIGJpbmRBdXRvQmluZE1ldGhvZHModGhpcyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICB0aGlzLnJlZnMgPSBlbXB0eU9iamVjdDtcbiAgICAgIHRoaXMudXBkYXRlciA9IHVwZGF0ZXIgfHwgUmVhY3ROb29wVXBkYXRlUXVldWU7XG5cbiAgICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuXG4gICAgICAvLyBSZWFjdENsYXNzZXMgZG9lc24ndCBoYXZlIGNvbnN0cnVjdG9ycy4gSW5zdGVhZCwgdGhleSB1c2UgdGhlXG4gICAgICAvLyBnZXRJbml0aWFsU3RhdGUgYW5kIGNvbXBvbmVudFdpbGxNb3VudCBtZXRob2RzIGZvciBpbml0aWFsaXphdGlvbi5cblxuICAgICAgdmFyIGluaXRpYWxTdGF0ZSA9IHRoaXMuZ2V0SW5pdGlhbFN0YXRlID8gdGhpcy5nZXRJbml0aWFsU3RhdGUoKSA6IG51bGw7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAvLyBXZSBhbGxvdyBhdXRvLW1vY2tzIHRvIHByb2NlZWQgYXMgaWYgdGhleSdyZSByZXR1cm5pbmcgbnVsbC5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGluaXRpYWxTdGF0ZSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgdGhpcy5nZXRJbml0aWFsU3RhdGUuX2lzTW9ja0Z1bmN0aW9uXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIFRoaXMgaXMgcHJvYmFibHkgYmFkIHByYWN0aWNlLiBDb25zaWRlciB3YXJuaW5nIGhlcmUgYW5kXG4gICAgICAgICAgLy8gZGVwcmVjYXRpbmcgdGhpcyBjb252ZW5pZW5jZS5cbiAgICAgICAgICBpbml0aWFsU3RhdGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBfaW52YXJpYW50KFxuICAgICAgICB0eXBlb2YgaW5pdGlhbFN0YXRlID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShpbml0aWFsU3RhdGUpLFxuICAgICAgICAnJXMuZ2V0SW5pdGlhbFN0YXRlKCk6IG11c3QgcmV0dXJuIGFuIG9iamVjdCBvciBudWxsJyxcbiAgICAgICAgQ29uc3RydWN0b3IuZGlzcGxheU5hbWUgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50J1xuICAgICAgKTtcblxuICAgICAgdGhpcy5zdGF0ZSA9IGluaXRpYWxTdGF0ZTtcbiAgICB9KTtcbiAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBuZXcgUmVhY3RDbGFzc0NvbXBvbmVudCgpO1xuICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZS5fX3JlYWN0QXV0b0JpbmRQYWlycyA9IFtdO1xuXG4gICAgaW5qZWN0ZWRNaXhpbnMuZm9yRWFjaChtaXhTcGVjSW50b0NvbXBvbmVudC5iaW5kKG51bGwsIENvbnN0cnVjdG9yKSk7XG5cbiAgICBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3RvciwgSXNNb3VudGVkUHJlTWl4aW4pO1xuICAgIG1peFNwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBzcGVjKTtcbiAgICBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3RvciwgSXNNb3VudGVkUG9zdE1peGluKTtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIGRlZmF1bHRQcm9wcyBwcm9wZXJ0eSBhZnRlciBhbGwgbWl4aW5zIGhhdmUgYmVlbiBtZXJnZWQuXG4gICAgaWYgKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcykge1xuICAgICAgQ29uc3RydWN0b3IuZGVmYXVsdFByb3BzID0gQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzKCk7XG4gICAgfVxuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFRoaXMgaXMgYSB0YWcgdG8gaW5kaWNhdGUgdGhhdCB0aGUgdXNlIG9mIHRoZXNlIG1ldGhvZCBuYW1lcyBpcyBvayxcbiAgICAgIC8vIHNpbmNlIGl0J3MgdXNlZCB3aXRoIGNyZWF0ZUNsYXNzLiBJZiBpdCdzIG5vdCwgdGhlbiBpdCdzIGxpa2VseSBhXG4gICAgICAvLyBtaXN0YWtlIHNvIHdlJ2xsIHdhcm4geW91IHRvIHVzZSB0aGUgc3RhdGljIHByb3BlcnR5LCBwcm9wZXJ0eVxuICAgICAgLy8gaW5pdGlhbGl6ZXIgb3IgY29uc3RydWN0b3IgcmVzcGVjdGl2ZWx5LlxuICAgICAgaWYgKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcykge1xuICAgICAgICBDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMuaXNSZWFjdENsYXNzQXBwcm92ZWQgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChDb25zdHJ1Y3Rvci5wcm90b3R5cGUuZ2V0SW5pdGlhbFN0YXRlKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRJbml0aWFsU3RhdGUuaXNSZWFjdENsYXNzQXBwcm92ZWQgPSB7fTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfaW52YXJpYW50KFxuICAgICAgQ29uc3RydWN0b3IucHJvdG90eXBlLnJlbmRlcixcbiAgICAgICdjcmVhdGVDbGFzcyguLi4pOiBDbGFzcyBzcGVjaWZpY2F0aW9uIG11c3QgaW1wbGVtZW50IGEgYHJlbmRlcmAgbWV0aG9kLidcbiAgICApO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHdhcm5pbmcoXG4gICAgICAgICFDb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29tcG9uZW50U2hvdWxkVXBkYXRlLFxuICAgICAgICAnJXMgaGFzIGEgbWV0aG9kIGNhbGxlZCAnICtcbiAgICAgICAgICAnY29tcG9uZW50U2hvdWxkVXBkYXRlKCkuIERpZCB5b3UgbWVhbiBzaG91bGRDb21wb25lbnRVcGRhdGUoKT8gJyArXG4gICAgICAgICAgJ1RoZSBuYW1lIGlzIHBocmFzZWQgYXMgYSBxdWVzdGlvbiBiZWNhdXNlIHRoZSBmdW5jdGlvbiBpcyAnICtcbiAgICAgICAgICAnZXhwZWN0ZWQgdG8gcmV0dXJuIGEgdmFsdWUuJyxcbiAgICAgICAgc3BlYy5kaXNwbGF5TmFtZSB8fCAnQSBjb21wb25lbnQnXG4gICAgICApO1xuICAgICAgd2FybmluZyhcbiAgICAgICAgIUNvbnN0cnVjdG9yLnByb3RvdHlwZS5jb21wb25lbnRXaWxsUmVjaWV2ZVByb3BzLFxuICAgICAgICAnJXMgaGFzIGEgbWV0aG9kIGNhbGxlZCAnICtcbiAgICAgICAgICAnY29tcG9uZW50V2lsbFJlY2lldmVQcm9wcygpLiBEaWQgeW91IG1lYW4gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcygpPycsXG4gICAgICAgIHNwZWMuZGlzcGxheU5hbWUgfHwgJ0EgY29tcG9uZW50J1xuICAgICAgKTtcbiAgICAgIHdhcm5pbmcoXG4gICAgICAgICFDb25zdHJ1Y3Rvci5wcm90b3R5cGUuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMsXG4gICAgICAgICclcyBoYXMgYSBtZXRob2QgY2FsbGVkIFVOU0FGRV9jb21wb25lbnRXaWxsUmVjaWV2ZVByb3BzKCkuICcgK1xuICAgICAgICAgICdEaWQgeW91IG1lYW4gVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMoKT8nLFxuICAgICAgICBzcGVjLmRpc3BsYXlOYW1lIHx8ICdBIGNvbXBvbmVudCdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gUmVkdWNlIHRpbWUgc3BlbnQgZG9pbmcgbG9va3VwcyBieSBzZXR0aW5nIHRoZXNlIG9uIHRoZSBwcm90b3R5cGUuXG4gICAgZm9yICh2YXIgbWV0aG9kTmFtZSBpbiBSZWFjdENsYXNzSW50ZXJmYWNlKSB7XG4gICAgICBpZiAoIUNvbnN0cnVjdG9yLnByb3RvdHlwZVttZXRob2ROYW1lXSkge1xuICAgICAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfVxuXG4gIHJldHVybiBjcmVhdGVDbGFzcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/create-react-class/factory.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/create-react-class/index.js":
/*!**************************************************!*\
  !*** ./node_modules/create-react-class/index.js ***!
  \**************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n\n\nvar React = __webpack_require__(/*! react */ \"(app-client)/./node_modules/next/dist/compiled/react/index.js\");\nvar factory = __webpack_require__(/*! ./factory */ \"(app-client)/./node_modules/create-react-class/factory.js\");\n\nif (typeof React === 'undefined') {\n  throw Error(\n    'create-react-class could not find the React object. If you are using script tags, ' +\n      'make sure that React is being loaded before create-react-class.'\n  );\n}\n\n// Hack to grab NoopUpdateQueue from isomorphic React\nvar ReactNoopUpdateQueue = new React.Component().updater;\n\nmodule.exports = factory(\n  React.Component,\n  React.isValidElement,\n  ReactNoopUpdateQueue\n);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFYTs7QUFFYixZQUFZLG1CQUFPLENBQUMsNEVBQU87QUFDM0IsY0FBYyxtQkFBTyxDQUFDLDRFQUFXOztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanM/NzM5NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgZmFjdG9yeSA9IHJlcXVpcmUoJy4vZmFjdG9yeScpO1xuXG5pZiAodHlwZW9mIFJlYWN0ID09PSAndW5kZWZpbmVkJykge1xuICB0aHJvdyBFcnJvcihcbiAgICAnY3JlYXRlLXJlYWN0LWNsYXNzIGNvdWxkIG5vdCBmaW5kIHRoZSBSZWFjdCBvYmplY3QuIElmIHlvdSBhcmUgdXNpbmcgc2NyaXB0IHRhZ3MsICcgK1xuICAgICAgJ21ha2Ugc3VyZSB0aGF0IFJlYWN0IGlzIGJlaW5nIGxvYWRlZCBiZWZvcmUgY3JlYXRlLXJlYWN0LWNsYXNzLidcbiAgKTtcbn1cblxuLy8gSGFjayB0byBncmFiIE5vb3BVcGRhdGVRdWV1ZSBmcm9tIGlzb21vcnBoaWMgUmVhY3RcbnZhciBSZWFjdE5vb3BVcGRhdGVRdWV1ZSA9IG5ldyBSZWFjdC5Db21wb25lbnQoKS51cGRhdGVyO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoXG4gIFJlYWN0LkNvbXBvbmVudCxcbiAgUmVhY3QuaXNWYWxpZEVsZW1lbnQsXG4gIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlXG4pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/create-react-class/index.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/date-now/index.js":
/*!****************************************!*\
  !*** ./node_modules/date-now/index.js ***!
  \****************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("module.exports = Date.now || now\n\nfunction now() {\n    return new Date().getTime()\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL2RhdGUtbm93L2luZGV4LmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvZGF0ZS1ub3cvaW5kZXguanM/ODBjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IERhdGUubm93IHx8IG5vd1xuXG5mdW5jdGlvbiBub3coKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/date-now/index.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/debounce/index.js":
/*!****************************************!*\
  !*** ./node_modules/debounce/index.js ***!
  \****************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("\n/**\n * Module dependencies.\n */\n\nvar now = __webpack_require__(/*! date-now */ \"(app-client)/./node_modules/date-now/index.js\");\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = now() - timestamp;\n\n    if (last < wait && last > 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      }\n    }\n  };\n\n  return function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL2RlYm91bmNlL2luZGV4LmpzLmpzIiwibWFwcGluZ3MiOiI7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsVUFBVSxtQkFBTyxDQUFDLCtEQUFVOztBQUU1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsUUFBUTtBQUNuQixXQUFXLFNBQVM7QUFDcEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvZGVib3VuY2UvaW5kZXguanM/MjJlYSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgbm93ID0gcmVxdWlyZSgnZGF0ZS1ub3cnKTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90XG4gKiBiZSB0cmlnZ2VyZWQuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZnRlciBpdCBzdG9wcyBiZWluZyBjYWxsZWQgZm9yXG4gKiBOIG1pbGxpc2Vjb25kcy4gSWYgYGltbWVkaWF0ZWAgaXMgcGFzc2VkLCB0cmlnZ2VyIHRoZSBmdW5jdGlvbiBvbiB0aGVcbiAqIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuXG4gKlxuICogQHNvdXJjZSB1bmRlcnNjb3JlLmpzXG4gKiBAc2VlIGh0dHA6Ly91bnNjcmlwdGFibGUuY29tLzIwMDkvMDMvMjAvZGVib3VuY2luZy1qYXZhc2NyaXB0LW1ldGhvZHMvXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jdGlvbiB0byB3cmFwXG4gKiBAcGFyYW0ge051bWJlcn0gdGltZW91dCBpbiBtcyAoYDEwMGApXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHdoZXRoZXIgdG8gZXhlY3V0ZSBhdCB0aGUgYmVnaW5uaW5nIChgZmFsc2VgKVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSl7XG4gIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcbiAgaWYgKG51bGwgPT0gd2FpdCkgd2FpdCA9IDEwMDtcblxuICBmdW5jdGlvbiBsYXRlcigpIHtcbiAgICB2YXIgbGFzdCA9IG5vdygpIC0gdGltZXN0YW1wO1xuXG4gICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPiAwKSB7XG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgIGNvbnRleHQgPSB0aGlzO1xuICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdGltZXN0YW1wID0gbm93KCk7XG4gICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgaWYgKCF0aW1lb3V0KSB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgaWYgKGNhbGxOb3cpIHtcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/debounce/index.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/hashlru/index.js":
/*!***************************************!*\
  !*** ./node_modules/hashlru/index.js ***!
  \***************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("module.exports = function (max) {\n\n  if (!max) throw Error('hashlru must have a max value, of type number, greater than 0')\n\n  var size = 0, cache = Object.create(null), _cache = Object.create(null)\n\n  function update (key, value) {\n    cache[key] = value\n    size ++\n    if(size >= max) {\n      size = 0\n      _cache = cache\n      cache = Object.create(null)\n    }\n  }\n\n  return {\n    has: function (key) {\n      return cache[key] !== undefined || _cache[key] !== undefined\n    },\n    remove: function (key) {\n      if(cache[key] !== undefined)\n        cache[key] = undefined\n      if(_cache[key] !== undefined)\n        _cache[key] = undefined\n    },\n    get: function (key) {\n      var v = cache[key]\n      if(v !== undefined) return v\n      if((v = _cache[key]) !== undefined) {\n        update(key, v)\n        return v\n      }\n    },\n    set: function (key, value) {\n      if(cache[key] !== undefined) cache[key] = value\n      else update(key, value)\n    },\n    clear: function () {\n      cache = Object.create(null)\n      _cache = Object.create(null)\n    }\n  }\n}\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL2hhc2hscnUvaW5kZXguanMuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2hhc2hscnUvaW5kZXguanM/YzU0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChtYXgpIHtcblxuICBpZiAoIW1heCkgdGhyb3cgRXJyb3IoJ2hhc2hscnUgbXVzdCBoYXZlIGEgbWF4IHZhbHVlLCBvZiB0eXBlIG51bWJlciwgZ3JlYXRlciB0aGFuIDAnKVxuXG4gIHZhciBzaXplID0gMCwgY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpLCBfY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpXG5cbiAgZnVuY3Rpb24gdXBkYXRlIChrZXksIHZhbHVlKSB7XG4gICAgY2FjaGVba2V5XSA9IHZhbHVlXG4gICAgc2l6ZSArK1xuICAgIGlmKHNpemUgPj0gbWF4KSB7XG4gICAgICBzaXplID0gMFxuICAgICAgX2NhY2hlID0gY2FjaGVcbiAgICAgIGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaGFzOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4gY2FjaGVba2V5XSAhPT0gdW5kZWZpbmVkIHx8IF9jYWNoZVtrZXldICE9PSB1bmRlZmluZWRcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gKGtleSkge1xuICAgICAgaWYoY2FjaGVba2V5XSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICBjYWNoZVtrZXldID0gdW5kZWZpbmVkXG4gICAgICBpZihfY2FjaGVba2V5XSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICBfY2FjaGVba2V5XSA9IHVuZGVmaW5lZFxuICAgIH0sXG4gICAgZ2V0OiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICB2YXIgdiA9IGNhY2hlW2tleV1cbiAgICAgIGlmKHYgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHZcbiAgICAgIGlmKCh2ID0gX2NhY2hlW2tleV0pICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdXBkYXRlKGtleSwgdilcbiAgICAgICAgcmV0dXJuIHZcbiAgICAgIH1cbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgIGlmKGNhY2hlW2tleV0gIT09IHVuZGVmaW5lZCkgY2FjaGVba2V5XSA9IHZhbHVlXG4gICAgICBlbHNlIHVwZGF0ZShrZXksIHZhbHVlKVxuICAgIH0sXG4gICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuICAgICAgX2NhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuICAgIH1cbiAgfVxufVxuXG5cblxuXG5cblxuXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/hashlru/index.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/md5-o-matic/lib/md5omatic.js":
/*!***************************************************!*\
  !*** ./node_modules/md5-o-matic/lib/md5omatic.js ***!
  \***************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\n\n/**\n * Expose `md5omatic(str)`.\n */\n \nmodule.exports = md5omatic;\n\n/**\n * Hash any string using message digest.\n *\n * @param {String} str\n * @return {String}\n * @api public\n */\n \nfunction md5omatic(str) {\n    var x = str2blks_MD5(str);\n    var a =  1732584193;\n    var b = -271733879;\n    var c = -1732584194;\n    var d =  271733878;\n\n    for(var i=0; i<x.length; i += 16)\n    {\n        var olda = a;\n        var oldb = b;\n        var oldc = c;\n        var oldd = d;\n\n        a = ff(a, b, c, d, x[i+ 0], 7 , -680876936);\n        d = ff(d, a, b, c, x[i+ 1], 12, -389564586);\n        c = ff(c, d, a, b, x[i+ 2], 17,  606105819);\n        b = ff(b, c, d, a, x[i+ 3], 22, -1044525330);\n        a = ff(a, b, c, d, x[i+ 4], 7 , -176418897);\n        d = ff(d, a, b, c, x[i+ 5], 12,  1200080426);\n        c = ff(c, d, a, b, x[i+ 6], 17, -1473231341);\n        b = ff(b, c, d, a, x[i+ 7], 22, -45705983);\n        a = ff(a, b, c, d, x[i+ 8], 7 ,  1770035416);\n        d = ff(d, a, b, c, x[i+ 9], 12, -1958414417);\n        c = ff(c, d, a, b, x[i+10], 17, -42063);\n        b = ff(b, c, d, a, x[i+11], 22, -1990404162);\n        a = ff(a, b, c, d, x[i+12], 7 ,  1804603682);\n        d = ff(d, a, b, c, x[i+13], 12, -40341101);\n        c = ff(c, d, a, b, x[i+14], 17, -1502002290);\n        b = ff(b, c, d, a, x[i+15], 22,  1236535329);\n        a = gg(a, b, c, d, x[i+ 1], 5 , -165796510);\n        d = gg(d, a, b, c, x[i+ 6], 9 , -1069501632);\n        c = gg(c, d, a, b, x[i+11], 14,  643717713);\n        b = gg(b, c, d, a, x[i+ 0], 20, -373897302);\n        a = gg(a, b, c, d, x[i+ 5], 5 , -701558691);\n        d = gg(d, a, b, c, x[i+10], 9 ,  38016083);\n        c = gg(c, d, a, b, x[i+15], 14, -660478335);\n        b = gg(b, c, d, a, x[i+ 4], 20, -405537848);\n        a = gg(a, b, c, d, x[i+ 9], 5 ,  568446438);\n        d = gg(d, a, b, c, x[i+14], 9 , -1019803690);\n        c = gg(c, d, a, b, x[i+ 3], 14, -187363961);\n        b = gg(b, c, d, a, x[i+ 8], 20,  1163531501);\n        a = gg(a, b, c, d, x[i+13], 5 , -1444681467);\n        d = gg(d, a, b, c, x[i+ 2], 9 , -51403784);\n        c = gg(c, d, a, b, x[i+ 7], 14,  1735328473);\n        b = gg(b, c, d, a, x[i+12], 20, -1926607734);\n        a = hh(a, b, c, d, x[i+ 5], 4 , -378558);\n        d = hh(d, a, b, c, x[i+ 8], 11, -2022574463);\n        c = hh(c, d, a, b, x[i+11], 16,  1839030562);\n        b = hh(b, c, d, a, x[i+14], 23, -35309556);\n        a = hh(a, b, c, d, x[i+ 1], 4 , -1530992060);\n        d = hh(d, a, b, c, x[i+ 4], 11,  1272893353);\n        c = hh(c, d, a, b, x[i+ 7], 16, -155497632);\n        b = hh(b, c, d, a, x[i+10], 23, -1094730640);\n        a = hh(a, b, c, d, x[i+13], 4 ,  681279174);\n        d = hh(d, a, b, c, x[i+ 0], 11, -358537222);\n        c = hh(c, d, a, b, x[i+ 3], 16, -722521979);\n        b = hh(b, c, d, a, x[i+ 6], 23,  76029189);\n        a = hh(a, b, c, d, x[i+ 9], 4 , -640364487);\n        d = hh(d, a, b, c, x[i+12], 11, -421815835);\n        c = hh(c, d, a, b, x[i+15], 16,  530742520);\n        b = hh(b, c, d, a, x[i+ 2], 23, -995338651);\n        a = ii(a, b, c, d, x[i+ 0], 6 , -198630844);\n        d = ii(d, a, b, c, x[i+ 7], 10,  1126891415);\n        c = ii(c, d, a, b, x[i+14], 15, -1416354905);\n        b = ii(b, c, d, a, x[i+ 5], 21, -57434055);\n        a = ii(a, b, c, d, x[i+12], 6 ,  1700485571);\n        d = ii(d, a, b, c, x[i+ 3], 10, -1894986606);\n        c = ii(c, d, a, b, x[i+10], 15, -1051523);\n        b = ii(b, c, d, a, x[i+ 1], 21, -2054922799);\n        a = ii(a, b, c, d, x[i+ 8], 6 ,  1873313359);\n        d = ii(d, a, b, c, x[i+15], 10, -30611744);\n        c = ii(c, d, a, b, x[i+ 6], 15, -1560198380);\n        b = ii(b, c, d, a, x[i+13], 21,  1309151649);\n        a = ii(a, b, c, d, x[i+ 4], 6 , -145523070);\n        d = ii(d, a, b, c, x[i+11], 10, -1120210379);\n        c = ii(c, d, a, b, x[i+ 2], 15,  718787259);\n        b = ii(b, c, d, a, x[i+ 9], 21, -343485551);\n\n        a = addme(a, olda);\n        b = addme(b, oldb);\n        c = addme(c, oldc);\n        d = addme(d, oldd);\n    }\n\n    return rhex(a) + rhex(b) + rhex(c) + rhex(d);\n};\n\nvar hex_chr = \"0123456789abcdef\";\n\nfunction bitOR(a, b)\n{\n    var lsb = (a & 0x1) | (b & 0x1);\n    var msb31 = (a >>> 1) | (b >>> 1);\n\n    return (msb31 << 1) | lsb;\n}\n\nfunction bitXOR(a, b)\n{\n    var lsb = (a & 0x1) ^ (b & 0x1);\n    var msb31 = (a >>> 1) ^ (b >>> 1);\n\n    return (msb31 << 1) | lsb;\n}\n\nfunction bitAND(a, b)\n{\n    var lsb = (a & 0x1) & (b & 0x1);\n    var msb31 = (a >>> 1) & (b >>> 1);\n\n    return (msb31 << 1) | lsb;\n}\n\nfunction addme(x, y)\n{\n    var lsw = (x & 0xFFFF)+(y & 0xFFFF);\n    var msw = (x >> 16)+(y >> 16)+(lsw >> 16);\n\n    return (msw << 16) | (lsw & 0xFFFF);\n}\n\nfunction rhex(num)\n{\n    var str = \"\";\n    var j;\n\n    for(j=0; j<=3; j++)\n        str += hex_chr.charAt((num >> (j * 8 + 4)) & 0x0F) + hex_chr.charAt((num >> (j * 8)) & 0x0F);\n\n    return str;\n}\n\nfunction str2blks_MD5(str)\n{\n    var nblk = ((str.length + 8) >> 6) + 1;\n    var blks = new Array(nblk * 16);\n    var i;\n\n    for(i=0; i<nblk * 16; i++)\n        blks[i] = 0;\n\n    for(i=0; i<str.length; i++)\n        blks[i >> 2] |= str.charCodeAt(i) << (((str.length * 8 + i) % 4) * 8);\n\n    blks[i >> 2] |= 0x80 << (((str.length * 8 + i) % 4) * 8);\n\n    var l = str.length * 8;\n    blks[nblk * 16 - 2] = (l & 0xFF);\n    blks[nblk * 16 - 2] |= ((l >>> 8) & 0xFF) << 8;\n    blks[nblk * 16 - 2] |= ((l >>> 16) & 0xFF) << 16;\n    blks[nblk * 16 - 2] |= ((l >>> 24) & 0xFF) << 24;\n\n    return blks;\n}\n\nfunction rol(num, cnt)\n{\n    return (num << cnt) | (num >>> (32 - cnt));\n}\n\nfunction cmn(q, a, b, x, s, t)\n{\n    return addme(rol((addme(addme(a, q), addme(x, t))), s), b);\n}\n\nfunction ff(a, b, c, d, x, s, t)\n{\n    return cmn(bitOR(bitAND(b, c), bitAND((~b), d)), a, b, x, s, t);\n}\n\nfunction gg(a, b, c, d, x, s, t)\n{\n    return cmn(bitOR(bitAND(b, d), bitAND(c, (~d))), a, b, x, s, t);\n}\n\nfunction hh(a, b, c, d, x, s, t)\n{\n    return cmn(bitXOR(bitXOR(b, c), d), a, b, x, s, t);\n}\n\nfunction ii(a, b, c, d, x, s, t)\n{\n    return cmn(bitXOR(c, bitOR(b, (~d))), a, b, x, s, t);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL21kNS1vLW1hdGljL2xpYi9tZDVvbWF0aWMuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsWUFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGFBQWEsTUFBTTtBQUNuQjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsYUFBYSxhQUFhO0FBQzFCOztBQUVBLGFBQWEsY0FBYztBQUMzQjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL21kNS1vLW1hdGljL2xpYi9tZDVvbWF0aWMuanM/NjEwMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBFeHBvc2UgYG1kNW9tYXRpYyhzdHIpYC5cbiAqL1xuIFxubW9kdWxlLmV4cG9ydHMgPSBtZDVvbWF0aWM7XG5cbi8qKlxuICogSGFzaCBhbnkgc3RyaW5nIHVzaW5nIG1lc3NhZ2UgZGlnZXN0LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cbiBcbmZ1bmN0aW9uIG1kNW9tYXRpYyhzdHIpIHtcbiAgICB2YXIgeCA9IHN0cjJibGtzX01ENShzdHIpO1xuICAgIHZhciBhID0gIDE3MzI1ODQxOTM7XG4gICAgdmFyIGIgPSAtMjcxNzMzODc5O1xuICAgIHZhciBjID0gLTE3MzI1ODQxOTQ7XG4gICAgdmFyIGQgPSAgMjcxNzMzODc4O1xuXG4gICAgZm9yKHZhciBpPTA7IGk8eC5sZW5ndGg7IGkgKz0gMTYpXG4gICAge1xuICAgICAgICB2YXIgb2xkYSA9IGE7XG4gICAgICAgIHZhciBvbGRiID0gYjtcbiAgICAgICAgdmFyIG9sZGMgPSBjO1xuICAgICAgICB2YXIgb2xkZCA9IGQ7XG5cbiAgICAgICAgYSA9IGZmKGEsIGIsIGMsIGQsIHhbaSsgMF0sIDcgLCAtNjgwODc2OTM2KTtcbiAgICAgICAgZCA9IGZmKGQsIGEsIGIsIGMsIHhbaSsgMV0sIDEyLCAtMzg5NTY0NTg2KTtcbiAgICAgICAgYyA9IGZmKGMsIGQsIGEsIGIsIHhbaSsgMl0sIDE3LCAgNjA2MTA1ODE5KTtcbiAgICAgICAgYiA9IGZmKGIsIGMsIGQsIGEsIHhbaSsgM10sIDIyLCAtMTA0NDUyNTMzMCk7XG4gICAgICAgIGEgPSBmZihhLCBiLCBjLCBkLCB4W2krIDRdLCA3ICwgLTE3NjQxODg5Nyk7XG4gICAgICAgIGQgPSBmZihkLCBhLCBiLCBjLCB4W2krIDVdLCAxMiwgIDEyMDAwODA0MjYpO1xuICAgICAgICBjID0gZmYoYywgZCwgYSwgYiwgeFtpKyA2XSwgMTcsIC0xNDczMjMxMzQxKTtcbiAgICAgICAgYiA9IGZmKGIsIGMsIGQsIGEsIHhbaSsgN10sIDIyLCAtNDU3MDU5ODMpO1xuICAgICAgICBhID0gZmYoYSwgYiwgYywgZCwgeFtpKyA4XSwgNyAsICAxNzcwMDM1NDE2KTtcbiAgICAgICAgZCA9IGZmKGQsIGEsIGIsIGMsIHhbaSsgOV0sIDEyLCAtMTk1ODQxNDQxNyk7XG4gICAgICAgIGMgPSBmZihjLCBkLCBhLCBiLCB4W2krMTBdLCAxNywgLTQyMDYzKTtcbiAgICAgICAgYiA9IGZmKGIsIGMsIGQsIGEsIHhbaSsxMV0sIDIyLCAtMTk5MDQwNDE2Mik7XG4gICAgICAgIGEgPSBmZihhLCBiLCBjLCBkLCB4W2krMTJdLCA3ICwgIDE4MDQ2MDM2ODIpO1xuICAgICAgICBkID0gZmYoZCwgYSwgYiwgYywgeFtpKzEzXSwgMTIsIC00MDM0MTEwMSk7XG4gICAgICAgIGMgPSBmZihjLCBkLCBhLCBiLCB4W2krMTRdLCAxNywgLTE1MDIwMDIyOTApO1xuICAgICAgICBiID0gZmYoYiwgYywgZCwgYSwgeFtpKzE1XSwgMjIsICAxMjM2NTM1MzI5KTtcbiAgICAgICAgYSA9IGdnKGEsIGIsIGMsIGQsIHhbaSsgMV0sIDUgLCAtMTY1Nzk2NTEwKTtcbiAgICAgICAgZCA9IGdnKGQsIGEsIGIsIGMsIHhbaSsgNl0sIDkgLCAtMTA2OTUwMTYzMik7XG4gICAgICAgIGMgPSBnZyhjLCBkLCBhLCBiLCB4W2krMTFdLCAxNCwgIDY0MzcxNzcxMyk7XG4gICAgICAgIGIgPSBnZyhiLCBjLCBkLCBhLCB4W2krIDBdLCAyMCwgLTM3Mzg5NzMwMik7XG4gICAgICAgIGEgPSBnZyhhLCBiLCBjLCBkLCB4W2krIDVdLCA1ICwgLTcwMTU1ODY5MSk7XG4gICAgICAgIGQgPSBnZyhkLCBhLCBiLCBjLCB4W2krMTBdLCA5ICwgIDM4MDE2MDgzKTtcbiAgICAgICAgYyA9IGdnKGMsIGQsIGEsIGIsIHhbaSsxNV0sIDE0LCAtNjYwNDc4MzM1KTtcbiAgICAgICAgYiA9IGdnKGIsIGMsIGQsIGEsIHhbaSsgNF0sIDIwLCAtNDA1NTM3ODQ4KTtcbiAgICAgICAgYSA9IGdnKGEsIGIsIGMsIGQsIHhbaSsgOV0sIDUgLCAgNTY4NDQ2NDM4KTtcbiAgICAgICAgZCA9IGdnKGQsIGEsIGIsIGMsIHhbaSsxNF0sIDkgLCAtMTAxOTgwMzY5MCk7XG4gICAgICAgIGMgPSBnZyhjLCBkLCBhLCBiLCB4W2krIDNdLCAxNCwgLTE4NzM2Mzk2MSk7XG4gICAgICAgIGIgPSBnZyhiLCBjLCBkLCBhLCB4W2krIDhdLCAyMCwgIDExNjM1MzE1MDEpO1xuICAgICAgICBhID0gZ2coYSwgYiwgYywgZCwgeFtpKzEzXSwgNSAsIC0xNDQ0NjgxNDY3KTtcbiAgICAgICAgZCA9IGdnKGQsIGEsIGIsIGMsIHhbaSsgMl0sIDkgLCAtNTE0MDM3ODQpO1xuICAgICAgICBjID0gZ2coYywgZCwgYSwgYiwgeFtpKyA3XSwgMTQsICAxNzM1MzI4NDczKTtcbiAgICAgICAgYiA9IGdnKGIsIGMsIGQsIGEsIHhbaSsxMl0sIDIwLCAtMTkyNjYwNzczNCk7XG4gICAgICAgIGEgPSBoaChhLCBiLCBjLCBkLCB4W2krIDVdLCA0ICwgLTM3ODU1OCk7XG4gICAgICAgIGQgPSBoaChkLCBhLCBiLCBjLCB4W2krIDhdLCAxMSwgLTIwMjI1NzQ0NjMpO1xuICAgICAgICBjID0gaGgoYywgZCwgYSwgYiwgeFtpKzExXSwgMTYsICAxODM5MDMwNTYyKTtcbiAgICAgICAgYiA9IGhoKGIsIGMsIGQsIGEsIHhbaSsxNF0sIDIzLCAtMzUzMDk1NTYpO1xuICAgICAgICBhID0gaGgoYSwgYiwgYywgZCwgeFtpKyAxXSwgNCAsIC0xNTMwOTkyMDYwKTtcbiAgICAgICAgZCA9IGhoKGQsIGEsIGIsIGMsIHhbaSsgNF0sIDExLCAgMTI3Mjg5MzM1Myk7XG4gICAgICAgIGMgPSBoaChjLCBkLCBhLCBiLCB4W2krIDddLCAxNiwgLTE1NTQ5NzYzMik7XG4gICAgICAgIGIgPSBoaChiLCBjLCBkLCBhLCB4W2krMTBdLCAyMywgLTEwOTQ3MzA2NDApO1xuICAgICAgICBhID0gaGgoYSwgYiwgYywgZCwgeFtpKzEzXSwgNCAsICA2ODEyNzkxNzQpO1xuICAgICAgICBkID0gaGgoZCwgYSwgYiwgYywgeFtpKyAwXSwgMTEsIC0zNTg1MzcyMjIpO1xuICAgICAgICBjID0gaGgoYywgZCwgYSwgYiwgeFtpKyAzXSwgMTYsIC03MjI1MjE5NzkpO1xuICAgICAgICBiID0gaGgoYiwgYywgZCwgYSwgeFtpKyA2XSwgMjMsICA3NjAyOTE4OSk7XG4gICAgICAgIGEgPSBoaChhLCBiLCBjLCBkLCB4W2krIDldLCA0ICwgLTY0MDM2NDQ4Nyk7XG4gICAgICAgIGQgPSBoaChkLCBhLCBiLCBjLCB4W2krMTJdLCAxMSwgLTQyMTgxNTgzNSk7XG4gICAgICAgIGMgPSBoaChjLCBkLCBhLCBiLCB4W2krMTVdLCAxNiwgIDUzMDc0MjUyMCk7XG4gICAgICAgIGIgPSBoaChiLCBjLCBkLCBhLCB4W2krIDJdLCAyMywgLTk5NTMzODY1MSk7XG4gICAgICAgIGEgPSBpaShhLCBiLCBjLCBkLCB4W2krIDBdLCA2ICwgLTE5ODYzMDg0NCk7XG4gICAgICAgIGQgPSBpaShkLCBhLCBiLCBjLCB4W2krIDddLCAxMCwgIDExMjY4OTE0MTUpO1xuICAgICAgICBjID0gaWkoYywgZCwgYSwgYiwgeFtpKzE0XSwgMTUsIC0xNDE2MzU0OTA1KTtcbiAgICAgICAgYiA9IGlpKGIsIGMsIGQsIGEsIHhbaSsgNV0sIDIxLCAtNTc0MzQwNTUpO1xuICAgICAgICBhID0gaWkoYSwgYiwgYywgZCwgeFtpKzEyXSwgNiAsICAxNzAwNDg1NTcxKTtcbiAgICAgICAgZCA9IGlpKGQsIGEsIGIsIGMsIHhbaSsgM10sIDEwLCAtMTg5NDk4NjYwNik7XG4gICAgICAgIGMgPSBpaShjLCBkLCBhLCBiLCB4W2krMTBdLCAxNSwgLTEwNTE1MjMpO1xuICAgICAgICBiID0gaWkoYiwgYywgZCwgYSwgeFtpKyAxXSwgMjEsIC0yMDU0OTIyNzk5KTtcbiAgICAgICAgYSA9IGlpKGEsIGIsIGMsIGQsIHhbaSsgOF0sIDYgLCAgMTg3MzMxMzM1OSk7XG4gICAgICAgIGQgPSBpaShkLCBhLCBiLCBjLCB4W2krMTVdLCAxMCwgLTMwNjExNzQ0KTtcbiAgICAgICAgYyA9IGlpKGMsIGQsIGEsIGIsIHhbaSsgNl0sIDE1LCAtMTU2MDE5ODM4MCk7XG4gICAgICAgIGIgPSBpaShiLCBjLCBkLCBhLCB4W2krMTNdLCAyMSwgIDEzMDkxNTE2NDkpO1xuICAgICAgICBhID0gaWkoYSwgYiwgYywgZCwgeFtpKyA0XSwgNiAsIC0xNDU1MjMwNzApO1xuICAgICAgICBkID0gaWkoZCwgYSwgYiwgYywgeFtpKzExXSwgMTAsIC0xMTIwMjEwMzc5KTtcbiAgICAgICAgYyA9IGlpKGMsIGQsIGEsIGIsIHhbaSsgMl0sIDE1LCAgNzE4Nzg3MjU5KTtcbiAgICAgICAgYiA9IGlpKGIsIGMsIGQsIGEsIHhbaSsgOV0sIDIxLCAtMzQzNDg1NTUxKTtcblxuICAgICAgICBhID0gYWRkbWUoYSwgb2xkYSk7XG4gICAgICAgIGIgPSBhZGRtZShiLCBvbGRiKTtcbiAgICAgICAgYyA9IGFkZG1lKGMsIG9sZGMpO1xuICAgICAgICBkID0gYWRkbWUoZCwgb2xkZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJoZXgoYSkgKyByaGV4KGIpICsgcmhleChjKSArIHJoZXgoZCk7XG59O1xuXG52YXIgaGV4X2NociA9IFwiMDEyMzQ1Njc4OWFiY2RlZlwiO1xuXG5mdW5jdGlvbiBiaXRPUihhLCBiKVxue1xuICAgIHZhciBsc2IgPSAoYSAmIDB4MSkgfCAoYiAmIDB4MSk7XG4gICAgdmFyIG1zYjMxID0gKGEgPj4+IDEpIHwgKGIgPj4+IDEpO1xuXG4gICAgcmV0dXJuIChtc2IzMSA8PCAxKSB8IGxzYjtcbn1cblxuZnVuY3Rpb24gYml0WE9SKGEsIGIpXG57XG4gICAgdmFyIGxzYiA9IChhICYgMHgxKSBeIChiICYgMHgxKTtcbiAgICB2YXIgbXNiMzEgPSAoYSA+Pj4gMSkgXiAoYiA+Pj4gMSk7XG5cbiAgICByZXR1cm4gKG1zYjMxIDw8IDEpIHwgbHNiO1xufVxuXG5mdW5jdGlvbiBiaXRBTkQoYSwgYilcbntcbiAgICB2YXIgbHNiID0gKGEgJiAweDEpICYgKGIgJiAweDEpO1xuICAgIHZhciBtc2IzMSA9IChhID4+PiAxKSAmIChiID4+PiAxKTtcblxuICAgIHJldHVybiAobXNiMzEgPDwgMSkgfCBsc2I7XG59XG5cbmZ1bmN0aW9uIGFkZG1lKHgsIHkpXG57XG4gICAgdmFyIGxzdyA9ICh4ICYgMHhGRkZGKSsoeSAmIDB4RkZGRik7XG4gICAgdmFyIG1zdyA9ICh4ID4+IDE2KSsoeSA+PiAxNikrKGxzdyA+PiAxNik7XG5cbiAgICByZXR1cm4gKG1zdyA8PCAxNikgfCAobHN3ICYgMHhGRkZGKTtcbn1cblxuZnVuY3Rpb24gcmhleChudW0pXG57XG4gICAgdmFyIHN0ciA9IFwiXCI7XG4gICAgdmFyIGo7XG5cbiAgICBmb3Ioaj0wOyBqPD0zOyBqKyspXG4gICAgICAgIHN0ciArPSBoZXhfY2hyLmNoYXJBdCgobnVtID4+IChqICogOCArIDQpKSAmIDB4MEYpICsgaGV4X2Noci5jaGFyQXQoKG51bSA+PiAoaiAqIDgpKSAmIDB4MEYpO1xuXG4gICAgcmV0dXJuIHN0cjtcbn1cblxuZnVuY3Rpb24gc3RyMmJsa3NfTUQ1KHN0cilcbntcbiAgICB2YXIgbmJsayA9ICgoc3RyLmxlbmd0aCArIDgpID4+IDYpICsgMTtcbiAgICB2YXIgYmxrcyA9IG5ldyBBcnJheShuYmxrICogMTYpO1xuICAgIHZhciBpO1xuXG4gICAgZm9yKGk9MDsgaTxuYmxrICogMTY7IGkrKylcbiAgICAgICAgYmxrc1tpXSA9IDA7XG5cbiAgICBmb3IoaT0wOyBpPHN0ci5sZW5ndGg7IGkrKylcbiAgICAgICAgYmxrc1tpID4+IDJdIHw9IHN0ci5jaGFyQ29kZUF0KGkpIDw8ICgoKHN0ci5sZW5ndGggKiA4ICsgaSkgJSA0KSAqIDgpO1xuXG4gICAgYmxrc1tpID4+IDJdIHw9IDB4ODAgPDwgKCgoc3RyLmxlbmd0aCAqIDggKyBpKSAlIDQpICogOCk7XG5cbiAgICB2YXIgbCA9IHN0ci5sZW5ndGggKiA4O1xuICAgIGJsa3NbbmJsayAqIDE2IC0gMl0gPSAobCAmIDB4RkYpO1xuICAgIGJsa3NbbmJsayAqIDE2IC0gMl0gfD0gKChsID4+PiA4KSAmIDB4RkYpIDw8IDg7XG4gICAgYmxrc1tuYmxrICogMTYgLSAyXSB8PSAoKGwgPj4+IDE2KSAmIDB4RkYpIDw8IDE2O1xuICAgIGJsa3NbbmJsayAqIDE2IC0gMl0gfD0gKChsID4+PiAyNCkgJiAweEZGKSA8PCAyNDtcblxuICAgIHJldHVybiBibGtzO1xufVxuXG5mdW5jdGlvbiByb2wobnVtLCBjbnQpXG57XG4gICAgcmV0dXJuIChudW0gPDwgY250KSB8IChudW0gPj4+ICgzMiAtIGNudCkpO1xufVxuXG5mdW5jdGlvbiBjbW4ocSwgYSwgYiwgeCwgcywgdClcbntcbiAgICByZXR1cm4gYWRkbWUocm9sKChhZGRtZShhZGRtZShhLCBxKSwgYWRkbWUoeCwgdCkpKSwgcyksIGIpO1xufVxuXG5mdW5jdGlvbiBmZihhLCBiLCBjLCBkLCB4LCBzLCB0KVxue1xuICAgIHJldHVybiBjbW4oYml0T1IoYml0QU5EKGIsIGMpLCBiaXRBTkQoKH5iKSwgZCkpLCBhLCBiLCB4LCBzLCB0KTtcbn1cblxuZnVuY3Rpb24gZ2coYSwgYiwgYywgZCwgeCwgcywgdClcbntcbiAgICByZXR1cm4gY21uKGJpdE9SKGJpdEFORChiLCBkKSwgYml0QU5EKGMsICh+ZCkpKSwgYSwgYiwgeCwgcywgdCk7XG59XG5cbmZ1bmN0aW9uIGhoKGEsIGIsIGMsIGQsIHgsIHMsIHQpXG57XG4gICAgcmV0dXJuIGNtbihiaXRYT1IoYml0WE9SKGIsIGMpLCBkKSwgYSwgYiwgeCwgcywgdCk7XG59XG5cbmZ1bmN0aW9uIGlpKGEsIGIsIGMsIGQsIHgsIHMsIHQpXG57XG4gICAgcmV0dXJuIGNtbihiaXRYT1IoYywgYml0T1IoYiwgKH5kKSkpLCBhLCBiLCB4LCBzLCB0KTtcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/md5-o-matic/lib/md5omatic.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js":
/*!********************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"pairwise\": function() { return /* binding */ pairwise; }\n/* harmony export */ });\n/* harmony import */ var _util_lift__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/lift */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/util/lift.js\");\n/* harmony import */ var _OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./OperatorSubscriber */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js\");\n\n\nfunction pairwise() {\n    return (0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.operate)(function (source, subscriber) {\n        var prev;\n        var hasPrev = false;\n        source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__.createOperatorSubscriber)(subscriber, function (value) {\n            var p = prev;\n            prev = value;\n            hasPrev && subscriber.next([p, value]);\n            hasPrev = true;\n        }));\n    });\n}\n//# sourceMappingURL=pairwise.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29wZXJhdG9ycy9wYWlyd2lzZS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUM7QUFDeUI7QUFDekQ7QUFDUCxXQUFXLG1EQUFPO0FBQ2xCO0FBQ0E7QUFDQSx5QkFBeUIsNkVBQXdCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvcGFpcndpc2UuanM/MmI0YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBvcGVyYXRlIH0gZnJvbSAnLi4vdXRpbC9saWZ0JztcbmltcG9ydCB7IGNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlciB9IGZyb20gJy4vT3BlcmF0b3JTdWJzY3JpYmVyJztcbmV4cG9ydCBmdW5jdGlvbiBwYWlyd2lzZSgpIHtcbiAgICByZXR1cm4gb3BlcmF0ZShmdW5jdGlvbiAoc291cmNlLCBzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBwcmV2O1xuICAgICAgICB2YXIgaGFzUHJldiA9IGZhbHNlO1xuICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKGNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlcihzdWJzY3JpYmVyLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBwID0gcHJldjtcbiAgICAgICAgICAgIHByZXYgPSB2YWx1ZTtcbiAgICAgICAgICAgIGhhc1ByZXYgJiYgc3Vic2NyaWJlci5uZXh0KFtwLCB2YWx1ZV0pO1xuICAgICAgICAgICAgaGFzUHJldiA9IHRydWU7XG4gICAgICAgIH0pKTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhaXJ3aXNlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js\n"));

/***/ }),

/***/ "(app-client)/./node_modules/sanity/lib/_chunks/index-7415496d.js":
/*!***********************************************************!*\
  !*** ./node_modules/sanity/lib/_chunks/index-7415496d.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Delay\": function() { return /* binding */ Delay; },\n/* harmony export */   \"DocumentPane\": function() { return /* binding */ DocumentPane; },\n/* harmony export */   \"DocumentPaneProvider\": function() { return /* binding */ DocumentPaneProvider; },\n/* harmony export */   \"index\": function() { return /* binding */ index; },\n/* harmony export */   \"useDeskTool\": function() { return /* binding */ useDeskTool; },\n/* harmony export */   \"useDeskToolSetting\": function() { return /* binding */ useDeskToolSetting; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(app-client)/./node_modules/next/dist/compiled/react/jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-client)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _sanity_ui__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @sanity/ui */ \"(app-client)/./node_modules/@sanity/ui/dist/index.esm.js\");\n/* harmony import */ var _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./desk-492f6e5b.js */ \"(app-client)/./node_modules/sanity/lib/_chunks/desk-492f6e5b.js\");\n/* harmony import */ var lodash_omit_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/omit.js */ \"(app-client)/./node_modules/lodash/omit.js\");\n/* harmony import */ var lodash_omit_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_omit_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! rxjs */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/util/isObservable.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! rxjs */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/observable/from.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! rxjs */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! rxjs */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! rxjs */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/observable/concat.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! rxjs */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/observable/never.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! rxjs */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! rxjs */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/observable/merge.js\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! nanoid */ \"(app-client)/./node_modules/nanoid/index.browser.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! rxjs/operators */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/publishReplay.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! rxjs/operators */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/refCount.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! rxjs/operators */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! rxjs/operators */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! rxjs/operators */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/startWith.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! rxjs/operators */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! rxjs/operators */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/scan.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! rxjs/operators */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! rxjs/operators */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/mapTo.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! rxjs/operators */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/delay.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! rxjs/operators */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! rxjs/operators */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/catchError.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! rxjs/operators */ \"(app-client)/./node_modules/rxjs/dist/esm5/internal/operators/tap.js\");\n/* harmony import */ var sanity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sanity */ \"(app-client)/./node_modules/sanity/lib/index.esm.js\");\n/* harmony import */ var _sanity_generate_help_url__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @sanity/generate-help-url */ \"(app-client)/./node_modules/@sanity/generate-help-url/dist/generate-help-url.esm.js\");\n/* harmony import */ var lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash/isEqual.js */ \"(app-client)/./node_modules/lodash/isEqual.js\");\n/* harmony import */ var lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var sanity_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sanity/router */ \"(app-client)/./node_modules/sanity/lib/router.esm.js\");\n/* harmony import */ var _sanity_uuid__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! @sanity/uuid */ \"(app-client)/./node_modules/uuid/dist/esm-browser/v4.js\");\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! styled-components */ \"(app-client)/./node_modules/styled-components/dist/styled-components.browser.esm.js\");\n/* harmony import */ var _sanity_icons__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! @sanity/icons */ \"(app-client)/./node_modules/@sanity/icons/dist/index.js\");\n/* harmony import */ var lodash_camelCase_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash/camelCase.js */ \"(app-client)/./node_modules/lodash/camelCase.js\");\n/* harmony import */ var lodash_camelCase_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(lodash_camelCase_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var speakingurl__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! speakingurl */ \"(app-client)/./node_modules/speakingurl/index.js\");\n/* harmony import */ var speakingurl__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(speakingurl__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var lodash_uniq_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! lodash/uniq.js */ \"(app-client)/./node_modules/lodash/uniq.js\");\n/* harmony import */ var lodash_uniq_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(lodash_uniq_js__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var lodash_kebabCase_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! lodash/kebabCase.js */ \"(app-client)/./node_modules/lodash/kebabCase.js\");\n/* harmony import */ var lodash_kebabCase_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(lodash_kebabCase_js__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var lodash_pickBy_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! lodash/pickBy.js */ \"(app-client)/./node_modules/lodash/pickBy.js\");\n/* harmony import */ var lodash_pickBy_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(lodash_pickBy_js__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var lodash_find_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! lodash/find.js */ \"(app-client)/./node_modules/lodash/find.js\");\n/* harmony import */ var lodash_find_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(lodash_find_js__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var lodash_uniqueId_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! lodash/uniqueId.js */ \"(app-client)/./node_modules/lodash/uniqueId.js\");\n/* harmony import */ var lodash_uniqueId_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(lodash_uniqueId_js__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var react_is__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react-is */ \"(app-client)/./node_modules/react-is/index.js\");\n/* harmony import */ var lodash_startCase_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! lodash/startCase.js */ \"(app-client)/./node_modules/lodash/startCase.js\");\n/* harmony import */ var lodash_startCase_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(lodash_startCase_js__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var is_hotkey__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! is-hotkey */ \"(app-client)/./node_modules/is-hotkey/lib/index.js\");\n/* harmony import */ var _sanity_util_paths__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @sanity/util/paths */ \"(app-client)/./node_modules/@sanity/util/lib/paths.esm.js\");\n/* harmony import */ var _sanity_types__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! @sanity/types */ \"(app-client)/./node_modules/@sanity/types/lib/index.esm.js\");\n/* harmony import */ var lodash_isNumber_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! lodash/isNumber.js */ \"(app-client)/./node_modules/lodash/isNumber.js\");\n/* harmony import */ var lodash_isNumber_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(lodash_isNumber_js__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var lodash_isString_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! lodash/isString.js */ \"(app-client)/./node_modules/lodash/isString.js\");\n/* harmony import */ var lodash_isString_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(lodash_isString_js__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var react_rx__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! react-rx */ \"(app-client)/./node_modules/react-rx/dist/esm/index.js\");\n/* harmony import */ var _sanity_schema_internal__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @sanity/schema/_internal */ \"(app-client)/./node_modules/@sanity/schema/lib/_exports/_internal.esm.js\");\n/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! date-fns */ \"(app-client)/./node_modules/date-fns/esm/format/index.js\");\n/* harmony import */ var lodash_upperFirst_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! lodash/upperFirst.js */ \"(app-client)/./node_modules/lodash/upperFirst.js\");\n/* harmony import */ var lodash_upperFirst_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(lodash_upperFirst_js__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var _rexxars_react_json_inspector__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @rexxars/react-json-inspector */ \"(app-client)/./node_modules/@rexxars/react-json-inspector/json-inspector.js\");\n/* harmony import */ var _rexxars_react_json_inspector__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(_rexxars_react_json_inspector__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var hashlru__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! hashlru */ \"(app-client)/./node_modules/hashlru/index.js\");\n/* harmony import */ var hashlru__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(hashlru__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var lodash_negate_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! lodash/negate.js */ \"(app-client)/./node_modules/lodash/negate.js\");\n/* harmony import */ var lodash_negate_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(lodash_negate_js__WEBPACK_IMPORTED_MODULE_25__);\n/* harmony import */ var framer_motion__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! framer-motion */ \"(app-client)/./node_modules/framer-motion/dist/es/render/dom/motion.mjs\");\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14, _templateObject15, _templateObject16, _templateObject17, _templateObject18, _templateObject19, _templateObject20, _templateObject21, _templateObject22, _templateObject23, _templateObject24, _templateObject25, _templateObject26;\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction Delay(_ref) {\n  let {\n    children,\n    ms = 0\n  } = _ref;\n  const [ready, setReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(ms <= 0);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (ms <= 0) {\n      return void 0;\n    }\n    const timeoutId = setTimeout(() => setReady(true), ms);\n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, [ms]);\n  if (!ready || !children) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {});\n  }\n  return typeof children === \"function\" ? children() : children;\n}\nconst RenderActionCollectionState = props => {\n  const {\n    actions,\n    children,\n    actionProps,\n    onActionComplete\n  } = props;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.GetHookCollectionState, {\n    onReset: onActionComplete,\n    hooks: actions,\n    args: actionProps,\n    children\n  });\n};\nconst RenderBadgeCollectionState = props => {\n  const {\n    badges,\n    children,\n    badgeProps,\n    ...rest\n  } = props;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.GetHookCollectionState, {\n    ...rest,\n    hooks: badges,\n    args: badgeProps,\n    children\n  });\n};\nconst emptyArray = [];\nfunction PaneRouterProvider(props) {\n  const {\n    children,\n    flatIndex,\n    index,\n    params,\n    payload,\n    siblingIndex\n  } = props;\n  const {\n    navigate,\n    navigateIntent\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_6__.useRouter)();\n  const routerState = (0,sanity_router__WEBPACK_IMPORTED_MODULE_6__.useRouterState)();\n  const routerPaneGroups = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => (routerState == null ? void 0 : routerState.panes) || emptyArray, [routerState == null ? void 0 : routerState.panes]);\n  const groupIndex = index - 1;\n  const modifyCurrentGroup = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(modifier => {\n    const currentGroup = routerPaneGroups[groupIndex] || [];\n    const currentItem = currentGroup[siblingIndex];\n    const nextGroup = modifier(currentGroup, currentItem);\n    const nextPanes = [...routerPaneGroups.slice(0, groupIndex), nextGroup, ...routerPaneGroups.slice(groupIndex + 1)];\n    const nextRouterState = {\n      ...(routerState || {}),\n      panes: nextPanes\n    };\n    setTimeout(() => navigate(nextRouterState), 0);\n    return nextRouterState;\n  }, [groupIndex, navigate, routerPaneGroups, routerState, siblingIndex]);\n  const setPayload = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(nextPayload => {\n    modifyCurrentGroup((siblings, item) => [...siblings.slice(0, siblingIndex), {\n      ...item,\n      payload: nextPayload\n    }, ...siblings.slice(siblingIndex + 1)]);\n  }, [modifyCurrentGroup, siblingIndex]);\n  const setParams = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(nextParams => {\n    modifyCurrentGroup((siblings, item) => [...siblings.slice(0, siblingIndex), {\n      ...item,\n      params: nextParams\n    }, ...siblings.slice(siblingIndex + 1)]);\n  }, [modifyCurrentGroup, siblingIndex]);\n  const handleEditReference = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(_ref2 => {\n    let {\n      id,\n      parentRefPath,\n      type,\n      template\n    } = _ref2;\n    navigate({\n      panes: [...routerPaneGroups.slice(0, groupIndex + 1), [{\n        id,\n        params: {\n          template: template.id,\n          parentRefPath: (0,_sanity_util_paths__WEBPACK_IMPORTED_MODULE_17__.toString)(parentRefPath),\n          type\n        },\n        payload: template.params\n      }]]\n    });\n  }, [groupIndex, navigate, routerPaneGroups]);\n  const ctx = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => ({\n    // Zero-based index (position) of pane, visually\n    index: flatIndex,\n    // Zero-based index of pane group (within URL structure)\n    groupIndex,\n    // Zero-based index of pane within sibling group\n    siblingIndex,\n    // Payload of the current pane\n    payload,\n    // Params of the current pane\n    params,\n    // Whether or not the pane has any siblings (within the same group)\n    hasGroupSiblings: routerPaneGroups[groupIndex] ? routerPaneGroups[groupIndex].length > 1 : false,\n    // The length of the current group\n    groupLength: routerPaneGroups[groupIndex] ? routerPaneGroups[groupIndex].length : 0,\n    // Current router state for the \"panes\" property\n    routerPanesState: routerPaneGroups,\n    // Curried StateLink that passes the correct state automatically\n    ChildLink: _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.ChildLink,\n    // Curried StateLink that pops off the last pane group\n    BackLink: _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.BackLink,\n    // A specialized `ChildLink` that takes in the needed props to open a\n    // referenced document to the right\n    ReferenceChildLink: _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.ReferenceChildLink,\n    // Similar to `ReferenceChildLink` expect without the wrapping component\n    handleEditReference,\n    // Curried StateLink that passed the correct state, but merges params/payload\n    ParameterizedLink: _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.ParameterizedLink,\n    // Replaces the current pane with a new one\n    replaceCurrent: function () {\n      let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      modifyCurrentGroup(() => [{\n        id: opts.id || \"\",\n        payload: opts.payload,\n        params: opts.params || {}\n      }]);\n    },\n    // Removes the current pane from the group\n    closeCurrent: () => {\n      modifyCurrentGroup((siblings, item) => siblings.length > 1 ? siblings.filter(sibling => sibling !== item) : siblings);\n    },\n    // Duplicate the current pane, with optional overrides for payload, parameters\n    duplicateCurrent: options => {\n      modifyCurrentGroup((siblings, item) => {\n        const duplicatedItem = {\n          ...item,\n          payload: (options == null ? void 0 : options.payload) || item.payload,\n          params: (options == null ? void 0 : options.params) || item.params\n        };\n        return [...siblings.slice(0, siblingIndex), duplicatedItem, ...siblings.slice(siblingIndex)];\n      });\n    },\n    // Set the view for the current pane\n    setView: viewId => {\n      const restParams = lodash_omit_js__WEBPACK_IMPORTED_MODULE_3___default()(params, \"view\");\n      return setParams(viewId ? {\n        ...restParams,\n        view: viewId\n      } : restParams);\n    },\n    // Set the parameters for the current pane\n    setParams,\n    // Set the payload for the current pane\n    setPayload,\n    // Proxied navigation to a given intent. Consider just exposing `router` instead?\n    navigateIntent\n  }), [flatIndex, groupIndex, handleEditReference, modifyCurrentGroup, navigateIntent, params, payload, routerPaneGroups, setParams, setPayload, siblingIndex]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PaneRouterContext.Provider, {\n    value: ctx,\n    children\n  });\n}\nfunction _calcPaneResize(cache, left, right, deltaX) {\n  var _a, _b;\n  const sum = {\n    flex: cache.left.flex + cache.right.flex,\n    width: cache.left.width + cache.right.width\n  };\n  const leftMinWidth = (_a = left.minWidth) != null ? _a : _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PANE_DEFAULT_MIN_WIDTH;\n  const rightMinWidth = (_b = right.minWidth) != null ? _b : _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PANE_DEFAULT_MIN_WIDTH;\n  const leftMaxWidth = Math.min(left.maxWidth || Infinity, sum.width - rightMinWidth);\n  const rightMaxWidth = Math.min(right.maxWidth || Infinity, sum.width - leftMinWidth);\n  let minDeltaX = leftMinWidth - cache.left.width;\n  const rightMinDeltaX = cache.right.width - rightMaxWidth;\n  if (minDeltaX < rightMinDeltaX) {\n    minDeltaX = rightMinDeltaX;\n  }\n  let maxDeltaX = cache.right.width - rightMinWidth;\n  const leftMaxDeltaX = leftMaxWidth - cache.left.width;\n  if (maxDeltaX > leftMaxDeltaX) {\n    maxDeltaX = leftMaxDeltaX;\n  }\n  const _deltaX = Math.min(Math.max(deltaX, minDeltaX), maxDeltaX);\n  const leftW = cache.left.width + _deltaX;\n  const rightW = cache.right.width - _deltaX;\n  const leftFlex = leftW / sum.width * sum.flex;\n  const rightFlex = rightW / sum.width * sum.flex;\n  return {\n    leftFlex,\n    leftW,\n    rightFlex,\n    rightW\n  };\n}\nfunction _getDOMPath(rootElement, el) {\n  const path = [];\n  let e = el;\n  while (e !== rootElement) {\n    const parentElement = e.parentElement;\n    if (!parentElement) return path;\n    const children = Array.from(parentElement.childNodes);\n    const index = children.indexOf(e);\n    path.unshift(index);\n    if (parentElement === rootElement) {\n      return path;\n    }\n    e = parentElement;\n  }\n  return path;\n}\nconst EMPTY_PATH = [];\nfunction _sortElements(rootElement, elements) {\n  const map = /* @__PURE__ */new WeakMap();\n  for (const element of elements) {\n    map.set(element, _getDOMPath(rootElement, element));\n  }\n  const _sortByElementPath = (a, b) => {\n    const _a = map.get(a) || EMPTY_PATH;\n    const _b = map.get(b) || EMPTY_PATH;\n    const len = Math.max(_a.length, _b.length);\n    for (let i = 0; i < len; i += 1) {\n      const aIndex = _a[i] || -1;\n      const bIndex = _b[i] || -1;\n      if (aIndex !== bIndex) {\n        return aIndex - bIndex;\n      }\n    }\n    return 0;\n  };\n  elements.sort(_sortByElementPath);\n}\nfunction createPaneLayoutController() {\n  const observers = [];\n  const elements = [];\n  const optionsMap = /* @__PURE__ */new WeakMap();\n  const userCollapsedElementSet = /* @__PURE__ */new Set();\n  const cache = {};\n  let rootElement = null;\n  let rootWidth = 0;\n  let expandedElement = null;\n  let resizeDataMap = /* @__PURE__ */new Map();\n  let resizing = false;\n  function collapse(element) {\n    userCollapsedElementSet.add(element);\n    if (expandedElement === element) {\n      expandedElement = null;\n    }\n    _notifyObservers();\n  }\n  function expand(element) {\n    userCollapsedElementSet.delete(element);\n    expandedElement = element;\n    _notifyObservers();\n  }\n  function mount(element, options) {\n    optionsMap.set(element, {\n      ...options,\n      original: options\n    });\n    elements.push(element);\n    if (rootElement) {\n      _sortElements(rootElement, elements);\n    }\n    expand(element);\n    return () => {\n      const idx = elements.indexOf(element);\n      if (idx > -1) {\n        elements.splice(idx, 1);\n      }\n      optionsMap.delete(element);\n      _notifyObservers();\n    };\n  }\n  function resize(type, leftElement, deltaX) {\n    var _a, _b, _c, _d;\n    const leftIndex = elements.indexOf(leftElement);\n    const leftOptions = optionsMap.get(leftElement);\n    if (!leftOptions) return;\n    const rightElement = elements[leftIndex + 1];\n    const rightOptions = optionsMap.get(rightElement);\n    if (!rightOptions) return;\n    if (type === \"start\") {\n      resizing = true;\n      cache.left = {\n        element: leftElement,\n        flex: leftOptions.flex || 1,\n        width: leftElement.offsetWidth\n      };\n      cache.right = {\n        element: rightElement,\n        flex: rightOptions.flex || 1,\n        width: rightElement.offsetWidth\n      };\n      _notifyObservers();\n    }\n    if (type === \"move\" && cache.left && cache.right) {\n      resizeDataMap = /* @__PURE__ */new Map();\n      const {\n        leftW,\n        rightW,\n        leftFlex,\n        rightFlex\n      } = _calcPaneResize(cache, leftOptions, rightOptions, deltaX);\n      resizeDataMap.set(leftElement, {\n        flex: leftFlex,\n        width: leftW\n      });\n      resizeDataMap.set(rightElement, {\n        flex: rightFlex,\n        width: rightW\n      });\n      _notifyObservers();\n    }\n    if (type === \"end\") {\n      resizing = false;\n      const leftResizeData = resizeDataMap.get(leftElement);\n      const rightResizeData = resizeDataMap.get(rightElement);\n      optionsMap.set(leftElement, {\n        ...leftOptions,\n        currentMinWidth: 0,\n        currentMaxWidth: (_a = leftOptions.maxWidth) != null ? _a : Infinity,\n        flex: (_b = leftResizeData == null ? void 0 : leftResizeData.flex) != null ? _b : leftOptions.flex\n      });\n      optionsMap.set(rightElement, {\n        ...rightOptions,\n        currentMinWidth: 0,\n        currentMaxWidth: (_c = leftOptions.maxWidth) != null ? _c : Infinity,\n        flex: (_d = rightResizeData == null ? void 0 : rightResizeData.flex) != null ? _d : rightOptions.flex\n      });\n      resizeDataMap = /* @__PURE__ */new Map();\n      delete cache.left;\n      delete cache.right;\n      _notifyObservers();\n    }\n  }\n  function setRootElement(nextRootElement) {\n    rootElement = nextRootElement;\n  }\n  function setRootWidth(nextRootWidth) {\n    rootWidth = nextRootWidth;\n    _notifyObservers();\n  }\n  function subscribe(observer) {\n    observers.push(observer);\n    return () => {\n      const idx = observers.push(observer);\n      if (idx > -1) {\n        observers.splice(idx, 1);\n      }\n    };\n  }\n  return {\n    collapse,\n    expand,\n    mount,\n    resize,\n    setRootElement,\n    setRootWidth,\n    subscribe\n  };\n  function _notifyObservers() {\n    var _a, _b, _c, _d;\n    if (!rootWidth) return;\n    const _elements = [];\n    for (const element of elements) {\n      if (element !== expandedElement) {\n        _elements.unshift(element);\n      }\n    }\n    if (expandedElement) {\n      _elements.unshift(expandedElement);\n    }\n    const dataMap = /* @__PURE__ */new WeakMap();\n    const len = _elements.length;\n    const lastElement = _elements[0];\n    const collapsedWidth = (len - 1) * _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PANE_COLLAPSED_WIDTH;\n    let remaingWidth = rootWidth - collapsedWidth;\n    for (const element of _elements) {\n      const options = optionsMap.get(element);\n      if (!options) {\n        continue;\n      }\n      const minWidth = options.currentMinWidth || options.minWidth || _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PANE_DEFAULT_MIN_WIDTH;\n      const isLast = element === lastElement;\n      const userCollapsed = userCollapsedElementSet.has(element);\n      const sizeCollapsed = minWidth > remaingWidth;\n      const collapsed = isLast ? false : userCollapsed || sizeCollapsed;\n      const resizeData = resizeDataMap.get(element);\n      dataMap.set(element, {\n        element,\n        collapsed,\n        currentMinWidth: (_a = resizeData == null ? void 0 : resizeData.width) != null ? _a : options.currentMinWidth,\n        currentMaxWidth: (_b = resizeData == null ? void 0 : resizeData.width) != null ? _b : options.currentMaxWidth,\n        flex: (_d = (_c = resizeData == null ? void 0 : resizeData.flex) != null ? _c : options.flex) != null ? _d : 1\n      });\n      if (collapsed) {\n        remaingWidth -= _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PANE_COLLAPSED_WIDTH;\n      } else {\n        remaingWidth -= minWidth - _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PANE_COLLAPSED_WIDTH;\n      }\n    }\n    const panes = [];\n    for (const element of elements) {\n      const data = dataMap.get(element);\n      if (data) panes.push(data);\n    }\n    for (const observer of observers) {\n      observer({\n        expandedElement: expandedElement || elements[elements.length - 1] || null,\n        panes,\n        resizing\n      });\n    }\n  }\n}\nfunction PaneLayout(props) {\n  const {\n    children,\n    minWidth,\n    onCollapse,\n    onExpand,\n    ...restProps\n  } = props;\n  const controller = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => createPaneLayoutController(), []);\n  const [rootElement, setRootElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const rootRect = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useElementRect)(rootElement);\n  const width = (rootRect == null ? void 0 : rootRect.width) || 0;\n  const collapsed = width === void 0 || !minWidth ? void 0 : width < minWidth;\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n    expandedElement: null,\n    panes: [],\n    resizing: false\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => controller.setRootElement(rootElement), [controller, rootElement]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => controller.setRootWidth(width), [controller, width]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => controller.subscribe(setState), [controller]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (collapsed === void 0) return;\n    if (collapsed && onCollapse) onCollapse();\n    if (!collapsed && onExpand) onExpand();\n  }, [collapsed, onCollapse, onExpand]);\n  const paneLayout = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => ({\n    collapse: controller.collapse,\n    collapsed,\n    expand: controller.expand,\n    expandedElement: state.expandedElement,\n    mount: controller.mount,\n    panes: state.panes,\n    resize: controller.resize,\n    resizing: state.resizing\n  }), [collapsed, controller, state.expandedElement, state.panes, state.resizing]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PaneLayoutContext.Provider, {\n    value: paneLayout,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.Root, {\n      \"data-ui\": \"PaneLayout\",\n      ...restProps,\n      \"data-collapsed\": collapsed ? \"\" : void 0,\n      \"data-resizing\": state.resizing ? \"\" : void 0,\n      \"data-mounted\": width ? \"\" : void 0,\n      ref: setRootElement,\n      children\n    })\n  });\n}\nclass PaneResolutionError extends Error {\n  constructor(_ref3) {\n    let {\n      message,\n      context,\n      helpId,\n      cause\n    } = _ref3;\n    super(message);\n    this.context = context;\n    this.helpId = helpId;\n    this.cause = cause;\n  }\n}\nconst randomIdCache = /* @__PURE__ */new WeakMap();\nfunction assignId(obj) {\n  const cachedValue = randomIdCache.get(obj);\n  if (cachedValue) return cachedValue;\n  const id = (0,nanoid__WEBPACK_IMPORTED_MODULE_27__.nanoid)();\n  randomIdCache.set(obj, id);\n  return id;\n}\nconst bindCache = /* @__PURE__ */new WeakMap();\nfunction memoBind(obj, methodKey) {\n  const boundMethods = bindCache.get(obj) || /* @__PURE__ */new Map();\n  if (boundMethods) {\n    const bound2 = boundMethods.get(methodKey);\n    if (bound2) return bound2;\n  }\n  const method = obj[methodKey];\n  if (typeof method !== \"function\") {\n    throw new Error(\"Expected property `\".concat(methodKey, \"` to be a function but got \").concat(typeof method, \" instead.\"));\n  }\n  const bound = method.bind(obj);\n  boundMethods.set(methodKey, bound);\n  bindCache.set(obj, boundMethods);\n  return bound;\n}\nconst isPromise = thing => {\n  return !!thing && typeof (thing == null ? void 0 : thing.then) === \"function\";\n};\nconst isSerializable = thing => {\n  if (!(0,sanity__WEBPACK_IMPORTED_MODULE_4__.isRecord)(thing)) return false;\n  return typeof thing.serialize === \"function\";\n};\nconst rethrowWithPaneResolutionErrors = next => (unresolvedPane, context, flatIndex) => {\n  try {\n    return next(unresolvedPane, context, flatIndex);\n  } catch (e) {\n    if (e instanceof PaneResolutionError) {\n      throw e;\n    }\n    throw new PaneResolutionError({\n      message: typeof (e == null ? void 0 : e.message) === \"string\" ? e.message : \"\",\n      context,\n      cause: e\n    });\n  }\n};\nconst wrapWithPublishReplay = next => function () {\n  return next(...arguments).pipe(\n  // need to add publishReplay + refCount to ensure new subscribers always\n  // get an emission. without this, memoized observables may get stuck\n  // waiting for their first emissions resulting in a loading pane\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_28__.publishReplay)(1), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_29__.refCount)());\n};\nfunction createPaneResolver(middleware) {\n  const resolvePane = rethrowWithPaneResolutionErrors(wrapWithPublishReplay(middleware((unresolvedPane, context, flatIndex) => {\n    if (!unresolvedPane) {\n      throw new PaneResolutionError({\n        message: \"Pane returned no child\",\n        context,\n        helpId: \"structure-item-returned-no-child\"\n      });\n    }\n    if (isPromise(unresolvedPane) || (0,rxjs__WEBPACK_IMPORTED_MODULE_30__.isObservable)(unresolvedPane)) {\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_31__.from)(unresolvedPane).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_32__.switchMap)(result => resolvePane(result, context, flatIndex)));\n    }\n    if (isSerializable(unresolvedPane)) {\n      return resolvePane(unresolvedPane.serialize(context), context, flatIndex);\n    }\n    if (typeof unresolvedPane === \"function\") {\n      return resolvePane(unresolvedPane(context.id, context), context, flatIndex);\n    }\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_33__.of)(unresolvedPane);\n  })));\n  return resolvePane;\n}\nasync function resolveIntent(options) {\n  const resolvedPaneCache = /* @__PURE__ */new Map();\n  const memoize = nextFn => (unresolvedPane, context, flatIndex) => {\n    const key = unresolvedPane && \"\".concat(assignId(unresolvedPane), \"-\").concat(context.path.join(\"__\"));\n    const cachedResolvedPane = key && resolvedPaneCache.get(key);\n    if (cachedResolvedPane) return cachedResolvedPane;\n    const result = nextFn(unresolvedPane, context, flatIndex);\n    if (key) resolvedPaneCache.set(key, result);\n    return result;\n  };\n  const resolvePane = createPaneResolver(memoize);\n  const fallbackEditorPanes = [[{\n    id: \"__edit__\".concat(options.params.id),\n    params: {\n      ...lodash_omit_js__WEBPACK_IMPORTED_MODULE_3___default()(options.params, [\"id\"]),\n      type: options.params.type\n    },\n    payload: options.payload\n  }]];\n  async function traverse(_ref4) {\n    let {\n      currentId,\n      flatIndex,\n      intent,\n      params,\n      parent,\n      path,\n      payload,\n      unresolvedPane,\n      levelIndex,\n      structureContext\n    } = _ref4;\n    var _a;\n    if (!unresolvedPane) return [];\n    const {\n      id: targetId,\n      type: schemaTypeName,\n      ...otherParams\n    } = params;\n    const context = {\n      id: currentId,\n      splitIndex: 0,\n      parent,\n      path,\n      index: flatIndex,\n      params: {},\n      payload: void 0,\n      structureContext\n    };\n    const resolvedPane = await (0,rxjs__WEBPACK_IMPORTED_MODULE_34__.firstValueFrom)(resolvePane(unresolvedPane, context, flatIndex));\n    if (resolvedPane.type === \"document\" && resolvedPane.id === targetId) {\n      return [{\n        panes: [...path.slice(0, path.length - 1).map(i => [{\n          id: i\n        }]), [{\n          id: targetId,\n          params: otherParams,\n          payload\n        }]],\n        depthIndex: path.length,\n        levelIndex\n      }];\n    }\n    if (\n    // if the resolve pane's `canHandleIntent` returns true, then resolve\n    ((_a = resolvedPane.canHandleIntent) == null ? void 0 : _a.call(resolvedPane, intent, params, {\n      pane: resolvedPane,\n      index: flatIndex\n    })) ||\n    // if the pane's `canHandleIntent` did not return true, then match against\n    // this default case. we will resolve the intent if:\n    resolvedPane.type === \"documentList\" &&\n    // 1. the schema type matches (this required for the document to render)\n    resolvedPane.schemaTypeName === schemaTypeName &&\n    // 2. the filter is the default filter.\n    //\n    // NOTE: this case is to prevent false positive matches where the user\n    // has configured a more specific filter for a particular type. In that\n    // case, the user can implement their own `canHandleIntent` function\n    resolvedPane.options.filter === \"_type == $type\") {\n      return [{\n        panes: [\n        // map the current path to router panes\n        ...path.map(id => [{\n          id\n        }]),\n        // then augment with the intents IDs and params\n        [{\n          id: params.id,\n          params: otherParams,\n          payload\n        }]],\n        depthIndex: path.length,\n        levelIndex\n      }];\n    }\n    if (resolvedPane.type === \"list\" && resolvedPane.child && resolvedPane.items) {\n      return (await Promise.all(resolvedPane.items.map((item, nextLevelIndex) => {\n        if (item.type === \"divider\") return Promise.resolve([]);\n        return traverse({\n          currentId: item._id || item.id,\n          flatIndex: flatIndex + 1,\n          intent,\n          params,\n          parent: resolvedPane,\n          path: [...path, item.id],\n          payload,\n          unresolvedPane: typeof resolvedPane.child === \"function\" ? memoBind(resolvedPane, \"child\") : resolvedPane.child,\n          levelIndex: nextLevelIndex,\n          structureContext\n        });\n      }))).flat();\n    }\n    return [];\n  }\n  const matchingPanes = await traverse({\n    currentId: \"root\",\n    flatIndex: 0,\n    levelIndex: 0,\n    intent: options.intent,\n    params: options.params,\n    parent: null,\n    path: [],\n    payload: options.payload,\n    unresolvedPane: options.rootPaneNode,\n    structureContext: options.structureContext\n  });\n  const closestPaneToRoot = matchingPanes.sort((a, b) => {\n    if (a.depthIndex === b.depthIndex) return a.levelIndex - b.levelIndex;\n    return a.depthIndex - b.depthIndex;\n  })[0];\n  if (closestPaneToRoot) {\n    return closestPaneToRoot.panes;\n  }\n  return fallbackEditorPanes;\n}\nfunction useDeskTool() {\n  const deskTool = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.DeskToolContext);\n  if (!deskTool) throw new Error(\"DeskTool: missing context value\");\n  return deskTool;\n}\nconst fallbackEditorChild = (nodeId, context) => {\n  const id = nodeId.replace(/^__edit__/, \"\");\n  const {\n    params,\n    payload,\n    structureContext: {\n      resolveDocumentNode\n    }\n  } = context;\n  const {\n    type,\n    template\n  } = params;\n  if (!type) {\n    throw new Error(\"Document type for document with ID \".concat(id, \" was not provided in the router params.\"));\n  }\n  let defaultDocumentBuilder = resolveDocumentNode({\n    schemaType: type,\n    documentId: id\n  });\n  defaultDocumentBuilder = defaultDocumentBuilder.id(\"editor\").title(\"Editor\");\n  if (template) {\n    defaultDocumentBuilder = defaultDocumentBuilder.initialValueTemplate(template, payload);\n  }\n  return defaultDocumentBuilder.serialize();\n};\nfunction hashContext(context) {\n  var _a, _b;\n  return \"contextHash(\".concat(JSON.stringify({\n    id: context.id,\n    parentId: parent && assignId(parent),\n    path: context.path,\n    index: context.index,\n    splitIndex: context.splitIndex,\n    serializeOptionsIndex: (_a = context.serializeOptions) == null ? void 0 : _a.index,\n    serializeOptionsPath: (_b = context.serializeOptions) == null ? void 0 : _b.path\n  }), \")\");\n}\nconst hashResolvedPaneMeta = meta => {\n  const normalized = {\n    type: meta.type,\n    id: meta.routerPaneSibling.id,\n    params: meta.routerPaneSibling.params || {},\n    payload: meta.routerPaneSibling.payload || null,\n    flatIndex: meta.flatIndex,\n    groupIndex: meta.groupIndex,\n    siblingIndex: meta.siblingIndex,\n    path: meta.path,\n    paneNode: meta.type === \"resolvedMeta\" ? assignId(meta.paneNode) : null\n  };\n  return \"metaHash(\".concat(JSON.stringify(normalized), \")\");\n};\nfunction resolvePaneTree(_ref5) {\n  let {\n    unresolvedPane,\n    flattenedRouterPanes,\n    parent: parent2,\n    path,\n    resolvePane,\n    structureContext\n  } = _ref5;\n  const [current, ...rest] = flattenedRouterPanes;\n  const next = rest[0];\n  const context = {\n    id: current.routerPaneSibling.id,\n    splitIndex: current.siblingIndex,\n    parent: parent2,\n    path: [...path, current.routerPaneSibling.id],\n    index: current.flatIndex,\n    params: current.routerPaneSibling.params || {},\n    payload: current.routerPaneSibling.payload,\n    structureContext\n  };\n  try {\n    return resolvePane(unresolvedPane, context, current.flatIndex).pipe(\n    // this switch map receives a resolved pane\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_32__.switchMap)(paneNode => {\n      const resolvedPaneMeta = {\n        type: \"resolvedMeta\",\n        ...current,\n        paneNode,\n        path: context.path\n      };\n      const loadingPanes = rest.map((i, restIndex) => {\n        const loadingPanePath = [...context.path, ...rest.slice(restIndex).map((_, currentIndex) => \"[\".concat(i.flatIndex + currentIndex, \"]\"))];\n        const loadingPane = {\n          type: \"loading\",\n          path: loadingPanePath,\n          paneNode: null,\n          ...i\n        };\n        return loadingPane;\n      });\n      if (!rest.length) {\n        return (0,rxjs__WEBPACK_IMPORTED_MODULE_33__.of)([resolvedPaneMeta]);\n      }\n      let nextStream;\n      if (\n      // the fallback editor case\n      next == null ? void 0 : next.routerPaneSibling.id.startsWith(\"__edit__\")) {\n        nextStream = resolvePaneTree({\n          unresolvedPane: fallbackEditorChild,\n          flattenedRouterPanes: rest,\n          parent: parent2,\n          path: context.path,\n          resolvePane,\n          structureContext\n        });\n      } else if (current.groupIndex === (next == null ? void 0 : next.groupIndex)) {\n        nextStream = resolvePaneTree({\n          unresolvedPane,\n          flattenedRouterPanes: rest,\n          parent: parent2,\n          path,\n          resolvePane,\n          structureContext\n        });\n      } else {\n        nextStream = resolvePaneTree({\n          unresolvedPane: typeof paneNode.child === \"function\" ? memoBind(paneNode, \"child\") : paneNode.child,\n          flattenedRouterPanes: rest,\n          parent: paneNode,\n          path: context.path,\n          resolvePane,\n          structureContext\n        });\n      }\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_35__.concat)(\n      // we emit the loading panes first in a concat (this emits immediately)\n      (0,rxjs__WEBPACK_IMPORTED_MODULE_33__.of)([resolvedPaneMeta, ...loadingPanes]),\n      // then whenever the next stream is done, the results will be combined.\n      nextStream.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_36__.map)(nextResolvedPanes => [resolvedPaneMeta, ...nextResolvedPanes])));\n    }));\n  } catch (e) {\n    if (e instanceof PaneResolutionError) {\n      if (e.context) {\n        console.warn(\"Pane resolution error at index \".concat(e.context.index).concat(e.context.splitIndex > 0 ? \" for split pane index \".concat(e.context.splitIndex) : \"\", \": \").concat(e.message).concat(e.helpId ? \" - see \".concat((0,_sanity_generate_help_url__WEBPACK_IMPORTED_MODULE_37__.generateHelpUrl)(e.helpId)) : \"\"), e);\n      }\n      if (e.helpId === \"structure-item-returned-no-child\") {\n        return (0,rxjs__WEBPACK_IMPORTED_MODULE_33__.of)([]);\n      }\n    }\n    throw e;\n  }\n}\nfunction createResolvedPaneNodeStream(_ref6) {\n  let {\n    routerPanesStream,\n    rootPaneNode,\n    initialCacheState = {\n      cacheKeysByFlatIndex: [],\n      flattenedRouterPanes: [],\n      resolvedPaneCache: /* @__PURE__ */new Map(),\n      resolvePane: () => rxjs__WEBPACK_IMPORTED_MODULE_38__.NEVER\n    },\n    structureContext\n  } = _ref6;\n  const resolvedPanes$ = routerPanesStream.pipe(\n  // add in implicit \"root\" router pane\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_36__.map)(rawRouterPanes => [[{\n    id: \"root\"\n  }], ...rawRouterPanes]),\n  // create flattened router panes\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_36__.map)(routerPanes => {\n    const flattenedRouterPanes = routerPanes.flatMap((routerPaneGroup, groupIndex) => routerPaneGroup.map((routerPaneSibling, siblingIndex) => ({\n      routerPaneSibling,\n      groupIndex,\n      siblingIndex\n    }))).map((i, index) => ({\n      ...i,\n      flatIndex: index\n    }));\n    return flattenedRouterPanes;\n  }),\n  // calculate a \"diffIndex\" used for clearing the memo cache\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_39__.startWith)([]), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_40__.pairwise)(), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_36__.map)(_ref7 => {\n    let [prev, curr] = _ref7;\n    for (let i = 0; i < curr.length; i++) {\n      const prevValue = prev[i];\n      const currValue = curr[i];\n      if (!lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_5___default()(prevValue, currValue)) {\n        return {\n          flattenedRouterPanes: curr,\n          diffIndex: i\n        };\n      }\n    }\n    return {\n      flattenedRouterPanes: curr,\n      diffIndex: curr.length\n    };\n  }),\n  // create the memoized `resolvePane` function and manage the memo cache\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_41__.scan)((acc, next) => {\n    const {\n      cacheKeysByFlatIndex,\n      resolvedPaneCache\n    } = acc;\n    const {\n      flattenedRouterPanes,\n      diffIndex\n    } = next;\n    const beforeDiffIndex = cacheKeysByFlatIndex.slice(0, diffIndex + 1);\n    const afterDiffIndex = cacheKeysByFlatIndex.slice(diffIndex + 1);\n    const keysToKeep = new Set(beforeDiffIndex.flatMap(keySet => Array.from(keySet)));\n    const keysToDelete = afterDiffIndex.flatMap(keySet => Array.from(keySet)).filter(key => !keysToKeep.has(key));\n    for (const key of keysToDelete) {\n      resolvedPaneCache.delete(key);\n    }\n    const memoize = nextFn => (unresolvedPane, context, flatIndex) => {\n      const key = unresolvedPane && \"\".concat(assignId(unresolvedPane), \"-\").concat(hashContext(context));\n      const cachedResolvedPane = key && resolvedPaneCache.get(key);\n      if (cachedResolvedPane) return cachedResolvedPane;\n      const result = nextFn(unresolvedPane, context, flatIndex);\n      if (!key) return result;\n      const cacheKeySet = cacheKeysByFlatIndex[flatIndex] || /* @__PURE__ */new Set();\n      cacheKeySet.add(key);\n      cacheKeysByFlatIndex[flatIndex] = cacheKeySet;\n      resolvedPaneCache.set(key, result);\n      return result;\n    };\n    return {\n      flattenedRouterPanes,\n      cacheKeysByFlatIndex,\n      resolvedPaneCache,\n      resolvePane: createPaneResolver(memoize)\n    };\n  }, initialCacheState),\n  // run the memoized, recursive resolving\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_32__.switchMap)(_ref8 => {\n    let {\n      flattenedRouterPanes,\n      resolvePane\n    } = _ref8;\n    return resolvePaneTree({\n      unresolvedPane: rootPaneNode,\n      flattenedRouterPanes,\n      parent: null,\n      path: [],\n      resolvePane,\n      structureContext\n    });\n  }));\n  return resolvedPanes$.pipe(\n  // this diffs the previous emission with the current one. if there is a new\n  // loading pane at the same position where a previous pane already had a\n  // resolved value (looking at the IDs to compare), then return the previous\n  // pane instead of the loading pane\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_41__.scan)((prev, next) => next.map((nextPane, index) => {\n    const prevPane = prev[index];\n    if (!prevPane) return nextPane;\n    if (nextPane.type !== \"loading\") return nextPane;\n    if (prevPane.routerPaneSibling.id === nextPane.routerPaneSibling.id) {\n      return prevPane;\n    }\n    return nextPane;\n  }), []),\n  // this prevents duplicate emissions\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_42__.distinctUntilChanged)((prev, next) => {\n    if (prev.length !== next.length) return false;\n    for (let i = 0; i < next.length; i++) {\n      const prevValue = prev[i];\n      const nextValue = next[i];\n      if (hashResolvedPaneMeta(prevValue) !== hashResolvedPaneMeta(nextValue)) {\n        return false;\n      }\n    }\n    return true;\n  }));\n}\nfunction useRouterPanesStream() {\n  const routerStateSubject = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => new rxjs__WEBPACK_IMPORTED_MODULE_43__.ReplaySubject(1), []);\n  const routerPanes$ = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => routerStateSubject.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_36__.map)(_routerState => (_routerState == null ? void 0 : _routerState.panes) || [])), [routerStateSubject]);\n  const {\n    state: routerState\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_6__.useRouter)();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    routerStateSubject.next(routerState);\n  }, [routerState, routerStateSubject]);\n  return routerPanes$;\n}\nfunction useResolvedPanes() {\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)();\n  if (error) throw error;\n  const {\n    structureContext,\n    rootPaneNode\n  } = useDeskTool();\n  const [data, setData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n    paneDataItems: [],\n    resolvedPanes: [],\n    routerPanes: []\n  });\n  const routerPanesStream = useRouterPanesStream();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const resolvedPanes$ = createResolvedPaneNodeStream({\n      rootPaneNode,\n      routerPanesStream,\n      structureContext\n    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_36__.map)(resolvedPanes => {\n      const routerPanes = resolvedPanes.reduce((acc, next) => {\n        const currentGroup = acc[next.groupIndex] || [];\n        currentGroup[next.siblingIndex] = next.routerPaneSibling;\n        acc[next.groupIndex] = currentGroup;\n        return acc;\n      }, []);\n      const groupsLen = routerPanes.length;\n      const paneDataItems = resolvedPanes.map(pane => {\n        var _a;\n        const {\n          groupIndex,\n          flatIndex,\n          siblingIndex,\n          routerPaneSibling,\n          path\n        } = pane;\n        const itemId = routerPaneSibling.id;\n        const nextGroup = routerPanes[groupIndex + 1];\n        const paneDataItem = {\n          active: groupIndex === groupsLen - 2,\n          childItemId: (_a = nextGroup == null ? void 0 : nextGroup[0].id) != null ? _a : null,\n          index: flatIndex,\n          itemId: routerPaneSibling.id,\n          groupIndex,\n          key: \"\".concat(pane.type === \"loading\" ? \"unknown\" : pane.paneNode.id, \"-\").concat(itemId, \"-\").concat(siblingIndex),\n          pane: pane.type === \"loading\" ? _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.LOADING_PANE : pane.paneNode,\n          params: routerPaneSibling.params || {},\n          path: path.join(\";\"),\n          payload: routerPaneSibling.payload,\n          selected: flatIndex === resolvedPanes.length - 1,\n          siblingIndex\n        };\n        return paneDataItem;\n      });\n      return {\n        paneDataItems,\n        routerPanes,\n        resolvedPanes: paneDataItems.map(pane => pane.pane)\n      };\n    }));\n    const subscription = resolvedPanes$.subscribe({\n      next: result => setData(result),\n      error: e => setError(e)\n    });\n    return () => subscription.unsubscribe();\n  }, [rootPaneNode, routerPanesStream, structureContext]);\n  return data;\n}\nasync function ensureDocumentIdAndType(documentStore, id, type) {\n  if (id && type) return {\n    id,\n    type\n  };\n  if (!id && type) return {\n    id: (0,_sanity_uuid__WEBPACK_IMPORTED_MODULE_44__[\"default\"])(),\n    type\n  };\n  if (id && !type) {\n    const resolvedType = await (0,rxjs__WEBPACK_IMPORTED_MODULE_34__.firstValueFrom)(documentStore.resolveTypeForDocument(id));\n    return {\n      id,\n      type: resolvedType\n    };\n  }\n  throw new PaneResolutionError({\n    message: \"Neither document `id` or `type` was provided when trying to resolve intent.\"\n  });\n}\nconst EMPTY_RECORD = {};\nconst IntentResolver = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function IntentResolver2() {\n  const {\n    navigate\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_6__.useRouter)();\n  const maybeIntent = (0,sanity_router__WEBPACK_IMPORTED_MODULE_6__.useRouterState)((0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(routerState => {\n    const intentName = typeof routerState.intent === \"string\" ? routerState.intent : void 0;\n    return intentName ? {\n      intent: intentName,\n      params: (0,sanity__WEBPACK_IMPORTED_MODULE_4__.isRecord)(routerState.params) ? routerState.params : EMPTY_RECORD,\n      payload: routerState.payload\n    } : void 0;\n  }, []));\n  const {\n    rootPaneNode,\n    structureContext\n  } = useDeskTool();\n  const documentStore = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useDocumentStore)();\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  if (error) throw error;\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (maybeIntent) {\n      const {\n        intent,\n        params,\n        payload\n      } = maybeIntent;\n      let cancelled = false;\n      async function effect() {\n        const {\n          id,\n          type\n        } = await ensureDocumentIdAndType(documentStore, typeof params.id === \"string\" ? params.id : void 0, typeof params.type === \"string\" ? params.type : void 0);\n        if (cancelled) return;\n        const panes = await resolveIntent({\n          intent,\n          params: {\n            ...params,\n            id,\n            type\n          },\n          payload,\n          rootPaneNode,\n          structureContext\n        });\n        if (cancelled) return;\n        navigate({\n          panes\n        }, {\n          replace: true\n        });\n      }\n      effect().catch(setError);\n      return () => {\n        cancelled = true;\n      };\n    }\n  }, [documentStore, maybeIntent, navigate, rootPaneNode, structureContext]);\n  return null;\n});\nconst PathSegment = styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"].span(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  &:not(:last-child)::after {\\n    content: ' \\u279D ';\\n    opacity: 0.5;\\n  }\\n\"])));\nfunction formatStack(stack) {\n  return stack.replace(/\\(\\.\\.\\.\\)\\./g, \"(...)\\n  .\").replace(/__WEBPACK_IMPORTED_MODULE_\\d+_+/g, \"\").replace(/___default\\./g, \".\").replace(new RegExp(\" \\\\(https?:\\\\/\\\\/\".concat(window.location.host), \"g\"), \" (\");\n}\nfunction StructureError(_ref9) {\n  let {\n    error\n  } = _ref9;\n  if (!(error instanceof PaneResolutionError)) {\n    throw error;\n  }\n  const {\n    cause\n  } = error;\n  const stack = (cause == null ? void 0 : cause.stack) || error.stack;\n  const showStack = stack && !(cause instanceof _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.SerializeError) && !error.message.includes(\"Module build failed:\");\n  const path = cause instanceof _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.SerializeError ? cause.path : [];\n  const helpId = cause instanceof _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.SerializeError && cause.helpId || error.helpId;\n  const handleReload = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    window.location.reload();\n  }, []);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Card, {\n    height: \"fill\",\n    overflow: \"auto\",\n    padding: 4,\n    sizing: \"border\",\n    tone: \"critical\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Container, {\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Heading, {\n        as: \"h2\",\n        children: \"Encountered an error while reading structure\"\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Card, {\n        marginTop: 4,\n        padding: 4,\n        radius: 2,\n        overflow: \"auto\",\n        shadow: 1,\n        tone: \"inherit\",\n        children: [path.length > 0 && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Stack, {\n          space: 2,\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Label, {\n            children: \"Structure path\"\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Code, {\n            children: path.slice(1).map((segment, i) =>\n            // eslint-disable-next-line react/no-array-index-key\n            /* @__PURE__ */\n            (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PathSegment, {\n              children: segment\n            }, \"\".concat(segment, \"-\").concat(i)))\n          })]\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Stack, {\n          marginTop: 4,\n          space: 2,\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Label, {\n            children: \"Error\"\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Code, {\n            children: showStack ? formatStack(stack) : error.message\n          })]\n        }), helpId && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n          marginTop: 4,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", {\n              href: (0,_sanity_generate_help_url__WEBPACK_IMPORTED_MODULE_37__.generateHelpUrl)(helpId),\n              rel: \"noopener noreferrer\",\n              target: \"_blank\",\n              children: \"View documentation\"\n            })\n          })\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n          marginTop: 4,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n            text: \"Reload\",\n            icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.SyncIcon,\n            tone: \"primary\",\n            onClick: handleReload\n          })\n        })]\n      })]\n    })\n  });\n}\nfunction UnknownPane(props) {\n  const {\n    isSelected,\n    pane,\n    paneKey\n  } = props;\n  const type = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.isRecord)(pane) && pane.type || null;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.Pane, {\n    id: paneKey,\n    selected: isSelected,\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PaneHeader, {\n      title: \"Unknown pane type\"\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PaneContent, {\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n        padding: 4,\n        children: typeof type === \"string\" ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n          as: \"p\",\n          muted: true,\n          children: [\"Structure item of type \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n            children: type\n          }), \" is not a known entity.\"]\n        }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n          as: \"p\",\n          muted: true,\n          children: [\"Structure item is missing required \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n            children: \"type\"\n          }), \" property.\"]\n        })\n      })\n    })]\n  });\n}\nfunction getWaitMessages(path) {\n  const thresholds = [{\n    ms: 300,\n    message: \"Loading\\u2026\"\n  }, {\n    ms: 5e3,\n    message: \"Still loading\\u2026\"\n  }];\n  if (sanity__WEBPACK_IMPORTED_MODULE_4__.isDev) {\n    const message = [\"Check console for errors?\", \"Is your observable/promise resolving?\", path.length > 0 ? \"Structure path: \".concat(path.join(\" \\u279D \")) : \"\"];\n    thresholds.push({\n      ms: 1e4,\n      message: message.join(\"\\n\")\n    });\n  }\n  const src = (0,rxjs__WEBPACK_IMPORTED_MODULE_33__.of)(null);\n  return (0,rxjs__WEBPACK_IMPORTED_MODULE_47__.merge)(...thresholds.map(_ref10 => {\n    let {\n      ms,\n      message\n    } = _ref10;\n    return src.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_48__.mapTo)(message), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_49__.delay)(ms));\n  }));\n}\nconst DEFAULT_MESSAGE = \"Loading\\u2026\";\nconst Content$1 = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  opacity: 0;\\n  transition: opacity 200ms;\\n\\n  &[data-mounted] {\\n    opacity: 1;\\n  }\\n\"])));\nconst LoadingPane = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(props => {\n  const {\n    delay = 300,\n    flex,\n    message: messageProp = getWaitMessages,\n    minWidth,\n    paneKey,\n    path,\n    selected,\n    title,\n    tone\n  } = props;\n  const resolvedMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (typeof messageProp === \"function\") {\n      return messageProp(path ? path.split(\";\") : []);\n    }\n    return messageProp;\n  }, [messageProp, path]);\n  const [currentMessage, setCurrentMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(() => {\n    if (typeof resolvedMessage === \"string\") return resolvedMessage;\n    return DEFAULT_MESSAGE;\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (typeof resolvedMessage !== \"object\") return void 0;\n    if (typeof resolvedMessage.subscribe === \"function\") return void 0;\n    const sub = resolvedMessage.subscribe(setCurrentMessage);\n    return () => sub.unsubscribe();\n  }, [resolvedMessage]);\n  const [contentElement, setContentElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const [mounted, setMounted] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!contentElement) return void 0;\n    return (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__._raf2)(() => setMounted(true));\n  }, [contentElement]);\n  const content = /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(Content$1, {\n    align: \"center\",\n    \"data-mounted\": mounted ? \"\" : void 0,\n    direction: \"column\",\n    height: \"fill\",\n    justify: \"center\",\n    ref: setContentElement,\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Spinner, {\n      muted: true\n    }), (title || currentMessage) && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n      marginTop: 3,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n        align: \"center\",\n        muted: true,\n        size: 1,\n        children: title || currentMessage\n      })\n    })]\n  });\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.Pane, {\n    flex,\n    id: paneKey,\n    minWidth,\n    selected,\n    tone,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PaneContent, {\n      children: content\n    })\n  });\n});\nLoadingPane.displayName = \"LoadingPane\";\nconst paneMap = {\n  component: (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(() => __webpack_require__.e(/*! import() */ \"_app-client_node_modules_sanity_lib__chunks_index-6208b18a_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./index-6208b18a.js */ \"(app-client)/./node_modules/sanity/lib/_chunks/index-6208b18a.js\"))),\n  document: (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(() => __webpack_require__.e(/*! import() */ \"_app-client_node_modules_sanity_lib__chunks_index-c3743809_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./index-c3743809.js */ \"(app-client)/./node_modules/sanity/lib/_chunks/index-c3743809.js\"))),\n  documentList: (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(() => __webpack_require__.e(/*! import() */ \"_app-client_node_modules_sanity_lib__chunks_index-dd3127f7_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./index-dd3127f7.js */ \"(app-client)/./node_modules/sanity/lib/_chunks/index-dd3127f7.js\"))),\n  list: (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(() => __webpack_require__.e(/*! import() */ \"_app-client_node_modules_sanity_lib__chunks_index-3c1a9256_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./index-3c1a9256.js */ \"(app-client)/./node_modules/sanity/lib/_chunks/index-3c1a9256.js\")))\n};\nconst DeskToolPane = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function DeskToolPane2(props) {\n  const {\n    active,\n    childItemId,\n    groupIndex,\n    index,\n    itemId,\n    pane,\n    paneKey,\n    params,\n    payload,\n    path,\n    selected,\n    siblingIndex\n  } = props;\n  const PaneComponent = paneMap[pane.type] || UnknownPane;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PaneRouterProvider, {\n    flatIndex: index,\n    index: groupIndex,\n    params,\n    payload,\n    siblingIndex,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n      fallback: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingPane, {\n        paneKey,\n        path,\n        selected\n      }),\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PaneComponent, {\n        childItemId: childItemId || \"\",\n        index,\n        itemId,\n        isActive: active,\n        isSelected: selected,\n        paneKey,\n        pane\n      })\n    })\n  });\n}, (_ref11, _ref12) => {\n  let {\n    params: prevParams = {},\n    payload: prevPayload = null,\n    ...prev\n  } = _ref11;\n  let {\n    params: nextParams = {},\n    payload: nextPayload = null,\n    ...next\n  } = _ref12;\n  if (!lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_5___default()(prevParams, nextParams)) return false;\n  if (!lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_5___default()(prevPayload, nextPayload)) return false;\n  const keys = /* @__PURE__ */new Set([...Object.keys(prev), ...Object.keys(next)]);\n  for (const key of keys) {\n    if (prev[key] !== next[key]) return false;\n  }\n  return true;\n});\nfunction ErrorPane(props) {\n  const {\n    children,\n    flex,\n    minWidth,\n    paneKey,\n    title = \"Error\",\n    tone = \"critical\"\n  } = props;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.Pane, {\n    flex,\n    id: paneKey,\n    minWidth,\n    tone,\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PaneHeader, {\n      title\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PaneContent, {\n      overflow: \"auto\",\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n        paddingX: 4,\n        paddingY: 5,\n        children\n      })\n    })]\n  });\n}\nfunction getOpErrorTitle(op) {\n  if (op === \"delete\") {\n    return \"An error occurred while attempting to delete this document.\\n      This usually means that there are other documents that refers to it.\";\n  }\n  if (op === \"unpublish\") {\n    return \"An error occurred while attempting to unpublish this document.\\n      This usually means that there are other documents that refers to it.\";\n  }\n  return \"An error occurred during \".concat(op);\n}\nfunction getOpSuccessTitle(op) {\n  if (op === \"publish\") {\n    return \"The document was published\";\n  }\n  if (op === \"unpublish\") {\n    return \"The document was unpublished. A draft has been created from the latest published version.\";\n  }\n  if (op === \"discardChanges\") {\n    return \"All changes since last publish has now been discarded. The discarded draft can still be recovered from history\";\n  }\n  if (op === \"delete\") {\n    return \"The document was successfully deleted\";\n  }\n  return \"Successfully performed \".concat(op, \" on document\");\n}\nconst IGNORE_OPS = [\"patch\", \"commit\"];\nconst DocumentOperationResults = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function DocumentOperationResults2() {\n  const {\n    push: pushToast\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useToast)();\n  const {\n    documentId,\n    documentType\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const event = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useDocumentOperationEvent)(documentId, documentType);\n  const prevEvent = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(event);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!event || event === prevEvent.current) return;\n    if (event.type === \"error\") {\n      pushToast({\n        closable: true,\n        duration: 3e4,\n        // 30s\n        status: \"error\",\n        title: getOpErrorTitle(event.op),\n        description: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"details\", {\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"summary\", {\n            children: \"Details\"\n          }), event.error.message]\n        })\n      });\n    }\n    if (event.type === \"success\" && !IGNORE_OPS.includes(event.op)) {\n      pushToast({\n        closable: true,\n        status: \"success\",\n        title: getOpSuccessTitle(event.op)\n      });\n    }\n    prevEvent.current = event;\n  }, [event, pushToast]);\n  return null;\n});\nconst getHistoryMenuItem = params => {\n  const {\n    features,\n    hasValue,\n    changesOpen\n  } = params;\n  if (!features.reviewChanges) return null;\n  return {\n    action: \"reviewChanges\",\n    title: \"Review changes\",\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.RestoreIcon,\n    isDisabled: changesOpen || !hasValue\n  };\n};\nconst getInspectItem = _ref13 => {\n  let {\n    hasValue\n  } = _ref13;\n  return {\n    action: \"inspect\",\n    title: \"Inspect\",\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.BinaryDocumentIcon,\n    isDisabled: !hasValue,\n    shortcut: \"Ctrl+Alt+I\"\n  };\n};\nconst getProductionPreviewItem = _ref14 => {\n  let {\n    previewUrl\n  } = _ref14;\n  if (!previewUrl) return null;\n  return {\n    action: \"production-preview\",\n    title: \"Open preview\",\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.EarthAmericasIcon,\n    shortcut: \"Ctrl+Alt+O\"\n  };\n};\nconst getMenuItems = params => {\n  const items = [getProductionPreviewItem, getHistoryMenuItem, getInspectItem].filter(Boolean).map(fn => fn(params));\n  return items.filter(i => i !== null);\n};\nconst isSanityDocument = value => (0,sanity__WEBPACK_IMPORTED_MODULE_4__.isRecord)(value) && typeof value._id === \"string\" && typeof value._type === \"string\";\nfunction usePreviewUrl(value) {\n  const [previewUrl, setPreviewUrl] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(void 0);\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const {\n    resolveProductionUrl\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useSource)().document;\n  const value$ = (0,react_rx__WEBPACK_IMPORTED_MODULE_20__.useAsObservable)(value);\n  if (error) throw error;\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    value$.pipe(\n    // this so that the preview URL isn't fetched on every keystroke\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_50__.debounceTime)(500), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_32__.switchMap)(document => isSanityDocument(document) ? (0,rxjs__WEBPACK_IMPORTED_MODULE_31__.from)(resolveProductionUrl({\n      document\n    })) : (0,rxjs__WEBPACK_IMPORTED_MODULE_33__.of)(void 0)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_51__.catchError)(e => {\n      const message = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.isRecord)(e) && typeof e.message === \"string\" ? e.message : \"Unknown error\";\n      throw new Error(\"An error was thrown while trying to get your preview url: \".concat(message));\n    })).subscribe({\n      next: setPreviewUrl,\n      error: setError\n    });\n  }, [resolveProductionUrl, value$]);\n  return previewUrl;\n}\nfunction getInitialValueTemplateOpts(templates, opts) {\n  const payload = opts.panePayload || {};\n  const structureNodeTemplate = opts.templateName;\n  if (opts.urlTemplate && structureNodeTemplate && structureNodeTemplate !== opts.urlTemplate) {\n    console.warn(\"Conflicting templates: URL says \\\"\".concat(opts.urlTemplate, \"\\\", structure node says \\\"\").concat(structureNodeTemplate, \"\\\". Using \\\"\").concat(structureNodeTemplate, \"\\\".\"));\n  }\n  const template = structureNodeTemplate || opts.urlTemplate;\n  const typeTemplates = templates.filter(t => t.schemaType === opts.documentType);\n  const templateParams = {\n    ...opts.templateParams,\n    ...(typeof payload === \"object\" ? payload || {} : {})\n  };\n  let templateName = template;\n  if (!template && typeTemplates.length === 1) {\n    templateName = typeTemplates[0].id;\n  }\n  return {\n    templateName,\n    templateParams\n  };\n}\nconst emptyObject = {};\nconst DocumentPaneProvider = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(props => {\n  const {\n    children,\n    index,\n    pane,\n    paneKey\n  } = props;\n  const schema = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useSchema)();\n  const templates = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTemplates)();\n  const {\n    actions: documentActions,\n    badges: documentBadges,\n    unstable_languageFilter: languageFilterResolver\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useSource)().document;\n  const presenceStore = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.usePresenceStore)();\n  const paneRouter = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.usePaneRouter)();\n  const {\n    features\n  } = useDeskTool();\n  const {\n    push: pushToast\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useToast)();\n  const {\n    options,\n    menuItemGroups,\n    title = null,\n    views: viewsProp = []\n  } = pane;\n  const paneOptions = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useUnique)(options);\n  const documentIdRaw = paneOptions.id;\n  const documentId = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.getPublishedId)(documentIdRaw);\n  const documentType = options.type;\n  const paneParams = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useUnique)(paneRouter.params);\n  const panePayload = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useUnique)(paneRouter.payload);\n  const {\n    templateName,\n    templateParams\n  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => getInitialValueTemplateOpts(templates, {\n    documentType,\n    templateName: paneOptions.template,\n    templateParams: paneOptions.templateParameters,\n    panePayload,\n    urlTemplate: paneParams == null ? void 0 : paneParams.template\n  }), [documentType, paneOptions, paneParams, panePayload, templates]);\n  const initialValueRaw = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useInitialValue)({\n    documentId,\n    documentType,\n    templateName,\n    templateParams\n  });\n  const initialValue = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useUnique)(initialValueRaw);\n  const {\n    patch\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useDocumentOperation)(documentId, documentType);\n  const editState = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useEditState)(documentId, documentType);\n  const {\n    validation: validationRaw\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useValidationStatus)(documentId, documentType);\n  const connectionState = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useConnectionState)(documentId, documentType);\n  const schemaType = schema.get(documentType);\n  const value = (editState == null ? void 0 : editState.draft) || (editState == null ? void 0 : editState.published) || initialValue.value;\n  const actions = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => documentActions({\n    schemaType: documentType,\n    documentId\n  }), [documentActions, documentId, documentType]);\n  const badges = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => documentBadges({\n    schemaType: documentType,\n    documentId\n  }), [documentBadges, documentId, documentType]);\n  const languageFilter = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => languageFilterResolver({\n    schemaType: documentType,\n    documentId\n  }), [documentId, documentType, languageFilterResolver]);\n  const validation = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useUnique)(validationRaw);\n  const views = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useUnique)(viewsProp);\n  const params = paneRouter.params || emptyObject;\n  const [focusPath, setFocusPath] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(() => params.path ? (0,_sanity_util_paths__WEBPACK_IMPORTED_MODULE_17__.fromString)(params.path) : []);\n  const activeViewId = params.view || views[0] && views[0].id || null;\n  const [timelineMode, setTimelineMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"closed\");\n  const changesOpen = !!params.since;\n  const [timelineError, setTimelineError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const timelineStore = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineStore)({\n    documentId,\n    documentType,\n    onError: setTimelineError,\n    rev: params.rev,\n    since: params.since\n  });\n  const onOlderRevision = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.onOlderRevision);\n  const revTime = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.revTime);\n  const sinceAttributes = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.sinceAttributes);\n  const timelineDisplayed = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.timelineDisplayed);\n  const timelineReady = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.timelineReady);\n  const previewUrl = usePreviewUrl(value);\n  const [presence, setPresence] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const subscription = presenceStore.documentPresence(documentId).subscribe(nextPresence => {\n      setPresence(nextPresence);\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [documentId, presenceStore]);\n  const hasValue = Boolean(value);\n  const menuItems = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => getMenuItems({\n    features,\n    hasValue,\n    changesOpen,\n    previewUrl\n  }), [changesOpen, features, hasValue, previewUrl]);\n  const inspectOpen = params.inspect === \"on\";\n  const compareValue = changesOpen ? sinceAttributes : (editState == null ? void 0 : editState.published) || null;\n  const ready = connectionState === \"connected\" && editState.ready && (timelineReady || !!timelineError);\n  const displayed = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => onOlderRevision ? timelineDisplayed || {\n    _id: value._id,\n    _type: value._type\n  } : value, [onOlderRevision, timelineDisplayed, value]);\n  const setTimelineRange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newSince, newRev) => {\n    paneRouter.setParams({\n      ...paneRouter.params,\n      since: newSince,\n      rev: newRev || void 0\n    });\n  }, [paneRouter]);\n  const handleFocus = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(nextFocusPath => {\n    setFocusPath(nextFocusPath);\n    presenceStore.setLocation([{\n      type: \"document\",\n      documentId,\n      path: nextFocusPath,\n      lastActiveAt: /* @__PURE__ */new Date().toISOString()\n    }]);\n  }, [documentId, presenceStore, setFocusPath]);\n  const handleBlur = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(blurredPath => {\n    setFocusPath([]);\n  }, [setFocusPath]);\n  const patchRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(() => {\n    throw new Error(\"Nope\");\n  });\n  patchRef.current = event => {\n    patch.execute((0,sanity__WEBPACK_IMPORTED_MODULE_4__.toMutationPatches)(event.patches), initialValue.value);\n  };\n  const handleChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(event => patchRef.current(event), []);\n  const handleHistoryClose = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    paneRouter.setParams({\n      ...params,\n      since: void 0\n    });\n  }, [paneRouter, params]);\n  const handleHistoryOpen = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    paneRouter.setParams({\n      ...params,\n      since: \"@lastPublished\"\n    });\n  }, [paneRouter, params]);\n  const handlePaneClose = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => paneRouter.closeCurrent(), [paneRouter]);\n  const handlePaneSplit = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => paneRouter.duplicateCurrent(), [paneRouter]);\n  const toggleInspect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function () {\n    let toggle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !inspectOpen;\n    if (toggle) {\n      paneRouter.setParams({\n        ...params,\n        inspect: \"on\"\n      });\n    } else {\n      paneRouter.setParams(lodash_omit_js__WEBPACK_IMPORTED_MODULE_3___default()(params, \"inspect\"));\n    }\n  }, [inspectOpen, paneRouter, params]);\n  const handleMenuAction = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(item => {\n    if (item.action === \"production-preview\" && previewUrl) {\n      window.open(previewUrl);\n      return true;\n    }\n    if (item.action === \"inspect\") {\n      toggleInspect(true);\n      return true;\n    }\n    if (item.action === \"reviewChanges\") {\n      handleHistoryOpen();\n      return true;\n    }\n    return false;\n  }, [handleHistoryOpen, previewUrl, toggleInspect]);\n  const handleKeyUp = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(event => {\n    for (const item of menuItems) {\n      if (item.shortcut) {\n        if ((0,is_hotkey__WEBPACK_IMPORTED_MODULE_16__[\"default\"])(item.shortcut, event)) {\n          event.preventDefault();\n          event.stopPropagation();\n          handleMenuAction(item);\n          return;\n        }\n      }\n    }\n  }, [handleMenuAction, menuItems]);\n  const handleInspectClose = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => toggleInspect(false), [toggleInspect]);\n  const [openPath, onSetOpenPath] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n  const [fieldGroupState, onSetFieldGroupState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)();\n  const [collapsedPaths, onSetCollapsedPath] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)();\n  const [collapsedFieldSets, onSetCollapsedFieldSets] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)();\n  const handleOnSetCollapsedPath = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((path, collapsed) => {\n    onSetCollapsedPath(prevState => (0,sanity__WEBPACK_IMPORTED_MODULE_4__.setAtPath)(prevState, path, collapsed));\n  }, []);\n  const handleOnSetCollapsedFieldSet = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((path, collapsed) => {\n    onSetCollapsedFieldSets(prevState => (0,sanity__WEBPACK_IMPORTED_MODULE_4__.setAtPath)(prevState, path, collapsed));\n  }, []);\n  const handleSetActiveFieldGroup = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((path, groupName) => onSetFieldGroupState(prevState => (0,sanity__WEBPACK_IMPORTED_MODULE_4__.setAtPath)(prevState, path, groupName)), []);\n  const requiredPermission = value._createdAt ? \"update\" : \"create\";\n  const liveEdit = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => Boolean(schemaType == null ? void 0 : schemaType.liveEdit), [schemaType == null ? void 0 : schemaType.liveEdit]);\n  const docId = value._id ? value._id : \"dummy-id\";\n  const docPermissionsInput = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    return {\n      ...value,\n      _id: liveEdit ? (0,sanity__WEBPACK_IMPORTED_MODULE_4__.getPublishedId)(docId) : (0,sanity__WEBPACK_IMPORTED_MODULE_4__.getDraftId)(docId)\n    };\n  }, [liveEdit, value, docId]);\n  const [permissions, isPermissionsLoading] = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useDocumentValuePermissions)({\n    document: docPermissionsInput,\n    permission: requiredPermission\n  });\n  const isNonExistent = !(value == null ? void 0 : value._id);\n  const readOnly = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    const hasNoPermission = !isPermissionsLoading && !(permissions == null ? void 0 : permissions.granted);\n    const updateActionDisabled = !(0,_sanity_schema_internal__WEBPACK_IMPORTED_MODULE_21__.isActionEnabled)(schemaType, \"update\");\n    const createActionDisabled = isNonExistent && !(0,_sanity_schema_internal__WEBPACK_IMPORTED_MODULE_21__.isActionEnabled)(schemaType, \"create\");\n    const reconnecting = connectionState === \"reconnecting\";\n    return !ready || revTime !== null || hasNoPermission || updateActionDisabled || createActionDisabled || reconnecting;\n  }, [connectionState, isNonExistent, isPermissionsLoading, permissions == null ? void 0 : permissions.granted, ready, revTime, schemaType]);\n  const formState = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useFormState)(schemaType, {\n    value: displayed,\n    readOnly,\n    comparisonValue: compareValue,\n    focusPath,\n    openPath,\n    collapsedPaths,\n    presence,\n    validation,\n    collapsedFieldSets,\n    fieldGroupState,\n    changesOpen\n  });\n  const formStateRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(formState);\n  formStateRef.current = formState;\n  const setOpenPath = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(path => {\n    const ops = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.getExpandOperations)(formStateRef.current, path);\n    ops.forEach(op => {\n      if (op.type === \"expandPath\") {\n        onSetCollapsedPath(prevState => (0,sanity__WEBPACK_IMPORTED_MODULE_4__.setAtPath)(prevState, op.path, false));\n      }\n      if (op.type === \"expandFieldSet\") {\n        onSetCollapsedFieldSets(prevState => (0,sanity__WEBPACK_IMPORTED_MODULE_4__.setAtPath)(prevState, op.path, false));\n      }\n      if (op.type === \"setSelectedGroup\") {\n        onSetFieldGroupState(prevState => (0,sanity__WEBPACK_IMPORTED_MODULE_4__.setAtPath)(prevState, op.path, op.groupName));\n      }\n    });\n    onSetOpenPath(path);\n  }, [formStateRef]);\n  const documentPane = {\n    actions,\n    activeViewId,\n    badges,\n    changesOpen,\n    collapsedFieldSets,\n    collapsedPaths,\n    compareValue,\n    connectionState,\n    displayed,\n    documentId,\n    documentIdRaw,\n    documentType,\n    editState,\n    focusPath,\n    menuItems,\n    onBlur: handleBlur,\n    onChange: handleChange,\n    onFocus: handleFocus,\n    onPathOpen: setOpenPath,\n    onHistoryClose: handleHistoryClose,\n    onHistoryOpen: handleHistoryOpen,\n    onInspectClose: handleInspectClose,\n    onKeyUp: handleKeyUp,\n    onMenuAction: handleMenuAction,\n    onPaneClose: handlePaneClose,\n    onPaneSplit: handlePaneSplit,\n    onSetActiveFieldGroup: handleSetActiveFieldGroup,\n    onSetCollapsedPath: handleOnSetCollapsedPath,\n    onSetCollapsedFieldSet: handleOnSetCollapsedFieldSet,\n    index,\n    inspectOpen,\n    validation,\n    menuItemGroups: menuItemGroups || [],\n    paneKey,\n    previewUrl,\n    ready,\n    schemaType,\n    isPermissionsLoading,\n    permissions,\n    setTimelineMode,\n    setTimelineRange,\n    timelineError,\n    timelineMode,\n    timelineStore,\n    title,\n    value,\n    views,\n    formState,\n    unstable_languageFilter: languageFilter\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (connectionState === \"reconnecting\") {\n      pushToast({\n        id: \"sanity/desk/reconnecting\",\n        status: \"warning\",\n        title: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n          children: \"Connection lost. Reconnecting\\u2026\"\n        })\n      });\n    }\n  }, [connectionState, pushToast]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    var _a;\n    if (ready && params.path) {\n      const {\n        path,\n        ...restParams\n      } = params;\n      const pathFromUrl = (0,_sanity_util_paths__WEBPACK_IMPORTED_MODULE_17__.resolveKeyedPath)((_a = formStateRef.current) == null ? void 0 : _a.value, (0,_sanity_util_paths__WEBPACK_IMPORTED_MODULE_17__.fromString)(path));\n      setFocusPath(pathFromUrl);\n      setOpenPath(pathFromUrl);\n      paneRouter.setParams(restParams);\n    }\n  }, [params, documentId, setOpenPath, ready, paneRouter]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.DocumentPaneContext.Provider, {\n    value: documentPane,\n    children\n  });\n});\nDocumentPaneProvider.displayName = \"DocumentPaneProvider\";\nconst TIMELINE_LABELS = {\n  create: \"created\",\n  delete: \"deleted\",\n  discardDraft: \"discarded draft\",\n  initial: \"created\",\n  editDraft: \"edited\",\n  editLive: \"live edited\",\n  publish: \"published\",\n  unpublish: \"unpublished\"\n};\nconst TIMELINE_ICON_COMPONENTS = {\n  create: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.AddCircleIcon,\n  delete: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.TrashIcon,\n  discardDraft: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.CloseIcon,\n  initial: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.AddCircleIcon,\n  editDraft: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.EditIcon,\n  editLive: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.EditIcon,\n  publish: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.PublishIcon,\n  unpublish: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.UnpublishIcon\n};\nfunction formatTimelineEventLabel(type) {\n  return TIMELINE_LABELS[type];\n}\nfunction getTimelineEventIconComponent(type) {\n  return TIMELINE_ICON_COMPONENTS[type];\n}\nfunction UserAvatarStack(_ref15) {\n  let {\n    maxLength,\n    userIds\n  } = _ref15;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.AvatarStack, {\n    maxLength,\n    children: userIds.map(userId => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.UserAvatar, {\n      user: userId,\n      withTooltip: true\n    }, userId))\n  });\n}\nconst IconWrapper = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex)(_ref16 => {\n  let {\n    theme\n  } = _ref16;\n  var _a;\n  const borderColor = (_a = theme.sanity.color.base.skeleton) == null ? void 0 : _a.from;\n  return (0,styled_components__WEBPACK_IMPORTED_MODULE_45__.css)(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n    --timeline-hairline-width: 1px;\\n    position: relative;\\n    z-index: 2;\\n    margin: 0;\\n    padding: 0;\\n\\n    &::before {\\n      position: absolute;\\n      content: '';\\n      height: 100%;\\n      width: var(--timeline-hairline-width);\\n      background: \", \";\\n      top: 0;\\n      left: calc((100% - var(--timeline-hairline-width)) / 2);\\n      z-index: 1;\\n    }\\n  \"])), borderColor);\n});\nconst Root$5 = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button)(_ref17 => {\n  let {\n    $selected\n  } = _ref17;\n  return (0,styled_components__WEBPACK_IMPORTED_MODULE_45__.css)(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n    position: relative;\\n    width: 100%;\\n\\n    /* Line styling */\\n    &[data-first] \", \"::before {\\n      height: 50%;\\n      top: unset;\\n      bottom: 0;\\n    }\\n\\n    &[data-last] \", \"::before {\\n      height: 50%;\\n    }\\n\\n    \", \"\\n  \"])), IconWrapper, IconWrapper, $selected && (0,styled_components__WEBPACK_IMPORTED_MODULE_45__.css)(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n      \", \"::before {\\n        background: transparent;\\n      }\\n    \"])), IconWrapper));\n});\nconst IconBox = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box)(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n  background: var(--card-bg-color);\\n  border-radius: 50px;\\n  position: relative;\\n  z-index: 2;\\n\"])));\nconst EventLabel = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text)(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n  text-transform: capitalize;\\n\"])));\nconst TimestampBox = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box)(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n  min-width: 1rem;\\n  margin-left: \", \";\\n\"])), _ref18 => {\n  let {\n    theme\n  } = _ref18;\n  return \"-\".concat((0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.rem)(theme.sanity.space[1]));\n});\nconst TIMELINE_ITEM_EVENT_TONE = {\n  initial: \"primary\",\n  create: \"primary\",\n  publish: \"positive\",\n  editLive: \"caution\",\n  editDraft: \"caution\",\n  unpublish: \"critical\",\n  discardDraft: \"critical\",\n  delete: \"critical\",\n  withinSelection: \"primary\"\n};\nfunction TimelineItem(_ref19) {\n  let {\n    chunk,\n    isFirst,\n    isLast,\n    isLatest,\n    isSelected,\n    onSelect,\n    timestamp,\n    type\n  } = _ref19;\n  const iconComponent = getTimelineEventIconComponent(type);\n  const authorUserIds = Array.from(chunk.authors);\n  const formattedTimestamp = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    const parsedDate = new Date(timestamp);\n    const formattedDate = (0,date_fns__WEBPACK_IMPORTED_MODULE_52__[\"default\"])(parsedDate, \"MMM d, yyyy, hh:mm a\");\n    return formattedDate;\n  }, [timestamp]);\n  const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(evt => {\n    evt.preventDefault();\n    evt.stopPropagation();\n    onSelect(chunk);\n  }, [onSelect, chunk]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root$5, {\n    $selected: isSelected,\n    \"data-chunk-id\": chunk.id,\n    \"data-first\": isFirst ? true : void 0,\n    \"data-last\": isLast ? true : void 0,\n    \"data-ui\": \"timelineItem\",\n    mode: isSelected ? \"default\" : \"bleed\",\n    onClick: handleClick,\n    padding: 0,\n    radius: 2,\n    tone: isSelected ? \"primary\" : TIMELINE_ITEM_EVENT_TONE[chunk.type],\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n      paddingX: 2,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n        align: \"stretch\",\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(IconWrapper, {\n          align: \"center\",\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(IconBox, {\n            padding: 2,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n              size: 2,\n              children: iconComponent && (0,react__WEBPACK_IMPORTED_MODULE_1__.createElement)(iconComponent)\n            })\n          })\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Stack, {\n          space: 2,\n          margin: 2,\n          children: [isLatest && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Card, {\n              padding: 1,\n              radius: 2,\n              shadow: 1,\n              tone: isSelected ? \"primary\" : TIMELINE_ITEM_EVENT_TONE[chunk.type],\n              children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Label, {\n                muted: true,\n                size: 0,\n                children: \"Latest\"\n              })\n            })\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(EventLabel, {\n              size: 1,\n              weight: \"medium\",\n              children: formatTimelineEventLabel(type) || /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n                children: type\n              })\n            })\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TimestampBox, {\n            paddingX: 1,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n              size: 0,\n              muted: true,\n              children: formattedTimestamp\n            })\n          })]\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n          flex: 1,\n          justify: \"flex-end\",\n          align: \"center\",\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(UserAvatarStack, {\n            maxLength: 3,\n            userIds: authorUserIds\n          })\n        })]\n      })\n    })\n  });\n}\nconst StackWrapper = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Stack)(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\\n  max-width: 200px;\\n\"])));\nconst ListWrapper = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex)(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"\\n  max-height: calc(100vh - 198px);\\n  min-width: 244px;\\n\"])));\nconst Root$4 = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box)(_ref20 => {\n  let {\n    $visible\n  } = _ref20;\n  return (0,styled_components__WEBPACK_IMPORTED_MODULE_45__.css)(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"\\n    opacity: 0;\\n    pointer-events: none;\\n\\n    \", \"\\n  \"])), $visible && (0,styled_components__WEBPACK_IMPORTED_MODULE_45__.css)(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"\\n      opacity: 1;\\n      pointer-events: auto;\\n    \"]))));\n});\nconst Timeline = _ref21 => {\n  let {\n    chunks,\n    disabledBeforeFirstChunk,\n    hasMoreChunks,\n    lastChunk,\n    onLoadMore,\n    onSelect,\n    firstChunk\n  } = _ref21;\n  const [mounted, setMounted] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const filteredChunks = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    return chunks.filter(c => {\n      if (disabledBeforeFirstChunk && firstChunk) {\n        return c.index < firstChunk.index;\n      }\n      return true;\n    });\n  }, [chunks, disabledBeforeFirstChunk, firstChunk]);\n  const selectedIndex = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => (lastChunk == null ? void 0 : lastChunk.id) ? filteredChunks.findIndex(c => c.id === lastChunk.id) : -1, [lastChunk == null ? void 0 : lastChunk.id, filteredChunks]);\n  const renderItem = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((chunk, _ref22) => {\n    let {\n      activeIndex\n    } = _ref22;\n    const isFirst = activeIndex === 0;\n    const isLast = filteredChunks && activeIndex === filteredChunks.length - 1 || false;\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n      paddingBottom: isLast ? 1 : 0,\n      paddingTop: isFirst ? 1 : 0,\n      paddingX: 1,\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TimelineItem, {\n        chunk,\n        isFirst,\n        isLast,\n        isLatest: activeIndex === 0 && !disabledBeforeFirstChunk,\n        isSelected: activeIndex === selectedIndex,\n        onSelect,\n        timestamp: chunk.endTimestamp,\n        type: chunk.type\n      }), activeIndex === filteredChunks.length - 1 && hasMoreChunks && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n        align: \"center\",\n        justify: \"center\",\n        padding: 4,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Spinner, {\n          muted: true\n        })\n      })]\n    });\n  }, [disabledBeforeFirstChunk, filteredChunks, hasMoreChunks, onSelect, selectedIndex]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => setMounted(true), []);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(Root$4, {\n    $visible: !selectedIndex || mounted,\n    \"data-ui\": \"timeline\",\n    children: [filteredChunks.length === 0 && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(StackWrapper, {\n      padding: 3,\n      space: 3,\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n        size: 1,\n        weight: \"semibold\",\n        children: \"No document history\"\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n        muted: true,\n        size: 1,\n        children: \"When changing the content of the document, the document versions will appear in this menu.\"\n      })]\n    }), filteredChunks.length > 0 && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ListWrapper, {\n      direction: \"column\",\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.CommandList, {\n        activeItemDataAttr: \"data-hovered\",\n        ariaLabel: \"Document revisions\",\n        autoFocus: \"list\",\n        initialIndex: selectedIndex,\n        initialScrollAlign: \"center\",\n        itemHeight: 40,\n        items: filteredChunks,\n        onEndReached: onLoadMore,\n        onEndReachedIndexOffset: 20,\n        overscan: 5,\n        renderItem,\n        wrapAround: false\n      })\n    })]\n  });\n};\nTimeline.displayName = \"Timeline\";\nfunction TimelineError() {\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n    align: \"flex-start\",\n    gap: 3,\n    padding: 4,\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.TextWithTone, {\n      tone: \"critical\",\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_46__.ErrorOutlineIcon, {})\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Stack, {\n      space: 4,\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.TextWithTone, {\n        size: 1,\n        tone: \"critical\",\n        weight: \"semibold\",\n        children: \"An error occurred whilst retrieving document changes.\"\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.TextWithTone, {\n        size: 1,\n        tone: \"critical\",\n        children: \"Document history transactions have not been affected.\"\n      })]\n    })]\n  });\n}\nconst Root$3 = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Popover)(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"\\n  overflow: hidden;\\n  overflow: clip;\\n\"])));\nfunction TimelineMenu(_ref23) {\n  let {\n    chunk,\n    mode,\n    placement\n  } = _ref23;\n  const {\n    setTimelineRange,\n    setTimelineMode,\n    timelineError,\n    ready,\n    timelineStore\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const [open, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [button, setButton] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const [popover, setPopover] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const toast = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useToast)();\n  const chunks = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.chunks);\n  const loading = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.isLoading);\n  const hasMoreChunks = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.hasMoreChunks);\n  const realRevChunk = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.realRevChunk);\n  const sinceTime = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.sinceTime);\n  const handleOpen = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    setTimelineMode(mode);\n    setOpen(true);\n  }, [mode, setTimelineMode]);\n  const handleClose = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    setTimelineMode(\"closed\");\n    setOpen(false);\n  }, [setTimelineMode]);\n  const handleClickOutside = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    if (open) {\n      handleClose();\n    }\n  }, [handleClose, open]);\n  const handleGlobalKeyDown = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(event => {\n    if (open && (event.key === \"Escape\" || event.key === \"Tab\")) {\n      handleClose();\n      button == null ? void 0 : button.focus();\n    }\n  }, [button, handleClose, open]);\n  (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useClickOutside)(handleClickOutside, [button, popover]);\n  (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useGlobalKeyDown)(handleGlobalKeyDown);\n  const selectRev = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(revChunk => {\n    try {\n      const [sinceId, revId] = timelineStore.findRangeForRev(revChunk);\n      setTimelineMode(\"closed\");\n      setTimelineRange(sinceId, revId);\n    } catch (err) {\n      toast.push({\n        closable: true,\n        description: err.message,\n        status: \"error\",\n        title: \"Unable to load revision\"\n      });\n    }\n  }, [setTimelineMode, setTimelineRange, timelineStore, toast]);\n  const selectSince = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(sinceChunk => {\n    try {\n      const [sinceId, revId] = timelineStore.findRangeForSince(sinceChunk);\n      setTimelineMode(\"closed\");\n      setTimelineRange(sinceId, revId);\n    } catch (err) {\n      toast.push({\n        closable: true,\n        description: err.message,\n        status: \"error\",\n        title: \"Unable to load revision\"\n      });\n    }\n  }, [setTimelineMode, setTimelineRange, timelineStore, toast]);\n  const handleLoadMore = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    if (!loading) {\n      timelineStore.loadMore();\n    }\n  }, [loading, timelineStore]);\n  const content = timelineError ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TimelineError, {}) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n    children: [mode === \"rev\" && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Timeline, {\n      chunks,\n      firstChunk: realRevChunk,\n      hasMoreChunks,\n      lastChunk: realRevChunk,\n      onLoadMore: handleLoadMore,\n      onSelect: selectRev\n    }), mode === \"since\" && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Timeline, {\n      chunks,\n      disabledBeforeFirstChunk: true,\n      firstChunk: realRevChunk,\n      hasMoreChunks,\n      lastChunk: sinceTime,\n      onLoadMore: handleLoadMore,\n      onSelect: selectSince\n    })]\n  });\n  const timeLabel = useFormattedTimestamp((chunk == null ? void 0 : chunk.endTimestamp) || \"\");\n  const revLabel = chunk ? \"\".concat(lodash_upperFirst_js__WEBPACK_IMPORTED_MODULE_22___default()(formatTimelineEventLabel(chunk.type)), \": \").concat(timeLabel) : \"Latest version\";\n  const sinceLabel = chunk ? \"Since: \".concat(timeLabel) : \"Since: unknown version\";\n  const buttonLabel = mode === \"rev\" ? revLabel : sinceLabel;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root$3, {\n    constrainSize: true,\n    content: open && content,\n    \"data-ui\": \"versionMenu\",\n    open,\n    placement,\n    portal: true,\n    ref: setPopover,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n      disabled: !ready,\n      mode: \"bleed\",\n      fontSize: 1,\n      padding: 2,\n      iconRight: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.SelectIcon,\n      onClick: open ? handleClose : handleOpen,\n      ref: setButton,\n      selected: open,\n      text: ready ? buttonLabel : \"Loading history\"\n    })\n  });\n}\nfunction useFormattedTimestamp(time) {\n  const formatted = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    const parsedDate = time ? new Date(time) : /* @__PURE__ */new Date();\n    const formattedDate = (0,date_fns__WEBPACK_IMPORTED_MODULE_52__[\"default\"])(parsedDate, \"MMM d, yyyy, hh:mm a\");\n    return formattedDate;\n  }, [time]);\n  return formatted;\n}\nfunction LoadingContent() {\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Delay, {\n    ms: 300,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n      align: \"center\",\n      direction: \"column\",\n      height: \"fill\",\n      justify: \"center\",\n      paddingTop: 3,\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Spinner, {\n        muted: true\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n        marginTop: 3,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n          align: \"center\",\n          muted: true,\n          size: 1,\n          children: \"Loading changes\"\n        })\n      })]\n    })\n  });\n}\nfunction collectLatestAuthorAnnotations(diff) {\n  const authorMap = /* @__PURE__ */new Map();\n  (0,sanity__WEBPACK_IMPORTED_MODULE_4__.visitDiff)(diff, child => {\n    if (child.action === \"unchanged\" || !(\"annotation\" in child) || !child.annotation) {\n      return true;\n    }\n    const {\n      author,\n      timestamp\n    } = child.annotation;\n    const previous = authorMap.get(author);\n    if (!previous || previous.timestamp < timestamp) {\n      authorMap.set(author, child.annotation);\n    }\n    return true;\n  });\n  return Array.from(authorMap.values()).sort((a, b) => a.timestamp < b.timestamp ? 1 : -1);\n}\nconst Scroller$1 = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(sanity__WEBPACK_IMPORTED_MODULE_4__.ScrollContainer)(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([\"\\n  height: 100%;\\n  overflow: auto;\\n  position: relative;\\n  scroll-behavior: smooth;\\n\"])));\nfunction ChangesPanel() {\n  const {\n    documentId,\n    onHistoryClose,\n    schemaType,\n    timelineError,\n    timelineStore,\n    value\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const {\n    collapsed\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.usePane)();\n  const scrollRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  const diff = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.diff);\n  const onOlderRevision = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.onOlderRevision);\n  const selectionState = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.selectionState);\n  const sinceTime = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.sinceTime);\n  const loading = selectionState === \"loading\";\n  const isComparingCurrent = !onOlderRevision;\n  const documentContext = react__WEBPACK_IMPORTED_MODULE_1___default().useMemo(() => ({\n    documentId,\n    schemaType,\n    FieldWrapper: sanity__WEBPACK_IMPORTED_MODULE_4__.ChangeFieldWrapper,\n    rootDiff: diff,\n    isComparingCurrent,\n    value\n  }), [documentId, diff, isComparingCurrent, schemaType, value]);\n  const changeAnnotations = react__WEBPACK_IMPORTED_MODULE_1___default().useMemo(() => diff ? collectLatestAuthorAnnotations(diff) : [], [diff]);\n  if (collapsed) {\n    return null;\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n    direction: \"column\",\n    flex: 1,\n    style: {\n      borderLeft: \"1px dashed var(--card-border-color)\",\n      overflow: \"hidden\",\n      minWidth: 320\n    },\n    \"data-testid\": \"review-changes-pane\",\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PaneHeader, {\n      actions: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n        icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.CloseIcon,\n        mode: \"bleed\",\n        onClick: onHistoryClose,\n        padding: 3,\n        title: \"Hide changes panel\"\n      }),\n      subActions: changeAnnotations.length > 0 && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n        paddingRight: 1,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.DiffTooltip, {\n          annotations: changeAnnotations,\n          description: \"Changes by\",\n          placement: \"bottom-end\",\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.AvatarStack, {\n            maxLength: 4,\n            children: changeAnnotations.map(_ref24 => {\n              let {\n                author\n              } = _ref24;\n              return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.UserAvatar, {\n                user: author\n              }, author);\n            })\n          })\n        })\n      }),\n      tabs: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TimelineMenu, {\n        mode: \"since\",\n        chunk: sinceTime,\n        placement: \"bottom-start\"\n      }),\n      title: \"Changes\"\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PaneContent, {\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.BoundaryElementProvider, {\n        element: scrollRef.current,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Scroller$1, {\n          \"data-ui\": \"Scroller\",\n          ref: scrollRef,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n            flex: 1,\n            padding: 4,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Content, {\n              diff,\n              documentContext,\n              error: timelineError,\n              loading\n            })\n          })\n        })\n      })\n    })]\n  });\n}\nfunction Content(_ref25) {\n  let {\n    error,\n    diff,\n    documentContext,\n    loading\n  } = _ref25;\n  const {\n    schemaType\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  if (error) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.NoChanges, {});\n  }\n  if (loading) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingContent, {});\n  }\n  if (!diff) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.NoChanges, {});\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.DocumentChangeContext.Provider, {\n    value: documentContext,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.ChangeList, {\n      diff,\n      schemaType\n    })\n  });\n}\nfunction useDeskToolSetting(namespace, key, defaultValue) {\n  const settingsStore = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useSettingsStore)();\n  const [value, setValue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(defaultValue);\n  const deskToolSettings = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => settingsStore.forNamespace(\"desk-tool\"), [settingsStore]);\n  const settings = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (namespace) {\n      return deskToolSettings.forNamespace(namespace).forKey(key);\n    }\n    return deskToolSettings.forKey(key);\n  }, [deskToolSettings, namespace, key]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const sub = settings.listen(defaultValue).subscribe({\n      next: setValue\n    });\n    return () => sub == null ? void 0 : sub.unsubscribe();\n  }, [defaultValue, key, namespace, settings]);\n  const set = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(newValue => {\n    setValue(newValue);\n    settings.set(newValue);\n  }, [settings]);\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => [value, set], [set, value]);\n}\nconst VIEW_MODE_PARSED = {\n  id: \"parsed\",\n  title: \"Parsed\"\n};\nconst VIEW_MODE_RAW = {\n  id: \"raw\",\n  title: \"Raw JSON\"\n};\nconst VIEW_MODES = [VIEW_MODE_PARSED, VIEW_MODE_RAW];\nconst lru = hashlru__WEBPACK_IMPORTED_MODULE_24___default()(1e3);\nfunction isExpanded(keyPath, value) {\n  const cached = lru.get(keyPath);\n  if (cached === void 0) {\n    lru.set(keyPath, Array.isArray(value) || (0,sanity__WEBPACK_IMPORTED_MODULE_4__.isRecord)(value));\n    return isExpanded(keyPath, value);\n  }\n  return cached;\n}\nfunction toggleExpanded(event) {\n  const {\n    path\n  } = event;\n  const current = lru.get(path);\n  if (current === void 0) {\n    return;\n  }\n  lru.set(path, !current);\n}\nfunction selectElement(element) {\n  const sel = window.getSelection();\n  if (sel) {\n    const range = document.createRange();\n    sel.removeAllRanges();\n    range.selectNodeContents(element);\n    sel.addRange(range);\n  }\n}\nfunction select(event) {\n  selectElement(event.currentTarget);\n}\nfunction maybeSelectAll(event) {\n  const selectAll = event.keyCode === 65 && (event.metaKey || event.ctrlKey);\n  if (!selectAll) {\n    return;\n  }\n  event.preventDefault();\n  selectElement(event.currentTarget);\n}\nfunction isDocumentLike(value) {\n  return (0,sanity__WEBPACK_IMPORTED_MODULE_4__.isRecord)(value) && (0,sanity__WEBPACK_IMPORTED_MODULE_4__.isString)(value._id) && (0,sanity__WEBPACK_IMPORTED_MODULE_4__.isString)(value._type);\n}\nconst JSONInspectorWrapper = styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"].div(_ref26 => {\n  let {\n    theme\n  } = _ref26;\n  const {\n    color,\n    fonts,\n    space\n  } = theme.sanity;\n  return (0,styled_components__WEBPACK_IMPORTED_MODULE_45__.css)(_templateObject15 || (_templateObject15 = _taggedTemplateLiteral([\"\\n    & .json-inspector,\\n    & .json-inspector .json-inspector__selection {\\n      font-family: \", \";\\n      font-size: \", \"px;\\n      line-height: \", \"px;\\n      color: var(--card-code-fg-color);\\n    }\\n\\n    & .json-inspector .json-inspector__leaf {\\n      padding-left: \", \";\\n    }\\n\\n    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {\\n      padding-top: \", \";\\n      padding-left: 0;\\n    }\\n\\n    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {\\n      display: none;\\n    }\\n\\n    & .json-inspector .json-inspector__line {\\n      display: block;\\n      position: relative;\\n      cursor: default;\\n    }\\n\\n    & .json-inspector .json-inspector__line::after {\\n      content: '';\\n      position: absolute;\\n      top: 0;\\n      left: -200px;\\n      right: -50px;\\n      bottom: 0;\\n      z-index: -1;\\n      pointer-events: none;\\n    }\\n\\n    & .json-inspector .json-inspector__line:hover::after {\\n      background: var(--card-code-bg-color);\\n    }\\n\\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {\\n      cursor: pointer;\\n    }\\n\\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {\\n      content: '\\u25B8 ';\\n      margin-left: calc(0 - \", \" + 3px);\\n      font-size: \", \"px;\\n      line-height: \", \"px;\\n    }\\n\\n    &\\n      .json-inspector\\n      .json-inspector__leaf_expanded.json-inspector__leaf_composite\\n      > .json-inspector__line::before {\\n      content: '\\u25BE ';\\n      font-size: \", \"px;\\n      line-height: \", \"px;\\n    }\\n\\n    & .json-inspector .json-inspector__radio,\\n    & .json-inspector .json-inspector__flatpath {\\n      display: none;\\n    }\\n\\n    & .json-inspector .json-inspector__value {\\n      margin-left: \", \";\\n    }\\n\\n    &\\n      .json-inspector\\n      > .json-inspector__leaf_root\\n      > .json-inspector__line\\n      > .json-inspector__key\\n      + .json-inspector__value {\\n      margin: 0;\\n    }\\n\\n    & .json-inspector .json-inspector__key {\\n      color: \", \";\\n    }\\n\\n    & .json-inspector .json-inspector__value_helper,\\n    & .json-inspector .json-inspector__value_null {\\n      color: \", \";\\n    }\\n\\n    & .json-inspector .json-inspector__not-found {\\n      padding-top: \", \";\\n    }\\n\\n    & .json-inspector .json-inspector__value_string {\\n      color: \", \";\\n    }\\n\\n    & .json-inspector .json-inspector__value_boolean {\\n      color: \", \";\\n    }\\n\\n    & .json-inspector .json-inspector__value_number {\\n      color: \", \";\\n    }\\n\\n    & .json-inspector .json-inspector__show-original {\\n      display: inline-block;\\n      padding: 0 6px;\\n      cursor: pointer;\\n    }\\n\\n    & .json-inspector .json-inspector__show-original:hover {\\n      color: inherit;\\n    }\\n\\n    & .json-inspector .json-inspector__show-original::before {\\n      content: '\\u2194';\\n    }\\n\\n    & .json-inspector .json-inspector__show-original:hover::after {\\n      content: ' expand';\\n    }\\n  \"])), fonts.code.family, fonts.code.sizes[2].fontSize, fonts.code.sizes[2].lineHeight, (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.rem)(space[4]), (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.rem)(space[3]), (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.rem)(space[4]), fonts.code.sizes[2].fontSize, fonts.code.sizes[2].lineHeight, fonts.code.sizes[2].fontSize, fonts.code.sizes[2].lineHeight, (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.rem)(space[4] / 2), color.syntax.property, color.syntax.constant, (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.rem)(space[3]), color.syntax.string, color.syntax.boolean, color.syntax.number);\n});\nfunction Search(props) {\n  const {\n    onChange,\n    query\n  } = props;\n  const handleChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(event => onChange(event.target.value), [onChange]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.TextInput, {\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.SearchIcon,\n    onChange: handleChange,\n    placeholder: \"Search\",\n    radius: 2,\n    value: query || \"\"\n  });\n}\nfunction InspectDialog(props) {\n  const {\n    value\n  } = props;\n  const {\n    onInspectClose,\n    paneKey\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const dialogIdPrefix = \"\".concat(paneKey, \"_inspect_\");\n  const [viewModeId, onViewModeChange] = useDeskToolSetting(\"desk-tool\", \"inspect-view-preferred-view-mode-\".concat(paneKey), \"parsed\");\n  const viewMode = VIEW_MODES.find(mode => mode.id === viewModeId);\n  const setParsedViewMode = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    onViewModeChange(VIEW_MODE_PARSED.id);\n  }, [onViewModeChange]);\n  const setRawViewMode = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    onViewModeChange(VIEW_MODE_RAW.id);\n  }, [onViewModeChange]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Dialog, {\n    id: \"\".concat(dialogIdPrefix, \"dialog\"),\n    header: isDocumentLike(value) ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      children: [\"Inspecting\", \" \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"em\", {\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.DocTitle, {\n          document: value\n        })\n      })]\n    }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"em\", {\n      children: \"No value\"\n    }),\n    onClose: onInspectClose,\n    onClickOutside: onInspectClose,\n    width: 3,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n      direction: \"column\",\n      height: \"fill\",\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Card, {\n        padding: 3,\n        shadow: 1,\n        style: {\n          position: \"sticky\",\n          bottom: 0,\n          zIndex: 3\n        },\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.TabList, {\n          space: 1,\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Tab, {\n            \"aria-controls\": \"\".concat(dialogIdPrefix, \"tabpanel\"),\n            fontSize: 1,\n            id: \"\".concat(dialogIdPrefix, \"tab-\").concat(VIEW_MODE_PARSED.id),\n            label: VIEW_MODE_PARSED.title,\n            onClick: setParsedViewMode,\n            selected: viewMode === VIEW_MODE_PARSED\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Tab, {\n            \"aria-controls\": \"\".concat(dialogIdPrefix, \"tabpanel\"),\n            fontSize: 1,\n            id: \"\".concat(dialogIdPrefix, \"tab-\").concat(VIEW_MODE_RAW.id),\n            label: VIEW_MODE_RAW.title,\n            onClick: setRawViewMode,\n            selected: viewMode === VIEW_MODE_RAW\n          })]\n        })\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.TabPanel, {\n        \"aria-labelledby\": \"\".concat(dialogIdPrefix, \"tab-\").concat(viewModeId),\n        flex: 1,\n        id: \"\".concat(dialogIdPrefix, \"tabpanel\"),\n        overflow: \"auto\",\n        padding: 4,\n        style: {\n          outline: \"none\"\n        },\n        children: [viewMode === VIEW_MODE_PARSED && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JSONInspectorWrapper, {\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)((_rexxars_react_json_inspector__WEBPACK_IMPORTED_MODULE_23___default()), {\n            data: value,\n            isExpanded,\n            onClick: toggleExpanded,\n            search: Search\n          })\n        }), viewMode === VIEW_MODE_RAW && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Code, {\n          language: \"json\",\n          tabIndex: 0,\n          onKeyDown: maybeSelectAll,\n          onDoubleClick: select,\n          onFocus: select,\n          children: JSON.stringify(value, null, 2)\n        })]\n      })]\n    })\n  });\n}\nconst Root$2 = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Card)(_templateObject16 || (_templateObject16 = _taggedTemplateLiteral([\"\\n  position: relative;\\n  z-index: 50;\\n\"])));\nconst TextOneLine = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text)(_templateObject17 || (_templateObject17 = _taggedTemplateLiteral([\"\\n  & > * {\\n    overflow: hidden;\\n    overflow: clip;\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n  }\\n\"])));\nconst ReferenceChangedBanner = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(() => {\n  var _a, _b, _c, _d, _e, _f;\n  const documentPreviewStore = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useDocumentPreviewStore)();\n  const {\n    params,\n    groupIndex,\n    routerPanesState,\n    replaceCurrent,\n    BackLink\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.usePaneRouter)();\n  const routerReferenceId = (_a = routerPanesState[groupIndex]) == null ? void 0 : _a[0].id;\n  const parentGroup = routerPanesState[groupIndex - 1];\n  const parentSibling = parentGroup == null ? void 0 : parentGroup[0];\n  const parentId = parentSibling == null ? void 0 : parentSibling.id;\n  const hasHistoryOpen = Boolean((_b = parentSibling == null ? void 0 : parentSibling.params) == null ? void 0 : _b.rev);\n  const parentRefPath = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    return (params == null ? void 0 : params.parentRefPath) && (0,_sanity_util_paths__WEBPACK_IMPORTED_MODULE_17__.fromString)(params.parentRefPath) || null;\n  }, [params == null ? void 0 : params.parentRefPath]);\n  const referenceInfo = (0,react_rx__WEBPACK_IMPORTED_MODULE_20__.useMemoObservable)(() => {\n    const parentRefPathSegment = parentRefPath == null ? void 0 : parentRefPath[0];\n    if (!parentId || !parentRefPathSegment || !parentRefPath) {\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_33__.of)({\n        loading: false\n      });\n    }\n    const publishedId = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.getPublishedId)(parentId);\n    const path = (0,_sanity_util_paths__WEBPACK_IMPORTED_MODULE_17__.fromString)(parentRefPathSegment);\n    const keyedSegmentIndex = path.findIndex(p => typeof p == \"object\" && \"_key\" in p);\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_35__.concat)(\n    // emit a loading state instantly\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_33__.of)({\n      loading: true\n    }),\n    // then emit the values from watching the published ID's path\n    documentPreviewStore.unstable_observePathsDocumentPair(publishedId, keyedSegmentIndex === -1 ? path : path.slice(0, keyedSegmentIndex)).pipe(\n    // this debounce time is needed to prevent flashing banners due to\n    // the router state updating faster than the content-lake state. we\n    // debounce to wait for more emissions because the value pulled\n    // initially could be stale.\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_50__.debounceTime)(750), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_36__.map)(_ref27 => {\n      let {\n        draft,\n        published\n      } = _ref27;\n      var _a2;\n      return {\n        loading: false,\n        result: {\n          availability: {\n            draft: draft.availability,\n            published: published.availability\n          },\n          refValue: (_a2 = (0,_sanity_util_paths__WEBPACK_IMPORTED_MODULE_17__.get)(draft.snapshot || published.snapshot, parentRefPath)) == null ? void 0 : _a2._ref\n        }\n      };\n    })));\n  }, [documentPreviewStore, parentId, parentRefPath], {\n    loading: true\n  });\n  const handleReloadReference = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    var _a2;\n    if (referenceInfo.loading) return;\n    if ((_a2 = referenceInfo.result) == null ? void 0 : _a2.refValue) {\n      replaceCurrent({\n        id: referenceInfo.result.refValue,\n        params\n      });\n    }\n  }, [referenceInfo.loading, referenceInfo.result, replaceCurrent, params]);\n  const shouldHide =\n  // if `parentId` or `parentRefPath` is not present then this banner is n/a\n  !parentId || !parentRefPath ||\n  // if viewing this pane via history, then hide\n  hasHistoryOpen ||\n  // if loading, hide\n  referenceInfo.loading ||\n  // if the parent document is not available (e.g. due to permission denied or\n  // not found) we don't want to display a warning here, but instead rely on the\n  // parent view to display the appropriate message\n  !((_c = referenceInfo.result) == null ? void 0 : _c.availability.draft.available) && !((_d = referenceInfo.result) == null ? void 0 : _d.availability.published.available) ||\n  // if the references are the same, then hide the reference changed banner\n  ((_e = referenceInfo.result) == null ? void 0 : _e.refValue) === routerReferenceId;\n  if (shouldHide) return null;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root$2, {\n    shadow: 1,\n    tone: \"caution\",\n    \"data-testid\": \"reference-changed-banner\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Container, {\n      paddingX: 4,\n      paddingY: 2,\n      sizing: \"border\",\n      width: 1,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n        align: \"center\",\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n          size: 1,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_46__.WarningOutlineIcon, {})\n        }), ((_f = referenceInfo.result) == null ? void 0 : _f.refValue) ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n            flex: 1,\n            marginLeft: 3,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TextOneLine, {\n              title: \"This reference has changed since you opened it.\",\n              size: 1,\n              children: \"This reference has changed since you opened it.\"\n            })\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n            marginLeft: 3,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n              onClick: handleReloadReference,\n              icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.SyncIcon,\n              fontSize: 1,\n              mode: \"ghost\",\n              padding: 2,\n              space: 2,\n              text: \"Reload reference\"\n            })\n          })]\n        }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n            flex: 1,\n            marginLeft: 3,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TextOneLine, {\n              title: \"This reference has been removed since you opened it.\",\n              size: 1,\n              children: \"This reference has been removed since you opened it.\"\n            })\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n            marginLeft: 3,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n              as: BackLink,\n              icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.CloseIcon,\n              fontSize: 1,\n              mode: \"ghost\",\n              padding: 2,\n              space: 2,\n              text: \"Close reference\"\n            })\n          })]\n        })]\n      })\n    })\n  });\n});\nReferenceChangedBanner.displayName = \"ReferenceChangedBanner\";\nconst Root$1 = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Card)(_templateObject18 || (_templateObject18 = _taggedTemplateLiteral([\"\\n  position: relative;\\n  z-index: 50;\\n\"])));\nfunction PermissionCheckBanner(_ref28) {\n  let {\n    granted,\n    requiredPermission\n  } = _ref28;\n  var _a, _b;\n  const currentUser = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useCurrentUser)();\n  const plural = ((_a = currentUser == null ? void 0 : currentUser.roles) == null ? void 0 : _a.length) !== 1;\n  const roles = join(((_b = currentUser == null ? void 0 : currentUser.roles) == null ? void 0 : _b.map(r => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n    children: r.title\n  }, r.name))) || [], \", \");\n  if (granted) return null;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root$1, {\n    \"data-testid\": \"permission-check-banner\",\n    shadow: 1,\n    tone: \"transparent\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Container, {\n      paddingX: 4,\n      paddingY: 3,\n      sizing: \"border\",\n      width: 1,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n        align: \"flex-start\",\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n          size: 1,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_46__.ReadOnlyIcon, {})\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n          flex: 1,\n          marginLeft: 3,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n            size: 1,\n            children: [\"Your role\", plural && \"s\", \" \", roles, \" \", plural ? \"do\" : \"does\", \" not have permissions to\", \" \", requiredPermission, \" this document.\"]\n          })\n        })]\n      })\n    })\n  });\n}\nfunction join(array, sep) {\n  return array.reduce((result, item) => {\n    if (result === null) {\n      return [item];\n    }\n    return result.concat([sep, item]);\n  }, null);\n}\nfunction usePrevious(value) {\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\nconst LONG_ENOUGH_BUT_NOT_TOO_LONG = 1e3 * 60 * 60 * 24 * 24;\nfunction useConditionalToast(params) {\n  const toast = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useToast)();\n  const wasEnabled = usePrevious(params.enabled);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!wasEnabled && params.enabled) {\n      toast.push({\n        ...params,\n        duration: LONG_ENOUGH_BUT_NOT_TOO_LONG\n      });\n    }\n    if (wasEnabled && !params.enabled) {\n      toast.push({\n        ...params,\n        // Note: @sanity/ui fallbacks to the default duration of 4s in case of falsey values\n        duration: 0.01\n      });\n    }\n  }, [params, toast, wasEnabled]);\n}\nconst preventDefault = ev => ev.preventDefault();\nfunction FormView(props) {\n  var _a;\n  const {\n    hidden,\n    margins\n  } = props;\n  const {\n    collapsedFieldSets,\n    collapsedPaths,\n    displayed: value,\n    editState,\n    documentId,\n    documentType,\n    onChange,\n    validation,\n    ready,\n    formState,\n    onFocus,\n    onBlur,\n    onSetCollapsedPath,\n    onPathOpen,\n    onSetCollapsedFieldSet,\n    onSetActiveFieldGroup\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const documentStore = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useDocumentStore)();\n  const presence = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useDocumentPresence)(documentId);\n  const patchChannel = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => (0,sanity__WEBPACK_IMPORTED_MODULE_4__.createPatchChannel)(), []);\n  const isLocked = (_a = editState == null ? void 0 : editState.transactionSyncLock) == null ? void 0 : _a.enabled;\n  useConditionalToast({\n    id: \"sync-lock-\".concat(documentId),\n    status: \"warning\",\n    enabled: isLocked,\n    title: \"Syncing document\\u2026\",\n    description: \"Please hold tight while the document is synced. This usually happens right after the document has been published, and it shouldn't take more than a few seconds\"\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const sub = documentStore.pair.documentEvents(documentId, documentType).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_53__.tap)(event => {\n      if (event.type === \"mutation\") {\n        patchChannel.publish(prepareMutationEvent(event));\n      }\n      if (event.type === \"rebase\") {\n        patchChannel.publish(prepareRebaseEvent(event));\n      }\n    })).subscribe();\n    return () => {\n      sub.unsubscribe();\n    };\n  }, [documentId, documentStore, documentType, patchChannel]);\n  const hasRev = Boolean(value == null ? void 0 : value._rev);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (hasRev) {\n      patchChannel.publish({\n        type: \"mutation\",\n        patches: [],\n        snapshot: value\n      });\n    }\n  }, [hasRev]);\n  const formRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (ready && !(formState == null ? void 0 : formState.focusPath.length)) {\n      (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.focusFirstDescendant)(formRef.current);\n    }\n  }, [ready]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Container, {\n    hidden,\n    paddingX: 4,\n    paddingTop: 5,\n    paddingBottom: 9,\n    sizing: \"border\",\n    width: 1,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.PresenceOverlay, {\n      margins,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n        as: \"form\",\n        onSubmit: preventDefault,\n        ref: formRef,\n        children: ready ? formState === null ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n          padding: 2,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n            children: \"This form is hidden\"\n          })\n        }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.FormBuilder, {\n          __internal_patchChannel: patchChannel,\n          collapsedFieldSets,\n          collapsedPaths,\n          focusPath: formState.focusPath,\n          changed: formState.changed,\n          focused: formState.focused,\n          groups: formState.groups,\n          id: \"root\",\n          members: formState.members,\n          onChange,\n          onFieldGroupSelect: onSetActiveFieldGroup,\n          onPathBlur: onBlur,\n          onPathFocus: onFocus,\n          onPathOpen,\n          onSetFieldSetCollapsed: onSetCollapsedFieldSet,\n          onSetPathCollapsed: onSetCollapsedPath,\n          presence,\n          readOnly: formState.readOnly,\n          schemaType: formState.schemaType,\n          validation,\n          value: formState.value\n        }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Delay, {\n          ms: 300,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n            align: \"center\",\n            direction: \"column\",\n            height: \"fill\",\n            justify: \"center\",\n            children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Spinner, {\n              muted: true\n            }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n              marginTop: 3,\n              children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n                align: \"center\",\n                muted: true,\n                size: 1,\n                children: \"Loading document\"\n              })\n            })]\n          })\n        })\n      })\n    })\n  });\n}\nfunction prepareMutationEvent(event) {\n  const patches = event.mutations.map(mut => mut.patch).filter(Boolean);\n  return {\n    type: \"mutation\",\n    snapshot: event.document,\n    patches: (0,sanity__WEBPACK_IMPORTED_MODULE_4__.fromMutationPatches)(event.origin, patches)\n  };\n}\nfunction prepareRebaseEvent(event) {\n  const remotePatches = event.remoteMutations.map(mut => mut.patch).filter(Boolean);\n  const localPatches = event.localMutations.map(mut => mut.patch).filter(Boolean);\n  return {\n    type: \"rebase\",\n    snapshot: event.document,\n    patches: (0,sanity__WEBPACK_IMPORTED_MODULE_4__.fromMutationPatches)(\"remote\", remotePatches).concat((0,sanity__WEBPACK_IMPORTED_MODULE_4__.fromMutationPatches)(\"local\", localPatches))\n  };\n}\nfunction DocumentHeaderTabs() {\n  const {\n    activeViewId,\n    paneKey,\n    views\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const tabPanelId = \"\".concat(paneKey, \"tabpanel\");\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.TabList, {\n    space: 1,\n    children: views.map((view, index) => {\n      var _a;\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentHeaderTab, {\n        icon: view.icon,\n        id: \"\".concat(paneKey, \"tab-\").concat(view.id),\n        isActive: activeViewId === view.id,\n        label: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n          children: view.title\n        }),\n        tabPanelId,\n        viewId: index === 0 ? null : (_a = view.id) != null ? _a : null\n      }, view.id);\n    })\n  });\n}\nfunction DocumentHeaderTab(props) {\n  const {\n    isActive,\n    tabPanelId,\n    viewId\n  } = props;\n  const {\n    ready\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const {\n    setView\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.usePaneRouter)();\n  const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => setView(viewId), [setView, viewId]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Tab, {\n    ...props,\n    \"aria-controls\": tabPanelId,\n    disabled: !ready,\n    fontSize: 1,\n    selected: isActive,\n    onClick: handleClick\n  });\n}\nconst BUTTON_PROPS = {\n  error: {\n    tone: \"critical\",\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.ErrorOutlineIcon\n  },\n  warning: {\n    tone: \"caution\",\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.WarningOutlineIcon\n  },\n  info: {\n    tone: \"primary\",\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.InfoOutlineIcon\n  }\n};\nfunction ValidationMenu(props) {\n  const {\n    boundaryElement,\n    isOpen,\n    setOpen\n  } = props;\n  const {\n    onFocus,\n    onPathOpen,\n    schemaType,\n    validation\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const id = (0,react__WEBPACK_IMPORTED_MODULE_1__.useId)();\n  const hasValidationMarkers = validation.length > 0;\n  const hasErrorMarkers = validation.some(_sanity_types__WEBPACK_IMPORTED_MODULE_54__.isValidationErrorMarker);\n  const hasWarningMarkers = validation.some(_sanity_types__WEBPACK_IMPORTED_MODULE_54__.isValidationWarningMarker);\n  const hasInfoMarkers = validation.some(_sanity_types__WEBPACK_IMPORTED_MODULE_54__.isValidationInfoMarker);\n  const buttonProps = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (hasErrorMarkers) return BUTTON_PROPS.error;\n    if (hasWarningMarkers) return BUTTON_PROPS.warning;\n    if (hasInfoMarkers) return BUTTON_PROPS.info;\n    return void 0;\n  }, [hasErrorMarkers, hasInfoMarkers, hasWarningMarkers]);\n  const handleOpen = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(path => {\n    onPathOpen(path);\n    onFocus(path);\n  }, [onFocus, onPathOpen]);\n  const handleClose = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => setOpen(false), [setOpen]);\n  if (!hasValidationMarkers) return null;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.MenuButton, {\n    id: id || \"\",\n    button: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n      ...buttonProps,\n      title: \"Show validation issues\",\n      mode: \"bleed\",\n      \"data-testid\": \"validation-list-button\"\n    }),\n    menu: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Menu, {\n      open: isOpen,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.ValidationList, {\n        documentType: schemaType,\n        validation,\n        onClose: handleClose,\n        onFocus: handleOpen\n      })\n    }),\n    popover: {\n      portal: true,\n      boundaryElement,\n      constrainSize: true,\n      preventOverflow: true,\n      width: 0\n    },\n    placement: \"bottom\"\n  });\n}\nfunction DocumentHeaderTitle() {\n  const {\n    connectionState,\n    schemaType,\n    title,\n    value: documentValue\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const subscribed = Boolean(documentValue) && connectionState === \"connected\";\n  const {\n    error,\n    value\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.unstable_useValuePreview)({\n    enabled: subscribed,\n    schemaType,\n    value: documentValue\n  });\n  if (connectionState !== \"connected\") {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {});\n  }\n  if (title) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      children: title\n    });\n  }\n  if (!documentValue) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      children: [\"New \", (schemaType == null ? void 0 : schemaType.title) || (schemaType == null ? void 0 : schemaType.name)]\n    });\n  }\n  if (error) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      children: [\"Error: \", error.message]\n    });\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n    children: (value == null ? void 0 : value.title) || /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", {\n      style: {\n        color: \"var(--card-muted-fg-color)\"\n      },\n      children: \"Untitled\"\n    })\n  });\n}\nconst isActionButton = item => Boolean(item.showAsAction);\nconst isMenuButton = lodash_negate_js__WEBPACK_IMPORTED_MODULE_25___default()(isActionButton);\nconst DocumentPanelHeader = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)((0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((_ref29, ref) => {\n  let {\n    rootElement\n  } = _ref29;\n  const {\n    onMenuAction,\n    onPaneClose,\n    onPaneSplit,\n    validation,\n    menuItems,\n    menuItemGroups,\n    schemaType,\n    timelineStore,\n    ready,\n    views,\n    unstable_languageFilter\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const {\n    features\n  } = useDeskTool();\n  const {\n    index,\n    BackLink,\n    hasGroupSiblings\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.usePaneRouter)();\n  const contextMenuItems = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => menuItems.filter(isMenuButton), [menuItems]);\n  const [isValidationOpen, setValidationOpen] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(false);\n  const showTabs = views.length > 1;\n  const showVersionMenu = features.reviewChanges;\n  const rev = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.revTime);\n  const {\n    collapsed,\n    isLast\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.usePane)();\n  const tabIndex = isLast && !collapsed ? -1 : 0;\n  const showSplitPaneButton = features.splitViews && onPaneSplit && views.length > 1;\n  const showSplitPaneCloseButton = showSplitPaneButton && hasGroupSiblings;\n  const showPaneGroupCloseButton = !showSplitPaneCloseButton && !features.backButton;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PaneHeader, {\n    ref,\n    loading: !ready,\n    title: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentHeaderTitle, {}),\n    tabs: showTabs && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentHeaderTabs, {}),\n    tabIndex,\n    backButton: features.backButton && index > 0 && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n      as: BackLink,\n      \"data-as\": \"a\",\n      icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.ArrowLeftIcon,\n      mode: \"bleed\"\n    }),\n    subActions: showVersionMenu && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TimelineMenu, {\n      chunk: rev,\n      mode: \"rev\",\n      placement: \"bottom-end\"\n    }),\n    actions: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Inline, {\n      space: 1,\n      children: [unstable_languageFilter.length > 0 && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: unstable_languageFilter.map((languageFilterComponent, idx) => {\n          return (0,react__WEBPACK_IMPORTED_MODULE_1__.createElement)(languageFilterComponent, {\n            // eslint-disable-next-line react/no-array-index-key\n            key: \"language-filter-\".concat(idx),\n            schemaType\n          });\n        })\n      }), validation.length > 0 && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ValidationMenu, {\n        boundaryElement: rootElement,\n        isOpen: isValidationOpen,\n        setOpen: setValidationOpen\n      }, \"validation-menu\"), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PaneContextMenuButton, {\n        itemGroups: menuItemGroups,\n        items: contextMenuItems,\n        onAction: onMenuAction\n      }, \"context-menu\"), showSplitPaneButton && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n        icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.SplitVerticalIcon,\n        mode: \"bleed\",\n        onClick: onPaneSplit,\n        title: \"Split pane right\"\n      }, \"split-pane-button\"), showSplitPaneCloseButton && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n        icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.CloseIcon,\n        mode: \"bleed\",\n        onClick: onPaneClose,\n        title: \"Close split pane\"\n      }, \"close-view-button\"), showPaneGroupCloseButton && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n        icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.CloseIcon,\n        mode: \"bleed\",\n        title: \"Close pane group\",\n        as: BackLink\n      }, \"close-view-button\")]\n    })\n  });\n}));\nDocumentPanelHeader.displayName = \"DocumentPanelHeader\";\nconst Scroller = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(sanity__WEBPACK_IMPORTED_MODULE_4__.ScrollContainer)(_ref30 => {\n  let {\n    $disabled\n  } = _ref30;\n  if ($disabled) {\n    return {\n      height: \"100%\"\n    };\n  }\n  return (0,styled_components__WEBPACK_IMPORTED_MODULE_45__.css)(_templateObject19 || (_templateObject19 = _taggedTemplateLiteral([\"\\n    height: 100%;\\n    overflow: auto;\\n    position: relative;\\n    scroll-behavior: smooth;\\n    outline: none;\\n  \"])));\n});\nconst DocumentPanel = function DocumentPanel2(props) {\n  const {\n    footerHeight,\n    isInspectOpen,\n    rootElement,\n    setDocumentPanelPortalElement\n  } = props;\n  const {\n    activeViewId,\n    displayed,\n    documentId,\n    editState,\n    value,\n    views,\n    ready,\n    schemaType,\n    permissions,\n    isPermissionsLoading\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const {\n    collapsed: layoutCollapsed\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.usePaneLayout)();\n  const parentPortal = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.usePortal)();\n  const {\n    features\n  } = useDeskTool();\n  const [headerElement, setHeaderElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const headerRect = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useElementRect)(headerElement);\n  const portalRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  const [documentScrollElement, setDocumentScrollElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const requiredPermission = value._createdAt ? \"update\" : \"create\";\n  const activeView = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => views.find(view => view.id === activeViewId) || views[0] || {\n    type: \"form\"\n  }, [activeViewId, views]);\n  const portalElement = features.splitPanes ? portalRef.current || parentPortal.element : parentPortal.element;\n  const margins = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (layoutCollapsed) {\n      return [(headerRect == null ? void 0 : headerRect.height) || 0, 0, footerHeight ? footerHeight + 2 : 2, 0];\n    }\n    return [0, 0, 2, 0];\n  }, [layoutCollapsed, footerHeight, headerRect]);\n  const formViewHidden = activeView.type !== \"form\";\n  const activeViewNode = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => activeView.type === \"component\" && activeView.component && (0,react__WEBPACK_IMPORTED_MODULE_1__.createElement)(activeView.component, {\n    document: {\n      draft: (editState == null ? void 0 : editState.draft) || null,\n      displayed: displayed || value,\n      historical: displayed,\n      published: (editState == null ? void 0 : editState.published) || null\n    },\n    documentId,\n    options: activeView.options,\n    schemaType\n  }), [activeView, displayed, documentId, editState == null ? void 0 : editState.draft, editState == null ? void 0 : editState.published, schemaType, value]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!(documentScrollElement == null ? void 0 : documentScrollElement.scrollTo)) return;\n    documentScrollElement.scrollTo(0, 0);\n  }, [documentId, documentScrollElement]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (portalElement) {\n      setDocumentPanelPortalElement(portalElement);\n    }\n  }, [portalElement, setDocumentPanelPortalElement]);\n  const inspectDialog = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    return isInspectOpen ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(InspectDialog, {\n      value: displayed || value\n    }) : null;\n  }, [isInspectOpen, displayed, value]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n    direction: \"column\",\n    flex: 2,\n    overflow: layoutCollapsed ? void 0 : \"hidden\",\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentPanelHeader, {\n      rootElement,\n      ref: setHeaderElement\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PaneContent, {\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.PortalProvider, {\n        element: portalElement,\n        __unstable_elements: {\n          documentScrollElement\n        },\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.BoundaryElementProvider, {\n          element: documentScrollElement,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(sanity__WEBPACK_IMPORTED_MODULE_4__.VirtualizerScrollInstanceProvider, {\n            scrollElement: documentScrollElement,\n            children: [activeView.type === \"form\" && !isPermissionsLoading && ready && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n              children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PermissionCheckBanner, {\n                granted: Boolean(permissions == null ? void 0 : permissions.granted),\n                requiredPermission\n              }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ReferenceChangedBanner, {})]\n            }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(Scroller, {\n              $disabled: layoutCollapsed || false,\n              \"data-testid\": \"document-panel-scroller\",\n              ref: setDocumentScrollElement,\n              children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(FormView, {\n                hidden: formViewHidden,\n                margins\n              }, documentId + (ready ? \"_ready\" : \"_pending\")), activeViewNode]\n            }), inspectDialog, /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n              \"data-testid\": \"document-panel-portal\",\n              ref: portalRef\n            })]\n          })\n        })\n      })\n    })]\n  });\n};\nconst POPOVER_FALLBACK_PLACEMENTS = [\"left\", \"bottom\"];\nconst DIALOG_WIDTH_TO_UI_WIDTH = {\n  small: 0,\n  medium: 1,\n  large: 2,\n  full: \"auto\"\n};\nfunction ConfirmDialog(props) {\n  const {\n    dialog,\n    referenceElement\n  } = props;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Popover, {\n    content: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ConfirmDialogContent, {\n      dialog\n    }),\n    fallbackPlacements: POPOVER_FALLBACK_PLACEMENTS,\n    open: true,\n    placement: \"top\",\n    portal: true,\n    preventOverflow: true,\n    referenceElement\n  });\n}\nfunction ConfirmDialogContent(props) {\n  const {\n    dialog\n  } = props;\n  const {\n    cancelButtonIcon,\n    cancelButtonText,\n    confirmButtonIcon,\n    confirmButtonText,\n    // color,\n    message,\n    onCancel,\n    onConfirm,\n    tone\n  } = dialog;\n  const {\n    isTopLayer\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useLayer)();\n  const [element, setElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const handleClickOutside = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    if (isTopLayer) onCancel();\n  }, [isTopLayer, onCancel]);\n  const handleGlobalKeyDown = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(event => {\n    if (event.key === \"Escape\" && isTopLayer) onCancel();\n  }, [isTopLayer, onCancel]);\n  (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useClickOutside)(handleClickOutside, [element]);\n  (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useGlobalKeyDown)(handleGlobalKeyDown);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n    direction: \"column\",\n    ref: setElement,\n    style: {\n      minWidth: 320 - 16,\n      maxWidth: 400\n    },\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n      flex: 1,\n      overflow: \"auto\",\n      padding: 4,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n        children: message\n      })\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n      paddingX: 4,\n      paddingY: 3,\n      style: {\n        borderTop: \"1px solid var(--card-border-color)\"\n      },\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Grid, {\n        columns: 2,\n        gap: 2,\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n          icon: cancelButtonIcon,\n          onClick: onCancel,\n          mode: \"ghost\",\n          text: cancelButtonText || \"Cancel\"\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n          icon: confirmButtonIcon,\n          onClick: onConfirm,\n          text: confirmButtonText || \"Confirm\",\n          tone\n        })]\n      })\n    })]\n  });\n}\nfunction ModalDialog(props) {\n  const {\n    dialog\n  } = props;\n  const dialogId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useId)();\n  const footer = dialog.footer && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n    paddingX: 4,\n    paddingY: 3,\n    children: dialog.footer\n  });\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.LegacyLayerProvider, {\n    zOffset: \"fullscreen\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Dialog, {\n      __unstable_hideCloseButton: dialog.showCloseButton === false,\n      footer,\n      header: dialog.header,\n      id: dialogId,\n      onClose: dialog.onClose,\n      onClickOutside: dialog.onClose,\n      width: dialog.width === void 0 ? 1 : DIALOG_WIDTH_TO_UI_WIDTH[dialog.width],\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n        padding: 4,\n        children: dialog.content\n      })\n    })\n  });\n}\nfunction PopoverDialog(props) {\n  const {\n    dialog,\n    referenceElement\n  } = props;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Popover, {\n    content: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PopoverDialogContent, {\n      dialog\n    }),\n    fallbackPlacements: POPOVER_FALLBACK_PLACEMENTS,\n    open: true,\n    placement: \"top\",\n    portal: true,\n    preventOverflow: true,\n    referenceElement\n  });\n}\nfunction PopoverDialogContent(props) {\n  const {\n    dialog\n  } = props;\n  const {\n    content,\n    onClose\n  } = dialog;\n  const {\n    isTopLayer\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useLayer)();\n  const [element, setElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const handleClickOutside = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    if (isTopLayer) onClose();\n  }, [isTopLayer, onClose]);\n  const handleGlobalKeyDown = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(event => {\n    if (event.key === \"Escape\" && isTopLayer) onClose();\n  }, [isTopLayer, onClose]);\n  (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useClickOutside)(handleClickOutside, [element]);\n  (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useGlobalKeyDown)(handleGlobalKeyDown);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n    ref: setElement,\n    children: content\n  });\n}\nfunction DocumentActionPortalProvider(props) {\n  const {\n    children\n  } = props;\n  const {\n    element,\n    elements\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.usePortal)();\n  const portalElement = (elements == null ? void 0 : elements[_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.DOCUMENT_PANEL_PORTAL_ELEMENT]) || element;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.PortalProvider, {\n    element: portalElement,\n    children\n  });\n}\nfunction ActionStateDialog(props) {\n  const {\n    dialog,\n    referenceElement = null\n  } = props;\n  const modalId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useId)();\n  if (dialog.type === \"confirm\") {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ConfirmDialog, {\n      dialog,\n      referenceElement\n    });\n  }\n  if (dialog.type === \"popover\") {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PopoverDialog, {\n      dialog,\n      referenceElement\n    });\n  }\n  if (dialog.type === \"dialog\" || !dialog.type) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentActionPortalProvider, {\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ModalDialog, {\n        dialog\n      })\n    });\n  }\n  if (dialog.type === \"custom\") {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentActionPortalProvider, {\n      children: dialog == null ? void 0 : dialog.component\n    });\n  }\n  const unknownModal = dialog;\n  console.warn(\"Unsupported modal type \".concat(unknownModal.type));\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Dialog, {\n    id: modalId,\n    onClose: unknownModal.onClose,\n    onClickOutside: unknownModal.onClose,\n    width: 2,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n      padding: 4,\n      children: unknownModal.content || /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\"Unexpected modal type (\", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n          children: unknownModal.type\n        }), \")\"]\n      })\n    })\n  });\n}\nfunction ActionMenuButton(props) {\n  const {\n    actionStates,\n    disabled\n  } = props;\n  const idPrefix = (0,react__WEBPACK_IMPORTED_MODULE_1__.useId)();\n  const buttonRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  const [actionIndex, setActionIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(-1);\n  const [referenceElement, setReferenceElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const handleAction = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(idx => {\n    setActionIndex(idx);\n  }, []);\n  const popoverProps = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => ({\n    placement: \"top-end\",\n    portal: true,\n    preventOverflow: true\n  }), []);\n  const currentAction = actionStates[actionIndex];\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.MenuButton, {\n      id: \"\".concat(idPrefix, \"-action-menu\"),\n      button: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n        \"data-testid\": \"action-menu-button\",\n        \"aria-label\": \"Open document actions\",\n        disabled,\n        icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_46__.ChevronDownIcon,\n        mode: \"ghost\",\n        ref: buttonRef\n      }),\n      menu: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Menu, {\n        padding: 1,\n        children: actionStates.map((actionState, idx) => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ActionMenuListItem, {\n          actionState,\n          disabled,\n          index: idx,\n          onAction: handleAction\n        }, idx))\n      }),\n      popover: popoverProps,\n      ref: setReferenceElement\n    }), currentAction && currentAction.dialog && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.LegacyLayerProvider, {\n      zOffset: \"paneFooter\",\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ActionStateDialog, {\n        dialog: currentAction.dialog,\n        referenceElement\n      })\n    })]\n  });\n}\nfunction ActionMenuListItem(props) {\n  const {\n    actionState,\n    disabled,\n    index,\n    onAction\n  } = props;\n  const {\n    onHandle\n  } = actionState;\n  const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    onAction(index);\n    if (onHandle) onHandle();\n  }, [index, onAction, onHandle]);\n  const tooltipContent = actionState.title && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n    padding: 2,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n      size: 1,\n      children: actionState.title\n    })\n  });\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.MenuItem, {\n    \"data-testid\": \"action-\".concat(actionState.label.replace(\" \", \"\")),\n    disabled: disabled || Boolean(actionState.disabled),\n    onClick: handleClick,\n    padding: 0,\n    tone: actionState.tone,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Tooltip, {\n      content: tooltipContent,\n      disabled: !tooltipContent,\n      fallbackPlacements: [\"left\", \"bottom\"],\n      placement: \"top\",\n      portal: true,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n        align: \"center\",\n        paddingX: 3,\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n          flex: 1,\n          paddingY: 3,\n          children: [actionState.icon && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n            marginRight: 3,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n              children: [(0,react__WEBPACK_IMPORTED_MODULE_1__.isValidElement)(actionState.icon) && actionState.icon, (0,react_is__WEBPACK_IMPORTED_MODULE_14__.isValidElementType)(actionState.icon) && (0,react__WEBPACK_IMPORTED_MODULE_1__.createElement)(actionState.icon)]\n            })\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n            children: actionState.label\n          })]\n        }), actionState.shortcut && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n          marginLeft: 3,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Hotkeys, {\n            keys: String(actionState.shortcut).split(\"+\").map(s => s.slice(0, 1).toUpperCase() + s.slice(1))\n          })\n        })]\n      })\n    })\n  });\n}\nfunction DocumentStatusBarActionsInner(props) {\n  const {\n    disabled,\n    showMenu,\n    states\n  } = props;\n  const [firstActionState, ...menuActionStates] = states;\n  const [buttonElement, setButtonElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const tooltipContent = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (!firstActionState || !firstActionState.title && !firstActionState.shortcut) return null;\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n      padding: 2,\n      style: {\n        maxWidth: 300\n      },\n      align: \"center\",\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n        size: 1,\n        children: firstActionState.title\n      }), firstActionState.shortcut && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n        marginLeft: firstActionState.title ? 2 : 0,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Hotkeys, {\n          keys: String(firstActionState.shortcut).split(\"+\").map(s => s.slice(0, 1).toUpperCase() + s.slice(1).toLowerCase())\n        })\n      })]\n    });\n  }, [firstActionState]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n    children: [firstActionState && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.LayerProvider, {\n      zOffset: 200,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Tooltip, {\n        disabled: !tooltipContent,\n        content: tooltipContent,\n        portal: true,\n        placement: \"top\",\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Stack, {\n          flex: 1,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n            \"data-testid\": \"action-\".concat(firstActionState.label),\n            disabled: disabled || Boolean(firstActionState.disabled),\n            icon: firstActionState.icon,\n            onClick: firstActionState.onHandle,\n            ref: setButtonElement,\n            text: firstActionState.label,\n            tone: firstActionState.tone || \"primary\"\n          })\n        })\n      })\n    }), showMenu && menuActionStates.length > 0 && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n      marginLeft: 1,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ActionMenuButton, {\n        actionStates: menuActionStates,\n        disabled\n      })\n    }), firstActionState && firstActionState.dialog && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ActionStateDialog, {\n      dialog: firstActionState.dialog,\n      referenceElement: buttonElement\n    })]\n  });\n}\nconst DocumentStatusBarActions = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function DocumentStatusBarActions2() {\n  const {\n    actions,\n    connectionState,\n    documentId,\n    editState\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  if (!actions || !editState) {\n    return null;\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RenderActionCollectionState, {\n    actions,\n    actionProps: editState,\n    children: _ref31 => {\n      let {\n        states\n      } = _ref31;\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentStatusBarActionsInner, {\n        disabled: connectionState !== \"connected\",\n        showMenu: actions.length > 1,\n        states\n      }, documentId);\n    }\n  });\n});\nconst HistoryStatusBarActions = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function HistoryStatusBarActions2() {\n  const {\n    connectionState,\n    editState,\n    timelineStore\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const revTime = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.revTime);\n  const revision = (revTime == null ? void 0 : revTime.id) || \"\";\n  const disabled = ((editState == null ? void 0 : editState.draft) || (editState == null ? void 0 : editState.published) || {})._rev === revision;\n  const actionProps = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => ({\n    ...(editState || {}),\n    revision\n  }), [editState, revision]);\n  const historyActions = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => [_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.HistoryRestoreAction], []);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RenderActionCollectionState, {\n    actions: historyActions,\n    actionProps,\n    children: _ref32 => {\n      let {\n        states\n      } = _ref32;\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentStatusBarActionsInner, {\n        disabled: connectionState !== \"connected\" || Boolean(disabled),\n        showMenu: false,\n        states\n      });\n    }\n  });\n});\nconst BADGE_TONES = {\n  primary: \"primary\",\n  success: \"positive\",\n  warning: \"caution\",\n  danger: \"critical\"\n};\nfunction DocumentBadgesInner(_ref33) {\n  let {\n    states\n  } = _ref33;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Inline, {\n    space: 1,\n    children: states.map((badge, index) => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Tooltip, {\n      content: badge.title && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n        padding: 2,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n          size: 1,\n          children: badge.title\n        })\n      }),\n      disabled: !badge.title,\n      placement: \"top\",\n      portal: true,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Badge, {\n        fontSize: 1,\n        mode: \"outline\",\n        paddingX: 2,\n        paddingY: 1,\n        radius: 4,\n        tone: badge.color ? BADGE_TONES[badge.color] : void 0,\n        style: {\n          whiteSpace: \"nowrap\"\n        },\n        children: badge.label\n      })\n    }, String(index)))\n  });\n}\nfunction DocumentBadges() {\n  const {\n    badges,\n    editState\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  if (!editState || !badges) return null;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RenderBadgeCollectionState, {\n    badges,\n    badgeProps: editState,\n    children: _ref34 => {\n      let {\n        states\n      } = _ref34;\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentBadgesInner, {\n        states\n      });\n    }\n  });\n}\nconst Root = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex)(_templateObject20 || (_templateObject20 = _taggedTemplateLiteral([\"\\n  cursor: default;\\n\"])));\nfunction PublishStatus(props) {\n  const {\n    collapsed,\n    disabled,\n    lastPublished,\n    lastUpdated,\n    liveEdit\n  } = props;\n  const lastPublishedTimeAgo = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimeAgo)(lastPublished || \"\", {\n    minimal: true,\n    agoSuffix: true\n  });\n  const lastPublishedTime = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimeAgo)(lastPublished || \"\", {\n    minimal: true\n  });\n  const lastUpdatedTimeAgo = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimeAgo)(lastUpdated || \"\", {\n    minimal: true,\n    agoSuffix: true\n  });\n  const lastUpdatedTime = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimeAgo)(lastUpdated || \"\", {\n    minimal: true\n  });\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root, {\n    align: \"center\",\n    \"data-ui\": \"SessionLayout\",\n    sizing: \"border\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Tooltip, {\n      placement: \"top\",\n      portal: true,\n      content: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Stack, {\n        padding: 3,\n        space: 3,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n          size: 1,\n          muted: true,\n          children: liveEdit ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\"Last updated \", lastUpdated ? lastUpdatedTimeAgo : lastPublishedTimeAgo]\n          }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\"Last published \", lastPublishedTimeAgo]\n          })\n        })\n      }),\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n        mode: \"bleed\",\n        tone: liveEdit ? \"critical\" : \"positive\",\n        tabIndex: -1,\n        disabled,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n          align: \"center\",\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n            marginRight: collapsed ? 0 : 3,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n              size: 2,\n              children: liveEdit ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_46__.PlayIcon, {}) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_46__.PublishIcon, {})\n            })\n          }), !collapsed && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n            size: 1,\n            weight: \"medium\",\n            children: liveEdit ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n              children: lastUpdated ? lastUpdatedTime : lastPublishedTime\n            }) : lastPublishedTime\n          })]\n        })\n      })\n    })\n  });\n}\nconst StyledMotionPath = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(framer_motion__WEBPACK_IMPORTED_MODULE_55__.motion.path)(_templateObject21 || (_templateObject21 = _taggedTemplateLiteral([\"\\n  transform-origin: center;\\n\"])));\nconst Circle = props => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_55__.motion.circle, {\n  fill: \"none\",\n  r: \"8\",\n  cx: \"12.5\",\n  cy: \"12.5\",\n  strokeWidth: \"1.2\",\n  ...props\n});\nconst Arrows = props => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StyledMotionPath, {\n  fill: \"none\",\n  d: \"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811\",\n  ...props\n});\nconst Checkmark = props => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_55__.motion.path, {\n  d: \"M9.5 12.1316L11.7414 14.5L16 10\",\n  ...props\n});\nconst Edit = props => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_55__.motion.path, {\n  d: \"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z\",\n  ...props\n});\nconst rotateAnimation = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__.keyframes)(_templateObject22 || (_templateObject22 = _taggedTemplateLiteral([\"\\n  0% {\\n    transform: rotate(0);\\n  }\\n  100% {\\n    transform: rotate(360deg);\\n  }\\n\"])));\nconst RotateGroup = styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"].g(_templateObject23 || (_templateObject23 = _taggedTemplateLiteral([\"\\n  transform-origin: center;\\n\\n  &[data-rotate] {\\n    animation: \", \" 1s ease-in-out infinite;\\n  }\\n\"])), rotateAnimation);\nconst root = {\n  syncing: {\n    scale: 1,\n    transition: {\n      duration: 0\n    }\n  },\n  saved: {\n    scale: [1, 0.8, 1.2, 0.9, 1.1, 0.95, 1.05, 0.99, 1],\n    transition: {\n      duration: 0.5,\n      delay: 0.2\n    }\n  },\n  changes: {\n    transition: {\n      duration: 0\n    }\n  }\n};\nconst circle = {\n  syncing: {\n    strokeDasharray: \"0, 0, 23, 3, 23, 3\",\n    strokeDashoffset: 10,\n    opacity: 1,\n    transition: {\n      duration: 0\n    }\n  },\n  saved: {\n    strokeDasharray: \"0, 0, 23, 0, 23, 0\",\n    strokeDashoffset: 10,\n    opacity: 1,\n    transition: {\n      duration: 0.2\n    }\n  },\n  changes: {\n    strokeDasharray: \"0, 60, 23, 0, 23, 0\",\n    strokeDashoffset: 0,\n    opacity: 0,\n    transition: {\n      duration: 0.5\n    }\n  }\n};\nconst arrows = {\n  syncing: {\n    opacity: 1,\n    transition: {\n      duration: 0\n    }\n  },\n  saved: {\n    opacity: 0,\n    transition: {\n      duration: 0.2\n    }\n  },\n  changes: {\n    opacity: 0\n  }\n};\nconst checkmark = {\n  syncing: {\n    pathLength: 0,\n    transition: {\n      duration: 0\n    }\n  },\n  saved: {\n    pathLength: 1,\n    transition: {\n      delay: 0.4,\n      duration: 0.3\n    }\n  },\n  changes: {\n    pathLength: 0,\n    transition: {\n      duration: 0.2\n    }\n  }\n};\nconst edit = {\n  syncing: {\n    pathLength: 0,\n    transition: {\n      duration: 0\n    }\n  },\n  saved: {\n    pathLength: 0,\n    transition: {\n      duration: 0\n    }\n  },\n  changes: {\n    pathLength: 1,\n    transition: {\n      duration: 0.4,\n      delay: 0.5\n    }\n  }\n};\nfunction AnimatedStatusIcon(props) {\n  const {\n    status\n  } = props;\n  if (!status) {\n    return null;\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 25 25\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"1.2\",\n    \"data-sanity-icon\": \"\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(framer_motion__WEBPACK_IMPORTED_MODULE_55__.motion.g, {\n      variants: root,\n      initial: status,\n      animate: status,\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(RotateGroup, {\n        \"data-rotate\": status === \"changes\" ? void 0 : \"\",\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Arrows, {\n          variants: arrows,\n          initial: status,\n          animate: status\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Circle, {\n          variants: circle,\n          initial: status,\n          animate: status\n        })]\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Checkmark, {\n        variants: checkmark,\n        initial: status,\n        animate: status\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Edit, {\n        variants: edit,\n        initial: status,\n        animate: status\n      })]\n    })\n  });\n}\nconst ReviewButton = react__WEBPACK_IMPORTED_MODULE_1___default().forwardRef(function ReviewButton2(props, ref) {\n  const {\n    collapsed,\n    status,\n    lastUpdated,\n    ...rest\n  } = props;\n  const lastUpdatedTime = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimeAgo)(lastUpdated || \"\", {\n    minimal: true\n  });\n  const lastUpdatedTimeAgo = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimeAgo)(lastUpdated || \"\", {\n    minimal: true,\n    agoSuffix: true\n  });\n  const buttonProps = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (status === \"syncing\") {\n      return {\n        text: \"Saving...\",\n        tone: void 0\n      };\n    }\n    if (status === \"changes\") {\n      return {\n        text: lastUpdatedTime,\n        tone: \"caution\"\n      };\n    }\n    if (status === \"saved\") {\n      return {\n        text: \"Saved!\",\n        tone: \"positive\"\n      };\n    }\n    return {};\n  }, [status, lastUpdatedTime]);\n  if (!status) {\n    return null;\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Tooltip, {\n    placement: \"top\",\n    portal: true,\n    disabled: status !== \"changes\",\n    content: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Stack, {\n      padding: 3,\n      space: 3,\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n        size: 1,\n        weight: \"semibold\",\n        children: \"Review changes\"\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n        size: 1,\n        muted: true,\n        children: [\"Changes saved \", lastUpdatedTimeAgo]\n      })]\n    }),\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Button, {\n      mode: \"bleed\",\n      justify: \"flex-start\",\n      tone: buttonProps == null ? void 0 : buttonProps.tone,\n      ...rest,\n      \"data-testid\": \"review-changes-button\",\n      ref,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n        align: \"center\",\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n          marginRight: collapsed ? 0 : 3,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(AnimatedStatusIcon, {\n              status\n            })\n          })\n        }), !collapsed && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n          size: 1,\n          weight: \"medium\",\n          children: buttonProps == null ? void 0 : buttonProps.text\n        })]\n      })\n    })\n  });\n});\nconst ReviewChangesButton = react__WEBPACK_IMPORTED_MODULE_1___default().memo(ReviewButton);\nconst SYNCING_TIMEOUT = 1e3;\nconst SAVED_TIMEOUT = 3e3;\nconst DocumentSparkline = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function DocumentSparkline2() {\n  var _a;\n  const {\n    changesOpen,\n    documentId,\n    documentType,\n    editState,\n    onHistoryClose,\n    onHistoryOpen,\n    timelineStore,\n    value\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const syncState = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useSyncState)(documentId, documentType);\n  const lastUpdated = value == null ? void 0 : value._updatedAt;\n  const lastPublished = (_a = editState == null ? void 0 : editState.published) == null ? void 0 : _a._updatedAt;\n  const liveEdit = Boolean(editState == null ? void 0 : editState.liveEdit);\n  const published = Boolean(editState == null ? void 0 : editState.published);\n  const changed = Boolean(editState == null ? void 0 : editState.draft);\n  const [rootFlexElement, setRootFlexElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const rootFlexRect = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useElementRect)(rootFlexElement);\n  const collapsed = !rootFlexRect || (rootFlexRect == null ? void 0 : rootFlexRect.width) < 300;\n  const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const showingRevision = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.onOlderRevision);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (status === \"syncing\" && !syncState.isSyncing) {\n      const timerId = setTimeout(() => setStatus(\"saved\"), SYNCING_TIMEOUT);\n      return () => clearTimeout(timerId);\n    }\n    if (status === \"saved\") {\n      const timerId = setTimeout(() => setStatus(null), SAVED_TIMEOUT);\n      return () => clearTimeout(timerId);\n    }\n  }, [status, lastUpdated, syncState.isSyncing]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(() => {\n    setStatus(null);\n  }, [documentId]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(() => {\n    if (syncState.isSyncing) {\n      setStatus(\"syncing\");\n    }\n  }, [syncState.isSyncing, lastUpdated]);\n  const reviewButton = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ReviewChangesButton, {\n    lastUpdated,\n    status: status || (changed ? \"changes\" : void 0),\n    onClick: changesOpen ? onHistoryClose : onHistoryOpen,\n    disabled: showingRevision,\n    selected: changesOpen,\n    collapsed\n  }), [changed, changesOpen, onHistoryClose, onHistoryOpen, lastUpdated, showingRevision, status, collapsed]);\n  const publishStatus = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => (liveEdit || published) && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n    marginRight: 1,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PublishStatus, {\n      disabled: showingRevision,\n      lastPublished,\n      lastUpdated,\n      liveEdit,\n      collapsed\n    })\n  }), [collapsed, lastPublished, lastUpdated, liveEdit, published, showingRevision]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n    align: \"center\",\n    \"data-ui\": \"DocumentSparkline\",\n    ref: setRootFlexElement,\n    children: [publishStatus, /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n      align: \"center\",\n      flex: 1,\n      children: [reviewButton, !collapsed && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n        marginLeft: 3,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentBadges, {})\n      })]\n    })]\n  });\n});\nconst DocumentActionsBox = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box)(_templateObject24 || (_templateObject24 = _taggedTemplateLiteral([\"\\n  min-width: 10em;\\n  max-width: 16em;\\n\"])));\nfunction DocumentStatusBar(props) {\n  const {\n    actionsBoxRef\n  } = props;\n  const {\n    badges,\n    timelineStore\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const showingRevision = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTimelineSelector)(timelineStore, state => state.onOlderRevision);\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n    paddingLeft: 2,\n    paddingRight: [2, 3],\n    paddingY: 2,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n      align: \"center\",\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n        flex: [1, 2],\n        children: badges && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentSparkline, {})\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentActionsBox, {\n        flex: 1,\n        marginLeft: [1, 3],\n        ref: actionsBoxRef,\n        children: showingRevision ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(HistoryStatusBarActions, {}) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentStatusBarActions, {})\n      })]\n    })\n  }), [actionsBoxRef, badges, showingRevision]);\n}\nfunction KeyboardShortcutResponder(props) {\n  const {\n    actionsBoxElement,\n    activeIndex,\n    children,\n    id,\n    onActionStart,\n    onKeyDown,\n    rootRef,\n    states,\n    ...rest\n  } = props;\n  const activeAction = states[activeIndex];\n  const handleKeyDown = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(event => {\n    const matchingStates = states.filter(state => state.shortcut && (0,is_hotkey__WEBPACK_IMPORTED_MODULE_16__[\"default\"])(state.shortcut, event));\n    const matchingState = matchingStates[0];\n    if (matchingStates.length > 1) {\n      console.warn(\"Keyboard shortcut conflict: More than one document action matches the shortcut \\\"\".concat(matchingState.shortcut, \"\\\"\"));\n    }\n    if (matchingState && !matchingState.disabled && matchingState.onHandle) {\n      event.preventDefault();\n      matchingState.onHandle();\n      onActionStart(states.indexOf(matchingState));\n      return;\n    }\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [onActionStart, onKeyDown, states]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.Pane, {\n    id,\n    onKeyDown: handleKeyDown,\n    tabIndex: -1,\n    ...rest,\n    ref: rootRef,\n    children: [children, activeAction && activeAction.dialog && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.LegacyLayerProvider, {\n      zOffset: \"paneFooter\",\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ActionStateDialog, {\n        dialog: activeAction.dialog,\n        referenceElement: actionsBoxElement\n      })\n    })]\n  });\n}\nconst DocumentActionShortcuts = react__WEBPACK_IMPORTED_MODULE_1___default().memo(props => {\n  const {\n    actionsBoxElement,\n    children,\n    ...rest\n  } = props;\n  const {\n    actions,\n    editState\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const [activeIndex, setActiveIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(-1);\n  const onActionStart = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(idx => {\n    setActiveIndex(idx);\n  }, []);\n  const actionProps = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => editState && {\n    ...editState,\n    // @todo: what to call here?\n    onComplete: () => void 0,\n    // @todo: get revision string\n    revision: void 0\n  }, [editState]);\n  if (!actionProps || !actions) return null;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RenderActionCollectionState, {\n    actionProps,\n    actions,\n    children: _ref35 => {\n      let {\n        states\n      } = _ref35;\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(KeyboardShortcutResponder, {\n        ...rest,\n        activeIndex,\n        actionsBoxElement,\n        onActionStart,\n        states,\n        children\n      });\n    }\n  });\n});\nDocumentActionShortcuts.displayName = \"DocumentActionShortcuts\";\nconst DOCUMENT_PANEL_MIN_WIDTH = 320;\nconst DOCUMENT_PANEL_INITIAL_MIN_WIDTH = 600;\nconst CHANGES_PANEL_MIN_WIDTH = 320;\nconst DIALOG_PROVIDER_POSITION = [\n// We use the `position: fixed` for dialogs on narrow screens (< 512px).\n\"fixed\",\n// And we use the `position: absolute` strategy (within panes) on wide screens.\n\"absolute\"];\nconst StyledChangeConnectorRoot = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(sanity__WEBPACK_IMPORTED_MODULE_4__.ChangeConnectorRoot)(_templateObject25 || (_templateObject25 = _taggedTemplateLiteral([\"\\n  flex: 1;\\n  display: flex;\\n  min-height: 0;\\n  min-width: 0;\\n\"])));\nconst DocumentPane = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function DocumentPane2(props) {\n  const {\n    name: parentSourceName\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useSource)();\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.SourceProvider, {\n    name: props.pane.source || parentSourceName,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentPaneInner, {\n      ...props\n    })\n  });\n});\nfunction DocumentPaneInner(props) {\n  var _a;\n  const {\n    pane,\n    paneKey\n  } = props;\n  const {\n    resolveNewDocumentOptions\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useSource)().document;\n  const paneRouter = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.usePaneRouter)();\n  const options = usePaneOptions(pane.options, paneRouter.params);\n  const {\n    documentType,\n    isLoaded: isDocumentLoaded\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useDocumentType)(options.id, options.type);\n  const templateItems = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    return resolveNewDocumentOptions({\n      type: \"global\"\n    });\n  }, [resolveNewDocumentOptions]);\n  const [templatePermissions, isTemplatePermissionsLoading] = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTemplatePermissions)({\n    templateItems\n  });\n  const isLoaded = isDocumentLoaded && !isTemplatePermissionsLoading;\n  const providerProps = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    return isLoaded && documentType && options.type !== documentType ? mergeDocumentType(props, options, documentType) : props;\n  }, [props, documentType, isLoaded, options]);\n  const {\n    ReferenceChildLink,\n    handleEditReference,\n    groupIndex,\n    routerPanesState\n  } = paneRouter;\n  const childParams = ((_a = routerPanesState[groupIndex + 1]) == null ? void 0 : _a[0].params) || {};\n  const routerPanesStateLength = routerPanesState.length;\n  const {\n    parentRefPath\n  } = childParams;\n  const activePath = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    return parentRefPath ? {\n      path: (0,_sanity_util_paths__WEBPACK_IMPORTED_MODULE_17__.fromString)(parentRefPath),\n      state:\n      // eslint-disable-next-line no-nested-ternary\n      groupIndex >= routerPanesStateLength - 1 ? \"none\" : groupIndex >= routerPanesStateLength - 2 ? \"selected\" : \"pressed\"\n    } : {\n      path: [],\n      state: \"none\"\n    };\n  }, [parentRefPath, groupIndex, routerPanesStateLength]);\n  if (options.type === \"*\" && !isLoaded) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingPane, {\n      flex: 2.5,\n      minWidth: 320,\n      paneKey,\n      title: \"Loading document\\u2026\"\n    });\n  }\n  if (!documentType) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ErrorPane, {\n      flex: 2.5,\n      minWidth: 320,\n      paneKey,\n      title: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: \"The document was not found\"\n      }),\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Stack, {\n        space: 4,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n          as: \"p\",\n          children: [\"The document type is not defined, and a document with the \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n            children: options.id\n          }), \" \", \"identifier could not be found.\"]\n        })\n      })\n    });\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentPaneProvider, {\n    ...providerProps,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.ReferenceInputOptionsProvider, {\n      EditReferenceLinkComponent: ReferenceChildLink,\n      onEditReference: handleEditReference,\n      initialValueTemplateItems: templatePermissions,\n      activePath,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(InnerDocumentPane, {})\n    })\n  }, \"\".concat(documentType, \"-\").concat(options.id));\n}\nfunction usePaneOptions(options) {\n  let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const templates = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useTemplates)();\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (options.type && options.type !== \"*\") {\n      return options;\n    }\n    const templateName = options.template || params.template;\n    const template = templateName ? templates.find(t => t.id === templateName) : void 0;\n    const documentType = template == null ? void 0 : template.schemaType;\n    if (!documentType) {\n      return options;\n    }\n    return {\n      ...options,\n      type: documentType\n    };\n  }, [options, params.template, templates]);\n}\nfunction mergeDocumentType(props, options, documentType) {\n  return {\n    ...props,\n    pane: {\n      ...props.pane,\n      options: {\n        ...options,\n        type: documentType\n      }\n    }\n  };\n}\nfunction InnerDocumentPane() {\n  const {\n    changesOpen,\n    documentType,\n    onFocus,\n    onPathOpen,\n    onHistoryOpen,\n    onKeyUp,\n    inspectOpen,\n    paneKey,\n    schemaType,\n    value\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.useDocumentPane)();\n  const {\n    features\n  } = useDeskTool();\n  const {\n    collapsed: layoutCollapsed\n  } = (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.usePaneLayout)();\n  const zOffsets = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useZIndex)();\n  const [rootElement, setRootElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const [footerElement, setFooterElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const [actionsBoxElement, setActionsBoxElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const [documentPanelPortalElement, setDocumentPanelPortalElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const footerRect = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useElementRect)(footerElement);\n  const footerH = footerRect == null ? void 0 : footerRect.height;\n  const documentPanel = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentPanel, {\n    footerHeight: footerH || null,\n    isInspectOpen: inspectOpen,\n    rootElement,\n    setDocumentPanelPortalElement\n  }), [footerH, rootElement, inspectOpen]);\n  const footer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.PortalProvider, {\n    __unstable_elements: {\n      [_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.DOCUMENT_PANEL_PORTAL_ELEMENT]: documentPanelPortalElement\n    },\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.DialogProvider, {\n      position: DIALOG_PROVIDER_POSITION,\n      zOffset: zOffsets.portal,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.PaneFooter, {\n        ref: setFooterElement,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentStatusBar, {\n          actionsBoxRef: setActionsBoxElement\n        })\n      })\n    })\n  }), [documentPanelPortalElement, zOffsets.portal]);\n  const changesPanel = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (!features.reviewChanges) return null;\n    if (!changesOpen) return null;\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.BoundaryElementProvider, {\n      element: rootElement,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ChangesPanel, {})\n    });\n  }, [changesOpen, features.reviewChanges, rootElement]);\n  const onConnectorSetFocus = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(path => {\n    onPathOpen(path);\n    onFocus(path);\n  }, [onPathOpen, onFocus]);\n  const children = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (!schemaType) {\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ErrorPane, {\n        flex: 2.5,\n        minWidth: 320,\n        paneKey,\n        title: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n          children: [\"Unknown document type: \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n            children: documentType\n          })]\n        }),\n        tone: \"caution\",\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Stack, {\n          space: 4,\n          children: [documentType && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n            as: \"p\",\n            children: [\"This document has the schema type \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n              children: documentType\n            }), \", which is not defined as a type in the local content studio schema.\"]\n          }), !documentType && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n            as: \"p\",\n            children: \"This document does not exist, and no schema type was specified for it.\"\n          }), sanity__WEBPACK_IMPORTED_MODULE_4__.isDev && value && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n              as: \"p\",\n              children: \"Here is the JSON representation of the document:\"\n            }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Card, {\n              padding: 3,\n              overflow: \"auto\",\n              radius: 2,\n              shadow: 1,\n              tone: \"inherit\",\n              children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Code, {\n                language: \"json\",\n                size: [1, 1, 2],\n                children: JSON.stringify(value, null, 2)\n              })\n            })]\n          })]\n        })\n      });\n    }\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.DialogProvider, {\n        position: DIALOG_PROVIDER_POSITION,\n        zOffset: zOffsets.portal,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n          direction: \"column\",\n          flex: 1,\n          height: layoutCollapsed ? void 0 : \"fill\",\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(StyledChangeConnectorRoot, {\n            \"data-testid\": \"change-connector-root\",\n            isReviewChangesOpen: changesOpen,\n            onOpenReviewChanges: onHistoryOpen,\n            onSetFocus: onConnectorSetFocus,\n            children: [documentPanel, changesPanel]\n          })\n        })\n      }), footer, /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentOperationResults, {})]\n    });\n  }, [schemaType, zOffsets.portal, layoutCollapsed, changesOpen, onHistoryOpen, onConnectorSetFocus, documentPanel, changesPanel, footer, paneKey, documentType, value]);\n  const currentMinWidth = changesOpen ? DOCUMENT_PANEL_INITIAL_MIN_WIDTH + CHANGES_PANEL_MIN_WIDTH : DOCUMENT_PANEL_INITIAL_MIN_WIDTH;\n  const minWidth = changesOpen ? DOCUMENT_PANEL_MIN_WIDTH + CHANGES_PANEL_MIN_WIDTH : DOCUMENT_PANEL_MIN_WIDTH;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentActionShortcuts, {\n    actionsBoxElement,\n    currentMinWidth,\n    \"data-testid\": \"document-pane\",\n    flex: 2.5,\n    id: paneKey,\n    minWidth,\n    onKeyUp,\n    rootRef: setRootElement,\n    children\n  });\n}\nfunction NoDocumentTypesScreen() {\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Card, {\n    height: \"fill\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n      align: \"center\",\n      height: \"fill\",\n      justify: \"center\",\n      padding: 4,\n      sizing: \"border\",\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Container, {\n        width: 0,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Card, {\n          padding: 4,\n          radius: 2,\n          shadow: 1,\n          tone: \"caution\",\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Flex, {\n            children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Box, {\n              children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n                size: 1,\n                children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_46__.WarningOutlineIcon, {})\n              })\n            }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Stack, {\n              flex: 1,\n              marginLeft: 3,\n              space: 3,\n              children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n                as: \"h1\",\n                size: 1,\n                weight: \"bold\",\n                children: \"No document types\"\n              }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n                as: \"p\",\n                muted: true,\n                size: 1,\n                children: \"Please define at least one document type in your schema.\"\n              }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.Text, {\n                as: \"p\",\n                muted: true,\n                size: 1,\n                children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", {\n                  href: \"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio\",\n                  target: \"_blank\",\n                  rel: \"noreferrer\",\n                  children: \"Learn how to add a document type \\u2192\"\n                })\n              })]\n            })]\n          })\n        })\n      })\n    })\n  });\n}\nconst StyledPaneLayout = (0,styled_components__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(PaneLayout)(_templateObject26 || (_templateObject26 = _taggedTemplateLiteral([\"\\n  min-height: 100%;\\n  min-width: 320px;\\n\"])));\nconst isSaveHotkey = (0,is_hotkey__WEBPACK_IMPORTED_MODULE_16__[\"default\"])(\"mod+s\");\nconst DeskTool = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function DeskTool2(_ref36) {\n  let {\n    onPaneChange\n  } = _ref36;\n  var _a;\n  const {\n    push: pushToast\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.useToast)();\n  const schema = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useSchema)();\n  const {\n    layoutCollapsed,\n    setLayoutCollapsed\n  } = useDeskTool();\n  const {\n    paneDataItems,\n    resolvedPanes\n  } = useResolvedPanes();\n  const isResolvingIntent = (0,sanity_router__WEBPACK_IMPORTED_MODULE_6__.useRouterState)((0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(routerState => typeof routerState.intent === \"string\", []));\n  const [portalElement, setPortalElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const handleRootCollapse = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => setLayoutCollapsed(true), [setLayoutCollapsed]);\n  const handleRootExpand = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => setLayoutCollapsed(false), [setLayoutCollapsed]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (resolvedPanes.length) {\n      onPaneChange(resolvedPanes);\n    }\n  }, [onPaneChange, resolvedPanes]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const handleGlobalKeyDown = event => {\n      if (isSaveHotkey(event)) {\n        event.preventDefault();\n        pushToast({\n          closable: true,\n          id: \"auto-save-message\",\n          status: \"info\",\n          title: \"Your work is automatically saved!\",\n          duration: 4e3\n        });\n      }\n    };\n    window.addEventListener(\"keydown\", handleGlobalKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleGlobalKeyDown);\n  }, [pushToast]);\n  const hasDefinedDocumentTypes = (_a = schema._original) == null ? void 0 : _a.types.some(sanity__WEBPACK_IMPORTED_MODULE_4__._isCustomDocumentTypeDefinition);\n  if (!hasDefinedDocumentTypes) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NoDocumentTypesScreen, {});\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.PortalProvider, {\n    element: portalElement || null,\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(StyledPaneLayout, {\n      flex: 1,\n      height: layoutCollapsed ? void 0 : \"fill\",\n      minWidth: 512,\n      onCollapse: handleRootCollapse,\n      onExpand: handleRootExpand,\n      children: [paneDataItems.map(_ref37 => {\n        let {\n          active,\n          childItemId,\n          groupIndex,\n          itemId,\n          key: paneKey,\n          pane,\n          index: paneIndex,\n          params: paneParams,\n          path,\n          payload,\n          siblingIndex,\n          selected\n        } = _ref37;\n        return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, {\n          children: pane === _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.LOADING_PANE ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingPane, {\n            paneKey,\n            path,\n            selected\n          }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DeskToolPane, {\n            active,\n            groupIndex,\n            index: paneIndex,\n            pane,\n            childItemId,\n            itemId,\n            paneKey,\n            params: paneParams,\n            payload,\n            path,\n            selected,\n            siblingIndex\n          })\n        }, \"\".concat(pane === _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.LOADING_PANE ? \"loading\" : pane.type, \"-\").concat(paneIndex));\n      }), paneDataItems.length <= 1 && isResolvingIntent && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingPane, {\n        paneKey: \"intent-resolver\"\n      })]\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n      \"data-portal\": \"\",\n      ref: setPortalElement\n    })]\n  });\n});\nfunction DeskToolBoundary(_ref38) {\n  let {\n    tool: {\n      options\n    }\n  } = _ref38;\n  const {\n    unstable_sources: sources\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_4__.useWorkspace)();\n  const [firstSource] = sources;\n  const {\n    source,\n    defaultDocumentNode,\n    structure\n  } = options || {};\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.setActivePanes)([]);\n    return () => (0,_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.setActivePanes)([]);\n  }, []);\n  const [{\n    error\n  }, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n    error: null\n  });\n  if (error) return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StructureError, {\n    error\n  });\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_26__.ErrorBoundary, {\n    onCatch: setError,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_4__.SourceProvider, {\n      name: source || firstSource.name,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.DeskToolProvider, {\n        defaultDocumentNode,\n        structure,\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DeskTool, {\n          onPaneChange: _desk_492f6e5b_js__WEBPACK_IMPORTED_MODULE_2__.setActivePanes\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(IntentResolver, {})]\n      })\n    })\n  });\n}\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  default: DeskToolBoundary\n});\n\n//# sourceMappingURL=index-7415496d.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1jbGllbnQpLy4vbm9kZV9tb2R1bGVzL3Nhbml0eS9saWIvX2NodW5rcy9pbmRleC03NDE1NDk2ZC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQSxnREFBZ0QsWUFBWSwwQkFBMEIsd0RBQXdELE9BQU8sNkJBQTZCO0FBQzFIO0FBQ3NKO0FBQzZPO0FBQ3dDO0FBQ2pjO0FBQ2lFO0FBQ25FO0FBQ3VJO0FBQzYxQjtBQUN4OEI7QUFDcEI7QUFDa0I7QUFDdEI7QUFDdUI7QUFDdVE7QUFDclM7QUFDUjtBQUNHO0FBQ0s7QUFDSDtBQUNGO0FBQ0k7QUFDa0I7QUFDakI7QUFDSTtBQUNnRDtBQUMwQjtBQUMvRTtBQUNBO0FBQ2tDO0FBQ0g7QUFDekI7QUFDWTtBQUNZO0FBQy9CO0FBQ1c7QUFDQztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSiw0QkFBNEIsK0NBQVE7QUFDcEMsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsMEJBQTBCLHNEQUFHLENBQUMsdURBQVEsSUFBSTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osd0JBQXdCLHNEQUFHLENBQUMsMERBQXNCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHdCQUF3QixzREFBRyxDQUFDLDBEQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJ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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUyxxQkFBcUIsMkRBQVk7QUFDMUMsT0FBTyxvRUFBb0Usc0RBQUc7QUFDOUU7QUFDQSxPQUFPO0FBQ1AsS0FBSyxrQkFBa0Isc0RBQUc7QUFDMUI7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUksRUFBRSxvREFBWTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEVBQUUsZ0RBQVM7QUFDWCxJQUFJLGlFQUFjO0FBQ2xCLGlCQUFpQixpRUFBYztBQUMvQixHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUcsY0FBYywrQ0FBUTtBQUN6QjtBQUNBLEdBQUc7QUFDSCxtQ0FBbUMsc0RBQUc7QUFDdEM7QUFDQSxHQUFHO0FBQ0gsd0JBQXdCLHNEQUFHLENBQUMsc0RBQWE7QUFDekM7QUFDQSw2QkFBNkIsc0RBQUcsQ0FBQyxrREFBYztBQUMvQztBQUNBLCtCQUErQix1REFBSSxDQUFDLCtEQUFnQjtBQUNwRDtBQUNBO0FBQ0Esa0NBQWtDLHNEQUFHO0FBQ3JDLHdCQUF3Qiw2REFBYztBQUN0QyxTQUFTLGtCQUFrQixzREFBRyxtQkFBbUI7QUFDakQsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQzRGO0FBQzdGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9zYW5pdHkvbGliL19jaHVua3MvaW5kZXgtNzQxNTQ5NmQuanM/ZmNlYiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX3RlbXBsYXRlT2JqZWN0LCBfdGVtcGxhdGVPYmplY3QyLCBfdGVtcGxhdGVPYmplY3QzLCBfdGVtcGxhdGVPYmplY3Q0LCBfdGVtcGxhdGVPYmplY3Q1LCBfdGVtcGxhdGVPYmplY3Q2LCBfdGVtcGxhdGVPYmplY3Q3LCBfdGVtcGxhdGVPYmplY3Q4LCBfdGVtcGxhdGVPYmplY3Q5LCBfdGVtcGxhdGVPYmplY3QxMCwgX3RlbXBsYXRlT2JqZWN0MTEsIF90ZW1wbGF0ZU9iamVjdDEyLCBfdGVtcGxhdGVPYmplY3QxMywgX3RlbXBsYXRlT2JqZWN0MTQsIF90ZW1wbGF0ZU9iamVjdDE1LCBfdGVtcGxhdGVPYmplY3QxNiwgX3RlbXBsYXRlT2JqZWN0MTcsIF90ZW1wbGF0ZU9iamVjdDE4LCBfdGVtcGxhdGVPYmplY3QxOSwgX3RlbXBsYXRlT2JqZWN0MjAsIF90ZW1wbGF0ZU9iamVjdDIxLCBfdGVtcGxhdGVPYmplY3QyMiwgX3RlbXBsYXRlT2JqZWN0MjMsIF90ZW1wbGF0ZU9iamVjdDI0LCBfdGVtcGxhdGVPYmplY3QyNSwgX3RlbXBsYXRlT2JqZWN0MjY7XG5mdW5jdGlvbiBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKHN0cmluZ3MsIHJhdykgeyBpZiAoIXJhdykgeyByYXcgPSBzdHJpbmdzLnNsaWNlKDApOyB9IHJldHVybiBPYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHN0cmluZ3MsIHsgcmF3OiB7IHZhbHVlOiBPYmplY3QuZnJlZXplKHJhdykgfSB9KSk7IH1cbmltcG9ydCB7IGpzeCwgRnJhZ21lbnQsIGpzeHMgfSBmcm9tICdyZWFjdC9qc3gtcnVudGltZSc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlQ2FsbGJhY2ssIHVzZUNvbnRleHQsIG1lbW8sIGxhenksIFN1c3BlbnNlLCB1c2VSZWYsIGNyZWF0ZUVsZW1lbnQsIHVzZUlkLCBmb3J3YXJkUmVmLCBpc1ZhbGlkRWxlbWVudCwgdXNlTGF5b3V0RWZmZWN0LCBGcmFnbWVudCBhcyBGcmFnbWVudCQxIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlRWxlbWVudFJlY3QsIENhcmQsIENvbnRhaW5lciwgSGVhZGluZywgU3RhY2ssIExhYmVsLCBDb2RlLCBCb3gsIFRleHQsIEJ1dHRvbiwgRmxleCwgX3JhZjIsIFNwaW5uZXIsIHVzZVRvYXN0LCBBdmF0YXJTdGFjaywgcmVtLCBQb3BvdmVyLCB1c2VDbGlja091dHNpZGUsIHVzZUdsb2JhbEtleURvd24sIEJvdW5kYXJ5RWxlbWVudFByb3ZpZGVyLCBUZXh0SW5wdXQsIERpYWxvZywgVGFiTGlzdCwgVGFiLCBUYWJQYW5lbCwgZm9jdXNGaXJzdERlc2NlbmRhbnQsIE1lbnVCdXR0b24sIE1lbnUsIElubGluZSwgdXNlUG9ydGFsLCBQb3J0YWxQcm92aWRlciwgdXNlTGF5ZXIsIEdyaWQsIE1lbnVJdGVtLCBUb29sdGlwLCBIb3RrZXlzLCBMYXllclByb3ZpZGVyLCBCYWRnZSwgRGlhbG9nUHJvdmlkZXIsIEVycm9yQm91bmRhcnkgfSBmcm9tICdAc2FuaXR5L3VpJztcbmltcG9ydCB7IENoaWxkTGluaywgQmFja0xpbmssIFJlZmVyZW5jZUNoaWxkTGluaywgUGFyYW1ldGVyaXplZExpbmssIFBhbmVSb3V0ZXJDb250ZXh0LCBQQU5FX0RFRkFVTFRfTUlOX1dJRFRILCBQQU5FX0NPTExBUFNFRF9XSURUSCwgUGFuZUxheW91dENvbnRleHQsIFJvb3QgYXMgUm9vdCQ2LCBEZXNrVG9vbENvbnRleHQsIExPQURJTkdfUEFORSwgU2VyaWFsaXplRXJyb3IsIFBhbmUsIFBhbmVIZWFkZXIsIFBhbmVDb250ZW50LCB1c2VEb2N1bWVudFBhbmUsIHVzZVBhbmVSb3V0ZXIsIERvY3VtZW50UGFuZUNvbnRleHQsIHVzZVBhbmUsIERvY1RpdGxlLCBQYW5lQ29udGV4dE1lbnVCdXR0b24sIHVzZVBhbmVMYXlvdXQsIERPQ1VNRU5UX1BBTkVMX1BPUlRBTF9FTEVNRU5ULCBIaXN0b3J5UmVzdG9yZUFjdGlvbiwgUGFuZUZvb3Rlciwgc2V0QWN0aXZlUGFuZXMsIERlc2tUb29sUHJvdmlkZXIgfSBmcm9tICcuL2Rlc2stNDkyZjZlNWIuanMnO1xuaW1wb3J0IG9taXQgZnJvbSAnbG9kYXNoL29taXQuanMnO1xuaW1wb3J0IHsgaXNPYnNlcnZhYmxlLCBmcm9tLCBvZiwgZmlyc3RWYWx1ZUZyb20sIE5FVkVSLCBjb25jYXQsIFJlcGxheVN1YmplY3QsIG1lcmdlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBuYW5vaWQgfSBmcm9tICduYW5vaWQnO1xuaW1wb3J0IHsgc3dpdGNoTWFwLCBwdWJsaXNoUmVwbGF5LCByZWZDb3VudCwgbWFwLCBzdGFydFdpdGgsIHBhaXJ3aXNlLCBzY2FuLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCwgbWFwVG8sIGRlbGF5LCBkZWJvdW5jZVRpbWUsIGNhdGNoRXJyb3IsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEdldEhvb2tDb2xsZWN0aW9uU3RhdGUsIGlzUmVjb3JkLCB1c2VEb2N1bWVudFN0b3JlLCBpc0RldiwgdXNlRG9jdW1lbnRPcGVyYXRpb25FdmVudCwgdXNlU291cmNlLCB1c2VTY2hlbWEsIHVzZVRlbXBsYXRlcywgdXNlUHJlc2VuY2VTdG9yZSwgdXNlVW5pcXVlLCBnZXRQdWJsaXNoZWRJZCwgdXNlSW5pdGlhbFZhbHVlLCB1c2VEb2N1bWVudE9wZXJhdGlvbiwgdXNlRWRpdFN0YXRlLCB1c2VWYWxpZGF0aW9uU3RhdHVzLCB1c2VDb25uZWN0aW9uU3RhdGUsIHVzZVRpbWVsaW5lU3RvcmUsIHVzZVRpbWVsaW5lU2VsZWN0b3IsIHRvTXV0YXRpb25QYXRjaGVzLCBzZXRBdFBhdGgsIGdldERyYWZ0SWQsIHVzZURvY3VtZW50VmFsdWVQZXJtaXNzaW9ucywgdXNlRm9ybVN0YXRlLCBnZXRFeHBhbmRPcGVyYXRpb25zLCBVc2VyQXZhdGFyLCBDb21tYW5kTGlzdCwgVGV4dFdpdGhUb25lLCB2aXNpdERpZmYsIFNjcm9sbENvbnRhaW5lciwgQ2hhbmdlRmllbGRXcmFwcGVyLCBEaWZmVG9vbHRpcCwgTm9DaGFuZ2VzLCBEb2N1bWVudENoYW5nZUNvbnRleHQsIENoYW5nZUxpc3QsIHVzZVNldHRpbmdzU3RvcmUsIGlzU3RyaW5nLCB1c2VEb2N1bWVudFByZXZpZXdTdG9yZSwgdXNlQ3VycmVudFVzZXIsIHVzZURvY3VtZW50UHJlc2VuY2UsIGNyZWF0ZVBhdGNoQ2hhbm5lbCwgUHJlc2VuY2VPdmVybGF5LCBGb3JtQnVpbGRlciwgZnJvbU11dGF0aW9uUGF0Y2hlcywgVmFsaWRhdGlvbkxpc3QsIHVuc3RhYmxlX3VzZVZhbHVlUHJldmlldywgVmlydHVhbGl6ZXJTY3JvbGxJbnN0YW5jZVByb3ZpZGVyLCBMZWdhY3lMYXllclByb3ZpZGVyLCB1c2VUaW1lQWdvLCB1c2VTeW5jU3RhdGUsIENoYW5nZUNvbm5lY3RvclJvb3QsIFNvdXJjZVByb3ZpZGVyLCB1c2VEb2N1bWVudFR5cGUsIHVzZVRlbXBsYXRlUGVybWlzc2lvbnMsIFJlZmVyZW5jZUlucHV0T3B0aW9uc1Byb3ZpZGVyLCB1c2VaSW5kZXgsIF9pc0N1c3RvbURvY3VtZW50VHlwZURlZmluaXRpb24sIHVzZVdvcmtzcGFjZSB9IGZyb20gJ3Nhbml0eSc7XG5pbXBvcnQgeyBnZW5lcmF0ZUhlbHBVcmwgfSBmcm9tICdAc2FuaXR5L2dlbmVyYXRlLWhlbHAtdXJsJztcbmltcG9ydCBpc0VxdWFsIGZyb20gJ2xvZGFzaC9pc0VxdWFsLmpzJztcbmltcG9ydCB7IHVzZVJvdXRlciwgdXNlUm91dGVyU3RhdGUgfSBmcm9tICdzYW5pdHkvcm91dGVyJztcbmltcG9ydCB7IHV1aWQgfSBmcm9tICdAc2FuaXR5L3V1aWQnO1xuaW1wb3J0IHN0eWxlZCwgeyBjc3MsIGtleWZyYW1lcyB9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCB7IFN5bmNJY29uLCBSZXN0b3JlSWNvbiwgQmluYXJ5RG9jdW1lbnRJY29uLCBFYXJ0aEFtZXJpY2FzSWNvbiwgQWRkQ2lyY2xlSWNvbiwgVHJhc2hJY29uLCBDbG9zZUljb24sIEVkaXRJY29uLCBQdWJsaXNoSWNvbiwgVW5wdWJsaXNoSWNvbiwgRXJyb3JPdXRsaW5lSWNvbiwgU2VsZWN0SWNvbiwgU2VhcmNoSWNvbiwgV2FybmluZ091dGxpbmVJY29uLCBSZWFkT25seUljb24sIEluZm9PdXRsaW5lSWNvbiwgQXJyb3dMZWZ0SWNvbiwgU3BsaXRWZXJ0aWNhbEljb24sIENoZXZyb25Eb3duSWNvbiwgUGxheUljb24gfSBmcm9tICdAc2FuaXR5L2ljb25zJztcbmltcG9ydCAnbG9kYXNoL2NhbWVsQ2FzZS5qcyc7XG5pbXBvcnQgJ3NwZWFraW5ndXJsJztcbmltcG9ydCAnbG9kYXNoL3VuaXEuanMnO1xuaW1wb3J0ICdsb2Rhc2gva2ViYWJDYXNlLmpzJztcbmltcG9ydCAnbG9kYXNoL3BpY2tCeS5qcyc7XG5pbXBvcnQgJ2xvZGFzaC9maW5kLmpzJztcbmltcG9ydCAnbG9kYXNoL3VuaXF1ZUlkLmpzJztcbmltcG9ydCB7IGlzVmFsaWRFbGVtZW50VHlwZSB9IGZyb20gJ3JlYWN0LWlzJztcbmltcG9ydCAnbG9kYXNoL3N0YXJ0Q2FzZS5qcyc7XG5pbXBvcnQgaXNIb3RrZXkgZnJvbSAnaXMtaG90a2V5JztcbmltcG9ydCB7IHRvU3RyaW5nLCBmcm9tU3RyaW5nLCByZXNvbHZlS2V5ZWRQYXRoLCBnZXQgfSBmcm9tICdAc2FuaXR5L3V0aWwvcGF0aHMnO1xuaW1wb3J0IHsgaXNWYWxpZGF0aW9uRXJyb3JNYXJrZXIsIGlzVmFsaWRhdGlvbldhcm5pbmdNYXJrZXIsIGlzVmFsaWRhdGlvbkluZm9NYXJrZXIgfSBmcm9tICdAc2FuaXR5L3R5cGVzJztcbmltcG9ydCAnbG9kYXNoL2lzTnVtYmVyLmpzJztcbmltcG9ydCAnbG9kYXNoL2lzU3RyaW5nLmpzJztcbmltcG9ydCB7IHVzZUFzT2JzZXJ2YWJsZSwgdXNlTWVtb09ic2VydmFibGUgfSBmcm9tICdyZWFjdC1yeCc7XG5pbXBvcnQgeyBpc0FjdGlvbkVuYWJsZWQgfSBmcm9tICdAc2FuaXR5L3NjaGVtYS9faW50ZXJuYWwnO1xuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnO1xuaW1wb3J0IHVwcGVyRmlyc3QgZnJvbSAnbG9kYXNoL3VwcGVyRmlyc3QuanMnO1xuaW1wb3J0IEpTT05JbnNwZWN0b3IgZnJvbSAnQHJleHhhcnMvcmVhY3QtanNvbi1pbnNwZWN0b3InO1xuaW1wb3J0IEhMUlUgZnJvbSAnaGFzaGxydSc7XG5pbXBvcnQgbmVnYXRlIGZyb20gJ2xvZGFzaC9uZWdhdGUuanMnO1xuaW1wb3J0IHsgbW90aW9uIH0gZnJvbSAnZnJhbWVyLW1vdGlvbic7XG5mdW5jdGlvbiBEZWxheShfcmVmKSB7XG4gIGxldCB7XG4gICAgY2hpbGRyZW4sXG4gICAgbXMgPSAwXG4gIH0gPSBfcmVmO1xuICBjb25zdCBbcmVhZHksIHNldFJlYWR5XSA9IHVzZVN0YXRlKG1zIDw9IDApO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChtcyA8PSAwKSB7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHNldFJlYWR5KHRydWUpLCBtcyk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIH07XG4gIH0sIFttc10pO1xuICBpZiAoIXJlYWR5IHx8ICFjaGlsZHJlbikge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goRnJhZ21lbnQsIHt9KTtcbiAgfVxuICByZXR1cm4gdHlwZW9mIGNoaWxkcmVuID09PSBcImZ1bmN0aW9uXCIgPyBjaGlsZHJlbigpIDogY2hpbGRyZW47XG59XG5jb25zdCBSZW5kZXJBY3Rpb25Db2xsZWN0aW9uU3RhdGUgPSBwcm9wcyA9PiB7XG4gIGNvbnN0IHtcbiAgICBhY3Rpb25zLFxuICAgIGNoaWxkcmVuLFxuICAgIGFjdGlvblByb3BzLFxuICAgIG9uQWN0aW9uQ29tcGxldGVcbiAgfSA9IHByb3BzO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KEdldEhvb2tDb2xsZWN0aW9uU3RhdGUsIHtcbiAgICBvblJlc2V0OiBvbkFjdGlvbkNvbXBsZXRlLFxuICAgIGhvb2tzOiBhY3Rpb25zLFxuICAgIGFyZ3M6IGFjdGlvblByb3BzLFxuICAgIGNoaWxkcmVuXG4gIH0pO1xufTtcbmNvbnN0IFJlbmRlckJhZGdlQ29sbGVjdGlvblN0YXRlID0gcHJvcHMgPT4ge1xuICBjb25zdCB7XG4gICAgYmFkZ2VzLFxuICAgIGNoaWxkcmVuLFxuICAgIGJhZGdlUHJvcHMsXG4gICAgLi4ucmVzdFxuICB9ID0gcHJvcHM7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goR2V0SG9va0NvbGxlY3Rpb25TdGF0ZSwge1xuICAgIC4uLnJlc3QsXG4gICAgaG9va3M6IGJhZGdlcyxcbiAgICBhcmdzOiBiYWRnZVByb3BzLFxuICAgIGNoaWxkcmVuXG4gIH0pO1xufTtcbmNvbnN0IGVtcHR5QXJyYXkgPSBbXTtcbmZ1bmN0aW9uIFBhbmVSb3V0ZXJQcm92aWRlcihwcm9wcykge1xuICBjb25zdCB7XG4gICAgY2hpbGRyZW4sXG4gICAgZmxhdEluZGV4LFxuICAgIGluZGV4LFxuICAgIHBhcmFtcyxcbiAgICBwYXlsb2FkLFxuICAgIHNpYmxpbmdJbmRleFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBuYXZpZ2F0ZSxcbiAgICBuYXZpZ2F0ZUludGVudFxuICB9ID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IHJvdXRlclN0YXRlID0gdXNlUm91dGVyU3RhdGUoKTtcbiAgY29uc3Qgcm91dGVyUGFuZUdyb3VwcyA9IHVzZU1lbW8oKCkgPT4gKHJvdXRlclN0YXRlID09IG51bGwgPyB2b2lkIDAgOiByb3V0ZXJTdGF0ZS5wYW5lcykgfHwgZW1wdHlBcnJheSwgW3JvdXRlclN0YXRlID09IG51bGwgPyB2b2lkIDAgOiByb3V0ZXJTdGF0ZS5wYW5lc10pO1xuICBjb25zdCBncm91cEluZGV4ID0gaW5kZXggLSAxO1xuICBjb25zdCBtb2RpZnlDdXJyZW50R3JvdXAgPSB1c2VDYWxsYmFjayhtb2RpZmllciA9PiB7XG4gICAgY29uc3QgY3VycmVudEdyb3VwID0gcm91dGVyUGFuZUdyb3Vwc1tncm91cEluZGV4XSB8fCBbXTtcbiAgICBjb25zdCBjdXJyZW50SXRlbSA9IGN1cnJlbnRHcm91cFtzaWJsaW5nSW5kZXhdO1xuICAgIGNvbnN0IG5leHRHcm91cCA9IG1vZGlmaWVyKGN1cnJlbnRHcm91cCwgY3VycmVudEl0ZW0pO1xuICAgIGNvbnN0IG5leHRQYW5lcyA9IFsuLi5yb3V0ZXJQYW5lR3JvdXBzLnNsaWNlKDAsIGdyb3VwSW5kZXgpLCBuZXh0R3JvdXAsIC4uLnJvdXRlclBhbmVHcm91cHMuc2xpY2UoZ3JvdXBJbmRleCArIDEpXTtcbiAgICBjb25zdCBuZXh0Um91dGVyU3RhdGUgPSB7XG4gICAgICAuLi4ocm91dGVyU3RhdGUgfHwge30pLFxuICAgICAgcGFuZXM6IG5leHRQYW5lc1xuICAgIH07XG4gICAgc2V0VGltZW91dCgoKSA9PiBuYXZpZ2F0ZShuZXh0Um91dGVyU3RhdGUpLCAwKTtcbiAgICByZXR1cm4gbmV4dFJvdXRlclN0YXRlO1xuICB9LCBbZ3JvdXBJbmRleCwgbmF2aWdhdGUsIHJvdXRlclBhbmVHcm91cHMsIHJvdXRlclN0YXRlLCBzaWJsaW5nSW5kZXhdKTtcbiAgY29uc3Qgc2V0UGF5bG9hZCA9IHVzZUNhbGxiYWNrKG5leHRQYXlsb2FkID0+IHtcbiAgICBtb2RpZnlDdXJyZW50R3JvdXAoKHNpYmxpbmdzLCBpdGVtKSA9PiBbLi4uc2libGluZ3Muc2xpY2UoMCwgc2libGluZ0luZGV4KSwge1xuICAgICAgLi4uaXRlbSxcbiAgICAgIHBheWxvYWQ6IG5leHRQYXlsb2FkXG4gICAgfSwgLi4uc2libGluZ3Muc2xpY2Uoc2libGluZ0luZGV4ICsgMSldKTtcbiAgfSwgW21vZGlmeUN1cnJlbnRHcm91cCwgc2libGluZ0luZGV4XSk7XG4gIGNvbnN0IHNldFBhcmFtcyA9IHVzZUNhbGxiYWNrKG5leHRQYXJhbXMgPT4ge1xuICAgIG1vZGlmeUN1cnJlbnRHcm91cCgoc2libGluZ3MsIGl0ZW0pID0+IFsuLi5zaWJsaW5ncy5zbGljZSgwLCBzaWJsaW5nSW5kZXgpLCB7XG4gICAgICAuLi5pdGVtLFxuICAgICAgcGFyYW1zOiBuZXh0UGFyYW1zXG4gICAgfSwgLi4uc2libGluZ3Muc2xpY2Uoc2libGluZ0luZGV4ICsgMSldKTtcbiAgfSwgW21vZGlmeUN1cnJlbnRHcm91cCwgc2libGluZ0luZGV4XSk7XG4gIGNvbnN0IGhhbmRsZUVkaXRSZWZlcmVuY2UgPSB1c2VDYWxsYmFjayhfcmVmMiA9PiB7XG4gICAgbGV0IHtcbiAgICAgIGlkLFxuICAgICAgcGFyZW50UmVmUGF0aCxcbiAgICAgIHR5cGUsXG4gICAgICB0ZW1wbGF0ZVxuICAgIH0gPSBfcmVmMjtcbiAgICBuYXZpZ2F0ZSh7XG4gICAgICBwYW5lczogWy4uLnJvdXRlclBhbmVHcm91cHMuc2xpY2UoMCwgZ3JvdXBJbmRleCArIDEpLCBbe1xuICAgICAgICBpZCxcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgdGVtcGxhdGU6IHRlbXBsYXRlLmlkLFxuICAgICAgICAgIHBhcmVudFJlZlBhdGg6IHRvU3RyaW5nKHBhcmVudFJlZlBhdGgpLFxuICAgICAgICAgIHR5cGVcbiAgICAgICAgfSxcbiAgICAgICAgcGF5bG9hZDogdGVtcGxhdGUucGFyYW1zXG4gICAgICB9XV1cbiAgICB9KTtcbiAgfSwgW2dyb3VwSW5kZXgsIG5hdmlnYXRlLCByb3V0ZXJQYW5lR3JvdXBzXSk7XG4gIGNvbnN0IGN0eCA9IHVzZU1lbW8oKCkgPT4gKHtcbiAgICAvLyBaZXJvLWJhc2VkIGluZGV4IChwb3NpdGlvbikgb2YgcGFuZSwgdmlzdWFsbHlcbiAgICBpbmRleDogZmxhdEluZGV4LFxuICAgIC8vIFplcm8tYmFzZWQgaW5kZXggb2YgcGFuZSBncm91cCAod2l0aGluIFVSTCBzdHJ1Y3R1cmUpXG4gICAgZ3JvdXBJbmRleCxcbiAgICAvLyBaZXJvLWJhc2VkIGluZGV4IG9mIHBhbmUgd2l0aGluIHNpYmxpbmcgZ3JvdXBcbiAgICBzaWJsaW5nSW5kZXgsXG4gICAgLy8gUGF5bG9hZCBvZiB0aGUgY3VycmVudCBwYW5lXG4gICAgcGF5bG9hZCxcbiAgICAvLyBQYXJhbXMgb2YgdGhlIGN1cnJlbnQgcGFuZVxuICAgIHBhcmFtcyxcbiAgICAvLyBXaGV0aGVyIG9yIG5vdCB0aGUgcGFuZSBoYXMgYW55IHNpYmxpbmdzICh3aXRoaW4gdGhlIHNhbWUgZ3JvdXApXG4gICAgaGFzR3JvdXBTaWJsaW5nczogcm91dGVyUGFuZUdyb3Vwc1tncm91cEluZGV4XSA/IHJvdXRlclBhbmVHcm91cHNbZ3JvdXBJbmRleF0ubGVuZ3RoID4gMSA6IGZhbHNlLFxuICAgIC8vIFRoZSBsZW5ndGggb2YgdGhlIGN1cnJlbnQgZ3JvdXBcbiAgICBncm91cExlbmd0aDogcm91dGVyUGFuZUdyb3Vwc1tncm91cEluZGV4XSA/IHJvdXRlclBhbmVHcm91cHNbZ3JvdXBJbmRleF0ubGVuZ3RoIDogMCxcbiAgICAvLyBDdXJyZW50IHJvdXRlciBzdGF0ZSBmb3IgdGhlIFwicGFuZXNcIiBwcm9wZXJ0eVxuICAgIHJvdXRlclBhbmVzU3RhdGU6IHJvdXRlclBhbmVHcm91cHMsXG4gICAgLy8gQ3VycmllZCBTdGF0ZUxpbmsgdGhhdCBwYXNzZXMgdGhlIGNvcnJlY3Qgc3RhdGUgYXV0b21hdGljYWxseVxuICAgIENoaWxkTGluayxcbiAgICAvLyBDdXJyaWVkIFN0YXRlTGluayB0aGF0IHBvcHMgb2ZmIHRoZSBsYXN0IHBhbmUgZ3JvdXBcbiAgICBCYWNrTGluayxcbiAgICAvLyBBIHNwZWNpYWxpemVkIGBDaGlsZExpbmtgIHRoYXQgdGFrZXMgaW4gdGhlIG5lZWRlZCBwcm9wcyB0byBvcGVuIGFcbiAgICAvLyByZWZlcmVuY2VkIGRvY3VtZW50IHRvIHRoZSByaWdodFxuICAgIFJlZmVyZW5jZUNoaWxkTGluayxcbiAgICAvLyBTaW1pbGFyIHRvIGBSZWZlcmVuY2VDaGlsZExpbmtgIGV4cGVjdCB3aXRob3V0IHRoZSB3cmFwcGluZyBjb21wb25lbnRcbiAgICBoYW5kbGVFZGl0UmVmZXJlbmNlLFxuICAgIC8vIEN1cnJpZWQgU3RhdGVMaW5rIHRoYXQgcGFzc2VkIHRoZSBjb3JyZWN0IHN0YXRlLCBidXQgbWVyZ2VzIHBhcmFtcy9wYXlsb2FkXG4gICAgUGFyYW1ldGVyaXplZExpbmssXG4gICAgLy8gUmVwbGFjZXMgdGhlIGN1cnJlbnQgcGFuZSB3aXRoIGEgbmV3IG9uZVxuICAgIHJlcGxhY2VDdXJyZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgICBtb2RpZnlDdXJyZW50R3JvdXAoKCkgPT4gW3tcbiAgICAgICAgaWQ6IG9wdHMuaWQgfHwgXCJcIixcbiAgICAgICAgcGF5bG9hZDogb3B0cy5wYXlsb2FkLFxuICAgICAgICBwYXJhbXM6IG9wdHMucGFyYW1zIHx8IHt9XG4gICAgICB9XSk7XG4gICAgfSxcbiAgICAvLyBSZW1vdmVzIHRoZSBjdXJyZW50IHBhbmUgZnJvbSB0aGUgZ3JvdXBcbiAgICBjbG9zZUN1cnJlbnQ6ICgpID0+IHtcbiAgICAgIG1vZGlmeUN1cnJlbnRHcm91cCgoc2libGluZ3MsIGl0ZW0pID0+IHNpYmxpbmdzLmxlbmd0aCA+IDEgPyBzaWJsaW5ncy5maWx0ZXIoc2libGluZyA9PiBzaWJsaW5nICE9PSBpdGVtKSA6IHNpYmxpbmdzKTtcbiAgICB9LFxuICAgIC8vIER1cGxpY2F0ZSB0aGUgY3VycmVudCBwYW5lLCB3aXRoIG9wdGlvbmFsIG92ZXJyaWRlcyBmb3IgcGF5bG9hZCwgcGFyYW1ldGVyc1xuICAgIGR1cGxpY2F0ZUN1cnJlbnQ6IG9wdGlvbnMgPT4ge1xuICAgICAgbW9kaWZ5Q3VycmVudEdyb3VwKChzaWJsaW5ncywgaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBkdXBsaWNhdGVkSXRlbSA9IHtcbiAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgIHBheWxvYWQ6IChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnBheWxvYWQpIHx8IGl0ZW0ucGF5bG9hZCxcbiAgICAgICAgICBwYXJhbXM6IChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnBhcmFtcykgfHwgaXRlbS5wYXJhbXNcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFsuLi5zaWJsaW5ncy5zbGljZSgwLCBzaWJsaW5nSW5kZXgpLCBkdXBsaWNhdGVkSXRlbSwgLi4uc2libGluZ3Muc2xpY2Uoc2libGluZ0luZGV4KV07XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIFNldCB0aGUgdmlldyBmb3IgdGhlIGN1cnJlbnQgcGFuZVxuICAgIHNldFZpZXc6IHZpZXdJZCA9PiB7XG4gICAgICBjb25zdCByZXN0UGFyYW1zID0gb21pdChwYXJhbXMsIFwidmlld1wiKTtcbiAgICAgIHJldHVybiBzZXRQYXJhbXModmlld0lkID8ge1xuICAgICAgICAuLi5yZXN0UGFyYW1zLFxuICAgICAgICB2aWV3OiB2aWV3SWRcbiAgICAgIH0gOiByZXN0UGFyYW1zKTtcbiAgICB9LFxuICAgIC8vIFNldCB0aGUgcGFyYW1ldGVycyBmb3IgdGhlIGN1cnJlbnQgcGFuZVxuICAgIHNldFBhcmFtcyxcbiAgICAvLyBTZXQgdGhlIHBheWxvYWQgZm9yIHRoZSBjdXJyZW50IHBhbmVcbiAgICBzZXRQYXlsb2FkLFxuICAgIC8vIFByb3hpZWQgbmF2aWdhdGlvbiB0byBhIGdpdmVuIGludGVudC4gQ29uc2lkZXIganVzdCBleHBvc2luZyBgcm91dGVyYCBpbnN0ZWFkP1xuICAgIG5hdmlnYXRlSW50ZW50XG4gIH0pLCBbZmxhdEluZGV4LCBncm91cEluZGV4LCBoYW5kbGVFZGl0UmVmZXJlbmNlLCBtb2RpZnlDdXJyZW50R3JvdXAsIG5hdmlnYXRlSW50ZW50LCBwYXJhbXMsIHBheWxvYWQsIHJvdXRlclBhbmVHcm91cHMsIHNldFBhcmFtcywgc2V0UGF5bG9hZCwgc2libGluZ0luZGV4XSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUGFuZVJvdXRlckNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogY3R4LFxuICAgIGNoaWxkcmVuXG4gIH0pO1xufVxuZnVuY3Rpb24gX2NhbGNQYW5lUmVzaXplKGNhY2hlLCBsZWZ0LCByaWdodCwgZGVsdGFYKSB7XG4gIHZhciBfYSwgX2I7XG4gIGNvbnN0IHN1bSA9IHtcbiAgICBmbGV4OiBjYWNoZS5sZWZ0LmZsZXggKyBjYWNoZS5yaWdodC5mbGV4LFxuICAgIHdpZHRoOiBjYWNoZS5sZWZ0LndpZHRoICsgY2FjaGUucmlnaHQud2lkdGhcbiAgfTtcbiAgY29uc3QgbGVmdE1pbldpZHRoID0gKF9hID0gbGVmdC5taW5XaWR0aCkgIT0gbnVsbCA/IF9hIDogUEFORV9ERUZBVUxUX01JTl9XSURUSDtcbiAgY29uc3QgcmlnaHRNaW5XaWR0aCA9IChfYiA9IHJpZ2h0Lm1pbldpZHRoKSAhPSBudWxsID8gX2IgOiBQQU5FX0RFRkFVTFRfTUlOX1dJRFRIO1xuICBjb25zdCBsZWZ0TWF4V2lkdGggPSBNYXRoLm1pbihsZWZ0Lm1heFdpZHRoIHx8IEluZmluaXR5LCBzdW0ud2lkdGggLSByaWdodE1pbldpZHRoKTtcbiAgY29uc3QgcmlnaHRNYXhXaWR0aCA9IE1hdGgubWluKHJpZ2h0Lm1heFdpZHRoIHx8IEluZmluaXR5LCBzdW0ud2lkdGggLSBsZWZ0TWluV2lkdGgpO1xuICBsZXQgbWluRGVsdGFYID0gbGVmdE1pbldpZHRoIC0gY2FjaGUubGVmdC53aWR0aDtcbiAgY29uc3QgcmlnaHRNaW5EZWx0YVggPSBjYWNoZS5yaWdodC53aWR0aCAtIHJpZ2h0TWF4V2lkdGg7XG4gIGlmIChtaW5EZWx0YVggPCByaWdodE1pbkRlbHRhWCkge1xuICAgIG1pbkRlbHRhWCA9IHJpZ2h0TWluRGVsdGFYO1xuICB9XG4gIGxldCBtYXhEZWx0YVggPSBjYWNoZS5yaWdodC53aWR0aCAtIHJpZ2h0TWluV2lkdGg7XG4gIGNvbnN0IGxlZnRNYXhEZWx0YVggPSBsZWZ0TWF4V2lkdGggLSBjYWNoZS5sZWZ0LndpZHRoO1xuICBpZiAobWF4RGVsdGFYID4gbGVmdE1heERlbHRhWCkge1xuICAgIG1heERlbHRhWCA9IGxlZnRNYXhEZWx0YVg7XG4gIH1cbiAgY29uc3QgX2RlbHRhWCA9IE1hdGgubWluKE1hdGgubWF4KGRlbHRhWCwgbWluRGVsdGFYKSwgbWF4RGVsdGFYKTtcbiAgY29uc3QgbGVmdFcgPSBjYWNoZS5sZWZ0LndpZHRoICsgX2RlbHRhWDtcbiAgY29uc3QgcmlnaHRXID0gY2FjaGUucmlnaHQud2lkdGggLSBfZGVsdGFYO1xuICBjb25zdCBsZWZ0RmxleCA9IGxlZnRXIC8gc3VtLndpZHRoICogc3VtLmZsZXg7XG4gIGNvbnN0IHJpZ2h0RmxleCA9IHJpZ2h0VyAvIHN1bS53aWR0aCAqIHN1bS5mbGV4O1xuICByZXR1cm4ge1xuICAgIGxlZnRGbGV4LFxuICAgIGxlZnRXLFxuICAgIHJpZ2h0RmxleCxcbiAgICByaWdodFdcbiAgfTtcbn1cbmZ1bmN0aW9uIF9nZXRET01QYXRoKHJvb3RFbGVtZW50LCBlbCkge1xuICBjb25zdCBwYXRoID0gW107XG4gIGxldCBlID0gZWw7XG4gIHdoaWxlIChlICE9PSByb290RWxlbWVudCkge1xuICAgIGNvbnN0IHBhcmVudEVsZW1lbnQgPSBlLnBhcmVudEVsZW1lbnQ7XG4gICAgaWYgKCFwYXJlbnRFbGVtZW50KSByZXR1cm4gcGF0aDtcbiAgICBjb25zdCBjaGlsZHJlbiA9IEFycmF5LmZyb20ocGFyZW50RWxlbWVudC5jaGlsZE5vZGVzKTtcbiAgICBjb25zdCBpbmRleCA9IGNoaWxkcmVuLmluZGV4T2YoZSk7XG4gICAgcGF0aC51bnNoaWZ0KGluZGV4KTtcbiAgICBpZiAocGFyZW50RWxlbWVudCA9PT0gcm9vdEVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBwYXRoO1xuICAgIH1cbiAgICBlID0gcGFyZW50RWxlbWVudDtcbiAgfVxuICByZXR1cm4gcGF0aDtcbn1cbmNvbnN0IEVNUFRZX1BBVEggPSBbXTtcbmZ1bmN0aW9uIF9zb3J0RWxlbWVudHMocm9vdEVsZW1lbnQsIGVsZW1lbnRzKSB7XG4gIGNvbnN0IG1hcCA9IC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrTWFwKCk7XG4gIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xuICAgIG1hcC5zZXQoZWxlbWVudCwgX2dldERPTVBhdGgocm9vdEVsZW1lbnQsIGVsZW1lbnQpKTtcbiAgfVxuICBjb25zdCBfc29ydEJ5RWxlbWVudFBhdGggPSAoYSwgYikgPT4ge1xuICAgIGNvbnN0IF9hID0gbWFwLmdldChhKSB8fCBFTVBUWV9QQVRIO1xuICAgIGNvbnN0IF9iID0gbWFwLmdldChiKSB8fCBFTVBUWV9QQVRIO1xuICAgIGNvbnN0IGxlbiA9IE1hdGgubWF4KF9hLmxlbmd0aCwgX2IubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICBjb25zdCBhSW5kZXggPSBfYVtpXSB8fCAtMTtcbiAgICAgIGNvbnN0IGJJbmRleCA9IF9iW2ldIHx8IC0xO1xuICAgICAgaWYgKGFJbmRleCAhPT0gYkluZGV4KSB7XG4gICAgICAgIHJldHVybiBhSW5kZXggLSBiSW5kZXg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9O1xuICBlbGVtZW50cy5zb3J0KF9zb3J0QnlFbGVtZW50UGF0aCk7XG59XG5mdW5jdGlvbiBjcmVhdGVQYW5lTGF5b3V0Q29udHJvbGxlcigpIHtcbiAgY29uc3Qgb2JzZXJ2ZXJzID0gW107XG4gIGNvbnN0IGVsZW1lbnRzID0gW107XG4gIGNvbnN0IG9wdGlvbnNNYXAgPSAvKiBAX19QVVJFX18gKi9uZXcgV2Vha01hcCgpO1xuICBjb25zdCB1c2VyQ29sbGFwc2VkRWxlbWVudFNldCA9IC8qIEBfX1BVUkVfXyAqL25ldyBTZXQoKTtcbiAgY29uc3QgY2FjaGUgPSB7fTtcbiAgbGV0IHJvb3RFbGVtZW50ID0gbnVsbDtcbiAgbGV0IHJvb3RXaWR0aCA9IDA7XG4gIGxldCBleHBhbmRlZEVsZW1lbnQgPSBudWxsO1xuICBsZXQgcmVzaXplRGF0YU1hcCA9IC8qIEBfX1BVUkVfXyAqL25ldyBNYXAoKTtcbiAgbGV0IHJlc2l6aW5nID0gZmFsc2U7XG4gIGZ1bmN0aW9uIGNvbGxhcHNlKGVsZW1lbnQpIHtcbiAgICB1c2VyQ29sbGFwc2VkRWxlbWVudFNldC5hZGQoZWxlbWVudCk7XG4gICAgaWYgKGV4cGFuZGVkRWxlbWVudCA9PT0gZWxlbWVudCkge1xuICAgICAgZXhwYW5kZWRFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gICAgX25vdGlmeU9ic2VydmVycygpO1xuICB9XG4gIGZ1bmN0aW9uIGV4cGFuZChlbGVtZW50KSB7XG4gICAgdXNlckNvbGxhcHNlZEVsZW1lbnRTZXQuZGVsZXRlKGVsZW1lbnQpO1xuICAgIGV4cGFuZGVkRWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgX25vdGlmeU9ic2VydmVycygpO1xuICB9XG4gIGZ1bmN0aW9uIG1vdW50KGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zTWFwLnNldChlbGVtZW50LCB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgb3JpZ2luYWw6IG9wdGlvbnNcbiAgICB9KTtcbiAgICBlbGVtZW50cy5wdXNoKGVsZW1lbnQpO1xuICAgIGlmIChyb290RWxlbWVudCkge1xuICAgICAgX3NvcnRFbGVtZW50cyhyb290RWxlbWVudCwgZWxlbWVudHMpO1xuICAgIH1cbiAgICBleHBhbmQoZWxlbWVudCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IGlkeCA9IGVsZW1lbnRzLmluZGV4T2YoZWxlbWVudCk7XG4gICAgICBpZiAoaWR4ID4gLTEpIHtcbiAgICAgICAgZWxlbWVudHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICB9XG4gICAgICBvcHRpb25zTWFwLmRlbGV0ZShlbGVtZW50KTtcbiAgICAgIF9ub3RpZnlPYnNlcnZlcnMoKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIHJlc2l6ZSh0eXBlLCBsZWZ0RWxlbWVudCwgZGVsdGFYKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIGNvbnN0IGxlZnRJbmRleCA9IGVsZW1lbnRzLmluZGV4T2YobGVmdEVsZW1lbnQpO1xuICAgIGNvbnN0IGxlZnRPcHRpb25zID0gb3B0aW9uc01hcC5nZXQobGVmdEVsZW1lbnQpO1xuICAgIGlmICghbGVmdE9wdGlvbnMpIHJldHVybjtcbiAgICBjb25zdCByaWdodEVsZW1lbnQgPSBlbGVtZW50c1tsZWZ0SW5kZXggKyAxXTtcbiAgICBjb25zdCByaWdodE9wdGlvbnMgPSBvcHRpb25zTWFwLmdldChyaWdodEVsZW1lbnQpO1xuICAgIGlmICghcmlnaHRPcHRpb25zKSByZXR1cm47XG4gICAgaWYgKHR5cGUgPT09IFwic3RhcnRcIikge1xuICAgICAgcmVzaXppbmcgPSB0cnVlO1xuICAgICAgY2FjaGUubGVmdCA9IHtcbiAgICAgICAgZWxlbWVudDogbGVmdEVsZW1lbnQsXG4gICAgICAgIGZsZXg6IGxlZnRPcHRpb25zLmZsZXggfHwgMSxcbiAgICAgICAgd2lkdGg6IGxlZnRFbGVtZW50Lm9mZnNldFdpZHRoXG4gICAgICB9O1xuICAgICAgY2FjaGUucmlnaHQgPSB7XG4gICAgICAgIGVsZW1lbnQ6IHJpZ2h0RWxlbWVudCxcbiAgICAgICAgZmxleDogcmlnaHRPcHRpb25zLmZsZXggfHwgMSxcbiAgICAgICAgd2lkdGg6IHJpZ2h0RWxlbWVudC5vZmZzZXRXaWR0aFxuICAgICAgfTtcbiAgICAgIF9ub3RpZnlPYnNlcnZlcnMoKTtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09IFwibW92ZVwiICYmIGNhY2hlLmxlZnQgJiYgY2FjaGUucmlnaHQpIHtcbiAgICAgIHJlc2l6ZURhdGFNYXAgPSAvKiBAX19QVVJFX18gKi9uZXcgTWFwKCk7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGxlZnRXLFxuICAgICAgICByaWdodFcsXG4gICAgICAgIGxlZnRGbGV4LFxuICAgICAgICByaWdodEZsZXhcbiAgICAgIH0gPSBfY2FsY1BhbmVSZXNpemUoY2FjaGUsIGxlZnRPcHRpb25zLCByaWdodE9wdGlvbnMsIGRlbHRhWCk7XG4gICAgICByZXNpemVEYXRhTWFwLnNldChsZWZ0RWxlbWVudCwge1xuICAgICAgICBmbGV4OiBsZWZ0RmxleCxcbiAgICAgICAgd2lkdGg6IGxlZnRXXG4gICAgICB9KTtcbiAgICAgIHJlc2l6ZURhdGFNYXAuc2V0KHJpZ2h0RWxlbWVudCwge1xuICAgICAgICBmbGV4OiByaWdodEZsZXgsXG4gICAgICAgIHdpZHRoOiByaWdodFdcbiAgICAgIH0pO1xuICAgICAgX25vdGlmeU9ic2VydmVycygpO1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gXCJlbmRcIikge1xuICAgICAgcmVzaXppbmcgPSBmYWxzZTtcbiAgICAgIGNvbnN0IGxlZnRSZXNpemVEYXRhID0gcmVzaXplRGF0YU1hcC5nZXQobGVmdEVsZW1lbnQpO1xuICAgICAgY29uc3QgcmlnaHRSZXNpemVEYXRhID0gcmVzaXplRGF0YU1hcC5nZXQocmlnaHRFbGVtZW50KTtcbiAgICAgIG9wdGlvbnNNYXAuc2V0KGxlZnRFbGVtZW50LCB7XG4gICAgICAgIC4uLmxlZnRPcHRpb25zLFxuICAgICAgICBjdXJyZW50TWluV2lkdGg6IDAsXG4gICAgICAgIGN1cnJlbnRNYXhXaWR0aDogKF9hID0gbGVmdE9wdGlvbnMubWF4V2lkdGgpICE9IG51bGwgPyBfYSA6IEluZmluaXR5LFxuICAgICAgICBmbGV4OiAoX2IgPSBsZWZ0UmVzaXplRGF0YSA9PSBudWxsID8gdm9pZCAwIDogbGVmdFJlc2l6ZURhdGEuZmxleCkgIT0gbnVsbCA/IF9iIDogbGVmdE9wdGlvbnMuZmxleFxuICAgICAgfSk7XG4gICAgICBvcHRpb25zTWFwLnNldChyaWdodEVsZW1lbnQsIHtcbiAgICAgICAgLi4ucmlnaHRPcHRpb25zLFxuICAgICAgICBjdXJyZW50TWluV2lkdGg6IDAsXG4gICAgICAgIGN1cnJlbnRNYXhXaWR0aDogKF9jID0gbGVmdE9wdGlvbnMubWF4V2lkdGgpICE9IG51bGwgPyBfYyA6IEluZmluaXR5LFxuICAgICAgICBmbGV4OiAoX2QgPSByaWdodFJlc2l6ZURhdGEgPT0gbnVsbCA/IHZvaWQgMCA6IHJpZ2h0UmVzaXplRGF0YS5mbGV4KSAhPSBudWxsID8gX2QgOiByaWdodE9wdGlvbnMuZmxleFxuICAgICAgfSk7XG4gICAgICByZXNpemVEYXRhTWFwID0gLyogQF9fUFVSRV9fICovbmV3IE1hcCgpO1xuICAgICAgZGVsZXRlIGNhY2hlLmxlZnQ7XG4gICAgICBkZWxldGUgY2FjaGUucmlnaHQ7XG4gICAgICBfbm90aWZ5T2JzZXJ2ZXJzKCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHNldFJvb3RFbGVtZW50KG5leHRSb290RWxlbWVudCkge1xuICAgIHJvb3RFbGVtZW50ID0gbmV4dFJvb3RFbGVtZW50O1xuICB9XG4gIGZ1bmN0aW9uIHNldFJvb3RXaWR0aChuZXh0Um9vdFdpZHRoKSB7XG4gICAgcm9vdFdpZHRoID0gbmV4dFJvb3RXaWR0aDtcbiAgICBfbm90aWZ5T2JzZXJ2ZXJzKCk7XG4gIH1cbiAgZnVuY3Rpb24gc3Vic2NyaWJlKG9ic2VydmVyKSB7XG4gICAgb2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBpZHggPSBvYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XG4gICAgICBpZiAoaWR4ID4gLTEpIHtcbiAgICAgICAgb2JzZXJ2ZXJzLnNwbGljZShpZHgsIDEpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBjb2xsYXBzZSxcbiAgICBleHBhbmQsXG4gICAgbW91bnQsXG4gICAgcmVzaXplLFxuICAgIHNldFJvb3RFbGVtZW50LFxuICAgIHNldFJvb3RXaWR0aCxcbiAgICBzdWJzY3JpYmVcbiAgfTtcbiAgZnVuY3Rpb24gX25vdGlmeU9ic2VydmVycygpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgaWYgKCFyb290V2lkdGgpIHJldHVybjtcbiAgICBjb25zdCBfZWxlbWVudHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgIGlmIChlbGVtZW50ICE9PSBleHBhbmRlZEVsZW1lbnQpIHtcbiAgICAgICAgX2VsZW1lbnRzLnVuc2hpZnQoZWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChleHBhbmRlZEVsZW1lbnQpIHtcbiAgICAgIF9lbGVtZW50cy51bnNoaWZ0KGV4cGFuZGVkRWxlbWVudCk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGFNYXAgPSAvKiBAX19QVVJFX18gKi9uZXcgV2Vha01hcCgpO1xuICAgIGNvbnN0IGxlbiA9IF9lbGVtZW50cy5sZW5ndGg7XG4gICAgY29uc3QgbGFzdEVsZW1lbnQgPSBfZWxlbWVudHNbMF07XG4gICAgY29uc3QgY29sbGFwc2VkV2lkdGggPSAobGVuIC0gMSkgKiBQQU5FX0NPTExBUFNFRF9XSURUSDtcbiAgICBsZXQgcmVtYWluZ1dpZHRoID0gcm9vdFdpZHRoIC0gY29sbGFwc2VkV2lkdGg7XG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIF9lbGVtZW50cykge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbnNNYXAuZ2V0KGVsZW1lbnQpO1xuICAgICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgbWluV2lkdGggPSBvcHRpb25zLmN1cnJlbnRNaW5XaWR0aCB8fCBvcHRpb25zLm1pbldpZHRoIHx8IFBBTkVfREVGQVVMVF9NSU5fV0lEVEg7XG4gICAgICBjb25zdCBpc0xhc3QgPSBlbGVtZW50ID09PSBsYXN0RWxlbWVudDtcbiAgICAgIGNvbnN0IHVzZXJDb2xsYXBzZWQgPSB1c2VyQ29sbGFwc2VkRWxlbWVudFNldC5oYXMoZWxlbWVudCk7XG4gICAgICBjb25zdCBzaXplQ29sbGFwc2VkID0gbWluV2lkdGggPiByZW1haW5nV2lkdGg7XG4gICAgICBjb25zdCBjb2xsYXBzZWQgPSBpc0xhc3QgPyBmYWxzZSA6IHVzZXJDb2xsYXBzZWQgfHwgc2l6ZUNvbGxhcHNlZDtcbiAgICAgIGNvbnN0IHJlc2l6ZURhdGEgPSByZXNpemVEYXRhTWFwLmdldChlbGVtZW50KTtcbiAgICAgIGRhdGFNYXAuc2V0KGVsZW1lbnQsIHtcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgY29sbGFwc2VkLFxuICAgICAgICBjdXJyZW50TWluV2lkdGg6IChfYSA9IHJlc2l6ZURhdGEgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc2l6ZURhdGEud2lkdGgpICE9IG51bGwgPyBfYSA6IG9wdGlvbnMuY3VycmVudE1pbldpZHRoLFxuICAgICAgICBjdXJyZW50TWF4V2lkdGg6IChfYiA9IHJlc2l6ZURhdGEgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc2l6ZURhdGEud2lkdGgpICE9IG51bGwgPyBfYiA6IG9wdGlvbnMuY3VycmVudE1heFdpZHRoLFxuICAgICAgICBmbGV4OiAoX2QgPSAoX2MgPSByZXNpemVEYXRhID09IG51bGwgPyB2b2lkIDAgOiByZXNpemVEYXRhLmZsZXgpICE9IG51bGwgPyBfYyA6IG9wdGlvbnMuZmxleCkgIT0gbnVsbCA/IF9kIDogMVxuICAgICAgfSk7XG4gICAgICBpZiAoY29sbGFwc2VkKSB7XG4gICAgICAgIHJlbWFpbmdXaWR0aCAtPSBQQU5FX0NPTExBUFNFRF9XSURUSDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlbWFpbmdXaWR0aCAtPSBtaW5XaWR0aCAtIFBBTkVfQ09MTEFQU0VEX1dJRFRIO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBwYW5lcyA9IFtdO1xuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xuICAgICAgY29uc3QgZGF0YSA9IGRhdGFNYXAuZ2V0KGVsZW1lbnQpO1xuICAgICAgaWYgKGRhdGEpIHBhbmVzLnB1c2goZGF0YSk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qgb2JzZXJ2ZXIgb2Ygb2JzZXJ2ZXJzKSB7XG4gICAgICBvYnNlcnZlcih7XG4gICAgICAgIGV4cGFuZGVkRWxlbWVudDogZXhwYW5kZWRFbGVtZW50IHx8IGVsZW1lbnRzW2VsZW1lbnRzLmxlbmd0aCAtIDFdIHx8IG51bGwsXG4gICAgICAgIHBhbmVzLFxuICAgICAgICByZXNpemluZ1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBQYW5lTGF5b3V0KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBjaGlsZHJlbixcbiAgICBtaW5XaWR0aCxcbiAgICBvbkNvbGxhcHNlLFxuICAgIG9uRXhwYW5kLFxuICAgIC4uLnJlc3RQcm9wc1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGNvbnRyb2xsZXIgPSB1c2VNZW1vKCgpID0+IGNyZWF0ZVBhbmVMYXlvdXRDb250cm9sbGVyKCksIFtdKTtcbiAgY29uc3QgW3Jvb3RFbGVtZW50LCBzZXRSb290RWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3Qgcm9vdFJlY3QgPSB1c2VFbGVtZW50UmVjdChyb290RWxlbWVudCk7XG4gIGNvbnN0IHdpZHRoID0gKHJvb3RSZWN0ID09IG51bGwgPyB2b2lkIDAgOiByb290UmVjdC53aWR0aCkgfHwgMDtcbiAgY29uc3QgY29sbGFwc2VkID0gd2lkdGggPT09IHZvaWQgMCB8fCAhbWluV2lkdGggPyB2b2lkIDAgOiB3aWR0aCA8IG1pbldpZHRoO1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKHtcbiAgICBleHBhbmRlZEVsZW1lbnQ6IG51bGwsXG4gICAgcGFuZXM6IFtdLFxuICAgIHJlc2l6aW5nOiBmYWxzZVxuICB9KTtcbiAgdXNlRWZmZWN0KCgpID0+IGNvbnRyb2xsZXIuc2V0Um9vdEVsZW1lbnQocm9vdEVsZW1lbnQpLCBbY29udHJvbGxlciwgcm9vdEVsZW1lbnRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IGNvbnRyb2xsZXIuc2V0Um9vdFdpZHRoKHdpZHRoKSwgW2NvbnRyb2xsZXIsIHdpZHRoXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiBjb250cm9sbGVyLnN1YnNjcmliZShzZXRTdGF0ZSksIFtjb250cm9sbGVyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbGxhcHNlZCA9PT0gdm9pZCAwKSByZXR1cm47XG4gICAgaWYgKGNvbGxhcHNlZCAmJiBvbkNvbGxhcHNlKSBvbkNvbGxhcHNlKCk7XG4gICAgaWYgKCFjb2xsYXBzZWQgJiYgb25FeHBhbmQpIG9uRXhwYW5kKCk7XG4gIH0sIFtjb2xsYXBzZWQsIG9uQ29sbGFwc2UsIG9uRXhwYW5kXSk7XG4gIGNvbnN0IHBhbmVMYXlvdXQgPSB1c2VNZW1vKCgpID0+ICh7XG4gICAgY29sbGFwc2U6IGNvbnRyb2xsZXIuY29sbGFwc2UsXG4gICAgY29sbGFwc2VkLFxuICAgIGV4cGFuZDogY29udHJvbGxlci5leHBhbmQsXG4gICAgZXhwYW5kZWRFbGVtZW50OiBzdGF0ZS5leHBhbmRlZEVsZW1lbnQsXG4gICAgbW91bnQ6IGNvbnRyb2xsZXIubW91bnQsXG4gICAgcGFuZXM6IHN0YXRlLnBhbmVzLFxuICAgIHJlc2l6ZTogY29udHJvbGxlci5yZXNpemUsXG4gICAgcmVzaXppbmc6IHN0YXRlLnJlc2l6aW5nXG4gIH0pLCBbY29sbGFwc2VkLCBjb250cm9sbGVyLCBzdGF0ZS5leHBhbmRlZEVsZW1lbnQsIHN0YXRlLnBhbmVzLCBzdGF0ZS5yZXNpemluZ10pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFBhbmVMYXlvdXRDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHBhbmVMYXlvdXQsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChSb290JDYsIHtcbiAgICAgIFwiZGF0YS11aVwiOiBcIlBhbmVMYXlvdXRcIixcbiAgICAgIC4uLnJlc3RQcm9wcyxcbiAgICAgIFwiZGF0YS1jb2xsYXBzZWRcIjogY29sbGFwc2VkID8gXCJcIiA6IHZvaWQgMCxcbiAgICAgIFwiZGF0YS1yZXNpemluZ1wiOiBzdGF0ZS5yZXNpemluZyA/IFwiXCIgOiB2b2lkIDAsXG4gICAgICBcImRhdGEtbW91bnRlZFwiOiB3aWR0aCA/IFwiXCIgOiB2b2lkIDAsXG4gICAgICByZWY6IHNldFJvb3RFbGVtZW50LFxuICAgICAgY2hpbGRyZW5cbiAgICB9KVxuICB9KTtcbn1cbmNsYXNzIFBhbmVSZXNvbHV0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKF9yZWYzKSB7XG4gICAgbGV0IHtcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBjb250ZXh0LFxuICAgICAgaGVscElkLFxuICAgICAgY2F1c2VcbiAgICB9ID0gX3JlZjM7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB0aGlzLmhlbHBJZCA9IGhlbHBJZDtcbiAgICB0aGlzLmNhdXNlID0gY2F1c2U7XG4gIH1cbn1cbmNvbnN0IHJhbmRvbUlkQ2FjaGUgPSAvKiBAX19QVVJFX18gKi9uZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gYXNzaWduSWQob2JqKSB7XG4gIGNvbnN0IGNhY2hlZFZhbHVlID0gcmFuZG9tSWRDYWNoZS5nZXQob2JqKTtcbiAgaWYgKGNhY2hlZFZhbHVlKSByZXR1cm4gY2FjaGVkVmFsdWU7XG4gIGNvbnN0IGlkID0gbmFub2lkKCk7XG4gIHJhbmRvbUlkQ2FjaGUuc2V0KG9iaiwgaWQpO1xuICByZXR1cm4gaWQ7XG59XG5jb25zdCBiaW5kQ2FjaGUgPSAvKiBAX19QVVJFX18gKi9uZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gbWVtb0JpbmQob2JqLCBtZXRob2RLZXkpIHtcbiAgY29uc3QgYm91bmRNZXRob2RzID0gYmluZENhY2hlLmdldChvYmopIHx8IC8qIEBfX1BVUkVfXyAqL25ldyBNYXAoKTtcbiAgaWYgKGJvdW5kTWV0aG9kcykge1xuICAgIGNvbnN0IGJvdW5kMiA9IGJvdW5kTWV0aG9kcy5nZXQobWV0aG9kS2V5KTtcbiAgICBpZiAoYm91bmQyKSByZXR1cm4gYm91bmQyO1xuICB9XG4gIGNvbnN0IG1ldGhvZCA9IG9ialttZXRob2RLZXldO1xuICBpZiAodHlwZW9mIG1ldGhvZCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRXhwZWN0ZWQgcHJvcGVydHkgYFwiLmNvbmNhdChtZXRob2RLZXksIFwiYCB0byBiZSBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIpLmNvbmNhdCh0eXBlb2YgbWV0aG9kLCBcIiBpbnN0ZWFkLlwiKSk7XG4gIH1cbiAgY29uc3QgYm91bmQgPSBtZXRob2QuYmluZChvYmopO1xuICBib3VuZE1ldGhvZHMuc2V0KG1ldGhvZEtleSwgYm91bmQpO1xuICBiaW5kQ2FjaGUuc2V0KG9iaiwgYm91bmRNZXRob2RzKTtcbiAgcmV0dXJuIGJvdW5kO1xufVxuY29uc3QgaXNQcm9taXNlID0gdGhpbmcgPT4ge1xuICByZXR1cm4gISF0aGluZyAmJiB0eXBlb2YgKHRoaW5nID09IG51bGwgPyB2b2lkIDAgOiB0aGluZy50aGVuKSA9PT0gXCJmdW5jdGlvblwiO1xufTtcbmNvbnN0IGlzU2VyaWFsaXphYmxlID0gdGhpbmcgPT4ge1xuICBpZiAoIWlzUmVjb3JkKHRoaW5nKSkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gdHlwZW9mIHRoaW5nLnNlcmlhbGl6ZSA9PT0gXCJmdW5jdGlvblwiO1xufTtcbmNvbnN0IHJldGhyb3dXaXRoUGFuZVJlc29sdXRpb25FcnJvcnMgPSBuZXh0ID0+ICh1bnJlc29sdmVkUGFuZSwgY29udGV4dCwgZmxhdEluZGV4KSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIG5leHQodW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGZsYXRJbmRleCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIFBhbmVSZXNvbHV0aW9uRXJyb3IpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIHRocm93IG5ldyBQYW5lUmVzb2x1dGlvbkVycm9yKHtcbiAgICAgIG1lc3NhZ2U6IHR5cGVvZiAoZSA9PSBudWxsID8gdm9pZCAwIDogZS5tZXNzYWdlKSA9PT0gXCJzdHJpbmdcIiA/IGUubWVzc2FnZSA6IFwiXCIsXG4gICAgICBjb250ZXh0LFxuICAgICAgY2F1c2U6IGVcbiAgICB9KTtcbiAgfVxufTtcbmNvbnN0IHdyYXBXaXRoUHVibGlzaFJlcGxheSA9IG5leHQgPT4gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gbmV4dCguLi5hcmd1bWVudHMpLnBpcGUoXG4gIC8vIG5lZWQgdG8gYWRkIHB1Ymxpc2hSZXBsYXkgKyByZWZDb3VudCB0byBlbnN1cmUgbmV3IHN1YnNjcmliZXJzIGFsd2F5c1xuICAvLyBnZXQgYW4gZW1pc3Npb24uIHdpdGhvdXQgdGhpcywgbWVtb2l6ZWQgb2JzZXJ2YWJsZXMgbWF5IGdldCBzdHVja1xuICAvLyB3YWl0aW5nIGZvciB0aGVpciBmaXJzdCBlbWlzc2lvbnMgcmVzdWx0aW5nIGluIGEgbG9hZGluZyBwYW5lXG4gIHB1Ymxpc2hSZXBsYXkoMSksIHJlZkNvdW50KCkpO1xufTtcbmZ1bmN0aW9uIGNyZWF0ZVBhbmVSZXNvbHZlcihtaWRkbGV3YXJlKSB7XG4gIGNvbnN0IHJlc29sdmVQYW5lID0gcmV0aHJvd1dpdGhQYW5lUmVzb2x1dGlvbkVycm9ycyh3cmFwV2l0aFB1Ymxpc2hSZXBsYXkobWlkZGxld2FyZSgodW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGZsYXRJbmRleCkgPT4ge1xuICAgIGlmICghdW5yZXNvbHZlZFBhbmUpIHtcbiAgICAgIHRocm93IG5ldyBQYW5lUmVzb2x1dGlvbkVycm9yKHtcbiAgICAgICAgbWVzc2FnZTogXCJQYW5lIHJldHVybmVkIG5vIGNoaWxkXCIsXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIGhlbHBJZDogXCJzdHJ1Y3R1cmUtaXRlbS1yZXR1cm5lZC1uby1jaGlsZFwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGlzUHJvbWlzZSh1bnJlc29sdmVkUGFuZSkgfHwgaXNPYnNlcnZhYmxlKHVucmVzb2x2ZWRQYW5lKSkge1xuICAgICAgcmV0dXJuIGZyb20odW5yZXNvbHZlZFBhbmUpLnBpcGUoc3dpdGNoTWFwKHJlc3VsdCA9PiByZXNvbHZlUGFuZShyZXN1bHQsIGNvbnRleHQsIGZsYXRJbmRleCkpKTtcbiAgICB9XG4gICAgaWYgKGlzU2VyaWFsaXphYmxlKHVucmVzb2x2ZWRQYW5lKSkge1xuICAgICAgcmV0dXJuIHJlc29sdmVQYW5lKHVucmVzb2x2ZWRQYW5lLnNlcmlhbGl6ZShjb250ZXh0KSwgY29udGV4dCwgZmxhdEluZGV4KTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB1bnJlc29sdmVkUGFuZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZVBhbmUodW5yZXNvbHZlZFBhbmUoY29udGV4dC5pZCwgY29udGV4dCksIGNvbnRleHQsIGZsYXRJbmRleCk7XG4gICAgfVxuICAgIHJldHVybiBvZih1bnJlc29sdmVkUGFuZSk7XG4gIH0pKSk7XG4gIHJldHVybiByZXNvbHZlUGFuZTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJlc29sdmVJbnRlbnQob3B0aW9ucykge1xuICBjb25zdCByZXNvbHZlZFBhbmVDYWNoZSA9IC8qIEBfX1BVUkVfXyAqL25ldyBNYXAoKTtcbiAgY29uc3QgbWVtb2l6ZSA9IG5leHRGbiA9PiAodW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGZsYXRJbmRleCkgPT4ge1xuICAgIGNvbnN0IGtleSA9IHVucmVzb2x2ZWRQYW5lICYmIFwiXCIuY29uY2F0KGFzc2lnbklkKHVucmVzb2x2ZWRQYW5lKSwgXCItXCIpLmNvbmNhdChjb250ZXh0LnBhdGguam9pbihcIl9fXCIpKTtcbiAgICBjb25zdCBjYWNoZWRSZXNvbHZlZFBhbmUgPSBrZXkgJiYgcmVzb2x2ZWRQYW5lQ2FjaGUuZ2V0KGtleSk7XG4gICAgaWYgKGNhY2hlZFJlc29sdmVkUGFuZSkgcmV0dXJuIGNhY2hlZFJlc29sdmVkUGFuZTtcbiAgICBjb25zdCByZXN1bHQgPSBuZXh0Rm4odW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGZsYXRJbmRleCk7XG4gICAgaWYgKGtleSkgcmVzb2x2ZWRQYW5lQ2FjaGUuc2V0KGtleSwgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBjb25zdCByZXNvbHZlUGFuZSA9IGNyZWF0ZVBhbmVSZXNvbHZlcihtZW1vaXplKTtcbiAgY29uc3QgZmFsbGJhY2tFZGl0b3JQYW5lcyA9IFtbe1xuICAgIGlkOiBcIl9fZWRpdF9fXCIuY29uY2F0KG9wdGlvbnMucGFyYW1zLmlkKSxcbiAgICBwYXJhbXM6IHtcbiAgICAgIC4uLm9taXQob3B0aW9ucy5wYXJhbXMsIFtcImlkXCJdKSxcbiAgICAgIHR5cGU6IG9wdGlvbnMucGFyYW1zLnR5cGVcbiAgICB9LFxuICAgIHBheWxvYWQ6IG9wdGlvbnMucGF5bG9hZFxuICB9XV07XG4gIGFzeW5jIGZ1bmN0aW9uIHRyYXZlcnNlKF9yZWY0KSB7XG4gICAgbGV0IHtcbiAgICAgIGN1cnJlbnRJZCxcbiAgICAgIGZsYXRJbmRleCxcbiAgICAgIGludGVudCxcbiAgICAgIHBhcmFtcyxcbiAgICAgIHBhcmVudCxcbiAgICAgIHBhdGgsXG4gICAgICBwYXlsb2FkLFxuICAgICAgdW5yZXNvbHZlZFBhbmUsXG4gICAgICBsZXZlbEluZGV4LFxuICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgIH0gPSBfcmVmNDtcbiAgICB2YXIgX2E7XG4gICAgaWYgKCF1bnJlc29sdmVkUGFuZSkgcmV0dXJuIFtdO1xuICAgIGNvbnN0IHtcbiAgICAgIGlkOiB0YXJnZXRJZCxcbiAgICAgIHR5cGU6IHNjaGVtYVR5cGVOYW1lLFxuICAgICAgLi4ub3RoZXJQYXJhbXNcbiAgICB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICBpZDogY3VycmVudElkLFxuICAgICAgc3BsaXRJbmRleDogMCxcbiAgICAgIHBhcmVudCxcbiAgICAgIHBhdGgsXG4gICAgICBpbmRleDogZmxhdEluZGV4LFxuICAgICAgcGFyYW1zOiB7fSxcbiAgICAgIHBheWxvYWQ6IHZvaWQgMCxcbiAgICAgIHN0cnVjdHVyZUNvbnRleHRcbiAgICB9O1xuICAgIGNvbnN0IHJlc29sdmVkUGFuZSA9IGF3YWl0IGZpcnN0VmFsdWVGcm9tKHJlc29sdmVQYW5lKHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpKTtcbiAgICBpZiAocmVzb2x2ZWRQYW5lLnR5cGUgPT09IFwiZG9jdW1lbnRcIiAmJiByZXNvbHZlZFBhbmUuaWQgPT09IHRhcmdldElkKSB7XG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgcGFuZXM6IFsuLi5wYXRoLnNsaWNlKDAsIHBhdGgubGVuZ3RoIC0gMSkubWFwKGkgPT4gW3tcbiAgICAgICAgICBpZDogaVxuICAgICAgICB9XSksIFt7XG4gICAgICAgICAgaWQ6IHRhcmdldElkLFxuICAgICAgICAgIHBhcmFtczogb3RoZXJQYXJhbXMsXG4gICAgICAgICAgcGF5bG9hZFxuICAgICAgICB9XV0sXG4gICAgICAgIGRlcHRoSW5kZXg6IHBhdGgubGVuZ3RoLFxuICAgICAgICBsZXZlbEluZGV4XG4gICAgICB9XTtcbiAgICB9XG4gICAgaWYgKFxuICAgIC8vIGlmIHRoZSByZXNvbHZlIHBhbmUncyBgY2FuSGFuZGxlSW50ZW50YCByZXR1cm5zIHRydWUsIHRoZW4gcmVzb2x2ZVxuICAgICgoX2EgPSByZXNvbHZlZFBhbmUuY2FuSGFuZGxlSW50ZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChyZXNvbHZlZFBhbmUsIGludGVudCwgcGFyYW1zLCB7XG4gICAgICBwYW5lOiByZXNvbHZlZFBhbmUsXG4gICAgICBpbmRleDogZmxhdEluZGV4XG4gICAgfSkpIHx8XG4gICAgLy8gaWYgdGhlIHBhbmUncyBgY2FuSGFuZGxlSW50ZW50YCBkaWQgbm90IHJldHVybiB0cnVlLCB0aGVuIG1hdGNoIGFnYWluc3RcbiAgICAvLyB0aGlzIGRlZmF1bHQgY2FzZS4gd2Ugd2lsbCByZXNvbHZlIHRoZSBpbnRlbnQgaWY6XG4gICAgcmVzb2x2ZWRQYW5lLnR5cGUgPT09IFwiZG9jdW1lbnRMaXN0XCIgJiZcbiAgICAvLyAxLiB0aGUgc2NoZW1hIHR5cGUgbWF0Y2hlcyAodGhpcyByZXF1aXJlZCBmb3IgdGhlIGRvY3VtZW50IHRvIHJlbmRlcilcbiAgICByZXNvbHZlZFBhbmUuc2NoZW1hVHlwZU5hbWUgPT09IHNjaGVtYVR5cGVOYW1lICYmXG4gICAgLy8gMi4gdGhlIGZpbHRlciBpcyB0aGUgZGVmYXVsdCBmaWx0ZXIuXG4gICAgLy9cbiAgICAvLyBOT1RFOiB0aGlzIGNhc2UgaXMgdG8gcHJldmVudCBmYWxzZSBwb3NpdGl2ZSBtYXRjaGVzIHdoZXJlIHRoZSB1c2VyXG4gICAgLy8gaGFzIGNvbmZpZ3VyZWQgYSBtb3JlIHNwZWNpZmljIGZpbHRlciBmb3IgYSBwYXJ0aWN1bGFyIHR5cGUuIEluIHRoYXRcbiAgICAvLyBjYXNlLCB0aGUgdXNlciBjYW4gaW1wbGVtZW50IHRoZWlyIG93biBgY2FuSGFuZGxlSW50ZW50YCBmdW5jdGlvblxuICAgIHJlc29sdmVkUGFuZS5vcHRpb25zLmZpbHRlciA9PT0gXCJfdHlwZSA9PSAkdHlwZVwiKSB7XG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgcGFuZXM6IFtcbiAgICAgICAgLy8gbWFwIHRoZSBjdXJyZW50IHBhdGggdG8gcm91dGVyIHBhbmVzXG4gICAgICAgIC4uLnBhdGgubWFwKGlkID0+IFt7XG4gICAgICAgICAgaWRcbiAgICAgICAgfV0pLFxuICAgICAgICAvLyB0aGVuIGF1Z21lbnQgd2l0aCB0aGUgaW50ZW50cyBJRHMgYW5kIHBhcmFtc1xuICAgICAgICBbe1xuICAgICAgICAgIGlkOiBwYXJhbXMuaWQsXG4gICAgICAgICAgcGFyYW1zOiBvdGhlclBhcmFtcyxcbiAgICAgICAgICBwYXlsb2FkXG4gICAgICAgIH1dXSxcbiAgICAgICAgZGVwdGhJbmRleDogcGF0aC5sZW5ndGgsXG4gICAgICAgIGxldmVsSW5kZXhcbiAgICAgIH1dO1xuICAgIH1cbiAgICBpZiAocmVzb2x2ZWRQYW5lLnR5cGUgPT09IFwibGlzdFwiICYmIHJlc29sdmVkUGFuZS5jaGlsZCAmJiByZXNvbHZlZFBhbmUuaXRlbXMpIHtcbiAgICAgIHJldHVybiAoYXdhaXQgUHJvbWlzZS5hbGwocmVzb2x2ZWRQYW5lLml0ZW1zLm1hcCgoaXRlbSwgbmV4dExldmVsSW5kZXgpID0+IHtcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gXCJkaXZpZGVyXCIpIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuICAgICAgICByZXR1cm4gdHJhdmVyc2Uoe1xuICAgICAgICAgIGN1cnJlbnRJZDogaXRlbS5faWQgfHwgaXRlbS5pZCxcbiAgICAgICAgICBmbGF0SW5kZXg6IGZsYXRJbmRleCArIDEsXG4gICAgICAgICAgaW50ZW50LFxuICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICBwYXJlbnQ6IHJlc29sdmVkUGFuZSxcbiAgICAgICAgICBwYXRoOiBbLi4ucGF0aCwgaXRlbS5pZF0sXG4gICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICB1bnJlc29sdmVkUGFuZTogdHlwZW9mIHJlc29sdmVkUGFuZS5jaGlsZCA9PT0gXCJmdW5jdGlvblwiID8gbWVtb0JpbmQocmVzb2x2ZWRQYW5lLCBcImNoaWxkXCIpIDogcmVzb2x2ZWRQYW5lLmNoaWxkLFxuICAgICAgICAgIGxldmVsSW5kZXg6IG5leHRMZXZlbEluZGV4LFxuICAgICAgICAgIHN0cnVjdHVyZUNvbnRleHRcbiAgICAgICAgfSk7XG4gICAgICB9KSkpLmZsYXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGNvbnN0IG1hdGNoaW5nUGFuZXMgPSBhd2FpdCB0cmF2ZXJzZSh7XG4gICAgY3VycmVudElkOiBcInJvb3RcIixcbiAgICBmbGF0SW5kZXg6IDAsXG4gICAgbGV2ZWxJbmRleDogMCxcbiAgICBpbnRlbnQ6IG9wdGlvbnMuaW50ZW50LFxuICAgIHBhcmFtczogb3B0aW9ucy5wYXJhbXMsXG4gICAgcGFyZW50OiBudWxsLFxuICAgIHBhdGg6IFtdLFxuICAgIHBheWxvYWQ6IG9wdGlvbnMucGF5bG9hZCxcbiAgICB1bnJlc29sdmVkUGFuZTogb3B0aW9ucy5yb290UGFuZU5vZGUsXG4gICAgc3RydWN0dXJlQ29udGV4dDogb3B0aW9ucy5zdHJ1Y3R1cmVDb250ZXh0XG4gIH0pO1xuICBjb25zdCBjbG9zZXN0UGFuZVRvUm9vdCA9IG1hdGNoaW5nUGFuZXMuc29ydCgoYSwgYikgPT4ge1xuICAgIGlmIChhLmRlcHRoSW5kZXggPT09IGIuZGVwdGhJbmRleCkgcmV0dXJuIGEubGV2ZWxJbmRleCAtIGIubGV2ZWxJbmRleDtcbiAgICByZXR1cm4gYS5kZXB0aEluZGV4IC0gYi5kZXB0aEluZGV4O1xuICB9KVswXTtcbiAgaWYgKGNsb3Nlc3RQYW5lVG9Sb290KSB7XG4gICAgcmV0dXJuIGNsb3Nlc3RQYW5lVG9Sb290LnBhbmVzO1xuICB9XG4gIHJldHVybiBmYWxsYmFja0VkaXRvclBhbmVzO1xufVxuZnVuY3Rpb24gdXNlRGVza1Rvb2woKSB7XG4gIGNvbnN0IGRlc2tUb29sID0gdXNlQ29udGV4dChEZXNrVG9vbENvbnRleHQpO1xuICBpZiAoIWRlc2tUb29sKSB0aHJvdyBuZXcgRXJyb3IoXCJEZXNrVG9vbDogbWlzc2luZyBjb250ZXh0IHZhbHVlXCIpO1xuICByZXR1cm4gZGVza1Rvb2w7XG59XG5jb25zdCBmYWxsYmFja0VkaXRvckNoaWxkID0gKG5vZGVJZCwgY29udGV4dCkgPT4ge1xuICBjb25zdCBpZCA9IG5vZGVJZC5yZXBsYWNlKC9eX19lZGl0X18vLCBcIlwiKTtcbiAgY29uc3Qge1xuICAgIHBhcmFtcyxcbiAgICBwYXlsb2FkLFxuICAgIHN0cnVjdHVyZUNvbnRleHQ6IHtcbiAgICAgIHJlc29sdmVEb2N1bWVudE5vZGVcbiAgICB9XG4gIH0gPSBjb250ZXh0O1xuICBjb25zdCB7XG4gICAgdHlwZSxcbiAgICB0ZW1wbGF0ZVxuICB9ID0gcGFyYW1zO1xuICBpZiAoIXR5cGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJEb2N1bWVudCB0eXBlIGZvciBkb2N1bWVudCB3aXRoIElEIFwiLmNvbmNhdChpZCwgXCIgd2FzIG5vdCBwcm92aWRlZCBpbiB0aGUgcm91dGVyIHBhcmFtcy5cIikpO1xuICB9XG4gIGxldCBkZWZhdWx0RG9jdW1lbnRCdWlsZGVyID0gcmVzb2x2ZURvY3VtZW50Tm9kZSh7XG4gICAgc2NoZW1hVHlwZTogdHlwZSxcbiAgICBkb2N1bWVudElkOiBpZFxuICB9KTtcbiAgZGVmYXVsdERvY3VtZW50QnVpbGRlciA9IGRlZmF1bHREb2N1bWVudEJ1aWxkZXIuaWQoXCJlZGl0b3JcIikudGl0bGUoXCJFZGl0b3JcIik7XG4gIGlmICh0ZW1wbGF0ZSkge1xuICAgIGRlZmF1bHREb2N1bWVudEJ1aWxkZXIgPSBkZWZhdWx0RG9jdW1lbnRCdWlsZGVyLmluaXRpYWxWYWx1ZVRlbXBsYXRlKHRlbXBsYXRlLCBwYXlsb2FkKTtcbiAgfVxuICByZXR1cm4gZGVmYXVsdERvY3VtZW50QnVpbGRlci5zZXJpYWxpemUoKTtcbn07XG5mdW5jdGlvbiBoYXNoQ29udGV4dChjb250ZXh0KSB7XG4gIHZhciBfYSwgX2I7XG4gIHJldHVybiBcImNvbnRleHRIYXNoKFwiLmNvbmNhdChKU09OLnN0cmluZ2lmeSh7XG4gICAgaWQ6IGNvbnRleHQuaWQsXG4gICAgcGFyZW50SWQ6IHBhcmVudCAmJiBhc3NpZ25JZChwYXJlbnQpLFxuICAgIHBhdGg6IGNvbnRleHQucGF0aCxcbiAgICBpbmRleDogY29udGV4dC5pbmRleCxcbiAgICBzcGxpdEluZGV4OiBjb250ZXh0LnNwbGl0SW5kZXgsXG4gICAgc2VyaWFsaXplT3B0aW9uc0luZGV4OiAoX2EgPSBjb250ZXh0LnNlcmlhbGl6ZU9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5pbmRleCxcbiAgICBzZXJpYWxpemVPcHRpb25zUGF0aDogKF9iID0gY29udGV4dC5zZXJpYWxpemVPcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2IucGF0aFxuICB9KSwgXCIpXCIpO1xufVxuY29uc3QgaGFzaFJlc29sdmVkUGFuZU1ldGEgPSBtZXRhID0+IHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IHtcbiAgICB0eXBlOiBtZXRhLnR5cGUsXG4gICAgaWQ6IG1ldGEucm91dGVyUGFuZVNpYmxpbmcuaWQsXG4gICAgcGFyYW1zOiBtZXRhLnJvdXRlclBhbmVTaWJsaW5nLnBhcmFtcyB8fCB7fSxcbiAgICBwYXlsb2FkOiBtZXRhLnJvdXRlclBhbmVTaWJsaW5nLnBheWxvYWQgfHwgbnVsbCxcbiAgICBmbGF0SW5kZXg6IG1ldGEuZmxhdEluZGV4LFxuICAgIGdyb3VwSW5kZXg6IG1ldGEuZ3JvdXBJbmRleCxcbiAgICBzaWJsaW5nSW5kZXg6IG1ldGEuc2libGluZ0luZGV4LFxuICAgIHBhdGg6IG1ldGEucGF0aCxcbiAgICBwYW5lTm9kZTogbWV0YS50eXBlID09PSBcInJlc29sdmVkTWV0YVwiID8gYXNzaWduSWQobWV0YS5wYW5lTm9kZSkgOiBudWxsXG4gIH07XG4gIHJldHVybiBcIm1ldGFIYXNoKFwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShub3JtYWxpemVkKSwgXCIpXCIpO1xufTtcbmZ1bmN0aW9uIHJlc29sdmVQYW5lVHJlZShfcmVmNSkge1xuICBsZXQge1xuICAgIHVucmVzb2x2ZWRQYW5lLFxuICAgIGZsYXR0ZW5lZFJvdXRlclBhbmVzLFxuICAgIHBhcmVudDogcGFyZW50MixcbiAgICBwYXRoLFxuICAgIHJlc29sdmVQYW5lLFxuICAgIHN0cnVjdHVyZUNvbnRleHRcbiAgfSA9IF9yZWY1O1xuICBjb25zdCBbY3VycmVudCwgLi4ucmVzdF0gPSBmbGF0dGVuZWRSb3V0ZXJQYW5lcztcbiAgY29uc3QgbmV4dCA9IHJlc3RbMF07XG4gIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgaWQ6IGN1cnJlbnQucm91dGVyUGFuZVNpYmxpbmcuaWQsXG4gICAgc3BsaXRJbmRleDogY3VycmVudC5zaWJsaW5nSW5kZXgsXG4gICAgcGFyZW50OiBwYXJlbnQyLFxuICAgIHBhdGg6IFsuLi5wYXRoLCBjdXJyZW50LnJvdXRlclBhbmVTaWJsaW5nLmlkXSxcbiAgICBpbmRleDogY3VycmVudC5mbGF0SW5kZXgsXG4gICAgcGFyYW1zOiBjdXJyZW50LnJvdXRlclBhbmVTaWJsaW5nLnBhcmFtcyB8fCB7fSxcbiAgICBwYXlsb2FkOiBjdXJyZW50LnJvdXRlclBhbmVTaWJsaW5nLnBheWxvYWQsXG4gICAgc3RydWN0dXJlQ29udGV4dFxuICB9O1xuICB0cnkge1xuICAgIHJldHVybiByZXNvbHZlUGFuZSh1bnJlc29sdmVkUGFuZSwgY29udGV4dCwgY3VycmVudC5mbGF0SW5kZXgpLnBpcGUoXG4gICAgLy8gdGhpcyBzd2l0Y2ggbWFwIHJlY2VpdmVzIGEgcmVzb2x2ZWQgcGFuZVxuICAgIHN3aXRjaE1hcChwYW5lTm9kZSA9PiB7XG4gICAgICBjb25zdCByZXNvbHZlZFBhbmVNZXRhID0ge1xuICAgICAgICB0eXBlOiBcInJlc29sdmVkTWV0YVwiLFxuICAgICAgICAuLi5jdXJyZW50LFxuICAgICAgICBwYW5lTm9kZSxcbiAgICAgICAgcGF0aDogY29udGV4dC5wYXRoXG4gICAgICB9O1xuICAgICAgY29uc3QgbG9hZGluZ1BhbmVzID0gcmVzdC5tYXAoKGksIHJlc3RJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBsb2FkaW5nUGFuZVBhdGggPSBbLi4uY29udGV4dC5wYXRoLCAuLi5yZXN0LnNsaWNlKHJlc3RJbmRleCkubWFwKChfLCBjdXJyZW50SW5kZXgpID0+IFwiW1wiLmNvbmNhdChpLmZsYXRJbmRleCArIGN1cnJlbnRJbmRleCwgXCJdXCIpKV07XG4gICAgICAgIGNvbnN0IGxvYWRpbmdQYW5lID0ge1xuICAgICAgICAgIHR5cGU6IFwibG9hZGluZ1wiLFxuICAgICAgICAgIHBhdGg6IGxvYWRpbmdQYW5lUGF0aCxcbiAgICAgICAgICBwYW5lTm9kZTogbnVsbCxcbiAgICAgICAgICAuLi5pXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBsb2FkaW5nUGFuZTtcbiAgICAgIH0pO1xuICAgICAgaWYgKCFyZXN0Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gb2YoW3Jlc29sdmVkUGFuZU1ldGFdKTtcbiAgICAgIH1cbiAgICAgIGxldCBuZXh0U3RyZWFtO1xuICAgICAgaWYgKFxuICAgICAgLy8gdGhlIGZhbGxiYWNrIGVkaXRvciBjYXNlXG4gICAgICBuZXh0ID09IG51bGwgPyB2b2lkIDAgOiBuZXh0LnJvdXRlclBhbmVTaWJsaW5nLmlkLnN0YXJ0c1dpdGgoXCJfX2VkaXRfX1wiKSkge1xuICAgICAgICBuZXh0U3RyZWFtID0gcmVzb2x2ZVBhbmVUcmVlKHtcbiAgICAgICAgICB1bnJlc29sdmVkUGFuZTogZmFsbGJhY2tFZGl0b3JDaGlsZCxcbiAgICAgICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lczogcmVzdCxcbiAgICAgICAgICBwYXJlbnQ6IHBhcmVudDIsXG4gICAgICAgICAgcGF0aDogY29udGV4dC5wYXRoLFxuICAgICAgICAgIHJlc29sdmVQYW5lLFxuICAgICAgICAgIHN0cnVjdHVyZUNvbnRleHRcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnQuZ3JvdXBJbmRleCA9PT0gKG5leHQgPT0gbnVsbCA/IHZvaWQgMCA6IG5leHQuZ3JvdXBJbmRleCkpIHtcbiAgICAgICAgbmV4dFN0cmVhbSA9IHJlc29sdmVQYW5lVHJlZSh7XG4gICAgICAgICAgdW5yZXNvbHZlZFBhbmUsXG4gICAgICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXM6IHJlc3QsXG4gICAgICAgICAgcGFyZW50OiBwYXJlbnQyLFxuICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgcmVzb2x2ZVBhbmUsXG4gICAgICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRTdHJlYW0gPSByZXNvbHZlUGFuZVRyZWUoe1xuICAgICAgICAgIHVucmVzb2x2ZWRQYW5lOiB0eXBlb2YgcGFuZU5vZGUuY2hpbGQgPT09IFwiZnVuY3Rpb25cIiA/IG1lbW9CaW5kKHBhbmVOb2RlLCBcImNoaWxkXCIpIDogcGFuZU5vZGUuY2hpbGQsXG4gICAgICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXM6IHJlc3QsXG4gICAgICAgICAgcGFyZW50OiBwYW5lTm9kZSxcbiAgICAgICAgICBwYXRoOiBjb250ZXh0LnBhdGgsXG4gICAgICAgICAgcmVzb2x2ZVBhbmUsXG4gICAgICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb25jYXQoXG4gICAgICAvLyB3ZSBlbWl0IHRoZSBsb2FkaW5nIHBhbmVzIGZpcnN0IGluIGEgY29uY2F0ICh0aGlzIGVtaXRzIGltbWVkaWF0ZWx5KVxuICAgICAgb2YoW3Jlc29sdmVkUGFuZU1ldGEsIC4uLmxvYWRpbmdQYW5lc10pLFxuICAgICAgLy8gdGhlbiB3aGVuZXZlciB0aGUgbmV4dCBzdHJlYW0gaXMgZG9uZSwgdGhlIHJlc3VsdHMgd2lsbCBiZSBjb21iaW5lZC5cbiAgICAgIG5leHRTdHJlYW0ucGlwZShtYXAobmV4dFJlc29sdmVkUGFuZXMgPT4gW3Jlc29sdmVkUGFuZU1ldGEsIC4uLm5leHRSZXNvbHZlZFBhbmVzXSkpKTtcbiAgICB9KSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIFBhbmVSZXNvbHV0aW9uRXJyb3IpIHtcbiAgICAgIGlmIChlLmNvbnRleHQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiUGFuZSByZXNvbHV0aW9uIGVycm9yIGF0IGluZGV4IFwiLmNvbmNhdChlLmNvbnRleHQuaW5kZXgpLmNvbmNhdChlLmNvbnRleHQuc3BsaXRJbmRleCA+IDAgPyBcIiBmb3Igc3BsaXQgcGFuZSBpbmRleCBcIi5jb25jYXQoZS5jb250ZXh0LnNwbGl0SW5kZXgpIDogXCJcIiwgXCI6IFwiKS5jb25jYXQoZS5tZXNzYWdlKS5jb25jYXQoZS5oZWxwSWQgPyBcIiAtIHNlZSBcIi5jb25jYXQoZ2VuZXJhdGVIZWxwVXJsKGUuaGVscElkKSkgOiBcIlwiKSwgZSk7XG4gICAgICB9XG4gICAgICBpZiAoZS5oZWxwSWQgPT09IFwic3RydWN0dXJlLWl0ZW0tcmV0dXJuZWQtbm8tY2hpbGRcIikge1xuICAgICAgICByZXR1cm4gb2YoW10pO1xuICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBlO1xuICB9XG59XG5mdW5jdGlvbiBjcmVhdGVSZXNvbHZlZFBhbmVOb2RlU3RyZWFtKF9yZWY2KSB7XG4gIGxldCB7XG4gICAgcm91dGVyUGFuZXNTdHJlYW0sXG4gICAgcm9vdFBhbmVOb2RlLFxuICAgIGluaXRpYWxDYWNoZVN0YXRlID0ge1xuICAgICAgY2FjaGVLZXlzQnlGbGF0SW5kZXg6IFtdLFxuICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXM6IFtdLFxuICAgICAgcmVzb2x2ZWRQYW5lQ2FjaGU6IC8qIEBfX1BVUkVfXyAqL25ldyBNYXAoKSxcbiAgICAgIHJlc29sdmVQYW5lOiAoKSA9PiBORVZFUlxuICAgIH0sXG4gICAgc3RydWN0dXJlQ29udGV4dFxuICB9ID0gX3JlZjY7XG4gIGNvbnN0IHJlc29sdmVkUGFuZXMkID0gcm91dGVyUGFuZXNTdHJlYW0ucGlwZShcbiAgLy8gYWRkIGluIGltcGxpY2l0IFwicm9vdFwiIHJvdXRlciBwYW5lXG4gIG1hcChyYXdSb3V0ZXJQYW5lcyA9PiBbW3tcbiAgICBpZDogXCJyb290XCJcbiAgfV0sIC4uLnJhd1JvdXRlclBhbmVzXSksXG4gIC8vIGNyZWF0ZSBmbGF0dGVuZWQgcm91dGVyIHBhbmVzXG4gIG1hcChyb3V0ZXJQYW5lcyA9PiB7XG4gICAgY29uc3QgZmxhdHRlbmVkUm91dGVyUGFuZXMgPSByb3V0ZXJQYW5lcy5mbGF0TWFwKChyb3V0ZXJQYW5lR3JvdXAsIGdyb3VwSW5kZXgpID0+IHJvdXRlclBhbmVHcm91cC5tYXAoKHJvdXRlclBhbmVTaWJsaW5nLCBzaWJsaW5nSW5kZXgpID0+ICh7XG4gICAgICByb3V0ZXJQYW5lU2libGluZyxcbiAgICAgIGdyb3VwSW5kZXgsXG4gICAgICBzaWJsaW5nSW5kZXhcbiAgICB9KSkpLm1hcCgoaSwgaW5kZXgpID0+ICh7XG4gICAgICAuLi5pLFxuICAgICAgZmxhdEluZGV4OiBpbmRleFxuICAgIH0pKTtcbiAgICByZXR1cm4gZmxhdHRlbmVkUm91dGVyUGFuZXM7XG4gIH0pLFxuICAvLyBjYWxjdWxhdGUgYSBcImRpZmZJbmRleFwiIHVzZWQgZm9yIGNsZWFyaW5nIHRoZSBtZW1vIGNhY2hlXG4gIHN0YXJ0V2l0aChbXSksIHBhaXJ3aXNlKCksIG1hcChfcmVmNyA9PiB7XG4gICAgbGV0IFtwcmV2LCBjdXJyXSA9IF9yZWY3O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3Vyci5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcHJldlZhbHVlID0gcHJldltpXTtcbiAgICAgIGNvbnN0IGN1cnJWYWx1ZSA9IGN1cnJbaV07XG4gICAgICBpZiAoIWlzRXF1YWwocHJldlZhbHVlLCBjdXJyVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXM6IGN1cnIsXG4gICAgICAgICAgZGlmZkluZGV4OiBpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lczogY3VycixcbiAgICAgIGRpZmZJbmRleDogY3Vyci5sZW5ndGhcbiAgICB9O1xuICB9KSxcbiAgLy8gY3JlYXRlIHRoZSBtZW1vaXplZCBgcmVzb2x2ZVBhbmVgIGZ1bmN0aW9uIGFuZCBtYW5hZ2UgdGhlIG1lbW8gY2FjaGVcbiAgc2NhbigoYWNjLCBuZXh0KSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgY2FjaGVLZXlzQnlGbGF0SW5kZXgsXG4gICAgICByZXNvbHZlZFBhbmVDYWNoZVxuICAgIH0gPSBhY2M7XG4gICAgY29uc3Qge1xuICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXMsXG4gICAgICBkaWZmSW5kZXhcbiAgICB9ID0gbmV4dDtcbiAgICBjb25zdCBiZWZvcmVEaWZmSW5kZXggPSBjYWNoZUtleXNCeUZsYXRJbmRleC5zbGljZSgwLCBkaWZmSW5kZXggKyAxKTtcbiAgICBjb25zdCBhZnRlckRpZmZJbmRleCA9IGNhY2hlS2V5c0J5RmxhdEluZGV4LnNsaWNlKGRpZmZJbmRleCArIDEpO1xuICAgIGNvbnN0IGtleXNUb0tlZXAgPSBuZXcgU2V0KGJlZm9yZURpZmZJbmRleC5mbGF0TWFwKGtleVNldCA9PiBBcnJheS5mcm9tKGtleVNldCkpKTtcbiAgICBjb25zdCBrZXlzVG9EZWxldGUgPSBhZnRlckRpZmZJbmRleC5mbGF0TWFwKGtleVNldCA9PiBBcnJheS5mcm9tKGtleVNldCkpLmZpbHRlcihrZXkgPT4gIWtleXNUb0tlZXAuaGFzKGtleSkpO1xuICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXNUb0RlbGV0ZSkge1xuICAgICAgcmVzb2x2ZWRQYW5lQ2FjaGUuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIGNvbnN0IG1lbW9pemUgPSBuZXh0Rm4gPT4gKHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGtleSA9IHVucmVzb2x2ZWRQYW5lICYmIFwiXCIuY29uY2F0KGFzc2lnbklkKHVucmVzb2x2ZWRQYW5lKSwgXCItXCIpLmNvbmNhdChoYXNoQ29udGV4dChjb250ZXh0KSk7XG4gICAgICBjb25zdCBjYWNoZWRSZXNvbHZlZFBhbmUgPSBrZXkgJiYgcmVzb2x2ZWRQYW5lQ2FjaGUuZ2V0KGtleSk7XG4gICAgICBpZiAoY2FjaGVkUmVzb2x2ZWRQYW5lKSByZXR1cm4gY2FjaGVkUmVzb2x2ZWRQYW5lO1xuICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dEZuKHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpO1xuICAgICAgaWYgKCFrZXkpIHJldHVybiByZXN1bHQ7XG4gICAgICBjb25zdCBjYWNoZUtleVNldCA9IGNhY2hlS2V5c0J5RmxhdEluZGV4W2ZsYXRJbmRleF0gfHwgLyogQF9fUFVSRV9fICovbmV3IFNldCgpO1xuICAgICAgY2FjaGVLZXlTZXQuYWRkKGtleSk7XG4gICAgICBjYWNoZUtleXNCeUZsYXRJbmRleFtmbGF0SW5kZXhdID0gY2FjaGVLZXlTZXQ7XG4gICAgICByZXNvbHZlZFBhbmVDYWNoZS5zZXQoa2V5LCByZXN1bHQpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lcyxcbiAgICAgIGNhY2hlS2V5c0J5RmxhdEluZGV4LFxuICAgICAgcmVzb2x2ZWRQYW5lQ2FjaGUsXG4gICAgICByZXNvbHZlUGFuZTogY3JlYXRlUGFuZVJlc29sdmVyKG1lbW9pemUpXG4gICAgfTtcbiAgfSwgaW5pdGlhbENhY2hlU3RhdGUpLFxuICAvLyBydW4gdGhlIG1lbW9pemVkLCByZWN1cnNpdmUgcmVzb2x2aW5nXG4gIHN3aXRjaE1hcChfcmVmOCA9PiB7XG4gICAgbGV0IHtcbiAgICAgIGZsYXR0ZW5lZFJvdXRlclBhbmVzLFxuICAgICAgcmVzb2x2ZVBhbmVcbiAgICB9ID0gX3JlZjg7XG4gICAgcmV0dXJuIHJlc29sdmVQYW5lVHJlZSh7XG4gICAgICB1bnJlc29sdmVkUGFuZTogcm9vdFBhbmVOb2RlLFxuICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXMsXG4gICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICBwYXRoOiBbXSxcbiAgICAgIHJlc29sdmVQYW5lLFxuICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgIH0pO1xuICB9KSk7XG4gIHJldHVybiByZXNvbHZlZFBhbmVzJC5waXBlKFxuICAvLyB0aGlzIGRpZmZzIHRoZSBwcmV2aW91cyBlbWlzc2lvbiB3aXRoIHRoZSBjdXJyZW50IG9uZS4gaWYgdGhlcmUgaXMgYSBuZXdcbiAgLy8gbG9hZGluZyBwYW5lIGF0IHRoZSBzYW1lIHBvc2l0aW9uIHdoZXJlIGEgcHJldmlvdXMgcGFuZSBhbHJlYWR5IGhhZCBhXG4gIC8vIHJlc29sdmVkIHZhbHVlIChsb29raW5nIGF0IHRoZSBJRHMgdG8gY29tcGFyZSksIHRoZW4gcmV0dXJuIHRoZSBwcmV2aW91c1xuICAvLyBwYW5lIGluc3RlYWQgb2YgdGhlIGxvYWRpbmcgcGFuZVxuICBzY2FuKChwcmV2LCBuZXh0KSA9PiBuZXh0Lm1hcCgobmV4dFBhbmUsIGluZGV4KSA9PiB7XG4gICAgY29uc3QgcHJldlBhbmUgPSBwcmV2W2luZGV4XTtcbiAgICBpZiAoIXByZXZQYW5lKSByZXR1cm4gbmV4dFBhbmU7XG4gICAgaWYgKG5leHRQYW5lLnR5cGUgIT09IFwibG9hZGluZ1wiKSByZXR1cm4gbmV4dFBhbmU7XG4gICAgaWYgKHByZXZQYW5lLnJvdXRlclBhbmVTaWJsaW5nLmlkID09PSBuZXh0UGFuZS5yb3V0ZXJQYW5lU2libGluZy5pZCkge1xuICAgICAgcmV0dXJuIHByZXZQYW5lO1xuICAgIH1cbiAgICByZXR1cm4gbmV4dFBhbmU7XG4gIH0pLCBbXSksXG4gIC8vIHRoaXMgcHJldmVudHMgZHVwbGljYXRlIGVtaXNzaW9uc1xuICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgocHJldiwgbmV4dCkgPT4ge1xuICAgIGlmIChwcmV2Lmxlbmd0aCAhPT0gbmV4dC5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5leHQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHByZXZWYWx1ZSA9IHByZXZbaV07XG4gICAgICBjb25zdCBuZXh0VmFsdWUgPSBuZXh0W2ldO1xuICAgICAgaWYgKGhhc2hSZXNvbHZlZFBhbmVNZXRhKHByZXZWYWx1ZSkgIT09IGhhc2hSZXNvbHZlZFBhbmVNZXRhKG5leHRWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSkpO1xufVxuZnVuY3Rpb24gdXNlUm91dGVyUGFuZXNTdHJlYW0oKSB7XG4gIGNvbnN0IHJvdXRlclN0YXRlU3ViamVjdCA9IHVzZU1lbW8oKCkgPT4gbmV3IFJlcGxheVN1YmplY3QoMSksIFtdKTtcbiAgY29uc3Qgcm91dGVyUGFuZXMkID0gdXNlTWVtbygoKSA9PiByb3V0ZXJTdGF0ZVN1YmplY3QuYXNPYnNlcnZhYmxlKCkucGlwZShtYXAoX3JvdXRlclN0YXRlID0+IChfcm91dGVyU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IF9yb3V0ZXJTdGF0ZS5wYW5lcykgfHwgW10pKSwgW3JvdXRlclN0YXRlU3ViamVjdF0pO1xuICBjb25zdCB7XG4gICAgc3RhdGU6IHJvdXRlclN0YXRlXG4gIH0gPSB1c2VSb3V0ZXIoKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByb3V0ZXJTdGF0ZVN1YmplY3QubmV4dChyb3V0ZXJTdGF0ZSk7XG4gIH0sIFtyb3V0ZXJTdGF0ZSwgcm91dGVyU3RhdGVTdWJqZWN0XSk7XG4gIHJldHVybiByb3V0ZXJQYW5lcyQ7XG59XG5mdW5jdGlvbiB1c2VSZXNvbHZlZFBhbmVzKCkge1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKCk7XG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gIGNvbnN0IHtcbiAgICBzdHJ1Y3R1cmVDb250ZXh0LFxuICAgIHJvb3RQYW5lTm9kZVxuICB9ID0gdXNlRGVza1Rvb2woKTtcbiAgY29uc3QgW2RhdGEsIHNldERhdGFdID0gdXNlU3RhdGUoe1xuICAgIHBhbmVEYXRhSXRlbXM6IFtdLFxuICAgIHJlc29sdmVkUGFuZXM6IFtdLFxuICAgIHJvdXRlclBhbmVzOiBbXVxuICB9KTtcbiAgY29uc3Qgcm91dGVyUGFuZXNTdHJlYW0gPSB1c2VSb3V0ZXJQYW5lc1N0cmVhbSgpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHJlc29sdmVkUGFuZXMkID0gY3JlYXRlUmVzb2x2ZWRQYW5lTm9kZVN0cmVhbSh7XG4gICAgICByb290UGFuZU5vZGUsXG4gICAgICByb3V0ZXJQYW5lc1N0cmVhbSxcbiAgICAgIHN0cnVjdHVyZUNvbnRleHRcbiAgICB9KS5waXBlKG1hcChyZXNvbHZlZFBhbmVzID0+IHtcbiAgICAgIGNvbnN0IHJvdXRlclBhbmVzID0gcmVzb2x2ZWRQYW5lcy5yZWR1Y2UoKGFjYywgbmV4dCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50R3JvdXAgPSBhY2NbbmV4dC5ncm91cEluZGV4XSB8fCBbXTtcbiAgICAgICAgY3VycmVudEdyb3VwW25leHQuc2libGluZ0luZGV4XSA9IG5leHQucm91dGVyUGFuZVNpYmxpbmc7XG4gICAgICAgIGFjY1tuZXh0Lmdyb3VwSW5kZXhdID0gY3VycmVudEdyb3VwO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSwgW10pO1xuICAgICAgY29uc3QgZ3JvdXBzTGVuID0gcm91dGVyUGFuZXMubGVuZ3RoO1xuICAgICAgY29uc3QgcGFuZURhdGFJdGVtcyA9IHJlc29sdmVkUGFuZXMubWFwKHBhbmUgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBncm91cEluZGV4LFxuICAgICAgICAgIGZsYXRJbmRleCxcbiAgICAgICAgICBzaWJsaW5nSW5kZXgsXG4gICAgICAgICAgcm91dGVyUGFuZVNpYmxpbmcsXG4gICAgICAgICAgcGF0aFxuICAgICAgICB9ID0gcGFuZTtcbiAgICAgICAgY29uc3QgaXRlbUlkID0gcm91dGVyUGFuZVNpYmxpbmcuaWQ7XG4gICAgICAgIGNvbnN0IG5leHRHcm91cCA9IHJvdXRlclBhbmVzW2dyb3VwSW5kZXggKyAxXTtcbiAgICAgICAgY29uc3QgcGFuZURhdGFJdGVtID0ge1xuICAgICAgICAgIGFjdGl2ZTogZ3JvdXBJbmRleCA9PT0gZ3JvdXBzTGVuIC0gMixcbiAgICAgICAgICBjaGlsZEl0ZW1JZDogKF9hID0gbmV4dEdyb3VwID09IG51bGwgPyB2b2lkIDAgOiBuZXh0R3JvdXBbMF0uaWQpICE9IG51bGwgPyBfYSA6IG51bGwsXG4gICAgICAgICAgaW5kZXg6IGZsYXRJbmRleCxcbiAgICAgICAgICBpdGVtSWQ6IHJvdXRlclBhbmVTaWJsaW5nLmlkLFxuICAgICAgICAgIGdyb3VwSW5kZXgsXG4gICAgICAgICAga2V5OiBcIlwiLmNvbmNhdChwYW5lLnR5cGUgPT09IFwibG9hZGluZ1wiID8gXCJ1bmtub3duXCIgOiBwYW5lLnBhbmVOb2RlLmlkLCBcIi1cIikuY29uY2F0KGl0ZW1JZCwgXCItXCIpLmNvbmNhdChzaWJsaW5nSW5kZXgpLFxuICAgICAgICAgIHBhbmU6IHBhbmUudHlwZSA9PT0gXCJsb2FkaW5nXCIgPyBMT0FESU5HX1BBTkUgOiBwYW5lLnBhbmVOb2RlLFxuICAgICAgICAgIHBhcmFtczogcm91dGVyUGFuZVNpYmxpbmcucGFyYW1zIHx8IHt9LFxuICAgICAgICAgIHBhdGg6IHBhdGguam9pbihcIjtcIiksXG4gICAgICAgICAgcGF5bG9hZDogcm91dGVyUGFuZVNpYmxpbmcucGF5bG9hZCxcbiAgICAgICAgICBzZWxlY3RlZDogZmxhdEluZGV4ID09PSByZXNvbHZlZFBhbmVzLmxlbmd0aCAtIDEsXG4gICAgICAgICAgc2libGluZ0luZGV4XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBwYW5lRGF0YUl0ZW07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhbmVEYXRhSXRlbXMsXG4gICAgICAgIHJvdXRlclBhbmVzLFxuICAgICAgICByZXNvbHZlZFBhbmVzOiBwYW5lRGF0YUl0ZW1zLm1hcChwYW5lID0+IHBhbmUucGFuZSlcbiAgICAgIH07XG4gICAgfSkpO1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHJlc29sdmVkUGFuZXMkLnN1YnNjcmliZSh7XG4gICAgICBuZXh0OiByZXN1bHQgPT4gc2V0RGF0YShyZXN1bHQpLFxuICAgICAgZXJyb3I6IGUgPT4gc2V0RXJyb3IoZSlcbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4gc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtyb290UGFuZU5vZGUsIHJvdXRlclBhbmVzU3RyZWFtLCBzdHJ1Y3R1cmVDb250ZXh0XSk7XG4gIHJldHVybiBkYXRhO1xufVxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlRG9jdW1lbnRJZEFuZFR5cGUoZG9jdW1lbnRTdG9yZSwgaWQsIHR5cGUpIHtcbiAgaWYgKGlkICYmIHR5cGUpIHJldHVybiB7XG4gICAgaWQsXG4gICAgdHlwZVxuICB9O1xuICBpZiAoIWlkICYmIHR5cGUpIHJldHVybiB7XG4gICAgaWQ6IHV1aWQoKSxcbiAgICB0eXBlXG4gIH07XG4gIGlmIChpZCAmJiAhdHlwZSkge1xuICAgIGNvbnN0IHJlc29sdmVkVHlwZSA9IGF3YWl0IGZpcnN0VmFsdWVGcm9tKGRvY3VtZW50U3RvcmUucmVzb2x2ZVR5cGVGb3JEb2N1bWVudChpZCkpO1xuICAgIHJldHVybiB7XG4gICAgICBpZCxcbiAgICAgIHR5cGU6IHJlc29sdmVkVHlwZVxuICAgIH07XG4gIH1cbiAgdGhyb3cgbmV3IFBhbmVSZXNvbHV0aW9uRXJyb3Ioe1xuICAgIG1lc3NhZ2U6IFwiTmVpdGhlciBkb2N1bWVudCBgaWRgIG9yIGB0eXBlYCB3YXMgcHJvdmlkZWQgd2hlbiB0cnlpbmcgdG8gcmVzb2x2ZSBpbnRlbnQuXCJcbiAgfSk7XG59XG5jb25zdCBFTVBUWV9SRUNPUkQgPSB7fTtcbmNvbnN0IEludGVudFJlc29sdmVyID0gbWVtbyhmdW5jdGlvbiBJbnRlbnRSZXNvbHZlcjIoKSB7XG4gIGNvbnN0IHtcbiAgICBuYXZpZ2F0ZVxuICB9ID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IG1heWJlSW50ZW50ID0gdXNlUm91dGVyU3RhdGUodXNlQ2FsbGJhY2socm91dGVyU3RhdGUgPT4ge1xuICAgIGNvbnN0IGludGVudE5hbWUgPSB0eXBlb2Ygcm91dGVyU3RhdGUuaW50ZW50ID09PSBcInN0cmluZ1wiID8gcm91dGVyU3RhdGUuaW50ZW50IDogdm9pZCAwO1xuICAgIHJldHVybiBpbnRlbnROYW1lID8ge1xuICAgICAgaW50ZW50OiBpbnRlbnROYW1lLFxuICAgICAgcGFyYW1zOiBpc1JlY29yZChyb3V0ZXJTdGF0ZS5wYXJhbXMpID8gcm91dGVyU3RhdGUucGFyYW1zIDogRU1QVFlfUkVDT1JELFxuICAgICAgcGF5bG9hZDogcm91dGVyU3RhdGUucGF5bG9hZFxuICAgIH0gOiB2b2lkIDA7XG4gIH0sIFtdKSk7XG4gIGNvbnN0IHtcbiAgICByb290UGFuZU5vZGUsXG4gICAgc3RydWN0dXJlQ29udGV4dFxuICB9ID0gdXNlRGVza1Rvb2woKTtcbiAgY29uc3QgZG9jdW1lbnRTdG9yZSA9IHVzZURvY3VtZW50U3RvcmUoKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobWF5YmVJbnRlbnQpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgaW50ZW50LFxuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHBheWxvYWRcbiAgICAgIH0gPSBtYXliZUludGVudDtcbiAgICAgIGxldCBjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgIGFzeW5jIGZ1bmN0aW9uIGVmZmVjdCgpIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIHR5cGVcbiAgICAgICAgfSA9IGF3YWl0IGVuc3VyZURvY3VtZW50SWRBbmRUeXBlKGRvY3VtZW50U3RvcmUsIHR5cGVvZiBwYXJhbXMuaWQgPT09IFwic3RyaW5nXCIgPyBwYXJhbXMuaWQgOiB2b2lkIDAsIHR5cGVvZiBwYXJhbXMudHlwZSA9PT0gXCJzdHJpbmdcIiA/IHBhcmFtcy50eXBlIDogdm9pZCAwKTtcbiAgICAgICAgaWYgKGNhbmNlbGxlZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBwYW5lcyA9IGF3YWl0IHJlc29sdmVJbnRlbnQoe1xuICAgICAgICAgIGludGVudCxcbiAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgdHlwZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICByb290UGFuZU5vZGUsXG4gICAgICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNhbmNlbGxlZCkgcmV0dXJuO1xuICAgICAgICBuYXZpZ2F0ZSh7XG4gICAgICAgICAgcGFuZXNcbiAgICAgICAgfSwge1xuICAgICAgICAgIHJlcGxhY2U6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBlZmZlY3QoKS5jYXRjaChzZXRFcnJvcik7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBjYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIFtkb2N1bWVudFN0b3JlLCBtYXliZUludGVudCwgbmF2aWdhdGUsIHJvb3RQYW5lTm9kZSwgc3RydWN0dXJlQ29udGV4dF0pO1xuICByZXR1cm4gbnVsbDtcbn0pO1xuY29uc3QgUGF0aFNlZ21lbnQgPSBzdHlsZWQuc3BhbihfdGVtcGxhdGVPYmplY3QgfHwgKF90ZW1wbGF0ZU9iamVjdCA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoW1wiXFxuICAmOm5vdCg6bGFzdC1jaGlsZCk6OmFmdGVyIHtcXG4gICAgY29udGVudDogJyBcXHUyNzlEICc7XFxuICAgIG9wYWNpdHk6IDAuNTtcXG4gIH1cXG5cIl0pKSk7XG5mdW5jdGlvbiBmb3JtYXRTdGFjayhzdGFjaykge1xuICByZXR1cm4gc3RhY2sucmVwbGFjZSgvXFwoXFwuXFwuXFwuXFwpXFwuL2csIFwiKC4uLilcXG4gIC5cIikucmVwbGFjZSgvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV9cXGQrXysvZywgXCJcIikucmVwbGFjZSgvX19fZGVmYXVsdFxcLi9nLCBcIi5cIikucmVwbGFjZShuZXcgUmVnRXhwKFwiIFxcXFwoaHR0cHM/OlxcXFwvXFxcXC9cIi5jb25jYXQod2luZG93LmxvY2F0aW9uLmhvc3QpLCBcImdcIiksIFwiIChcIik7XG59XG5mdW5jdGlvbiBTdHJ1Y3R1cmVFcnJvcihfcmVmOSkge1xuICBsZXQge1xuICAgIGVycm9yXG4gIH0gPSBfcmVmOTtcbiAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBQYW5lUmVzb2x1dGlvbkVycm9yKSkge1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIGNvbnN0IHtcbiAgICBjYXVzZVxuICB9ID0gZXJyb3I7XG4gIGNvbnN0IHN0YWNrID0gKGNhdXNlID09IG51bGwgPyB2b2lkIDAgOiBjYXVzZS5zdGFjaykgfHwgZXJyb3Iuc3RhY2s7XG4gIGNvbnN0IHNob3dTdGFjayA9IHN0YWNrICYmICEoY2F1c2UgaW5zdGFuY2VvZiBTZXJpYWxpemVFcnJvcikgJiYgIWVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJNb2R1bGUgYnVpbGQgZmFpbGVkOlwiKTtcbiAgY29uc3QgcGF0aCA9IGNhdXNlIGluc3RhbmNlb2YgU2VyaWFsaXplRXJyb3IgPyBjYXVzZS5wYXRoIDogW107XG4gIGNvbnN0IGhlbHBJZCA9IGNhdXNlIGluc3RhbmNlb2YgU2VyaWFsaXplRXJyb3IgJiYgY2F1c2UuaGVscElkIHx8IGVycm9yLmhlbHBJZDtcbiAgY29uc3QgaGFuZGxlUmVsb2FkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgfSwgW10pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KENhcmQsIHtcbiAgICBoZWlnaHQ6IFwiZmlsbFwiLFxuICAgIG92ZXJmbG93OiBcImF1dG9cIixcbiAgICBwYWRkaW5nOiA0LFxuICAgIHNpemluZzogXCJib3JkZXJcIixcbiAgICB0b25lOiBcImNyaXRpY2FsXCIsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoQ29udGFpbmVyLCB7XG4gICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChIZWFkaW5nLCB7XG4gICAgICAgIGFzOiBcImgyXCIsXG4gICAgICAgIGNoaWxkcmVuOiBcIkVuY291bnRlcmVkIGFuIGVycm9yIHdoaWxlIHJlYWRpbmcgc3RydWN0dXJlXCJcbiAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3hzKENhcmQsIHtcbiAgICAgICAgbWFyZ2luVG9wOiA0LFxuICAgICAgICBwYWRkaW5nOiA0LFxuICAgICAgICByYWRpdXM6IDIsXG4gICAgICAgIG92ZXJmbG93OiBcImF1dG9cIixcbiAgICAgICAgc2hhZG93OiAxLFxuICAgICAgICB0b25lOiBcImluaGVyaXRcIixcbiAgICAgICAgY2hpbGRyZW46IFtwYXRoLmxlbmd0aCA+IDAgJiYgLyogQF9fUFVSRV9fICovanN4cyhTdGFjaywge1xuICAgICAgICAgIHNwYWNlOiAyLFxuICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KExhYmVsLCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogXCJTdHJ1Y3R1cmUgcGF0aFwiXG4gICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChDb2RlLCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogcGF0aC5zbGljZSgxKS5tYXAoKHNlZ21lbnQsIGkpID0+XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3Qvbm8tYXJyYXktaW5kZXgta2V5XG4gICAgICAgICAgICAvKiBAX19QVVJFX18gKi9cbiAgICAgICAgICAgIGpzeChQYXRoU2VnbWVudCwge1xuICAgICAgICAgICAgICBjaGlsZHJlbjogc2VnbWVudFxuICAgICAgICAgICAgfSwgXCJcIi5jb25jYXQoc2VnbWVudCwgXCItXCIpLmNvbmNhdChpKSkpXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3hzKFN0YWNrLCB7XG4gICAgICAgICAgbWFyZ2luVG9wOiA0LFxuICAgICAgICAgIHNwYWNlOiAyLFxuICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KExhYmVsLCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogXCJFcnJvclwiXG4gICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChDb2RlLCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogc2hvd1N0YWNrID8gZm9ybWF0U3RhY2soc3RhY2spIDogZXJyb3IubWVzc2FnZVxuICAgICAgICAgIH0pXVxuICAgICAgICB9KSwgaGVscElkICYmIC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgICBtYXJnaW5Ub3A6IDQsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFwiYVwiLCB7XG4gICAgICAgICAgICAgIGhyZWY6IGdlbmVyYXRlSGVscFVybChoZWxwSWQpLFxuICAgICAgICAgICAgICByZWw6IFwibm9vcGVuZXIgbm9yZWZlcnJlclwiLFxuICAgICAgICAgICAgICB0YXJnZXQ6IFwiX2JsYW5rXCIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBcIlZpZXcgZG9jdW1lbnRhdGlvblwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgICAgbWFyZ2luVG9wOiA0LFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQnV0dG9uLCB7XG4gICAgICAgICAgICB0ZXh0OiBcIlJlbG9hZFwiLFxuICAgICAgICAgICAgaWNvbjogU3luY0ljb24sXG4gICAgICAgICAgICB0b25lOiBcInByaW1hcnlcIixcbiAgICAgICAgICAgIG9uQ2xpY2s6IGhhbmRsZVJlbG9hZFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXVxuICAgICAgfSldXG4gICAgfSlcbiAgfSk7XG59XG5mdW5jdGlvbiBVbmtub3duUGFuZShwcm9wcykge1xuICBjb25zdCB7XG4gICAgaXNTZWxlY3RlZCxcbiAgICBwYW5lLFxuICAgIHBhbmVLZXlcbiAgfSA9IHByb3BzO1xuICBjb25zdCB0eXBlID0gaXNSZWNvcmQocGFuZSkgJiYgcGFuZS50eXBlIHx8IG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3hzKFBhbmUsIHtcbiAgICBpZDogcGFuZUtleSxcbiAgICBzZWxlY3RlZDogaXNTZWxlY3RlZCxcbiAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChQYW5lSGVhZGVyLCB7XG4gICAgICB0aXRsZTogXCJVbmtub3duIHBhbmUgdHlwZVwiXG4gICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChQYW5lQ29udGVudCwge1xuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgcGFkZGluZzogNCxcbiAgICAgICAgY2hpbGRyZW46IHR5cGVvZiB0eXBlID09PSBcInN0cmluZ1wiID8gLyogQF9fUFVSRV9fICovanN4cyhUZXh0LCB7XG4gICAgICAgICAgYXM6IFwicFwiLFxuICAgICAgICAgIG11dGVkOiB0cnVlLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXCJTdHJ1Y3R1cmUgaXRlbSBvZiB0eXBlIFwiLCAvKiBAX19QVVJFX18gKi9qc3goXCJjb2RlXCIsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiB0eXBlXG4gICAgICAgICAgfSksIFwiIGlzIG5vdCBhIGtub3duIGVudGl0eS5cIl1cbiAgICAgICAgfSkgOiAvKiBAX19QVVJFX18gKi9qc3hzKFRleHQsIHtcbiAgICAgICAgICBhczogXCJwXCIsXG4gICAgICAgICAgbXV0ZWQ6IHRydWUsXG4gICAgICAgICAgY2hpbGRyZW46IFtcIlN0cnVjdHVyZSBpdGVtIGlzIG1pc3NpbmcgcmVxdWlyZWQgXCIsIC8qIEBfX1BVUkVfXyAqL2pzeChcImNvZGVcIiwge1xuICAgICAgICAgICAgY2hpbGRyZW46IFwidHlwZVwiXG4gICAgICAgICAgfSksIFwiIHByb3BlcnR5LlwiXVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRXYWl0TWVzc2FnZXMocGF0aCkge1xuICBjb25zdCB0aHJlc2hvbGRzID0gW3tcbiAgICBtczogMzAwLFxuICAgIG1lc3NhZ2U6IFwiTG9hZGluZ1xcdTIwMjZcIlxuICB9LCB7XG4gICAgbXM6IDVlMyxcbiAgICBtZXNzYWdlOiBcIlN0aWxsIGxvYWRpbmdcXHUyMDI2XCJcbiAgfV07XG4gIGlmIChpc0Rldikge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBbXCJDaGVjayBjb25zb2xlIGZvciBlcnJvcnM/XCIsIFwiSXMgeW91ciBvYnNlcnZhYmxlL3Byb21pc2UgcmVzb2x2aW5nP1wiLCBwYXRoLmxlbmd0aCA+IDAgPyBcIlN0cnVjdHVyZSBwYXRoOiBcIi5jb25jYXQocGF0aC5qb2luKFwiIFxcdTI3OUQgXCIpKSA6IFwiXCJdO1xuICAgIHRocmVzaG9sZHMucHVzaCh7XG4gICAgICBtczogMWU0LFxuICAgICAgbWVzc2FnZTogbWVzc2FnZS5qb2luKFwiXFxuXCIpXG4gICAgfSk7XG4gIH1cbiAgY29uc3Qgc3JjID0gb2YobnVsbCk7XG4gIHJldHVybiBtZXJnZSguLi50aHJlc2hvbGRzLm1hcChfcmVmMTAgPT4ge1xuICAgIGxldCB7XG4gICAgICBtcyxcbiAgICAgIG1lc3NhZ2VcbiAgICB9ID0gX3JlZjEwO1xuICAgIHJldHVybiBzcmMucGlwZShtYXBUbyhtZXNzYWdlKSwgZGVsYXkobXMpKTtcbiAgfSkpO1xufVxuY29uc3QgREVGQVVMVF9NRVNTQUdFID0gXCJMb2FkaW5nXFx1MjAyNlwiO1xuY29uc3QgQ29udGVudCQxID0gc3R5bGVkKEZsZXgpKF90ZW1wbGF0ZU9iamVjdDIgfHwgKF90ZW1wbGF0ZU9iamVjdDIgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFtcIlxcbiAgb3BhY2l0eTogMDtcXG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMjAwbXM7XFxuXFxuICAmW2RhdGEtbW91bnRlZF0ge1xcbiAgICBvcGFjaXR5OiAxO1xcbiAgfVxcblwiXSkpKTtcbmNvbnN0IExvYWRpbmdQYW5lID0gbWVtbyhwcm9wcyA9PiB7XG4gIGNvbnN0IHtcbiAgICBkZWxheSA9IDMwMCxcbiAgICBmbGV4LFxuICAgIG1lc3NhZ2U6IG1lc3NhZ2VQcm9wID0gZ2V0V2FpdE1lc3NhZ2VzLFxuICAgIG1pbldpZHRoLFxuICAgIHBhbmVLZXksXG4gICAgcGF0aCxcbiAgICBzZWxlY3RlZCxcbiAgICB0aXRsZSxcbiAgICB0b25lXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgcmVzb2x2ZWRNZXNzYWdlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlUHJvcCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm4gbWVzc2FnZVByb3AocGF0aCA/IHBhdGguc3BsaXQoXCI7XCIpIDogW10pO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZVByb3A7XG4gIH0sIFttZXNzYWdlUHJvcCwgcGF0aF0pO1xuICBjb25zdCBbY3VycmVudE1lc3NhZ2UsIHNldEN1cnJlbnRNZXNzYWdlXSA9IHVzZVN0YXRlKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHJlc29sdmVkTWVzc2FnZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHJlc29sdmVkTWVzc2FnZTtcbiAgICByZXR1cm4gREVGQVVMVF9NRVNTQUdFO1xuICB9KTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHJlc29sdmVkTWVzc2FnZSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIHZvaWQgMDtcbiAgICBpZiAodHlwZW9mIHJlc29sdmVkTWVzc2FnZS5zdWJzY3JpYmUgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHZvaWQgMDtcbiAgICBjb25zdCBzdWIgPSByZXNvbHZlZE1lc3NhZ2Uuc3Vic2NyaWJlKHNldEN1cnJlbnRNZXNzYWdlKTtcbiAgICByZXR1cm4gKCkgPT4gc3ViLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtyZXNvbHZlZE1lc3NhZ2VdKTtcbiAgY29uc3QgW2NvbnRlbnRFbGVtZW50LCBzZXRDb250ZW50RWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW21vdW50ZWQsIHNldE1vdW50ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghY29udGVudEVsZW1lbnQpIHJldHVybiB2b2lkIDA7XG4gICAgcmV0dXJuIF9yYWYyKCgpID0+IHNldE1vdW50ZWQodHJ1ZSkpO1xuICB9LCBbY29udGVudEVsZW1lbnRdKTtcbiAgY29uc3QgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqL2pzeHMoQ29udGVudCQxLCB7XG4gICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgXCJkYXRhLW1vdW50ZWRcIjogbW91bnRlZCA/IFwiXCIgOiB2b2lkIDAsXG4gICAgZGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgIGhlaWdodDogXCJmaWxsXCIsXG4gICAganVzdGlmeTogXCJjZW50ZXJcIixcbiAgICByZWY6IHNldENvbnRlbnRFbGVtZW50LFxuICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFNwaW5uZXIsIHtcbiAgICAgIG11dGVkOiB0cnVlXG4gICAgfSksICh0aXRsZSB8fCBjdXJyZW50TWVzc2FnZSkgJiYgLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgbWFyZ2luVG9wOiAzLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICBtdXRlZDogdHJ1ZSxcbiAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgY2hpbGRyZW46IHRpdGxlIHx8IGN1cnJlbnRNZXNzYWdlXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChQYW5lLCB7XG4gICAgZmxleCxcbiAgICBpZDogcGFuZUtleSxcbiAgICBtaW5XaWR0aCxcbiAgICBzZWxlY3RlZCxcbiAgICB0b25lLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goUGFuZUNvbnRlbnQsIHtcbiAgICAgIGNoaWxkcmVuOiBjb250ZW50XG4gICAgfSlcbiAgfSk7XG59KTtcbkxvYWRpbmdQYW5lLmRpc3BsYXlOYW1lID0gXCJMb2FkaW5nUGFuZVwiO1xuY29uc3QgcGFuZU1hcCA9IHtcbiAgY29tcG9uZW50OiBsYXp5KCgpID0+IGltcG9ydCgnLi9pbmRleC02MjA4YjE4YS5qcycpKSxcbiAgZG9jdW1lbnQ6IGxhenkoKCkgPT4gaW1wb3J0KCcuL2luZGV4LWMzNzQzODA5LmpzJykpLFxuICBkb2N1bWVudExpc3Q6IGxhenkoKCkgPT4gaW1wb3J0KCcuL2luZGV4LWRkMzEyN2Y3LmpzJykpLFxuICBsaXN0OiBsYXp5KCgpID0+IGltcG9ydCgnLi9pbmRleC0zYzFhOTI1Ni5qcycpKVxufTtcbmNvbnN0IERlc2tUb29sUGFuZSA9IG1lbW8oZnVuY3Rpb24gRGVza1Rvb2xQYW5lMihwcm9wcykge1xuICBjb25zdCB7XG4gICAgYWN0aXZlLFxuICAgIGNoaWxkSXRlbUlkLFxuICAgIGdyb3VwSW5kZXgsXG4gICAgaW5kZXgsXG4gICAgaXRlbUlkLFxuICAgIHBhbmUsXG4gICAgcGFuZUtleSxcbiAgICBwYXJhbXMsXG4gICAgcGF5bG9hZCxcbiAgICBwYXRoLFxuICAgIHNlbGVjdGVkLFxuICAgIHNpYmxpbmdJbmRleFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IFBhbmVDb21wb25lbnQgPSBwYW5lTWFwW3BhbmUudHlwZV0gfHwgVW5rbm93blBhbmU7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUGFuZVJvdXRlclByb3ZpZGVyLCB7XG4gICAgZmxhdEluZGV4OiBpbmRleCxcbiAgICBpbmRleDogZ3JvdXBJbmRleCxcbiAgICBwYXJhbXMsXG4gICAgcGF5bG9hZCxcbiAgICBzaWJsaW5nSW5kZXgsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChTdXNwZW5zZSwge1xuICAgICAgZmFsbGJhY2s6IC8qIEBfX1BVUkVfXyAqL2pzeChMb2FkaW5nUGFuZSwge1xuICAgICAgICBwYW5lS2V5LFxuICAgICAgICBwYXRoLFxuICAgICAgICBzZWxlY3RlZFxuICAgICAgfSksXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFBhbmVDb21wb25lbnQsIHtcbiAgICAgICAgY2hpbGRJdGVtSWQ6IGNoaWxkSXRlbUlkIHx8IFwiXCIsXG4gICAgICAgIGluZGV4LFxuICAgICAgICBpdGVtSWQsXG4gICAgICAgIGlzQWN0aXZlOiBhY3RpdmUsXG4gICAgICAgIGlzU2VsZWN0ZWQ6IHNlbGVjdGVkLFxuICAgICAgICBwYW5lS2V5LFxuICAgICAgICBwYW5lXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufSwgKF9yZWYxMSwgX3JlZjEyKSA9PiB7XG4gIGxldCB7XG4gICAgcGFyYW1zOiBwcmV2UGFyYW1zID0ge30sXG4gICAgcGF5bG9hZDogcHJldlBheWxvYWQgPSBudWxsLFxuICAgIC4uLnByZXZcbiAgfSA9IF9yZWYxMTtcbiAgbGV0IHtcbiAgICBwYXJhbXM6IG5leHRQYXJhbXMgPSB7fSxcbiAgICBwYXlsb2FkOiBuZXh0UGF5bG9hZCA9IG51bGwsXG4gICAgLi4ubmV4dFxuICB9ID0gX3JlZjEyO1xuICBpZiAoIWlzRXF1YWwocHJldlBhcmFtcywgbmV4dFBhcmFtcykpIHJldHVybiBmYWxzZTtcbiAgaWYgKCFpc0VxdWFsKHByZXZQYXlsb2FkLCBuZXh0UGF5bG9hZCkpIHJldHVybiBmYWxzZTtcbiAgY29uc3Qga2V5cyA9IC8qIEBfX1BVUkVfXyAqL25ldyBTZXQoWy4uLk9iamVjdC5rZXlzKHByZXYpLCAuLi5PYmplY3Qua2V5cyhuZXh0KV0pO1xuICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgaWYgKHByZXZba2V5XSAhPT0gbmV4dFtrZXldKSByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59KTtcbmZ1bmN0aW9uIEVycm9yUGFuZShwcm9wcykge1xuICBjb25zdCB7XG4gICAgY2hpbGRyZW4sXG4gICAgZmxleCxcbiAgICBtaW5XaWR0aCxcbiAgICBwYW5lS2V5LFxuICAgIHRpdGxlID0gXCJFcnJvclwiLFxuICAgIHRvbmUgPSBcImNyaXRpY2FsXCJcbiAgfSA9IHByb3BzO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4cyhQYW5lLCB7XG4gICAgZmxleCxcbiAgICBpZDogcGFuZUtleSxcbiAgICBtaW5XaWR0aCxcbiAgICB0b25lLFxuICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFBhbmVIZWFkZXIsIHtcbiAgICAgIHRpdGxlXG4gICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChQYW5lQ29udGVudCwge1xuICAgICAgb3ZlcmZsb3c6IFwiYXV0b1wiLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgcGFkZGluZ1g6IDQsXG4gICAgICAgIHBhZGRpbmdZOiA1LFxuICAgICAgICBjaGlsZHJlblxuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRPcEVycm9yVGl0bGUob3ApIHtcbiAgaWYgKG9wID09PSBcImRlbGV0ZVwiKSB7XG4gICAgcmV0dXJuIFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgYXR0ZW1wdGluZyB0byBkZWxldGUgdGhpcyBkb2N1bWVudC5cXG4gICAgICBUaGlzIHVzdWFsbHkgbWVhbnMgdGhhdCB0aGVyZSBhcmUgb3RoZXIgZG9jdW1lbnRzIHRoYXQgcmVmZXJzIHRvIGl0LlwiO1xuICB9XG4gIGlmIChvcCA9PT0gXCJ1bnB1Ymxpc2hcIikge1xuICAgIHJldHVybiBcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGF0dGVtcHRpbmcgdG8gdW5wdWJsaXNoIHRoaXMgZG9jdW1lbnQuXFxuICAgICAgVGhpcyB1c3VhbGx5IG1lYW5zIHRoYXQgdGhlcmUgYXJlIG90aGVyIGRvY3VtZW50cyB0aGF0IHJlZmVycyB0byBpdC5cIjtcbiAgfVxuICByZXR1cm4gXCJBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgXCIuY29uY2F0KG9wKTtcbn1cbmZ1bmN0aW9uIGdldE9wU3VjY2Vzc1RpdGxlKG9wKSB7XG4gIGlmIChvcCA9PT0gXCJwdWJsaXNoXCIpIHtcbiAgICByZXR1cm4gXCJUaGUgZG9jdW1lbnQgd2FzIHB1Ymxpc2hlZFwiO1xuICB9XG4gIGlmIChvcCA9PT0gXCJ1bnB1Ymxpc2hcIikge1xuICAgIHJldHVybiBcIlRoZSBkb2N1bWVudCB3YXMgdW5wdWJsaXNoZWQuIEEgZHJhZnQgaGFzIGJlZW4gY3JlYXRlZCBmcm9tIHRoZSBsYXRlc3QgcHVibGlzaGVkIHZlcnNpb24uXCI7XG4gIH1cbiAgaWYgKG9wID09PSBcImRpc2NhcmRDaGFuZ2VzXCIpIHtcbiAgICByZXR1cm4gXCJBbGwgY2hhbmdlcyBzaW5jZSBsYXN0IHB1Ymxpc2ggaGFzIG5vdyBiZWVuIGRpc2NhcmRlZC4gVGhlIGRpc2NhcmRlZCBkcmFmdCBjYW4gc3RpbGwgYmUgcmVjb3ZlcmVkIGZyb20gaGlzdG9yeVwiO1xuICB9XG4gIGlmIChvcCA9PT0gXCJkZWxldGVcIikge1xuICAgIHJldHVybiBcIlRoZSBkb2N1bWVudCB3YXMgc3VjY2Vzc2Z1bGx5IGRlbGV0ZWRcIjtcbiAgfVxuICByZXR1cm4gXCJTdWNjZXNzZnVsbHkgcGVyZm9ybWVkIFwiLmNvbmNhdChvcCwgXCIgb24gZG9jdW1lbnRcIik7XG59XG5jb25zdCBJR05PUkVfT1BTID0gW1wicGF0Y2hcIiwgXCJjb21taXRcIl07XG5jb25zdCBEb2N1bWVudE9wZXJhdGlvblJlc3VsdHMgPSBtZW1vKGZ1bmN0aW9uIERvY3VtZW50T3BlcmF0aW9uUmVzdWx0czIoKSB7XG4gIGNvbnN0IHtcbiAgICBwdXNoOiBwdXNoVG9hc3RcbiAgfSA9IHVzZVRvYXN0KCk7XG4gIGNvbnN0IHtcbiAgICBkb2N1bWVudElkLFxuICAgIGRvY3VtZW50VHlwZVxuICB9ID0gdXNlRG9jdW1lbnRQYW5lKCk7XG4gIGNvbnN0IGV2ZW50ID0gdXNlRG9jdW1lbnRPcGVyYXRpb25FdmVudChkb2N1bWVudElkLCBkb2N1bWVudFR5cGUpO1xuICBjb25zdCBwcmV2RXZlbnQgPSB1c2VSZWYoZXZlbnQpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghZXZlbnQgfHwgZXZlbnQgPT09IHByZXZFdmVudC5jdXJyZW50KSByZXR1cm47XG4gICAgaWYgKGV2ZW50LnR5cGUgPT09IFwiZXJyb3JcIikge1xuICAgICAgcHVzaFRvYXN0KHtcbiAgICAgICAgY2xvc2FibGU6IHRydWUsXG4gICAgICAgIGR1cmF0aW9uOiAzZTQsXG4gICAgICAgIC8vIDMwc1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgdGl0bGU6IGdldE9wRXJyb3JUaXRsZShldmVudC5vcCksXG4gICAgICAgIGRlc2NyaXB0aW9uOiAvKiBAX19QVVJFX18gKi9qc3hzKFwiZGV0YWlsc1wiLCB7XG4gICAgICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goXCJzdW1tYXJ5XCIsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBcIkRldGFpbHNcIlxuICAgICAgICAgIH0pLCBldmVudC5lcnJvci5tZXNzYWdlXVxuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChldmVudC50eXBlID09PSBcInN1Y2Nlc3NcIiAmJiAhSUdOT1JFX09QUy5pbmNsdWRlcyhldmVudC5vcCkpIHtcbiAgICAgIHB1c2hUb2FzdCh7XG4gICAgICAgIGNsb3NhYmxlOiB0cnVlLFxuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICB0aXRsZTogZ2V0T3BTdWNjZXNzVGl0bGUoZXZlbnQub3ApXG4gICAgICB9KTtcbiAgICB9XG4gICAgcHJldkV2ZW50LmN1cnJlbnQgPSBldmVudDtcbiAgfSwgW2V2ZW50LCBwdXNoVG9hc3RdKTtcbiAgcmV0dXJuIG51bGw7XG59KTtcbmNvbnN0IGdldEhpc3RvcnlNZW51SXRlbSA9IHBhcmFtcyA9PiB7XG4gIGNvbnN0IHtcbiAgICBmZWF0dXJlcyxcbiAgICBoYXNWYWx1ZSxcbiAgICBjaGFuZ2VzT3BlblxuICB9ID0gcGFyYW1zO1xuICBpZiAoIWZlYXR1cmVzLnJldmlld0NoYW5nZXMpIHJldHVybiBudWxsO1xuICByZXR1cm4ge1xuICAgIGFjdGlvbjogXCJyZXZpZXdDaGFuZ2VzXCIsXG4gICAgdGl0bGU6IFwiUmV2aWV3IGNoYW5nZXNcIixcbiAgICBpY29uOiBSZXN0b3JlSWNvbixcbiAgICBpc0Rpc2FibGVkOiBjaGFuZ2VzT3BlbiB8fCAhaGFzVmFsdWVcbiAgfTtcbn07XG5jb25zdCBnZXRJbnNwZWN0SXRlbSA9IF9yZWYxMyA9PiB7XG4gIGxldCB7XG4gICAgaGFzVmFsdWVcbiAgfSA9IF9yZWYxMztcbiAgcmV0dXJuIHtcbiAgICBhY3Rpb246IFwiaW5zcGVjdFwiLFxuICAgIHRpdGxlOiBcIkluc3BlY3RcIixcbiAgICBpY29uOiBCaW5hcnlEb2N1bWVudEljb24sXG4gICAgaXNEaXNhYmxlZDogIWhhc1ZhbHVlLFxuICAgIHNob3J0Y3V0OiBcIkN0cmwrQWx0K0lcIlxuICB9O1xufTtcbmNvbnN0IGdldFByb2R1Y3Rpb25QcmV2aWV3SXRlbSA9IF9yZWYxNCA9PiB7XG4gIGxldCB7XG4gICAgcHJldmlld1VybFxuICB9ID0gX3JlZjE0O1xuICBpZiAoIXByZXZpZXdVcmwpIHJldHVybiBudWxsO1xuICByZXR1cm4ge1xuICAgIGFjdGlvbjogXCJwcm9kdWN0aW9uLXByZXZpZXdcIixcbiAgICB0aXRsZTogXCJPcGVuIHByZXZpZXdcIixcbiAgICBpY29uOiBFYXJ0aEFtZXJpY2FzSWNvbixcbiAgICBzaG9ydGN1dDogXCJDdHJsK0FsdCtPXCJcbiAgfTtcbn07XG5jb25zdCBnZXRNZW51SXRlbXMgPSBwYXJhbXMgPT4ge1xuICBjb25zdCBpdGVtcyA9IFtnZXRQcm9kdWN0aW9uUHJldmlld0l0ZW0sIGdldEhpc3RvcnlNZW51SXRlbSwgZ2V0SW5zcGVjdEl0ZW1dLmZpbHRlcihCb29sZWFuKS5tYXAoZm4gPT4gZm4ocGFyYW1zKSk7XG4gIHJldHVybiBpdGVtcy5maWx0ZXIoaSA9PiBpICE9PSBudWxsKTtcbn07XG5jb25zdCBpc1Nhbml0eURvY3VtZW50ID0gdmFsdWUgPT4gaXNSZWNvcmQodmFsdWUpICYmIHR5cGVvZiB2YWx1ZS5faWQgPT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIHZhbHVlLl90eXBlID09PSBcInN0cmluZ1wiO1xuZnVuY3Rpb24gdXNlUHJldmlld1VybCh2YWx1ZSkge1xuICBjb25zdCBbcHJldmlld1VybCwgc2V0UHJldmlld1VybF0gPSB1c2VTdGF0ZSh2b2lkIDApO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCB7XG4gICAgcmVzb2x2ZVByb2R1Y3Rpb25VcmxcbiAgfSA9IHVzZVNvdXJjZSgpLmRvY3VtZW50O1xuICBjb25zdCB2YWx1ZSQgPSB1c2VBc09ic2VydmFibGUodmFsdWUpO1xuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhbHVlJC5waXBlKFxuICAgIC8vIHRoaXMgc28gdGhhdCB0aGUgcHJldmlldyBVUkwgaXNuJ3QgZmV0Y2hlZCBvbiBldmVyeSBrZXlzdHJva2VcbiAgICBkZWJvdW5jZVRpbWUoNTAwKSwgc3dpdGNoTWFwKGRvY3VtZW50ID0+IGlzU2FuaXR5RG9jdW1lbnQoZG9jdW1lbnQpID8gZnJvbShyZXNvbHZlUHJvZHVjdGlvblVybCh7XG4gICAgICBkb2N1bWVudFxuICAgIH0pKSA6IG9mKHZvaWQgMCkpLCBjYXRjaEVycm9yKGUgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGlzUmVjb3JkKGUpICYmIHR5cGVvZiBlLm1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyBlLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIjtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFuIGVycm9yIHdhcyB0aHJvd24gd2hpbGUgdHJ5aW5nIHRvIGdldCB5b3VyIHByZXZpZXcgdXJsOiBcIi5jb25jYXQobWVzc2FnZSkpO1xuICAgIH0pKS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogc2V0UHJldmlld1VybCxcbiAgICAgIGVycm9yOiBzZXRFcnJvclxuICAgIH0pO1xuICB9LCBbcmVzb2x2ZVByb2R1Y3Rpb25VcmwsIHZhbHVlJF0pO1xuICByZXR1cm4gcHJldmlld1VybDtcbn1cbmZ1bmN0aW9uIGdldEluaXRpYWxWYWx1ZVRlbXBsYXRlT3B0cyh0ZW1wbGF0ZXMsIG9wdHMpIHtcbiAgY29uc3QgcGF5bG9hZCA9IG9wdHMucGFuZVBheWxvYWQgfHwge307XG4gIGNvbnN0IHN0cnVjdHVyZU5vZGVUZW1wbGF0ZSA9IG9wdHMudGVtcGxhdGVOYW1lO1xuICBpZiAob3B0cy51cmxUZW1wbGF0ZSAmJiBzdHJ1Y3R1cmVOb2RlVGVtcGxhdGUgJiYgc3RydWN0dXJlTm9kZVRlbXBsYXRlICE9PSBvcHRzLnVybFRlbXBsYXRlKSB7XG4gICAgY29uc29sZS53YXJuKFwiQ29uZmxpY3RpbmcgdGVtcGxhdGVzOiBVUkwgc2F5cyBcXFwiXCIuY29uY2F0KG9wdHMudXJsVGVtcGxhdGUsIFwiXFxcIiwgc3RydWN0dXJlIG5vZGUgc2F5cyBcXFwiXCIpLmNvbmNhdChzdHJ1Y3R1cmVOb2RlVGVtcGxhdGUsIFwiXFxcIi4gVXNpbmcgXFxcIlwiKS5jb25jYXQoc3RydWN0dXJlTm9kZVRlbXBsYXRlLCBcIlxcXCIuXCIpKTtcbiAgfVxuICBjb25zdCB0ZW1wbGF0ZSA9IHN0cnVjdHVyZU5vZGVUZW1wbGF0ZSB8fCBvcHRzLnVybFRlbXBsYXRlO1xuICBjb25zdCB0eXBlVGVtcGxhdGVzID0gdGVtcGxhdGVzLmZpbHRlcih0ID0+IHQuc2NoZW1hVHlwZSA9PT0gb3B0cy5kb2N1bWVudFR5cGUpO1xuICBjb25zdCB0ZW1wbGF0ZVBhcmFtcyA9IHtcbiAgICAuLi5vcHRzLnRlbXBsYXRlUGFyYW1zLFxuICAgIC4uLih0eXBlb2YgcGF5bG9hZCA9PT0gXCJvYmplY3RcIiA/IHBheWxvYWQgfHwge30gOiB7fSlcbiAgfTtcbiAgbGV0IHRlbXBsYXRlTmFtZSA9IHRlbXBsYXRlO1xuICBpZiAoIXRlbXBsYXRlICYmIHR5cGVUZW1wbGF0ZXMubGVuZ3RoID09PSAxKSB7XG4gICAgdGVtcGxhdGVOYW1lID0gdHlwZVRlbXBsYXRlc1swXS5pZDtcbiAgfVxuICByZXR1cm4ge1xuICAgIHRlbXBsYXRlTmFtZSxcbiAgICB0ZW1wbGF0ZVBhcmFtc1xuICB9O1xufVxuY29uc3QgZW1wdHlPYmplY3QgPSB7fTtcbmNvbnN0IERvY3VtZW50UGFuZVByb3ZpZGVyID0gbWVtbyhwcm9wcyA9PiB7XG4gIGNvbnN0IHtcbiAgICBjaGlsZHJlbixcbiAgICBpbmRleCxcbiAgICBwYW5lLFxuICAgIHBhbmVLZXlcbiAgfSA9IHByb3BzO1xuICBjb25zdCBzY2hlbWEgPSB1c2VTY2hlbWEoKTtcbiAgY29uc3QgdGVtcGxhdGVzID0gdXNlVGVtcGxhdGVzKCk7XG4gIGNvbnN0IHtcbiAgICBhY3Rpb25zOiBkb2N1bWVudEFjdGlvbnMsXG4gICAgYmFkZ2VzOiBkb2N1bWVudEJhZGdlcyxcbiAgICB1bnN0YWJsZV9sYW5ndWFnZUZpbHRlcjogbGFuZ3VhZ2VGaWx0ZXJSZXNvbHZlclxuICB9ID0gdXNlU291cmNlKCkuZG9jdW1lbnQ7XG4gIGNvbnN0IHByZXNlbmNlU3RvcmUgPSB1c2VQcmVzZW5jZVN0b3JlKCk7XG4gIGNvbnN0IHBhbmVSb3V0ZXIgPSB1c2VQYW5lUm91dGVyKCk7XG4gIGNvbnN0IHtcbiAgICBmZWF0dXJlc1xuICB9ID0gdXNlRGVza1Rvb2woKTtcbiAgY29uc3Qge1xuICAgIHB1c2g6IHB1c2hUb2FzdFxuICB9ID0gdXNlVG9hc3QoKTtcbiAgY29uc3Qge1xuICAgIG9wdGlvbnMsXG4gICAgbWVudUl0ZW1Hcm91cHMsXG4gICAgdGl0bGUgPSBudWxsLFxuICAgIHZpZXdzOiB2aWV3c1Byb3AgPSBbXVxuICB9ID0gcGFuZTtcbiAgY29uc3QgcGFuZU9wdGlvbnMgPSB1c2VVbmlxdWUob3B0aW9ucyk7XG4gIGNvbnN0IGRvY3VtZW50SWRSYXcgPSBwYW5lT3B0aW9ucy5pZDtcbiAgY29uc3QgZG9jdW1lbnRJZCA9IGdldFB1Ymxpc2hlZElkKGRvY3VtZW50SWRSYXcpO1xuICBjb25zdCBkb2N1bWVudFR5cGUgPSBvcHRpb25zLnR5cGU7XG4gIGNvbnN0IHBhbmVQYXJhbXMgPSB1c2VVbmlxdWUocGFuZVJvdXRlci5wYXJhbXMpO1xuICBjb25zdCBwYW5lUGF5bG9hZCA9IHVzZVVuaXF1ZShwYW5lUm91dGVyLnBheWxvYWQpO1xuICBjb25zdCB7XG4gICAgdGVtcGxhdGVOYW1lLFxuICAgIHRlbXBsYXRlUGFyYW1zXG4gIH0gPSB1c2VNZW1vKCgpID0+IGdldEluaXRpYWxWYWx1ZVRlbXBsYXRlT3B0cyh0ZW1wbGF0ZXMsIHtcbiAgICBkb2N1bWVudFR5cGUsXG4gICAgdGVtcGxhdGVOYW1lOiBwYW5lT3B0aW9ucy50ZW1wbGF0ZSxcbiAgICB0ZW1wbGF0ZVBhcmFtczogcGFuZU9wdGlvbnMudGVtcGxhdGVQYXJhbWV0ZXJzLFxuICAgIHBhbmVQYXlsb2FkLFxuICAgIHVybFRlbXBsYXRlOiBwYW5lUGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBwYW5lUGFyYW1zLnRlbXBsYXRlXG4gIH0pLCBbZG9jdW1lbnRUeXBlLCBwYW5lT3B0aW9ucywgcGFuZVBhcmFtcywgcGFuZVBheWxvYWQsIHRlbXBsYXRlc10pO1xuICBjb25zdCBpbml0aWFsVmFsdWVSYXcgPSB1c2VJbml0aWFsVmFsdWUoe1xuICAgIGRvY3VtZW50SWQsXG4gICAgZG9jdW1lbnRUeXBlLFxuICAgIHRlbXBsYXRlTmFtZSxcbiAgICB0ZW1wbGF0ZVBhcmFtc1xuICB9KTtcbiAgY29uc3QgaW5pdGlhbFZhbHVlID0gdXNlVW5pcXVlKGluaXRpYWxWYWx1ZVJhdyk7XG4gIGNvbnN0IHtcbiAgICBwYXRjaFxuICB9ID0gdXNlRG9jdW1lbnRPcGVyYXRpb24oZG9jdW1lbnRJZCwgZG9jdW1lbnRUeXBlKTtcbiAgY29uc3QgZWRpdFN0YXRlID0gdXNlRWRpdFN0YXRlKGRvY3VtZW50SWQsIGRvY3VtZW50VHlwZSk7XG4gIGNvbnN0IHtcbiAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uUmF3XG4gIH0gPSB1c2VWYWxpZGF0aW9uU3RhdHVzKGRvY3VtZW50SWQsIGRvY3VtZW50VHlwZSk7XG4gIGNvbnN0IGNvbm5lY3Rpb25TdGF0ZSA9IHVzZUNvbm5lY3Rpb25TdGF0ZShkb2N1bWVudElkLCBkb2N1bWVudFR5cGUpO1xuICBjb25zdCBzY2hlbWFUeXBlID0gc2NoZW1hLmdldChkb2N1bWVudFR5cGUpO1xuICBjb25zdCB2YWx1ZSA9IChlZGl0U3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IGVkaXRTdGF0ZS5kcmFmdCkgfHwgKGVkaXRTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogZWRpdFN0YXRlLnB1Ymxpc2hlZCkgfHwgaW5pdGlhbFZhbHVlLnZhbHVlO1xuICBjb25zdCBhY3Rpb25zID0gdXNlTWVtbygoKSA9PiBkb2N1bWVudEFjdGlvbnMoe1xuICAgIHNjaGVtYVR5cGU6IGRvY3VtZW50VHlwZSxcbiAgICBkb2N1bWVudElkXG4gIH0pLCBbZG9jdW1lbnRBY3Rpb25zLCBkb2N1bWVudElkLCBkb2N1bWVudFR5cGVdKTtcbiAgY29uc3QgYmFkZ2VzID0gdXNlTWVtbygoKSA9PiBkb2N1bWVudEJhZGdlcyh7XG4gICAgc2NoZW1hVHlwZTogZG9jdW1lbnRUeXBlLFxuICAgIGRvY3VtZW50SWRcbiAgfSksIFtkb2N1bWVudEJhZGdlcywgZG9jdW1lbnRJZCwgZG9jdW1lbnRUeXBlXSk7XG4gIGNvbnN0IGxhbmd1YWdlRmlsdGVyID0gdXNlTWVtbygoKSA9PiBsYW5ndWFnZUZpbHRlclJlc29sdmVyKHtcbiAgICBzY2hlbWFUeXBlOiBkb2N1bWVudFR5cGUsXG4gICAgZG9jdW1lbnRJZFxuICB9KSwgW2RvY3VtZW50SWQsIGRvY3VtZW50VHlwZSwgbGFuZ3VhZ2VGaWx0ZXJSZXNvbHZlcl0pO1xuICBjb25zdCB2YWxpZGF0aW9uID0gdXNlVW5pcXVlKHZhbGlkYXRpb25SYXcpO1xuICBjb25zdCB2aWV3cyA9IHVzZVVuaXF1ZSh2aWV3c1Byb3ApO1xuICBjb25zdCBwYXJhbXMgPSBwYW5lUm91dGVyLnBhcmFtcyB8fCBlbXB0eU9iamVjdDtcbiAgY29uc3QgW2ZvY3VzUGF0aCwgc2V0Rm9jdXNQYXRoXSA9IHVzZVN0YXRlKCgpID0+IHBhcmFtcy5wYXRoID8gZnJvbVN0cmluZyhwYXJhbXMucGF0aCkgOiBbXSk7XG4gIGNvbnN0IGFjdGl2ZVZpZXdJZCA9IHBhcmFtcy52aWV3IHx8IHZpZXdzWzBdICYmIHZpZXdzWzBdLmlkIHx8IG51bGw7XG4gIGNvbnN0IFt0aW1lbGluZU1vZGUsIHNldFRpbWVsaW5lTW9kZV0gPSB1c2VTdGF0ZShcImNsb3NlZFwiKTtcbiAgY29uc3QgY2hhbmdlc09wZW4gPSAhIXBhcmFtcy5zaW5jZTtcbiAgY29uc3QgW3RpbWVsaW5lRXJyb3IsIHNldFRpbWVsaW5lRXJyb3JdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IHRpbWVsaW5lU3RvcmUgPSB1c2VUaW1lbGluZVN0b3JlKHtcbiAgICBkb2N1bWVudElkLFxuICAgIGRvY3VtZW50VHlwZSxcbiAgICBvbkVycm9yOiBzZXRUaW1lbGluZUVycm9yLFxuICAgIHJldjogcGFyYW1zLnJldixcbiAgICBzaW5jZTogcGFyYW1zLnNpbmNlXG4gIH0pO1xuICBjb25zdCBvbk9sZGVyUmV2aXNpb24gPSB1c2VUaW1lbGluZVNlbGVjdG9yKHRpbWVsaW5lU3RvcmUsIHN0YXRlID0+IHN0YXRlLm9uT2xkZXJSZXZpc2lvbik7XG4gIGNvbnN0IHJldlRpbWUgPSB1c2VUaW1lbGluZVNlbGVjdG9yKHRpbWVsaW5lU3RvcmUsIHN0YXRlID0+IHN0YXRlLnJldlRpbWUpO1xuICBjb25zdCBzaW5jZUF0dHJpYnV0ZXMgPSB1c2VUaW1lbGluZVNlbGVjdG9yKHRpbWVsaW5lU3RvcmUsIHN0YXRlID0+IHN0YXRlLnNpbmNlQXR0cmlidXRlcyk7XG4gIGNvbnN0IHRpbWVsaW5lRGlzcGxheWVkID0gdXNlVGltZWxpbmVTZWxlY3Rvcih0aW1lbGluZVN0b3JlLCBzdGF0ZSA9PiBzdGF0ZS50aW1lbGluZURpc3BsYXllZCk7XG4gIGNvbnN0IHRpbWVsaW5lUmVhZHkgPSB1c2VUaW1lbGluZVNlbGVjdG9yKHRpbWVsaW5lU3RvcmUsIHN0YXRlID0+IHN0YXRlLnRpbWVsaW5lUmVhZHkpO1xuICBjb25zdCBwcmV2aWV3VXJsID0gdXNlUHJldmlld1VybCh2YWx1ZSk7XG4gIGNvbnN0IFtwcmVzZW5jZSwgc2V0UHJlc2VuY2VdID0gdXNlU3RhdGUoW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHByZXNlbmNlU3RvcmUuZG9jdW1lbnRQcmVzZW5jZShkb2N1bWVudElkKS5zdWJzY3JpYmUobmV4dFByZXNlbmNlID0+IHtcbiAgICAgIHNldFByZXNlbmNlKG5leHRQcmVzZW5jZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gIH0sIFtkb2N1bWVudElkLCBwcmVzZW5jZVN0b3JlXSk7XG4gIGNvbnN0IGhhc1ZhbHVlID0gQm9vbGVhbih2YWx1ZSk7XG4gIGNvbnN0IG1lbnVJdGVtcyA9IHVzZU1lbW8oKCkgPT4gZ2V0TWVudUl0ZW1zKHtcbiAgICBmZWF0dXJlcyxcbiAgICBoYXNWYWx1ZSxcbiAgICBjaGFuZ2VzT3BlbixcbiAgICBwcmV2aWV3VXJsXG4gIH0pLCBbY2hhbmdlc09wZW4sIGZlYXR1cmVzLCBoYXNWYWx1ZSwgcHJldmlld1VybF0pO1xuICBjb25zdCBpbnNwZWN0T3BlbiA9IHBhcmFtcy5pbnNwZWN0ID09PSBcIm9uXCI7XG4gIGNvbnN0IGNvbXBhcmVWYWx1ZSA9IGNoYW5nZXNPcGVuID8gc2luY2VBdHRyaWJ1dGVzIDogKGVkaXRTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogZWRpdFN0YXRlLnB1Ymxpc2hlZCkgfHwgbnVsbDtcbiAgY29uc3QgcmVhZHkgPSBjb25uZWN0aW9uU3RhdGUgPT09IFwiY29ubmVjdGVkXCIgJiYgZWRpdFN0YXRlLnJlYWR5ICYmICh0aW1lbGluZVJlYWR5IHx8ICEhdGltZWxpbmVFcnJvcik7XG4gIGNvbnN0IGRpc3BsYXllZCA9IHVzZU1lbW8oKCkgPT4gb25PbGRlclJldmlzaW9uID8gdGltZWxpbmVEaXNwbGF5ZWQgfHwge1xuICAgIF9pZDogdmFsdWUuX2lkLFxuICAgIF90eXBlOiB2YWx1ZS5fdHlwZVxuICB9IDogdmFsdWUsIFtvbk9sZGVyUmV2aXNpb24sIHRpbWVsaW5lRGlzcGxheWVkLCB2YWx1ZV0pO1xuICBjb25zdCBzZXRUaW1lbGluZVJhbmdlID0gdXNlQ2FsbGJhY2soKG5ld1NpbmNlLCBuZXdSZXYpID0+IHtcbiAgICBwYW5lUm91dGVyLnNldFBhcmFtcyh7XG4gICAgICAuLi5wYW5lUm91dGVyLnBhcmFtcyxcbiAgICAgIHNpbmNlOiBuZXdTaW5jZSxcbiAgICAgIHJldjogbmV3UmV2IHx8IHZvaWQgMFxuICAgIH0pO1xuICB9LCBbcGFuZVJvdXRlcl0pO1xuICBjb25zdCBoYW5kbGVGb2N1cyA9IHVzZUNhbGxiYWNrKG5leHRGb2N1c1BhdGggPT4ge1xuICAgIHNldEZvY3VzUGF0aChuZXh0Rm9jdXNQYXRoKTtcbiAgICBwcmVzZW5jZVN0b3JlLnNldExvY2F0aW9uKFt7XG4gICAgICB0eXBlOiBcImRvY3VtZW50XCIsXG4gICAgICBkb2N1bWVudElkLFxuICAgICAgcGF0aDogbmV4dEZvY3VzUGF0aCxcbiAgICAgIGxhc3RBY3RpdmVBdDogLyogQF9fUFVSRV9fICovbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfV0pO1xuICB9LCBbZG9jdW1lbnRJZCwgcHJlc2VuY2VTdG9yZSwgc2V0Rm9jdXNQYXRoXSk7XG4gIGNvbnN0IGhhbmRsZUJsdXIgPSB1c2VDYWxsYmFjayhibHVycmVkUGF0aCA9PiB7XG4gICAgc2V0Rm9jdXNQYXRoKFtdKTtcbiAgfSwgW3NldEZvY3VzUGF0aF0pO1xuICBjb25zdCBwYXRjaFJlZiA9IHVzZVJlZigoKSA9PiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm9wZVwiKTtcbiAgfSk7XG4gIHBhdGNoUmVmLmN1cnJlbnQgPSBldmVudCA9PiB7XG4gICAgcGF0Y2guZXhlY3V0ZSh0b011dGF0aW9uUGF0Y2hlcyhldmVudC5wYXRjaGVzKSwgaW5pdGlhbFZhbHVlLnZhbHVlKTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gdXNlQ2FsbGJhY2soZXZlbnQgPT4gcGF0Y2hSZWYuY3VycmVudChldmVudCksIFtdKTtcbiAgY29uc3QgaGFuZGxlSGlzdG9yeUNsb3NlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHBhbmVSb3V0ZXIuc2V0UGFyYW1zKHtcbiAgICAgIC4uLnBhcmFtcyxcbiAgICAgIHNpbmNlOiB2b2lkIDBcbiAgICB9KTtcbiAgfSwgW3BhbmVSb3V0ZXIsIHBhcmFtc10pO1xuICBjb25zdCBoYW5kbGVIaXN0b3J5T3BlbiA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBwYW5lUm91dGVyLnNldFBhcmFtcyh7XG4gICAgICAuLi5wYXJhbXMsXG4gICAgICBzaW5jZTogXCJAbGFzdFB1Ymxpc2hlZFwiXG4gICAgfSk7XG4gIH0sIFtwYW5lUm91dGVyLCBwYXJhbXNdKTtcbiAgY29uc3QgaGFuZGxlUGFuZUNsb3NlID0gdXNlQ2FsbGJhY2soKCkgPT4gcGFuZVJvdXRlci5jbG9zZUN1cnJlbnQoKSwgW3BhbmVSb3V0ZXJdKTtcbiAgY29uc3QgaGFuZGxlUGFuZVNwbGl0ID0gdXNlQ2FsbGJhY2soKCkgPT4gcGFuZVJvdXRlci5kdXBsaWNhdGVDdXJyZW50KCksIFtwYW5lUm91dGVyXSk7XG4gIGNvbnN0IHRvZ2dsZUluc3BlY3QgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgbGV0IHRvZ2dsZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogIWluc3BlY3RPcGVuO1xuICAgIGlmICh0b2dnbGUpIHtcbiAgICAgIHBhbmVSb3V0ZXIuc2V0UGFyYW1zKHtcbiAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICBpbnNwZWN0OiBcIm9uXCJcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYW5lUm91dGVyLnNldFBhcmFtcyhvbWl0KHBhcmFtcywgXCJpbnNwZWN0XCIpKTtcbiAgICB9XG4gIH0sIFtpbnNwZWN0T3BlbiwgcGFuZVJvdXRlciwgcGFyYW1zXSk7XG4gIGNvbnN0IGhhbmRsZU1lbnVBY3Rpb24gPSB1c2VDYWxsYmFjayhpdGVtID0+IHtcbiAgICBpZiAoaXRlbS5hY3Rpb24gPT09IFwicHJvZHVjdGlvbi1wcmV2aWV3XCIgJiYgcHJldmlld1VybCkge1xuICAgICAgd2luZG93Lm9wZW4ocHJldmlld1VybCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGl0ZW0uYWN0aW9uID09PSBcImluc3BlY3RcIikge1xuICAgICAgdG9nZ2xlSW5zcGVjdCh0cnVlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoaXRlbS5hY3Rpb24gPT09IFwicmV2aWV3Q2hhbmdlc1wiKSB7XG4gICAgICBoYW5kbGVIaXN0b3J5T3BlbigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSwgW2hhbmRsZUhpc3RvcnlPcGVuLCBwcmV2aWV3VXJsLCB0b2dnbGVJbnNwZWN0XSk7XG4gIGNvbnN0IGhhbmRsZUtleVVwID0gdXNlQ2FsbGJhY2soZXZlbnQgPT4ge1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBtZW51SXRlbXMpIHtcbiAgICAgIGlmIChpdGVtLnNob3J0Y3V0KSB7XG4gICAgICAgIGlmIChpc0hvdGtleShpdGVtLnNob3J0Y3V0LCBldmVudCkpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGhhbmRsZU1lbnVBY3Rpb24oaXRlbSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBbaGFuZGxlTWVudUFjdGlvbiwgbWVudUl0ZW1zXSk7XG4gIGNvbnN0IGhhbmRsZUluc3BlY3RDbG9zZSA9IHVzZUNhbGxiYWNrKCgpID0+IHRvZ2dsZUluc3BlY3QoZmFsc2UpLCBbdG9nZ2xlSW5zcGVjdF0pO1xuICBjb25zdCBbb3BlblBhdGgsIG9uU2V0T3BlblBhdGhdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmllbGRHcm91cFN0YXRlLCBvblNldEZpZWxkR3JvdXBTdGF0ZV0gPSB1c2VTdGF0ZSgpO1xuICBjb25zdCBbY29sbGFwc2VkUGF0aHMsIG9uU2V0Q29sbGFwc2VkUGF0aF0gPSB1c2VTdGF0ZSgpO1xuICBjb25zdCBbY29sbGFwc2VkRmllbGRTZXRzLCBvblNldENvbGxhcHNlZEZpZWxkU2V0c10gPSB1c2VTdGF0ZSgpO1xuICBjb25zdCBoYW5kbGVPblNldENvbGxhcHNlZFBhdGggPSB1c2VDYWxsYmFjaygocGF0aCwgY29sbGFwc2VkKSA9PiB7XG4gICAgb25TZXRDb2xsYXBzZWRQYXRoKHByZXZTdGF0ZSA9PiBzZXRBdFBhdGgocHJldlN0YXRlLCBwYXRoLCBjb2xsYXBzZWQpKTtcbiAgfSwgW10pO1xuICBjb25zdCBoYW5kbGVPblNldENvbGxhcHNlZEZpZWxkU2V0ID0gdXNlQ2FsbGJhY2soKHBhdGgsIGNvbGxhcHNlZCkgPT4ge1xuICAgIG9uU2V0Q29sbGFwc2VkRmllbGRTZXRzKHByZXZTdGF0ZSA9PiBzZXRBdFBhdGgocHJldlN0YXRlLCBwYXRoLCBjb2xsYXBzZWQpKTtcbiAgfSwgW10pO1xuICBjb25zdCBoYW5kbGVTZXRBY3RpdmVGaWVsZEdyb3VwID0gdXNlQ2FsbGJhY2soKHBhdGgsIGdyb3VwTmFtZSkgPT4gb25TZXRGaWVsZEdyb3VwU3RhdGUocHJldlN0YXRlID0+IHNldEF0UGF0aChwcmV2U3RhdGUsIHBhdGgsIGdyb3VwTmFtZSkpLCBbXSk7XG4gIGNvbnN0IHJlcXVpcmVkUGVybWlzc2lvbiA9IHZhbHVlLl9jcmVhdGVkQXQgPyBcInVwZGF0ZVwiIDogXCJjcmVhdGVcIjtcbiAgY29uc3QgbGl2ZUVkaXQgPSB1c2VNZW1vKCgpID0+IEJvb2xlYW4oc2NoZW1hVHlwZSA9PSBudWxsID8gdm9pZCAwIDogc2NoZW1hVHlwZS5saXZlRWRpdCksIFtzY2hlbWFUeXBlID09IG51bGwgPyB2b2lkIDAgOiBzY2hlbWFUeXBlLmxpdmVFZGl0XSk7XG4gIGNvbnN0IGRvY0lkID0gdmFsdWUuX2lkID8gdmFsdWUuX2lkIDogXCJkdW1teS1pZFwiO1xuICBjb25zdCBkb2NQZXJtaXNzaW9uc0lucHV0ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnZhbHVlLFxuICAgICAgX2lkOiBsaXZlRWRpdCA/IGdldFB1Ymxpc2hlZElkKGRvY0lkKSA6IGdldERyYWZ0SWQoZG9jSWQpXG4gICAgfTtcbiAgfSwgW2xpdmVFZGl0LCB2YWx1ZSwgZG9jSWRdKTtcbiAgY29uc3QgW3Blcm1pc3Npb25zLCBpc1Blcm1pc3Npb25zTG9hZGluZ10gPSB1c2VEb2N1bWVudFZhbHVlUGVybWlzc2lvbnMoe1xuICAgIGRvY3VtZW50OiBkb2NQZXJtaXNzaW9uc0lucHV0LFxuICAgIHBlcm1pc3Npb246IHJlcXVpcmVkUGVybWlzc2lvblxuICB9KTtcbiAgY29uc3QgaXNOb25FeGlzdGVudCA9ICEodmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlLl9pZCk7XG4gIGNvbnN0IHJlYWRPbmx5ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgaGFzTm9QZXJtaXNzaW9uID0gIWlzUGVybWlzc2lvbnNMb2FkaW5nICYmICEocGVybWlzc2lvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IHBlcm1pc3Npb25zLmdyYW50ZWQpO1xuICAgIGNvbnN0IHVwZGF0ZUFjdGlvbkRpc2FibGVkID0gIWlzQWN0aW9uRW5hYmxlZChzY2hlbWFUeXBlLCBcInVwZGF0ZVwiKTtcbiAgICBjb25zdCBjcmVhdGVBY3Rpb25EaXNhYmxlZCA9IGlzTm9uRXhpc3RlbnQgJiYgIWlzQWN0aW9uRW5hYmxlZChzY2hlbWFUeXBlLCBcImNyZWF0ZVwiKTtcbiAgICBjb25zdCByZWNvbm5lY3RpbmcgPSBjb25uZWN0aW9uU3RhdGUgPT09IFwicmVjb25uZWN0aW5nXCI7XG4gICAgcmV0dXJuICFyZWFkeSB8fCByZXZUaW1lICE9PSBudWxsIHx8IGhhc05vUGVybWlzc2lvbiB8fCB1cGRhdGVBY3Rpb25EaXNhYmxlZCB8fCBjcmVhdGVBY3Rpb25EaXNhYmxlZCB8fCByZWNvbm5lY3Rpbmc7XG4gIH0sIFtjb25uZWN0aW9uU3RhdGUsIGlzTm9uRXhpc3RlbnQsIGlzUGVybWlzc2lvbnNMb2FkaW5nLCBwZXJtaXNzaW9ucyA9PSBudWxsID8gdm9pZCAwIDogcGVybWlzc2lvbnMuZ3JhbnRlZCwgcmVhZHksIHJldlRpbWUsIHNjaGVtYVR5cGVdKTtcbiAgY29uc3QgZm9ybVN0YXRlID0gdXNlRm9ybVN0YXRlKHNjaGVtYVR5cGUsIHtcbiAgICB2YWx1ZTogZGlzcGxheWVkLFxuICAgIHJlYWRPbmx5LFxuICAgIGNvbXBhcmlzb25WYWx1ZTogY29tcGFyZVZhbHVlLFxuICAgIGZvY3VzUGF0aCxcbiAgICBvcGVuUGF0aCxcbiAgICBjb2xsYXBzZWRQYXRocyxcbiAgICBwcmVzZW5jZSxcbiAgICB2YWxpZGF0aW9uLFxuICAgIGNvbGxhcHNlZEZpZWxkU2V0cyxcbiAgICBmaWVsZEdyb3VwU3RhdGUsXG4gICAgY2hhbmdlc09wZW5cbiAgfSk7XG4gIGNvbnN0IGZvcm1TdGF0ZVJlZiA9IHVzZVJlZihmb3JtU3RhdGUpO1xuICBmb3JtU3RhdGVSZWYuY3VycmVudCA9IGZvcm1TdGF0ZTtcbiAgY29uc3Qgc2V0T3BlblBhdGggPSB1c2VDYWxsYmFjayhwYXRoID0+IHtcbiAgICBjb25zdCBvcHMgPSBnZXRFeHBhbmRPcGVyYXRpb25zKGZvcm1TdGF0ZVJlZi5jdXJyZW50LCBwYXRoKTtcbiAgICBvcHMuZm9yRWFjaChvcCA9PiB7XG4gICAgICBpZiAob3AudHlwZSA9PT0gXCJleHBhbmRQYXRoXCIpIHtcbiAgICAgICAgb25TZXRDb2xsYXBzZWRQYXRoKHByZXZTdGF0ZSA9PiBzZXRBdFBhdGgocHJldlN0YXRlLCBvcC5wYXRoLCBmYWxzZSkpO1xuICAgICAgfVxuICAgICAgaWYgKG9wLnR5cGUgPT09IFwiZXhwYW5kRmllbGRTZXRcIikge1xuICAgICAgICBvblNldENvbGxhcHNlZEZpZWxkU2V0cyhwcmV2U3RhdGUgPT4gc2V0QXRQYXRoKHByZXZTdGF0ZSwgb3AucGF0aCwgZmFsc2UpKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcC50eXBlID09PSBcInNldFNlbGVjdGVkR3JvdXBcIikge1xuICAgICAgICBvblNldEZpZWxkR3JvdXBTdGF0ZShwcmV2U3RhdGUgPT4gc2V0QXRQYXRoKHByZXZTdGF0ZSwgb3AucGF0aCwgb3AuZ3JvdXBOYW1lKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb25TZXRPcGVuUGF0aChwYXRoKTtcbiAgfSwgW2Zvcm1TdGF0ZVJlZl0pO1xuICBjb25zdCBkb2N1bWVudFBhbmUgPSB7XG4gICAgYWN0aW9ucyxcbiAgICBhY3RpdmVWaWV3SWQsXG4gICAgYmFkZ2VzLFxuICAgIGNoYW5nZXNPcGVuLFxuICAgIGNvbGxhcHNlZEZpZWxkU2V0cyxcbiAgICBjb2xsYXBzZWRQYXRocyxcbiAgICBjb21wYXJlVmFsdWUsXG4gICAgY29ubmVjdGlvblN0YXRlLFxuICAgIGRpc3BsYXllZCxcbiAgICBkb2N1bWVudElkLFxuICAgIGRvY3VtZW50SWRSYXcsXG4gICAgZG9jdW1lbnRUeXBlLFxuICAgIGVkaXRTdGF0ZSxcbiAgICBmb2N1c1BhdGgsXG4gICAgbWVudUl0ZW1zLFxuICAgIG9uQmx1cjogaGFuZGxlQmx1cixcbiAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLFxuICAgIG9uRm9jdXM6IGhhbmRsZUZvY3VzLFxuICAgIG9uUGF0aE9wZW46IHNldE9wZW5QYXRoLFxuICAgIG9uSGlzdG9yeUNsb3NlOiBoYW5kbGVIaXN0b3J5Q2xvc2UsXG4gICAgb25IaXN0b3J5T3BlbjogaGFuZGxlSGlzdG9yeU9wZW4sXG4gICAgb25JbnNwZWN0Q2xvc2U6IGhhbmRsZUluc3BlY3RDbG9zZSxcbiAgICBvbktleVVwOiBoYW5kbGVLZXlVcCxcbiAgICBvbk1lbnVBY3Rpb246IGhhbmRsZU1lbnVBY3Rpb24sXG4gICAgb25QYW5lQ2xvc2U6IGhhbmRsZVBhbmVDbG9zZSxcbiAgICBvblBhbmVTcGxpdDogaGFuZGxlUGFuZVNwbGl0LFxuICAgIG9uU2V0QWN0aXZlRmllbGRHcm91cDogaGFuZGxlU2V0QWN0aXZlRmllbGRHcm91cCxcbiAgICBvblNldENvbGxhcHNlZFBhdGg6IGhhbmRsZU9uU2V0Q29sbGFwc2VkUGF0aCxcbiAgICBvblNldENvbGxhcHNlZEZpZWxkU2V0OiBoYW5kbGVPblNldENvbGxhcHNlZEZpZWxkU2V0LFxuICAgIGluZGV4LFxuICAgIGluc3BlY3RPcGVuLFxuICAgIHZhbGlkYXRpb24sXG4gICAgbWVudUl0ZW1Hcm91cHM6IG1lbnVJdGVtR3JvdXBzIHx8IFtdLFxuICAgIHBhbmVLZXksXG4gICAgcHJldmlld1VybCxcbiAgICByZWFkeSxcbiAgICBzY2hlbWFUeXBlLFxuICAgIGlzUGVybWlzc2lvbnNMb2FkaW5nLFxuICAgIHBlcm1pc3Npb25zLFxuICAgIHNldFRpbWVsaW5lTW9kZSxcbiAgICBzZXRUaW1lbGluZVJhbmdlLFxuICAgIHRpbWVsaW5lRXJyb3IsXG4gICAgdGltZWxpbmVNb2RlLFxuICAgIHRpbWVsaW5lU3RvcmUsXG4gICAgdGl0bGUsXG4gICAgdmFsdWUsXG4gICAgdmlld3MsXG4gICAgZm9ybVN0YXRlLFxuICAgIHVuc3RhYmxlX2xhbmd1YWdlRmlsdGVyOiBsYW5ndWFnZUZpbHRlclxuICB9O1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjb25uZWN0aW9uU3RhdGUgPT09IFwicmVjb25uZWN0aW5nXCIpIHtcbiAgICAgIHB1c2hUb2FzdCh7XG4gICAgICAgIGlkOiBcInNhbml0eS9kZXNrL3JlY29ubmVjdGluZ1wiLFxuICAgICAgICBzdGF0dXM6IFwid2FybmluZ1wiLFxuICAgICAgICB0aXRsZTogLyogQF9fUFVSRV9fICovanN4KEZyYWdtZW50LCB7XG4gICAgICAgICAgY2hpbGRyZW46IFwiQ29ubmVjdGlvbiBsb3N0LiBSZWNvbm5lY3RpbmdcXHUyMDI2XCJcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2Nvbm5lY3Rpb25TdGF0ZSwgcHVzaFRvYXN0XSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGlmIChyZWFkeSAmJiBwYXJhbXMucGF0aCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBwYXRoLFxuICAgICAgICAuLi5yZXN0UGFyYW1zXG4gICAgICB9ID0gcGFyYW1zO1xuICAgICAgY29uc3QgcGF0aEZyb21VcmwgPSByZXNvbHZlS2V5ZWRQYXRoKChfYSA9IGZvcm1TdGF0ZVJlZi5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWUsIGZyb21TdHJpbmcocGF0aCkpO1xuICAgICAgc2V0Rm9jdXNQYXRoKHBhdGhGcm9tVXJsKTtcbiAgICAgIHNldE9wZW5QYXRoKHBhdGhGcm9tVXJsKTtcbiAgICAgIHBhbmVSb3V0ZXIuc2V0UGFyYW1zKHJlc3RQYXJhbXMpO1xuICAgIH1cbiAgfSwgW3BhcmFtcywgZG9jdW1lbnRJZCwgc2V0T3BlblBhdGgsIHJlYWR5LCBwYW5lUm91dGVyXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goRG9jdW1lbnRQYW5lQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBkb2N1bWVudFBhbmUsXG4gICAgY2hpbGRyZW5cbiAgfSk7XG59KTtcbkRvY3VtZW50UGFuZVByb3ZpZGVyLmRpc3BsYXlOYW1lID0gXCJEb2N1bWVudFBhbmVQcm92aWRlclwiO1xuY29uc3QgVElNRUxJTkVfTEFCRUxTID0ge1xuICBjcmVhdGU6IFwiY3JlYXRlZFwiLFxuICBkZWxldGU6IFwiZGVsZXRlZFwiLFxuICBkaXNjYXJkRHJhZnQ6IFwiZGlzY2FyZGVkIGRyYWZ0XCIsXG4gIGluaXRpYWw6IFwiY3JlYXRlZFwiLFxuICBlZGl0RHJhZnQ6IFwiZWRpdGVkXCIsXG4gIGVkaXRMaXZlOiBcImxpdmUgZWRpdGVkXCIsXG4gIHB1Ymxpc2g6IFwicHVibGlzaGVkXCIsXG4gIHVucHVibGlzaDogXCJ1bnB1Ymxpc2hlZFwiXG59O1xuY29uc3QgVElNRUxJTkVfSUNPTl9DT01QT05FTlRTID0ge1xuICBjcmVhdGU6IEFkZENpcmNsZUljb24sXG4gIGRlbGV0ZTogVHJhc2hJY29uLFxuICBkaXNjYXJkRHJhZnQ6IENsb3NlSWNvbixcbiAgaW5pdGlhbDogQWRkQ2lyY2xlSWNvbixcbiAgZWRpdERyYWZ0OiBFZGl0SWNvbixcbiAgZWRpdExpdmU6IEVkaXRJY29uLFxuICBwdWJsaXNoOiBQdWJsaXNoSWNvbixcbiAgdW5wdWJsaXNoOiBVbnB1Ymxpc2hJY29uXG59O1xuZnVuY3Rpb24gZm9ybWF0VGltZWxpbmVFdmVudExhYmVsKHR5cGUpIHtcbiAgcmV0dXJuIFRJTUVMSU5FX0xBQkVMU1t0eXBlXTtcbn1cbmZ1bmN0aW9uIGdldFRpbWVsaW5lRXZlbnRJY29uQ29tcG9uZW50KHR5cGUpIHtcbiAgcmV0dXJuIFRJTUVMSU5FX0lDT05fQ09NUE9ORU5UU1t0eXBlXTtcbn1cbmZ1bmN0aW9uIFVzZXJBdmF0YXJTdGFjayhfcmVmMTUpIHtcbiAgbGV0IHtcbiAgICBtYXhMZW5ndGgsXG4gICAgdXNlcklkc1xuICB9ID0gX3JlZjE1O1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KEF2YXRhclN0YWNrLCB7XG4gICAgbWF4TGVuZ3RoLFxuICAgIGNoaWxkcmVuOiB1c2VySWRzLm1hcCh1c2VySWQgPT4gLyogQF9fUFVSRV9fICovanN4KFVzZXJBdmF0YXIsIHtcbiAgICAgIHVzZXI6IHVzZXJJZCxcbiAgICAgIHdpdGhUb29sdGlwOiB0cnVlXG4gICAgfSwgdXNlcklkKSlcbiAgfSk7XG59XG5jb25zdCBJY29uV3JhcHBlciA9IHN0eWxlZChGbGV4KShfcmVmMTYgPT4ge1xuICBsZXQge1xuICAgIHRoZW1lXG4gIH0gPSBfcmVmMTY7XG4gIHZhciBfYTtcbiAgY29uc3QgYm9yZGVyQ29sb3IgPSAoX2EgPSB0aGVtZS5zYW5pdHkuY29sb3IuYmFzZS5za2VsZXRvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmZyb207XG4gIHJldHVybiBjc3MoX3RlbXBsYXRlT2JqZWN0MyB8fCAoX3RlbXBsYXRlT2JqZWN0MyA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoW1wiXFxuICAgIC0tdGltZWxpbmUtaGFpcmxpbmUtd2lkdGg6IDFweDtcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgICB6LWluZGV4OiAyO1xcbiAgICBtYXJnaW46IDA7XFxuICAgIHBhZGRpbmc6IDA7XFxuXFxuICAgICY6OmJlZm9yZSB7XFxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICAgIGNvbnRlbnQ6ICcnO1xcbiAgICAgIGhlaWdodDogMTAwJTtcXG4gICAgICB3aWR0aDogdmFyKC0tdGltZWxpbmUtaGFpcmxpbmUtd2lkdGgpO1xcbiAgICAgIGJhY2tncm91bmQ6IFwiLCBcIjtcXG4gICAgICB0b3A6IDA7XFxuICAgICAgbGVmdDogY2FsYygoMTAwJSAtIHZhcigtLXRpbWVsaW5lLWhhaXJsaW5lLXdpZHRoKSkgLyAyKTtcXG4gICAgICB6LWluZGV4OiAxO1xcbiAgICB9XFxuICBcIl0pKSwgYm9yZGVyQ29sb3IpO1xufSk7XG5jb25zdCBSb290JDUgPSBzdHlsZWQoQnV0dG9uKShfcmVmMTcgPT4ge1xuICBsZXQge1xuICAgICRzZWxlY3RlZFxuICB9ID0gX3JlZjE3O1xuICByZXR1cm4gY3NzKF90ZW1wbGF0ZU9iamVjdDQgfHwgKF90ZW1wbGF0ZU9iamVjdDQgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFtcIlxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICAgIHdpZHRoOiAxMDAlO1xcblxcbiAgICAvKiBMaW5lIHN0eWxpbmcgKi9cXG4gICAgJltkYXRhLWZpcnN0XSBcIiwgXCI6OmJlZm9yZSB7XFxuICAgICAgaGVpZ2h0OiA1MCU7XFxuICAgICAgdG9wOiB1bnNldDtcXG4gICAgICBib3R0b206IDA7XFxuICAgIH1cXG5cXG4gICAgJltkYXRhLWxhc3RdIFwiLCBcIjo6YmVmb3JlIHtcXG4gICAgICBoZWlnaHQ6IDUwJTtcXG4gICAgfVxcblxcbiAgICBcIiwgXCJcXG4gIFwiXSkpLCBJY29uV3JhcHBlciwgSWNvbldyYXBwZXIsICRzZWxlY3RlZCAmJiBjc3MoX3RlbXBsYXRlT2JqZWN0NSB8fCAoX3RlbXBsYXRlT2JqZWN0NSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoW1wiXFxuICAgICAgXCIsIFwiOjpiZWZvcmUge1xcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XFxuICAgICAgfVxcbiAgICBcIl0pKSwgSWNvbldyYXBwZXIpKTtcbn0pO1xuY29uc3QgSWNvbkJveCA9IHN0eWxlZChCb3gpKF90ZW1wbGF0ZU9iamVjdDYgfHwgKF90ZW1wbGF0ZU9iamVjdDYgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFtcIlxcbiAgYmFja2dyb3VuZDogdmFyKC0tY2FyZC1iZy1jb2xvcik7XFxuICBib3JkZXItcmFkaXVzOiA1MHB4O1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgei1pbmRleDogMjtcXG5cIl0pKSk7XG5jb25zdCBFdmVudExhYmVsID0gc3R5bGVkKFRleHQpKF90ZW1wbGF0ZU9iamVjdDcgfHwgKF90ZW1wbGF0ZU9iamVjdDcgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFtcIlxcbiAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7XFxuXCJdKSkpO1xuY29uc3QgVGltZXN0YW1wQm94ID0gc3R5bGVkKEJveCkoX3RlbXBsYXRlT2JqZWN0OCB8fCAoX3RlbXBsYXRlT2JqZWN0OCA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoW1wiXFxuICBtaW4td2lkdGg6IDFyZW07XFxuICBtYXJnaW4tbGVmdDogXCIsIFwiO1xcblwiXSkpLCBfcmVmMTggPT4ge1xuICBsZXQge1xuICAgIHRoZW1lXG4gIH0gPSBfcmVmMTg7XG4gIHJldHVybiBcIi1cIi5jb25jYXQocmVtKHRoZW1lLnNhbml0eS5zcGFjZVsxXSkpO1xufSk7XG5jb25zdCBUSU1FTElORV9JVEVNX0VWRU5UX1RPTkUgPSB7XG4gIGluaXRpYWw6IFwicHJpbWFyeVwiLFxuICBjcmVhdGU6IFwicHJpbWFyeVwiLFxuICBwdWJsaXNoOiBcInBvc2l0aXZlXCIsXG4gIGVkaXRMaXZlOiBcImNhdXRpb25cIixcbiAgZWRpdERyYWZ0OiBcImNhdXRpb25cIixcbiAgdW5wdWJsaXNoOiBcImNyaXRpY2FsXCIsXG4gIGRpc2NhcmREcmFmdDogXCJjcml0aWNhbFwiLFxuICBkZWxldGU6IFwiY3JpdGljYWxcIixcbiAgd2l0aGluU2VsZWN0aW9uOiBcInByaW1hcnlcIlxufTtcbmZ1bmN0aW9uIFRpbWVsaW5lSXRlbShfcmVmMTkpIHtcbiAgbGV0IHtcbiAgICBjaHVuayxcbiAgICBpc0ZpcnN0LFxuICAgIGlzTGFzdCxcbiAgICBpc0xhdGVzdCxcbiAgICBpc1NlbGVjdGVkLFxuICAgIG9uU2VsZWN0LFxuICAgIHRpbWVzdGFtcCxcbiAgICB0eXBlXG4gIH0gPSBfcmVmMTk7XG4gIGNvbnN0IGljb25Db21wb25lbnQgPSBnZXRUaW1lbGluZUV2ZW50SWNvbkNvbXBvbmVudCh0eXBlKTtcbiAgY29uc3QgYXV0aG9yVXNlcklkcyA9IEFycmF5LmZyb20oY2h1bmsuYXV0aG9ycyk7XG4gIGNvbnN0IGZvcm1hdHRlZFRpbWVzdGFtcCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHBhcnNlZERhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApO1xuICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBmb3JtYXQocGFyc2VkRGF0ZSwgXCJNTU0gZCwgeXl5eSwgaGg6bW0gYVwiKTtcbiAgICByZXR1cm4gZm9ybWF0dGVkRGF0ZTtcbiAgfSwgW3RpbWVzdGFtcF0pO1xuICBjb25zdCBoYW5kbGVDbGljayA9IHVzZUNhbGxiYWNrKGV2dCA9PiB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIG9uU2VsZWN0KGNodW5rKTtcbiAgfSwgW29uU2VsZWN0LCBjaHVua10pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFJvb3QkNSwge1xuICAgICRzZWxlY3RlZDogaXNTZWxlY3RlZCxcbiAgICBcImRhdGEtY2h1bmstaWRcIjogY2h1bmsuaWQsXG4gICAgXCJkYXRhLWZpcnN0XCI6IGlzRmlyc3QgPyB0cnVlIDogdm9pZCAwLFxuICAgIFwiZGF0YS1sYXN0XCI6IGlzTGFzdCA/IHRydWUgOiB2b2lkIDAsXG4gICAgXCJkYXRhLXVpXCI6IFwidGltZWxpbmVJdGVtXCIsXG4gICAgbW9kZTogaXNTZWxlY3RlZCA/IFwiZGVmYXVsdFwiIDogXCJibGVlZFwiLFxuICAgIG9uQ2xpY2s6IGhhbmRsZUNsaWNrLFxuICAgIHBhZGRpbmc6IDAsXG4gICAgcmFkaXVzOiAyLFxuICAgIHRvbmU6IGlzU2VsZWN0ZWQgPyBcInByaW1hcnlcIiA6IFRJTUVMSU5FX0lURU1fRVZFTlRfVE9ORVtjaHVuay50eXBlXSxcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgcGFkZGluZ1g6IDIsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhGbGV4LCB7XG4gICAgICAgIGFsaWduOiBcInN0cmV0Y2hcIixcbiAgICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goSWNvbldyYXBwZXIsIHtcbiAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEljb25Cb3gsIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDIsXG4gICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICAgICAgc2l6ZTogMixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IGljb25Db21wb25lbnQgJiYgY3JlYXRlRWxlbWVudChpY29uQ29tcG9uZW50KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4cyhTdGFjaywge1xuICAgICAgICAgIHNwYWNlOiAyLFxuICAgICAgICAgIG1hcmdpbjogMixcbiAgICAgICAgICBjaGlsZHJlbjogW2lzTGF0ZXN0ICYmIC8qIEBfX1BVUkVfXyAqL2pzeChGbGV4LCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KENhcmQsIHtcbiAgICAgICAgICAgICAgcGFkZGluZzogMSxcbiAgICAgICAgICAgICAgcmFkaXVzOiAyLFxuICAgICAgICAgICAgICBzaGFkb3c6IDEsXG4gICAgICAgICAgICAgIHRvbmU6IGlzU2VsZWN0ZWQgPyBcInByaW1hcnlcIiA6IFRJTUVMSU5FX0lURU1fRVZFTlRfVE9ORVtjaHVuay50eXBlXSxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChMYWJlbCwge1xuICAgICAgICAgICAgICAgIG11dGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNpemU6IDAsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiTGF0ZXN0XCJcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goRXZlbnRMYWJlbCwge1xuICAgICAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgICAgICB3ZWlnaHQ6IFwibWVkaXVtXCIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBmb3JtYXRUaW1lbGluZUV2ZW50TGFiZWwodHlwZSkgfHwgLyogQF9fUFVSRV9fICovanN4KFwiY29kZVwiLCB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IHR5cGVcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChUaW1lc3RhbXBCb3gsIHtcbiAgICAgICAgICAgIHBhZGRpbmdYOiAxLFxuICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgICAgIHNpemU6IDAsXG4gICAgICAgICAgICAgIG11dGVkOiB0cnVlLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogZm9ybWF0dGVkVGltZXN0YW1wXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXVxuICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KEZsZXgsIHtcbiAgICAgICAgICBmbGV4OiAxLFxuICAgICAgICAgIGp1c3RpZnk6IFwiZmxleC1lbmRcIixcbiAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFVzZXJBdmF0YXJTdGFjaywge1xuICAgICAgICAgICAgbWF4TGVuZ3RoOiAzLFxuICAgICAgICAgICAgdXNlcklkczogYXV0aG9yVXNlcklkc1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pXVxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn1cbmNvbnN0IFN0YWNrV3JhcHBlciA9IHN0eWxlZChTdGFjaykoX3RlbXBsYXRlT2JqZWN0OSB8fCAoX3RlbXBsYXRlT2JqZWN0OSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoW1wiXFxuICBtYXgtd2lkdGg6IDIwMHB4O1xcblwiXSkpKTtcbmNvbnN0IExpc3RXcmFwcGVyID0gc3R5bGVkKEZsZXgpKF90ZW1wbGF0ZU9iamVjdDEwIHx8IChfdGVtcGxhdGVPYmplY3QxMCA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoW1wiXFxuICBtYXgtaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMTk4cHgpO1xcbiAgbWluLXdpZHRoOiAyNDRweDtcXG5cIl0pKSk7XG5jb25zdCBSb290JDQgPSBzdHlsZWQoQm94KShfcmVmMjAgPT4ge1xuICBsZXQge1xuICAgICR2aXNpYmxlXG4gIH0gPSBfcmVmMjA7XG4gIHJldHVybiBjc3MoX3RlbXBsYXRlT2JqZWN0MTEgfHwgKF90ZW1wbGF0ZU9iamVjdDExID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbXCJcXG4gICAgb3BhY2l0eTogMDtcXG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxuXFxuICAgIFwiLCBcIlxcbiAgXCJdKSksICR2aXNpYmxlICYmIGNzcyhfdGVtcGxhdGVPYmplY3QxMiB8fCAoX3RlbXBsYXRlT2JqZWN0MTIgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFtcIlxcbiAgICAgIG9wYWNpdHk6IDE7XFxuICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XFxuICAgIFwiXSkpKSk7XG59KTtcbmNvbnN0IFRpbWVsaW5lID0gX3JlZjIxID0+IHtcbiAgbGV0IHtcbiAgICBjaHVua3MsXG4gICAgZGlzYWJsZWRCZWZvcmVGaXJzdENodW5rLFxuICAgIGhhc01vcmVDaHVua3MsXG4gICAgbGFzdENodW5rLFxuICAgIG9uTG9hZE1vcmUsXG4gICAgb25TZWxlY3QsXG4gICAgZmlyc3RDaHVua1xuICB9ID0gX3JlZjIxO1xuICBjb25zdCBbbW91bnRlZCwgc2V0TW91bnRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGZpbHRlcmVkQ2h1bmtzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGNodW5rcy5maWx0ZXIoYyA9PiB7XG4gICAgICBpZiAoZGlzYWJsZWRCZWZvcmVGaXJzdENodW5rICYmIGZpcnN0Q2h1bmspIHtcbiAgICAgICAgcmV0dXJuIGMuaW5kZXggPCBmaXJzdENodW5rLmluZGV4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gIH0sIFtjaHVua3MsIGRpc2FibGVkQmVmb3JlRmlyc3RDaHVuaywgZmlyc3RDaHVua10pO1xuICBjb25zdCBzZWxlY3RlZEluZGV4ID0gdXNlTWVtbygoKSA9PiAobGFzdENodW5rID09IG51bGwgPyB2b2lkIDAgOiBsYXN0Q2h1bmsuaWQpID8gZmlsdGVyZWRDaHVua3MuZmluZEluZGV4KGMgPT4gYy5pZCA9PT0gbGFzdENodW5rLmlkKSA6IC0xLCBbbGFzdENodW5rID09IG51bGwgPyB2b2lkIDAgOiBsYXN0Q2h1bmsuaWQsIGZpbHRlcmVkQ2h1bmtzXSk7XG4gIGNvbnN0IHJlbmRlckl0ZW0gPSB1c2VDYWxsYmFjaygoY2h1bmssIF9yZWYyMikgPT4ge1xuICAgIGxldCB7XG4gICAgICBhY3RpdmVJbmRleFxuICAgIH0gPSBfcmVmMjI7XG4gICAgY29uc3QgaXNGaXJzdCA9IGFjdGl2ZUluZGV4ID09PSAwO1xuICAgIGNvbnN0IGlzTGFzdCA9IGZpbHRlcmVkQ2h1bmtzICYmIGFjdGl2ZUluZGV4ID09PSBmaWx0ZXJlZENodW5rcy5sZW5ndGggLSAxIHx8IGZhbHNlO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3hzKEJveCwge1xuICAgICAgcGFkZGluZ0JvdHRvbTogaXNMYXN0ID8gMSA6IDAsXG4gICAgICBwYWRkaW5nVG9wOiBpc0ZpcnN0ID8gMSA6IDAsXG4gICAgICBwYWRkaW5nWDogMSxcbiAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFRpbWVsaW5lSXRlbSwge1xuICAgICAgICBjaHVuayxcbiAgICAgICAgaXNGaXJzdCxcbiAgICAgICAgaXNMYXN0LFxuICAgICAgICBpc0xhdGVzdDogYWN0aXZlSW5kZXggPT09IDAgJiYgIWRpc2FibGVkQmVmb3JlRmlyc3RDaHVuayxcbiAgICAgICAgaXNTZWxlY3RlZDogYWN0aXZlSW5kZXggPT09IHNlbGVjdGVkSW5kZXgsXG4gICAgICAgIG9uU2VsZWN0LFxuICAgICAgICB0aW1lc3RhbXA6IGNodW5rLmVuZFRpbWVzdGFtcCxcbiAgICAgICAgdHlwZTogY2h1bmsudHlwZVxuICAgICAgfSksIGFjdGl2ZUluZGV4ID09PSBmaWx0ZXJlZENodW5rcy5sZW5ndGggLSAxICYmIGhhc01vcmVDaHVua3MgJiYgLyogQF9fUFVSRV9fICovanN4KEZsZXgsIHtcbiAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIGp1c3RpZnk6IFwiY2VudGVyXCIsXG4gICAgICAgIHBhZGRpbmc6IDQsXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goU3Bpbm5lciwge1xuICAgICAgICAgIG11dGVkOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9KV1cbiAgICB9KTtcbiAgfSwgW2Rpc2FibGVkQmVmb3JlRmlyc3RDaHVuaywgZmlsdGVyZWRDaHVua3MsIGhhc01vcmVDaHVua3MsIG9uU2VsZWN0LCBzZWxlY3RlZEluZGV4XSk7XG4gIHVzZUVmZmVjdCgoKSA9PiBzZXRNb3VudGVkKHRydWUpLCBbXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3hzKFJvb3QkNCwge1xuICAgICR2aXNpYmxlOiAhc2VsZWN0ZWRJbmRleCB8fCBtb3VudGVkLFxuICAgIFwiZGF0YS11aVwiOiBcInRpbWVsaW5lXCIsXG4gICAgY2hpbGRyZW46IFtmaWx0ZXJlZENodW5rcy5sZW5ndGggPT09IDAgJiYgLyogQF9fUFVSRV9fICovanN4cyhTdGFja1dyYXBwZXIsIHtcbiAgICAgIHBhZGRpbmc6IDMsXG4gICAgICBzcGFjZTogMyxcbiAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgd2VpZ2h0OiBcInNlbWlib2xkXCIsXG4gICAgICAgIGNoaWxkcmVuOiBcIk5vIGRvY3VtZW50IGhpc3RvcnlcIlxuICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgIG11dGVkOiB0cnVlLFxuICAgICAgICBzaXplOiAxLFxuICAgICAgICBjaGlsZHJlbjogXCJXaGVuIGNoYW5naW5nIHRoZSBjb250ZW50IG9mIHRoZSBkb2N1bWVudCwgdGhlIGRvY3VtZW50IHZlcnNpb25zIHdpbGwgYXBwZWFyIGluIHRoaXMgbWVudS5cIlxuICAgICAgfSldXG4gICAgfSksIGZpbHRlcmVkQ2h1bmtzLmxlbmd0aCA+IDAgJiYgLyogQF9fUFVSRV9fICovanN4KExpc3RXcmFwcGVyLCB7XG4gICAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KENvbW1hbmRMaXN0LCB7XG4gICAgICAgIGFjdGl2ZUl0ZW1EYXRhQXR0cjogXCJkYXRhLWhvdmVyZWRcIixcbiAgICAgICAgYXJpYUxhYmVsOiBcIkRvY3VtZW50IHJldmlzaW9uc1wiLFxuICAgICAgICBhdXRvRm9jdXM6IFwibGlzdFwiLFxuICAgICAgICBpbml0aWFsSW5kZXg6IHNlbGVjdGVkSW5kZXgsXG4gICAgICAgIGluaXRpYWxTY3JvbGxBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgaXRlbUhlaWdodDogNDAsXG4gICAgICAgIGl0ZW1zOiBmaWx0ZXJlZENodW5rcyxcbiAgICAgICAgb25FbmRSZWFjaGVkOiBvbkxvYWRNb3JlLFxuICAgICAgICBvbkVuZFJlYWNoZWRJbmRleE9mZnNldDogMjAsXG4gICAgICAgIG92ZXJzY2FuOiA1LFxuICAgICAgICByZW5kZXJJdGVtLFxuICAgICAgICB3cmFwQXJvdW5kOiBmYWxzZVxuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG59O1xuVGltZWxpbmUuZGlzcGxheU5hbWUgPSBcIlRpbWVsaW5lXCI7XG5mdW5jdGlvbiBUaW1lbGluZUVycm9yKCkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4cyhGbGV4LCB7XG4gICAgYWxpZ246IFwiZmxleC1zdGFydFwiLFxuICAgIGdhcDogMyxcbiAgICBwYWRkaW5nOiA0LFxuICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFRleHRXaXRoVG9uZSwge1xuICAgICAgdG9uZTogXCJjcml0aWNhbFwiLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChFcnJvck91dGxpbmVJY29uLCB7fSlcbiAgICB9KSwgLyogQF9fUFVSRV9fICovanN4cyhTdGFjaywge1xuICAgICAgc3BhY2U6IDQsXG4gICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChUZXh0V2l0aFRvbmUsIHtcbiAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgdG9uZTogXCJjcml0aWNhbFwiLFxuICAgICAgICB3ZWlnaHQ6IFwic2VtaWJvbGRcIixcbiAgICAgICAgY2hpbGRyZW46IFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbHN0IHJldHJpZXZpbmcgZG9jdW1lbnQgY2hhbmdlcy5cIlxuICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0V2l0aFRvbmUsIHtcbiAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgdG9uZTogXCJjcml0aWNhbFwiLFxuICAgICAgICBjaGlsZHJlbjogXCJEb2N1bWVudCBoaXN0b3J5IHRyYW5zYWN0aW9ucyBoYXZlIG5vdCBiZWVuIGFmZmVjdGVkLlwiXG4gICAgICB9KV1cbiAgICB9KV1cbiAgfSk7XG59XG5jb25zdCBSb290JDMgPSBzdHlsZWQoUG9wb3ZlcikoX3RlbXBsYXRlT2JqZWN0MTMgfHwgKF90ZW1wbGF0ZU9iamVjdDEzID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbXCJcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxuICBvdmVyZmxvdzogY2xpcDtcXG5cIl0pKSk7XG5mdW5jdGlvbiBUaW1lbGluZU1lbnUoX3JlZjIzKSB7XG4gIGxldCB7XG4gICAgY2h1bmssXG4gICAgbW9kZSxcbiAgICBwbGFjZW1lbnRcbiAgfSA9IF9yZWYyMztcbiAgY29uc3Qge1xuICAgIHNldFRpbWVsaW5lUmFuZ2UsXG4gICAgc2V0VGltZWxpbmVNb2RlLFxuICAgIHRpbWVsaW5lRXJyb3IsXG4gICAgcmVhZHksXG4gICAgdGltZWxpbmVTdG9yZVxuICB9ID0gdXNlRG9jdW1lbnRQYW5lKCk7XG4gIGNvbnN0IFtvcGVuLCBzZXRPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2J1dHRvbiwgc2V0QnV0dG9uXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbcG9wb3Zlciwgc2V0UG9wb3Zlcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgdG9hc3QgPSB1c2VUb2FzdCgpO1xuICBjb25zdCBjaHVua3MgPSB1c2VUaW1lbGluZVNlbGVjdG9yKHRpbWVsaW5lU3RvcmUsIHN0YXRlID0+IHN0YXRlLmNodW5rcyk7XG4gIGNvbnN0IGxvYWRpbmcgPSB1c2VUaW1lbGluZVNlbGVjdG9yKHRpbWVsaW5lU3RvcmUsIHN0YXRlID0+IHN0YXRlLmlzTG9hZGluZyk7XG4gIGNvbnN0IGhhc01vcmVDaHVua3MgPSB1c2VUaW1lbGluZVNlbGVjdG9yKHRpbWVsaW5lU3RvcmUsIHN0YXRlID0+IHN0YXRlLmhhc01vcmVDaHVua3MpO1xuICBjb25zdCByZWFsUmV2Q2h1bmsgPSB1c2VUaW1lbGluZVNlbGVjdG9yKHRpbWVsaW5lU3RvcmUsIHN0YXRlID0+IHN0YXRlLnJlYWxSZXZDaHVuayk7XG4gIGNvbnN0IHNpbmNlVGltZSA9IHVzZVRpbWVsaW5lU2VsZWN0b3IodGltZWxpbmVTdG9yZSwgc3RhdGUgPT4gc3RhdGUuc2luY2VUaW1lKTtcbiAgY29uc3QgaGFuZGxlT3BlbiA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRUaW1lbGluZU1vZGUobW9kZSk7XG4gICAgc2V0T3Blbih0cnVlKTtcbiAgfSwgW21vZGUsIHNldFRpbWVsaW5lTW9kZV0pO1xuICBjb25zdCBoYW5kbGVDbG9zZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRUaW1lbGluZU1vZGUoXCJjbG9zZWRcIik7XG4gICAgc2V0T3BlbihmYWxzZSk7XG4gIH0sIFtzZXRUaW1lbGluZU1vZGVdKTtcbiAgY29uc3QgaGFuZGxlQ2xpY2tPdXRzaWRlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChvcGVuKSB7XG4gICAgICBoYW5kbGVDbG9zZSgpO1xuICAgIH1cbiAgfSwgW2hhbmRsZUNsb3NlLCBvcGVuXSk7XG4gIGNvbnN0IGhhbmRsZUdsb2JhbEtleURvd24gPSB1c2VDYWxsYmFjayhldmVudCA9PiB7XG4gICAgaWYgKG9wZW4gJiYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIiB8fCBldmVudC5rZXkgPT09IFwiVGFiXCIpKSB7XG4gICAgICBoYW5kbGVDbG9zZSgpO1xuICAgICAgYnV0dG9uID09IG51bGwgPyB2b2lkIDAgOiBidXR0b24uZm9jdXMoKTtcbiAgICB9XG4gIH0sIFtidXR0b24sIGhhbmRsZUNsb3NlLCBvcGVuXSk7XG4gIHVzZUNsaWNrT3V0c2lkZShoYW5kbGVDbGlja091dHNpZGUsIFtidXR0b24sIHBvcG92ZXJdKTtcbiAgdXNlR2xvYmFsS2V5RG93bihoYW5kbGVHbG9iYWxLZXlEb3duKTtcbiAgY29uc3Qgc2VsZWN0UmV2ID0gdXNlQ2FsbGJhY2socmV2Q2h1bmsgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBbc2luY2VJZCwgcmV2SWRdID0gdGltZWxpbmVTdG9yZS5maW5kUmFuZ2VGb3JSZXYocmV2Q2h1bmspO1xuICAgICAgc2V0VGltZWxpbmVNb2RlKFwiY2xvc2VkXCIpO1xuICAgICAgc2V0VGltZWxpbmVSYW5nZShzaW5jZUlkLCByZXZJZCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0b2FzdC5wdXNoKHtcbiAgICAgICAgY2xvc2FibGU6IHRydWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBlcnIubWVzc2FnZSxcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIHRpdGxlOiBcIlVuYWJsZSB0byBsb2FkIHJldmlzaW9uXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3NldFRpbWVsaW5lTW9kZSwgc2V0VGltZWxpbmVSYW5nZSwgdGltZWxpbmVTdG9yZSwgdG9hc3RdKTtcbiAgY29uc3Qgc2VsZWN0U2luY2UgPSB1c2VDYWxsYmFjayhzaW5jZUNodW5rID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgW3NpbmNlSWQsIHJldklkXSA9IHRpbWVsaW5lU3RvcmUuZmluZFJhbmdlRm9yU2luY2Uoc2luY2VDaHVuayk7XG4gICAgICBzZXRUaW1lbGluZU1vZGUoXCJjbG9zZWRcIik7XG4gICAgICBzZXRUaW1lbGluZVJhbmdlKHNpbmNlSWQsIHJldklkKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRvYXN0LnB1c2goe1xuICAgICAgICBjbG9zYWJsZTogdHJ1ZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGVyci5tZXNzYWdlLFxuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgdGl0bGU6IFwiVW5hYmxlIHRvIGxvYWQgcmV2aXNpb25cIlxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbc2V0VGltZWxpbmVNb2RlLCBzZXRUaW1lbGluZVJhbmdlLCB0aW1lbGluZVN0b3JlLCB0b2FzdF0pO1xuICBjb25zdCBoYW5kbGVMb2FkTW9yZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIWxvYWRpbmcpIHtcbiAgICAgIHRpbWVsaW5lU3RvcmUubG9hZE1vcmUoKTtcbiAgICB9XG4gIH0sIFtsb2FkaW5nLCB0aW1lbGluZVN0b3JlXSk7XG4gIGNvbnN0IGNvbnRlbnQgPSB0aW1lbGluZUVycm9yID8gLyogQF9fUFVSRV9fICovanN4KFRpbWVsaW5lRXJyb3IsIHt9KSA6IC8qIEBfX1BVUkVfXyAqL2pzeHMoRnJhZ21lbnQsIHtcbiAgICBjaGlsZHJlbjogW21vZGUgPT09IFwicmV2XCIgJiYgLyogQF9fUFVSRV9fICovanN4KFRpbWVsaW5lLCB7XG4gICAgICBjaHVua3MsXG4gICAgICBmaXJzdENodW5rOiByZWFsUmV2Q2h1bmssXG4gICAgICBoYXNNb3JlQ2h1bmtzLFxuICAgICAgbGFzdENodW5rOiByZWFsUmV2Q2h1bmssXG4gICAgICBvbkxvYWRNb3JlOiBoYW5kbGVMb2FkTW9yZSxcbiAgICAgIG9uU2VsZWN0OiBzZWxlY3RSZXZcbiAgICB9KSwgbW9kZSA9PT0gXCJzaW5jZVwiICYmIC8qIEBfX1BVUkVfXyAqL2pzeChUaW1lbGluZSwge1xuICAgICAgY2h1bmtzLFxuICAgICAgZGlzYWJsZWRCZWZvcmVGaXJzdENodW5rOiB0cnVlLFxuICAgICAgZmlyc3RDaHVuazogcmVhbFJldkNodW5rLFxuICAgICAgaGFzTW9yZUNodW5rcyxcbiAgICAgIGxhc3RDaHVuazogc2luY2VUaW1lLFxuICAgICAgb25Mb2FkTW9yZTogaGFuZGxlTG9hZE1vcmUsXG4gICAgICBvblNlbGVjdDogc2VsZWN0U2luY2VcbiAgICB9KV1cbiAgfSk7XG4gIGNvbnN0IHRpbWVMYWJlbCA9IHVzZUZvcm1hdHRlZFRpbWVzdGFtcCgoY2h1bmsgPT0gbnVsbCA/IHZvaWQgMCA6IGNodW5rLmVuZFRpbWVzdGFtcCkgfHwgXCJcIik7XG4gIGNvbnN0IHJldkxhYmVsID0gY2h1bmsgPyBcIlwiLmNvbmNhdCh1cHBlckZpcnN0KGZvcm1hdFRpbWVsaW5lRXZlbnRMYWJlbChjaHVuay50eXBlKSksIFwiOiBcIikuY29uY2F0KHRpbWVMYWJlbCkgOiBcIkxhdGVzdCB2ZXJzaW9uXCI7XG4gIGNvbnN0IHNpbmNlTGFiZWwgPSBjaHVuayA/IFwiU2luY2U6IFwiLmNvbmNhdCh0aW1lTGFiZWwpIDogXCJTaW5jZTogdW5rbm93biB2ZXJzaW9uXCI7XG4gIGNvbnN0IGJ1dHRvbkxhYmVsID0gbW9kZSA9PT0gXCJyZXZcIiA/IHJldkxhYmVsIDogc2luY2VMYWJlbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChSb290JDMsIHtcbiAgICBjb25zdHJhaW5TaXplOiB0cnVlLFxuICAgIGNvbnRlbnQ6IG9wZW4gJiYgY29udGVudCxcbiAgICBcImRhdGEtdWlcIjogXCJ2ZXJzaW9uTWVudVwiLFxuICAgIG9wZW4sXG4gICAgcGxhY2VtZW50LFxuICAgIHBvcnRhbDogdHJ1ZSxcbiAgICByZWY6IHNldFBvcG92ZXIsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChCdXR0b24sIHtcbiAgICAgIGRpc2FibGVkOiAhcmVhZHksXG4gICAgICBtb2RlOiBcImJsZWVkXCIsXG4gICAgICBmb250U2l6ZTogMSxcbiAgICAgIHBhZGRpbmc6IDIsXG4gICAgICBpY29uUmlnaHQ6IFNlbGVjdEljb24sXG4gICAgICBvbkNsaWNrOiBvcGVuID8gaGFuZGxlQ2xvc2UgOiBoYW5kbGVPcGVuLFxuICAgICAgcmVmOiBzZXRCdXR0b24sXG4gICAgICBzZWxlY3RlZDogb3BlbixcbiAgICAgIHRleHQ6IHJlYWR5ID8gYnV0dG9uTGFiZWwgOiBcIkxvYWRpbmcgaGlzdG9yeVwiXG4gICAgfSlcbiAgfSk7XG59XG5mdW5jdGlvbiB1c2VGb3JtYXR0ZWRUaW1lc3RhbXAodGltZSkge1xuICBjb25zdCBmb3JtYXR0ZWQgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBwYXJzZWREYXRlID0gdGltZSA/IG5ldyBEYXRlKHRpbWUpIDogLyogQF9fUFVSRV9fICovbmV3IERhdGUoKTtcbiAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gZm9ybWF0KHBhcnNlZERhdGUsIFwiTU1NIGQsIHl5eXksIGhoOm1tIGFcIik7XG4gICAgcmV0dXJuIGZvcm1hdHRlZERhdGU7XG4gIH0sIFt0aW1lXSk7XG4gIHJldHVybiBmb3JtYXR0ZWQ7XG59XG5mdW5jdGlvbiBMb2FkaW5nQ29udGVudCgpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChEZWxheSwge1xuICAgIG1zOiAzMDAsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICBoZWlnaHQ6IFwiZmlsbFwiLFxuICAgICAganVzdGlmeTogXCJjZW50ZXJcIixcbiAgICAgIHBhZGRpbmdUb3A6IDMsXG4gICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChTcGlubmVyLCB7XG4gICAgICAgIG11dGVkOiB0cnVlXG4gICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICBtYXJnaW5Ub3A6IDMsXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgIG11dGVkOiB0cnVlLFxuICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgY2hpbGRyZW46IFwiTG9hZGluZyBjaGFuZ2VzXCJcbiAgICAgICAgfSlcbiAgICAgIH0pXVxuICAgIH0pXG4gIH0pO1xufVxuZnVuY3Rpb24gY29sbGVjdExhdGVzdEF1dGhvckFubm90YXRpb25zKGRpZmYpIHtcbiAgY29uc3QgYXV0aG9yTWFwID0gLyogQF9fUFVSRV9fICovbmV3IE1hcCgpO1xuICB2aXNpdERpZmYoZGlmZiwgY2hpbGQgPT4ge1xuICAgIGlmIChjaGlsZC5hY3Rpb24gPT09IFwidW5jaGFuZ2VkXCIgfHwgIShcImFubm90YXRpb25cIiBpbiBjaGlsZCkgfHwgIWNoaWxkLmFubm90YXRpb24pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCB7XG4gICAgICBhdXRob3IsXG4gICAgICB0aW1lc3RhbXBcbiAgICB9ID0gY2hpbGQuYW5ub3RhdGlvbjtcbiAgICBjb25zdCBwcmV2aW91cyA9IGF1dGhvck1hcC5nZXQoYXV0aG9yKTtcbiAgICBpZiAoIXByZXZpb3VzIHx8IHByZXZpb3VzLnRpbWVzdGFtcCA8IHRpbWVzdGFtcCkge1xuICAgICAgYXV0aG9yTWFwLnNldChhdXRob3IsIGNoaWxkLmFubm90YXRpb24pO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSk7XG4gIHJldHVybiBBcnJheS5mcm9tKGF1dGhvck1hcC52YWx1ZXMoKSkuc29ydCgoYSwgYikgPT4gYS50aW1lc3RhbXAgPCBiLnRpbWVzdGFtcCA/IDEgOiAtMSk7XG59XG5jb25zdCBTY3JvbGxlciQxID0gc3R5bGVkKFNjcm9sbENvbnRhaW5lcikoX3RlbXBsYXRlT2JqZWN0MTQgfHwgKF90ZW1wbGF0ZU9iamVjdDE0ID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbXCJcXG4gIGhlaWdodDogMTAwJTtcXG4gIG92ZXJmbG93OiBhdXRvO1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgc2Nyb2xsLWJlaGF2aW9yOiBzbW9vdGg7XFxuXCJdKSkpO1xuZnVuY3Rpb24gQ2hhbmdlc1BhbmVsKCkge1xuICBjb25zdCB7XG4gICAgZG9jdW1lbnRJZCxcbiAgICBvbkhpc3RvcnlDbG9zZSxcbiAgICBzY2hlbWFUeXBlLFxuICAgIHRpbWVsaW5lRXJyb3IsXG4gICAgdGltZWxpbmVTdG9yZSxcbiAgICB2YWx1ZVxuICB9ID0gdXNlRG9jdW1lbnRQYW5lKCk7XG4gIGNvbnN0IHtcbiAgICBjb2xsYXBzZWRcbiAgfSA9IHVzZVBhbmUoKTtcbiAgY29uc3Qgc2Nyb2xsUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBkaWZmID0gdXNlVGltZWxpbmVTZWxlY3Rvcih0aW1lbGluZVN0b3JlLCBzdGF0ZSA9PiBzdGF0ZS5kaWZmKTtcbiAgY29uc3Qgb25PbGRlclJldmlzaW9uID0gdXNlVGltZWxpbmVTZWxlY3Rvcih0aW1lbGluZVN0b3JlLCBzdGF0ZSA9PiBzdGF0ZS5vbk9sZGVyUmV2aXNpb24pO1xuICBjb25zdCBzZWxlY3Rpb25TdGF0ZSA9IHVzZVRpbWVsaW5lU2VsZWN0b3IodGltZWxpbmVTdG9yZSwgc3RhdGUgPT4gc3RhdGUuc2VsZWN0aW9uU3RhdGUpO1xuICBjb25zdCBzaW5jZVRpbWUgPSB1c2VUaW1lbGluZVNlbGVjdG9yKHRpbWVsaW5lU3RvcmUsIHN0YXRlID0+IHN0YXRlLnNpbmNlVGltZSk7XG4gIGNvbnN0IGxvYWRpbmcgPSBzZWxlY3Rpb25TdGF0ZSA9PT0gXCJsb2FkaW5nXCI7XG4gIGNvbnN0IGlzQ29tcGFyaW5nQ3VycmVudCA9ICFvbk9sZGVyUmV2aXNpb247XG4gIGNvbnN0IGRvY3VtZW50Q29udGV4dCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gKHtcbiAgICBkb2N1bWVudElkLFxuICAgIHNjaGVtYVR5cGUsXG4gICAgRmllbGRXcmFwcGVyOiBDaGFuZ2VGaWVsZFdyYXBwZXIsXG4gICAgcm9vdERpZmY6IGRpZmYsXG4gICAgaXNDb21wYXJpbmdDdXJyZW50LFxuICAgIHZhbHVlXG4gIH0pLCBbZG9jdW1lbnRJZCwgZGlmZiwgaXNDb21wYXJpbmdDdXJyZW50LCBzY2hlbWFUeXBlLCB2YWx1ZV0pO1xuICBjb25zdCBjaGFuZ2VBbm5vdGF0aW9ucyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gZGlmZiA/IGNvbGxlY3RMYXRlc3RBdXRob3JBbm5vdGF0aW9ucyhkaWZmKSA6IFtdLCBbZGlmZl0pO1xuICBpZiAoY29sbGFwc2VkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICBmbGV4OiAxLFxuICAgIHN0eWxlOiB7XG4gICAgICBib3JkZXJMZWZ0OiBcIjFweCBkYXNoZWQgdmFyKC0tY2FyZC1ib3JkZXItY29sb3IpXCIsXG4gICAgICBvdmVyZmxvdzogXCJoaWRkZW5cIixcbiAgICAgIG1pbldpZHRoOiAzMjBcbiAgICB9LFxuICAgIFwiZGF0YS10ZXN0aWRcIjogXCJyZXZpZXctY2hhbmdlcy1wYW5lXCIsXG4gICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goUGFuZUhlYWRlciwge1xuICAgICAgYWN0aW9uczogLyogQF9fUFVSRV9fICovanN4KEJ1dHRvbiwge1xuICAgICAgICBpY29uOiBDbG9zZUljb24sXG4gICAgICAgIG1vZGU6IFwiYmxlZWRcIixcbiAgICAgICAgb25DbGljazogb25IaXN0b3J5Q2xvc2UsXG4gICAgICAgIHBhZGRpbmc6IDMsXG4gICAgICAgIHRpdGxlOiBcIkhpZGUgY2hhbmdlcyBwYW5lbFwiXG4gICAgICB9KSxcbiAgICAgIHN1YkFjdGlvbnM6IGNoYW5nZUFubm90YXRpb25zLmxlbmd0aCA+IDAgJiYgLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICBwYWRkaW5nUmlnaHQ6IDEsXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goRGlmZlRvb2x0aXAsIHtcbiAgICAgICAgICBhbm5vdGF0aW9uczogY2hhbmdlQW5ub3RhdGlvbnMsXG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiQ2hhbmdlcyBieVwiLFxuICAgICAgICAgIHBsYWNlbWVudDogXCJib3R0b20tZW5kXCIsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChBdmF0YXJTdGFjaywge1xuICAgICAgICAgICAgbWF4TGVuZ3RoOiA0LFxuICAgICAgICAgICAgY2hpbGRyZW46IGNoYW5nZUFubm90YXRpb25zLm1hcChfcmVmMjQgPT4ge1xuICAgICAgICAgICAgICBsZXQge1xuICAgICAgICAgICAgICAgIGF1dGhvclxuICAgICAgICAgICAgICB9ID0gX3JlZjI0O1xuICAgICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFVzZXJBdmF0YXIsIHtcbiAgICAgICAgICAgICAgICB1c2VyOiBhdXRob3JcbiAgICAgICAgICAgICAgfSwgYXV0aG9yKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pLFxuICAgICAgdGFiczogLyogQF9fUFVSRV9fICovanN4KFRpbWVsaW5lTWVudSwge1xuICAgICAgICBtb2RlOiBcInNpbmNlXCIsXG4gICAgICAgIGNodW5rOiBzaW5jZVRpbWUsXG4gICAgICAgIHBsYWNlbWVudDogXCJib3R0b20tc3RhcnRcIlxuICAgICAgfSksXG4gICAgICB0aXRsZTogXCJDaGFuZ2VzXCJcbiAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KFBhbmVDb250ZW50LCB7XG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEJvdW5kYXJ5RWxlbWVudFByb3ZpZGVyLCB7XG4gICAgICAgIGVsZW1lbnQ6IHNjcm9sbFJlZi5jdXJyZW50LFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFNjcm9sbGVyJDEsIHtcbiAgICAgICAgICBcImRhdGEtdWlcIjogXCJTY3JvbGxlclwiLFxuICAgICAgICAgIHJlZjogc2Nyb2xsUmVmLFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgICAgICBmbGV4OiAxLFxuICAgICAgICAgICAgcGFkZGluZzogNCxcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQ29udGVudCwge1xuICAgICAgICAgICAgICBkaWZmLFxuICAgICAgICAgICAgICBkb2N1bWVudENvbnRleHQsXG4gICAgICAgICAgICAgIGVycm9yOiB0aW1lbGluZUVycm9yLFxuICAgICAgICAgICAgICBsb2FkaW5nXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cbmZ1bmN0aW9uIENvbnRlbnQoX3JlZjI1KSB7XG4gIGxldCB7XG4gICAgZXJyb3IsXG4gICAgZGlmZixcbiAgICBkb2N1bWVudENvbnRleHQsXG4gICAgbG9hZGluZ1xuICB9ID0gX3JlZjI1O1xuICBjb25zdCB7XG4gICAgc2NoZW1hVHlwZVxuICB9ID0gdXNlRG9jdW1lbnRQYW5lKCk7XG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goTm9DaGFuZ2VzLCB7fSk7XG4gIH1cbiAgaWYgKGxvYWRpbmcpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KExvYWRpbmdDb250ZW50LCB7fSk7XG4gIH1cbiAgaWYgKCFkaWZmKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChOb0NoYW5nZXMsIHt9KTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KERvY3VtZW50Q2hhbmdlQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBkb2N1bWVudENvbnRleHQsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChDaGFuZ2VMaXN0LCB7XG4gICAgICBkaWZmLFxuICAgICAgc2NoZW1hVHlwZVxuICAgIH0pXG4gIH0pO1xufVxuZnVuY3Rpb24gdXNlRGVza1Rvb2xTZXR0aW5nKG5hbWVzcGFjZSwga2V5LCBkZWZhdWx0VmFsdWUpIHtcbiAgY29uc3Qgc2V0dGluZ3NTdG9yZSA9IHVzZVNldHRpbmdzU3RvcmUoKTtcbiAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSB1c2VTdGF0ZShkZWZhdWx0VmFsdWUpO1xuICBjb25zdCBkZXNrVG9vbFNldHRpbmdzID0gdXNlTWVtbygoKSA9PiBzZXR0aW5nc1N0b3JlLmZvck5hbWVzcGFjZShcImRlc2stdG9vbFwiKSwgW3NldHRpbmdzU3RvcmVdKTtcbiAgY29uc3Qgc2V0dGluZ3MgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAobmFtZXNwYWNlKSB7XG4gICAgICByZXR1cm4gZGVza1Rvb2xTZXR0aW5ncy5mb3JOYW1lc3BhY2UobmFtZXNwYWNlKS5mb3JLZXkoa2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIGRlc2tUb29sU2V0dGluZ3MuZm9yS2V5KGtleSk7XG4gIH0sIFtkZXNrVG9vbFNldHRpbmdzLCBuYW1lc3BhY2UsIGtleV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHN1YiA9IHNldHRpbmdzLmxpc3RlbihkZWZhdWx0VmFsdWUpLnN1YnNjcmliZSh7XG4gICAgICBuZXh0OiBzZXRWYWx1ZVxuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiBzdWIgPT0gbnVsbCA/IHZvaWQgMCA6IHN1Yi51bnN1YnNjcmliZSgpO1xuICB9LCBbZGVmYXVsdFZhbHVlLCBrZXksIG5hbWVzcGFjZSwgc2V0dGluZ3NdKTtcbiAgY29uc3Qgc2V0ID0gdXNlQ2FsbGJhY2sobmV3VmFsdWUgPT4ge1xuICAgIHNldFZhbHVlKG5ld1ZhbHVlKTtcbiAgICBzZXR0aW5ncy5zZXQobmV3VmFsdWUpO1xuICB9LCBbc2V0dGluZ3NdKTtcbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gW3ZhbHVlLCBzZXRdLCBbc2V0LCB2YWx1ZV0pO1xufVxuY29uc3QgVklFV19NT0RFX1BBUlNFRCA9IHtcbiAgaWQ6IFwicGFyc2VkXCIsXG4gIHRpdGxlOiBcIlBhcnNlZFwiXG59O1xuY29uc3QgVklFV19NT0RFX1JBVyA9IHtcbiAgaWQ6IFwicmF3XCIsXG4gIHRpdGxlOiBcIlJhdyBKU09OXCJcbn07XG5jb25zdCBWSUVXX01PREVTID0gW1ZJRVdfTU9ERV9QQVJTRUQsIFZJRVdfTU9ERV9SQVddO1xuY29uc3QgbHJ1ID0gSExSVSgxZTMpO1xuZnVuY3Rpb24gaXNFeHBhbmRlZChrZXlQYXRoLCB2YWx1ZSkge1xuICBjb25zdCBjYWNoZWQgPSBscnUuZ2V0KGtleVBhdGgpO1xuICBpZiAoY2FjaGVkID09PSB2b2lkIDApIHtcbiAgICBscnUuc2V0KGtleVBhdGgsIEFycmF5LmlzQXJyYXkodmFsdWUpIHx8IGlzUmVjb3JkKHZhbHVlKSk7XG4gICAgcmV0dXJuIGlzRXhwYW5kZWQoa2V5UGF0aCwgdmFsdWUpO1xuICB9XG4gIHJldHVybiBjYWNoZWQ7XG59XG5mdW5jdGlvbiB0b2dnbGVFeHBhbmRlZChldmVudCkge1xuICBjb25zdCB7XG4gICAgcGF0aFxuICB9ID0gZXZlbnQ7XG4gIGNvbnN0IGN1cnJlbnQgPSBscnUuZ2V0KHBhdGgpO1xuICBpZiAoY3VycmVudCA9PT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxydS5zZXQocGF0aCwgIWN1cnJlbnQpO1xufVxuZnVuY3Rpb24gc2VsZWN0RWxlbWVudChlbGVtZW50KSB7XG4gIGNvbnN0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgaWYgKHNlbCkge1xuICAgIGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGVsZW1lbnQpO1xuICAgIHNlbC5hZGRSYW5nZShyYW5nZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHNlbGVjdChldmVudCkge1xuICBzZWxlY3RFbGVtZW50KGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xufVxuZnVuY3Rpb24gbWF5YmVTZWxlY3RBbGwoZXZlbnQpIHtcbiAgY29uc3Qgc2VsZWN0QWxsID0gZXZlbnQua2V5Q29kZSA9PT0gNjUgJiYgKGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuY3RybEtleSk7XG4gIGlmICghc2VsZWN0QWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIHNlbGVjdEVsZW1lbnQoZXZlbnQuY3VycmVudFRhcmdldCk7XG59XG5mdW5jdGlvbiBpc0RvY3VtZW50TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gaXNSZWNvcmQodmFsdWUpICYmIGlzU3RyaW5nKHZhbHVlLl9pZCkgJiYgaXNTdHJpbmcodmFsdWUuX3R5cGUpO1xufVxuY29uc3QgSlNPTkluc3BlY3RvcldyYXBwZXIgPSBzdHlsZWQuZGl2KF9yZWYyNiA9PiB7XG4gIGxldCB7XG4gICAgdGhlbWVcbiAgfSA9IF9yZWYyNjtcbiAgY29uc3Qge1xuICAgIGNvbG9yLFxuICAgIGZvbnRzLFxuICAgIHNwYWNlXG4gIH0gPSB0aGVtZS5zYW5pdHk7XG4gIHJldHVybiBjc3MoX3RlbXBsYXRlT2JqZWN0MTUgfHwgKF90ZW1wbGF0ZU9iamVjdDE1ID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbXCJcXG4gICAgJiAuanNvbi1pbnNwZWN0b3IsXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fc2VsZWN0aW9uIHtcXG4gICAgICBmb250LWZhbWlseTogXCIsIFwiO1xcbiAgICAgIGZvbnQtc2l6ZTogXCIsIFwicHg7XFxuICAgICAgbGluZS1oZWlnaHQ6IFwiLCBcInB4O1xcbiAgICAgIGNvbG9yOiB2YXIoLS1jYXJkLWNvZGUtZmctY29sb3IpO1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fbGVhZiB7XFxuICAgICAgcGFkZGluZy1sZWZ0OiBcIiwgXCI7XFxuICAgIH1cXG5cXG4gICAgJiAuanNvbi1pbnNwZWN0b3IgLmpzb24taW5zcGVjdG9yX19sZWFmLmpzb24taW5zcGVjdG9yX19sZWFmX3Jvb3Qge1xcbiAgICAgIHBhZGRpbmctdG9wOiBcIiwgXCI7XFxuICAgICAgcGFkZGluZy1sZWZ0OiAwO1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yID4gLmpzb24taW5zcGVjdG9yX19sZWFmX3Jvb3QgPiAuanNvbi1pbnNwZWN0b3JfX2xpbmUgPiAuanNvbi1pbnNwZWN0b3JfX2tleSB7XFxuICAgICAgZGlzcGxheTogbm9uZTtcXG4gICAgfVxcblxcbiAgICAmIC5qc29uLWluc3BlY3RvciAuanNvbi1pbnNwZWN0b3JfX2xpbmUge1xcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgICBjdXJzb3I6IGRlZmF1bHQ7XFxuICAgIH1cXG5cXG4gICAgJiAuanNvbi1pbnNwZWN0b3IgLmpzb24taW5zcGVjdG9yX19saW5lOjphZnRlciB7XFxuICAgICAgY29udGVudDogJyc7XFxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICAgIHRvcDogMDtcXG4gICAgICBsZWZ0OiAtMjAwcHg7XFxuICAgICAgcmlnaHQ6IC01MHB4O1xcbiAgICAgIGJvdHRvbTogMDtcXG4gICAgICB6LWluZGV4OiAtMTtcXG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG4gICAgfVxcblxcbiAgICAmIC5qc29uLWluc3BlY3RvciAuanNvbi1pbnNwZWN0b3JfX2xpbmU6aG92ZXI6OmFmdGVyIHtcXG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jYXJkLWNvZGUtYmctY29sb3IpO1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fbGVhZl9jb21wb3NpdGUgPiAuanNvbi1pbnNwZWN0b3JfX2xpbmUge1xcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgfVxcblxcbiAgICAmIC5qc29uLWluc3BlY3RvciAuanNvbi1pbnNwZWN0b3JfX2xlYWZfY29tcG9zaXRlID4gLmpzb24taW5zcGVjdG9yX19saW5lOjpiZWZvcmUge1xcbiAgICAgIGNvbnRlbnQ6ICdcXHUyNUI4ICc7XFxuICAgICAgbWFyZ2luLWxlZnQ6IGNhbGMoMCAtIFwiLCBcIiArIDNweCk7XFxuICAgICAgZm9udC1zaXplOiBcIiwgXCJweDtcXG4gICAgICBsaW5lLWhlaWdodDogXCIsIFwicHg7XFxuICAgIH1cXG5cXG4gICAgJlxcbiAgICAgIC5qc29uLWluc3BlY3RvclxcbiAgICAgIC5qc29uLWluc3BlY3Rvcl9fbGVhZl9leHBhbmRlZC5qc29uLWluc3BlY3Rvcl9fbGVhZl9jb21wb3NpdGVcXG4gICAgICA+IC5qc29uLWluc3BlY3Rvcl9fbGluZTo6YmVmb3JlIHtcXG4gICAgICBjb250ZW50OiAnXFx1MjVCRSAnO1xcbiAgICAgIGZvbnQtc2l6ZTogXCIsIFwicHg7XFxuICAgICAgbGluZS1oZWlnaHQ6IFwiLCBcInB4O1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fcmFkaW8sXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fZmxhdHBhdGgge1xcbiAgICAgIGRpc3BsYXk6IG5vbmU7XFxuICAgIH1cXG5cXG4gICAgJiAuanNvbi1pbnNwZWN0b3IgLmpzb24taW5zcGVjdG9yX192YWx1ZSB7XFxuICAgICAgbWFyZ2luLWxlZnQ6IFwiLCBcIjtcXG4gICAgfVxcblxcbiAgICAmXFxuICAgICAgLmpzb24taW5zcGVjdG9yXFxuICAgICAgPiAuanNvbi1pbnNwZWN0b3JfX2xlYWZfcm9vdFxcbiAgICAgID4gLmpzb24taW5zcGVjdG9yX19saW5lXFxuICAgICAgPiAuanNvbi1pbnNwZWN0b3JfX2tleVxcbiAgICAgICsgLmpzb24taW5zcGVjdG9yX192YWx1ZSB7XFxuICAgICAgbWFyZ2luOiAwO1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fa2V5IHtcXG4gICAgICBjb2xvcjogXCIsIFwiO1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fdmFsdWVfaGVscGVyLFxcbiAgICAmIC5qc29uLWluc3BlY3RvciAuanNvbi1pbnNwZWN0b3JfX3ZhbHVlX251bGwge1xcbiAgICAgIGNvbG9yOiBcIiwgXCI7XFxuICAgIH1cXG5cXG4gICAgJiAuanNvbi1pbnNwZWN0b3IgLmpzb24taW5zcGVjdG9yX19ub3QtZm91bmQge1xcbiAgICAgIHBhZGRpbmctdG9wOiBcIiwgXCI7XFxuICAgIH1cXG5cXG4gICAgJiAuanNvbi1pbnNwZWN0b3IgLmpzb24taW5zcGVjdG9yX192YWx1ZV9zdHJpbmcge1xcbiAgICAgIGNvbG9yOiBcIiwgXCI7XFxuICAgIH1cXG5cXG4gICAgJiAuanNvbi1pbnNwZWN0b3IgLmpzb24taW5zcGVjdG9yX192YWx1ZV9ib29sZWFuIHtcXG4gICAgICBjb2xvcjogXCIsIFwiO1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fdmFsdWVfbnVtYmVyIHtcXG4gICAgICBjb2xvcjogXCIsIFwiO1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fc2hvdy1vcmlnaW5hbCB7XFxuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgICAgIHBhZGRpbmc6IDAgNnB4O1xcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgfVxcblxcbiAgICAmIC5qc29uLWluc3BlY3RvciAuanNvbi1pbnNwZWN0b3JfX3Nob3ctb3JpZ2luYWw6aG92ZXIge1xcbiAgICAgIGNvbG9yOiBpbmhlcml0O1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fc2hvdy1vcmlnaW5hbDo6YmVmb3JlIHtcXG4gICAgICBjb250ZW50OiAnXFx1MjE5NCc7XFxuICAgIH1cXG5cXG4gICAgJiAuanNvbi1pbnNwZWN0b3IgLmpzb24taW5zcGVjdG9yX19zaG93LW9yaWdpbmFsOmhvdmVyOjphZnRlciB7XFxuICAgICAgY29udGVudDogJyBleHBhbmQnO1xcbiAgICB9XFxuICBcIl0pKSwgZm9udHMuY29kZS5mYW1pbHksIGZvbnRzLmNvZGUuc2l6ZXNbMl0uZm9udFNpemUsIGZvbnRzLmNvZGUuc2l6ZXNbMl0ubGluZUhlaWdodCwgcmVtKHNwYWNlWzRdKSwgcmVtKHNwYWNlWzNdKSwgcmVtKHNwYWNlWzRdKSwgZm9udHMuY29kZS5zaXplc1syXS5mb250U2l6ZSwgZm9udHMuY29kZS5zaXplc1syXS5saW5lSGVpZ2h0LCBmb250cy5jb2RlLnNpemVzWzJdLmZvbnRTaXplLCBmb250cy5jb2RlLnNpemVzWzJdLmxpbmVIZWlnaHQsIHJlbShzcGFjZVs0XSAvIDIpLCBjb2xvci5zeW50YXgucHJvcGVydHksIGNvbG9yLnN5bnRheC5jb25zdGFudCwgcmVtKHNwYWNlWzNdKSwgY29sb3Iuc3ludGF4LnN0cmluZywgY29sb3Iuc3ludGF4LmJvb2xlYW4sIGNvbG9yLnN5bnRheC5udW1iZXIpO1xufSk7XG5mdW5jdGlvbiBTZWFyY2gocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIG9uQ2hhbmdlLFxuICAgIHF1ZXJ5XG4gIH0gPSBwcm9wcztcbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gdXNlQ2FsbGJhY2soZXZlbnQgPT4gb25DaGFuZ2UoZXZlbnQudGFyZ2V0LnZhbHVlKSwgW29uQ2hhbmdlXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goVGV4dElucHV0LCB7XG4gICAgaWNvbjogU2VhcmNoSWNvbixcbiAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLFxuICAgIHBsYWNlaG9sZGVyOiBcIlNlYXJjaFwiLFxuICAgIHJhZGl1czogMixcbiAgICB2YWx1ZTogcXVlcnkgfHwgXCJcIlxuICB9KTtcbn1cbmZ1bmN0aW9uIEluc3BlY3REaWFsb2cocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHZhbHVlXG4gIH0gPSBwcm9wcztcbiAgY29uc3Qge1xuICAgIG9uSW5zcGVjdENsb3NlLFxuICAgIHBhbmVLZXlcbiAgfSA9IHVzZURvY3VtZW50UGFuZSgpO1xuICBjb25zdCBkaWFsb2dJZFByZWZpeCA9IFwiXCIuY29uY2F0KHBhbmVLZXksIFwiX2luc3BlY3RfXCIpO1xuICBjb25zdCBbdmlld01vZGVJZCwgb25WaWV3TW9kZUNoYW5nZV0gPSB1c2VEZXNrVG9vbFNldHRpbmcoXCJkZXNrLXRvb2xcIiwgXCJpbnNwZWN0LXZpZXctcHJlZmVycmVkLXZpZXctbW9kZS1cIi5jb25jYXQocGFuZUtleSksIFwicGFyc2VkXCIpO1xuICBjb25zdCB2aWV3TW9kZSA9IFZJRVdfTU9ERVMuZmluZChtb2RlID0+IG1vZGUuaWQgPT09IHZpZXdNb2RlSWQpO1xuICBjb25zdCBzZXRQYXJzZWRWaWV3TW9kZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBvblZpZXdNb2RlQ2hhbmdlKFZJRVdfTU9ERV9QQVJTRUQuaWQpO1xuICB9LCBbb25WaWV3TW9kZUNoYW5nZV0pO1xuICBjb25zdCBzZXRSYXdWaWV3TW9kZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBvblZpZXdNb2RlQ2hhbmdlKFZJRVdfTU9ERV9SQVcuaWQpO1xuICB9LCBbb25WaWV3TW9kZUNoYW5nZV0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KERpYWxvZywge1xuICAgIGlkOiBcIlwiLmNvbmNhdChkaWFsb2dJZFByZWZpeCwgXCJkaWFsb2dcIiksXG4gICAgaGVhZGVyOiBpc0RvY3VtZW50TGlrZSh2YWx1ZSkgPyAvKiBAX19QVVJFX18gKi9qc3hzKEZyYWdtZW50LCB7XG4gICAgICBjaGlsZHJlbjogW1wiSW5zcGVjdGluZ1wiLCBcIiBcIiwgLyogQF9fUFVSRV9fICovanN4KFwiZW1cIiwge1xuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KERvY1RpdGxlLCB7XG4gICAgICAgICAgZG9jdW1lbnQ6IHZhbHVlXG4gICAgICAgIH0pXG4gICAgICB9KV1cbiAgICB9KSA6IC8qIEBfX1BVUkVfXyAqL2pzeChcImVtXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBcIk5vIHZhbHVlXCJcbiAgICB9KSxcbiAgICBvbkNsb3NlOiBvbkluc3BlY3RDbG9zZSxcbiAgICBvbkNsaWNrT3V0c2lkZTogb25JbnNwZWN0Q2xvc2UsXG4gICAgd2lkdGg6IDMsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgICAgZGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgICAgaGVpZ2h0OiBcImZpbGxcIixcbiAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KENhcmQsIHtcbiAgICAgICAgcGFkZGluZzogMyxcbiAgICAgICAgc2hhZG93OiAxLFxuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIHBvc2l0aW9uOiBcInN0aWNreVwiLFxuICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICB6SW5kZXg6IDNcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoVGFiTGlzdCwge1xuICAgICAgICAgIHNwYWNlOiAxLFxuICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFRhYiwge1xuICAgICAgICAgICAgXCJhcmlhLWNvbnRyb2xzXCI6IFwiXCIuY29uY2F0KGRpYWxvZ0lkUHJlZml4LCBcInRhYnBhbmVsXCIpLFxuICAgICAgICAgICAgZm9udFNpemU6IDEsXG4gICAgICAgICAgICBpZDogXCJcIi5jb25jYXQoZGlhbG9nSWRQcmVmaXgsIFwidGFiLVwiKS5jb25jYXQoVklFV19NT0RFX1BBUlNFRC5pZCksXG4gICAgICAgICAgICBsYWJlbDogVklFV19NT0RFX1BBUlNFRC50aXRsZSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IHNldFBhcnNlZFZpZXdNb2RlLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IHZpZXdNb2RlID09PSBWSUVXX01PREVfUEFSU0VEXG4gICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChUYWIsIHtcbiAgICAgICAgICAgIFwiYXJpYS1jb250cm9sc1wiOiBcIlwiLmNvbmNhdChkaWFsb2dJZFByZWZpeCwgXCJ0YWJwYW5lbFwiKSxcbiAgICAgICAgICAgIGZvbnRTaXplOiAxLFxuICAgICAgICAgICAgaWQ6IFwiXCIuY29uY2F0KGRpYWxvZ0lkUHJlZml4LCBcInRhYi1cIikuY29uY2F0KFZJRVdfTU9ERV9SQVcuaWQpLFxuICAgICAgICAgICAgbGFiZWw6IFZJRVdfTU9ERV9SQVcudGl0bGUsXG4gICAgICAgICAgICBvbkNsaWNrOiBzZXRSYXdWaWV3TW9kZSxcbiAgICAgICAgICAgIHNlbGVjdGVkOiB2aWV3TW9kZSA9PT0gVklFV19NT0RFX1JBV1xuICAgICAgICAgIH0pXVxuICAgICAgICB9KVxuICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeHMoVGFiUGFuZWwsIHtcbiAgICAgICAgXCJhcmlhLWxhYmVsbGVkYnlcIjogXCJcIi5jb25jYXQoZGlhbG9nSWRQcmVmaXgsIFwidGFiLVwiKS5jb25jYXQodmlld01vZGVJZCksXG4gICAgICAgIGZsZXg6IDEsXG4gICAgICAgIGlkOiBcIlwiLmNvbmNhdChkaWFsb2dJZFByZWZpeCwgXCJ0YWJwYW5lbFwiKSxcbiAgICAgICAgb3ZlcmZsb3c6IFwiYXV0b1wiLFxuICAgICAgICBwYWRkaW5nOiA0LFxuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIG91dGxpbmU6IFwibm9uZVwiXG4gICAgICAgIH0sXG4gICAgICAgIGNoaWxkcmVuOiBbdmlld01vZGUgPT09IFZJRVdfTU9ERV9QQVJTRUQgJiYgLyogQF9fUFVSRV9fICovanN4KEpTT05JbnNwZWN0b3JXcmFwcGVyLCB7XG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChKU09OSW5zcGVjdG9yLCB7XG4gICAgICAgICAgICBkYXRhOiB2YWx1ZSxcbiAgICAgICAgICAgIGlzRXhwYW5kZWQsXG4gICAgICAgICAgICBvbkNsaWNrOiB0b2dnbGVFeHBhbmRlZCxcbiAgICAgICAgICAgIHNlYXJjaDogU2VhcmNoXG4gICAgICAgICAgfSlcbiAgICAgICAgfSksIHZpZXdNb2RlID09PSBWSUVXX01PREVfUkFXICYmIC8qIEBfX1BVUkVfXyAqL2pzeChDb2RlLCB7XG4gICAgICAgICAgbGFuZ3VhZ2U6IFwianNvblwiLFxuICAgICAgICAgIHRhYkluZGV4OiAwLFxuICAgICAgICAgIG9uS2V5RG93bjogbWF5YmVTZWxlY3RBbGwsXG4gICAgICAgICAgb25Eb3VibGVDbGljazogc2VsZWN0LFxuICAgICAgICAgIG9uRm9jdXM6IHNlbGVjdCxcbiAgICAgICAgICBjaGlsZHJlbjogSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIDIpXG4gICAgICAgIH0pXVxuICAgICAgfSldXG4gICAgfSlcbiAgfSk7XG59XG5jb25zdCBSb290JDIgPSBzdHlsZWQoQ2FyZCkoX3RlbXBsYXRlT2JqZWN0MTYgfHwgKF90ZW1wbGF0ZU9iamVjdDE2ID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbXCJcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIHotaW5kZXg6IDUwO1xcblwiXSkpKTtcbmNvbnN0IFRleHRPbmVMaW5lID0gc3R5bGVkKFRleHQpKF90ZW1wbGF0ZU9iamVjdDE3IHx8IChfdGVtcGxhdGVPYmplY3QxNyA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoW1wiXFxuICAmID4gKiB7XFxuICAgIG92ZXJmbG93OiBoaWRkZW47XFxuICAgIG92ZXJmbG93OiBjbGlwO1xcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcXG4gIH1cXG5cIl0pKSk7XG5jb25zdCBSZWZlcmVuY2VDaGFuZ2VkQmFubmVyID0gbWVtbygoKSA9PiB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICBjb25zdCBkb2N1bWVudFByZXZpZXdTdG9yZSA9IHVzZURvY3VtZW50UHJldmlld1N0b3JlKCk7XG4gIGNvbnN0IHtcbiAgICBwYXJhbXMsXG4gICAgZ3JvdXBJbmRleCxcbiAgICByb3V0ZXJQYW5lc1N0YXRlLFxuICAgIHJlcGxhY2VDdXJyZW50LFxuICAgIEJhY2tMaW5rXG4gIH0gPSB1c2VQYW5lUm91dGVyKCk7XG4gIGNvbnN0IHJvdXRlclJlZmVyZW5jZUlkID0gKF9hID0gcm91dGVyUGFuZXNTdGF0ZVtncm91cEluZGV4XSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hWzBdLmlkO1xuICBjb25zdCBwYXJlbnRHcm91cCA9IHJvdXRlclBhbmVzU3RhdGVbZ3JvdXBJbmRleCAtIDFdO1xuICBjb25zdCBwYXJlbnRTaWJsaW5nID0gcGFyZW50R3JvdXAgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmVudEdyb3VwWzBdO1xuICBjb25zdCBwYXJlbnRJZCA9IHBhcmVudFNpYmxpbmcgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmVudFNpYmxpbmcuaWQ7XG4gIGNvbnN0IGhhc0hpc3RvcnlPcGVuID0gQm9vbGVhbigoX2IgPSBwYXJlbnRTaWJsaW5nID09IG51bGwgPyB2b2lkIDAgOiBwYXJlbnRTaWJsaW5nLnBhcmFtcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnJldik7XG4gIGNvbnN0IHBhcmVudFJlZlBhdGggPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gKHBhcmFtcyA9PSBudWxsID8gdm9pZCAwIDogcGFyYW1zLnBhcmVudFJlZlBhdGgpICYmIGZyb21TdHJpbmcocGFyYW1zLnBhcmVudFJlZlBhdGgpIHx8IG51bGw7XG4gIH0sIFtwYXJhbXMgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmFtcy5wYXJlbnRSZWZQYXRoXSk7XG4gIGNvbnN0IHJlZmVyZW5jZUluZm8gPSB1c2VNZW1vT2JzZXJ2YWJsZSgoKSA9PiB7XG4gICAgY29uc3QgcGFyZW50UmVmUGF0aFNlZ21lbnQgPSBwYXJlbnRSZWZQYXRoID09IG51bGwgPyB2b2lkIDAgOiBwYXJlbnRSZWZQYXRoWzBdO1xuICAgIGlmICghcGFyZW50SWQgfHwgIXBhcmVudFJlZlBhdGhTZWdtZW50IHx8ICFwYXJlbnRSZWZQYXRoKSB7XG4gICAgICByZXR1cm4gb2Yoe1xuICAgICAgICBsb2FkaW5nOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHB1Ymxpc2hlZElkID0gZ2V0UHVibGlzaGVkSWQocGFyZW50SWQpO1xuICAgIGNvbnN0IHBhdGggPSBmcm9tU3RyaW5nKHBhcmVudFJlZlBhdGhTZWdtZW50KTtcbiAgICBjb25zdCBrZXllZFNlZ21lbnRJbmRleCA9IHBhdGguZmluZEluZGV4KHAgPT4gdHlwZW9mIHAgPT0gXCJvYmplY3RcIiAmJiBcIl9rZXlcIiBpbiBwKTtcbiAgICByZXR1cm4gY29uY2F0KFxuICAgIC8vIGVtaXQgYSBsb2FkaW5nIHN0YXRlIGluc3RhbnRseVxuICAgIG9mKHtcbiAgICAgIGxvYWRpbmc6IHRydWVcbiAgICB9KSxcbiAgICAvLyB0aGVuIGVtaXQgdGhlIHZhbHVlcyBmcm9tIHdhdGNoaW5nIHRoZSBwdWJsaXNoZWQgSUQncyBwYXRoXG4gICAgZG9jdW1lbnRQcmV2aWV3U3RvcmUudW5zdGFibGVfb2JzZXJ2ZVBhdGhzRG9jdW1lbnRQYWlyKHB1Ymxpc2hlZElkLCBrZXllZFNlZ21lbnRJbmRleCA9PT0gLTEgPyBwYXRoIDogcGF0aC5zbGljZSgwLCBrZXllZFNlZ21lbnRJbmRleCkpLnBpcGUoXG4gICAgLy8gdGhpcyBkZWJvdW5jZSB0aW1lIGlzIG5lZWRlZCB0byBwcmV2ZW50IGZsYXNoaW5nIGJhbm5lcnMgZHVlIHRvXG4gICAgLy8gdGhlIHJvdXRlciBzdGF0ZSB1cGRhdGluZyBmYXN0ZXIgdGhhbiB0aGUgY29udGVudC1sYWtlIHN0YXRlLiB3ZVxuICAgIC8vIGRlYm91bmNlIHRvIHdhaXQgZm9yIG1vcmUgZW1pc3Npb25zIGJlY2F1c2UgdGhlIHZhbHVlIHB1bGxlZFxuICAgIC8vIGluaXRpYWxseSBjb3VsZCBiZSBzdGFsZS5cbiAgICBkZWJvdW5jZVRpbWUoNzUwKSwgbWFwKF9yZWYyNyA9PiB7XG4gICAgICBsZXQge1xuICAgICAgICBkcmFmdCxcbiAgICAgICAgcHVibGlzaGVkXG4gICAgICB9ID0gX3JlZjI3O1xuICAgICAgdmFyIF9hMjtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICBhdmFpbGFiaWxpdHk6IHtcbiAgICAgICAgICAgIGRyYWZ0OiBkcmFmdC5hdmFpbGFiaWxpdHksXG4gICAgICAgICAgICBwdWJsaXNoZWQ6IHB1Ymxpc2hlZC5hdmFpbGFiaWxpdHlcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlZlZhbHVlOiAoX2EyID0gZ2V0KGRyYWZ0LnNuYXBzaG90IHx8IHB1Ymxpc2hlZC5zbmFwc2hvdCwgcGFyZW50UmVmUGF0aCkpID09IG51bGwgPyB2b2lkIDAgOiBfYTIuX3JlZlxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pKSk7XG4gIH0sIFtkb2N1bWVudFByZXZpZXdTdG9yZSwgcGFyZW50SWQsIHBhcmVudFJlZlBhdGhdLCB7XG4gICAgbG9hZGluZzogdHJ1ZVxuICB9KTtcbiAgY29uc3QgaGFuZGxlUmVsb2FkUmVmZXJlbmNlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHZhciBfYTI7XG4gICAgaWYgKHJlZmVyZW5jZUluZm8ubG9hZGluZykgcmV0dXJuO1xuICAgIGlmICgoX2EyID0gcmVmZXJlbmNlSW5mby5yZXN1bHQpID09IG51bGwgPyB2b2lkIDAgOiBfYTIucmVmVmFsdWUpIHtcbiAgICAgIHJlcGxhY2VDdXJyZW50KHtcbiAgICAgICAgaWQ6IHJlZmVyZW5jZUluZm8ucmVzdWx0LnJlZlZhbHVlLFxuICAgICAgICBwYXJhbXNcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3JlZmVyZW5jZUluZm8ubG9hZGluZywgcmVmZXJlbmNlSW5mby5yZXN1bHQsIHJlcGxhY2VDdXJyZW50LCBwYXJhbXNdKTtcbiAgY29uc3Qgc2hvdWxkSGlkZSA9XG4gIC8vIGlmIGBwYXJlbnRJZGAgb3IgYHBhcmVudFJlZlBhdGhgIGlzIG5vdCBwcmVzZW50IHRoZW4gdGhpcyBiYW5uZXIgaXMgbi9hXG4gICFwYXJlbnRJZCB8fCAhcGFyZW50UmVmUGF0aCB8fFxuICAvLyBpZiB2aWV3aW5nIHRoaXMgcGFuZSB2aWEgaGlzdG9yeSwgdGhlbiBoaWRlXG4gIGhhc0hpc3RvcnlPcGVuIHx8XG4gIC8vIGlmIGxvYWRpbmcsIGhpZGVcbiAgcmVmZXJlbmNlSW5mby5sb2FkaW5nIHx8XG4gIC8vIGlmIHRoZSBwYXJlbnQgZG9jdW1lbnQgaXMgbm90IGF2YWlsYWJsZSAoZS5nLiBkdWUgdG8gcGVybWlzc2lvbiBkZW5pZWQgb3JcbiAgLy8gbm90IGZvdW5kKSB3ZSBkb24ndCB3YW50IHRvIGRpc3BsYXkgYSB3YXJuaW5nIGhlcmUsIGJ1dCBpbnN0ZWFkIHJlbHkgb24gdGhlXG4gIC8vIHBhcmVudCB2aWV3IHRvIGRpc3BsYXkgdGhlIGFwcHJvcHJpYXRlIG1lc3NhZ2VcbiAgISgoX2MgPSByZWZlcmVuY2VJbmZvLnJlc3VsdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmF2YWlsYWJpbGl0eS5kcmFmdC5hdmFpbGFibGUpICYmICEoKF9kID0gcmVmZXJlbmNlSW5mby5yZXN1bHQpID09IG51bGwgPyB2b2lkIDAgOiBfZC5hdmFpbGFiaWxpdHkucHVibGlzaGVkLmF2YWlsYWJsZSkgfHxcbiAgLy8gaWYgdGhlIHJlZmVyZW5jZXMgYXJlIHRoZSBzYW1lLCB0aGVuIGhpZGUgdGhlIHJlZmVyZW5jZSBjaGFuZ2VkIGJhbm5lclxuICAoKF9lID0gcmVmZXJlbmNlSW5mby5yZXN1bHQpID09IG51bGwgPyB2b2lkIDAgOiBfZS5yZWZWYWx1ZSkgPT09IHJvdXRlclJlZmVyZW5jZUlkO1xuICBpZiAoc2hvdWxkSGlkZSkgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUm9vdCQyLCB7XG4gICAgc2hhZG93OiAxLFxuICAgIHRvbmU6IFwiY2F1dGlvblwiLFxuICAgIFwiZGF0YS10ZXN0aWRcIjogXCJyZWZlcmVuY2UtY2hhbmdlZC1iYW5uZXJcIixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KENvbnRhaW5lciwge1xuICAgICAgcGFkZGluZ1g6IDQsXG4gICAgICBwYWRkaW5nWTogMixcbiAgICAgIHNpemluZzogXCJib3JkZXJcIixcbiAgICAgIHdpZHRoOiAxLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChXYXJuaW5nT3V0bGluZUljb24sIHt9KVxuICAgICAgICB9KSwgKChfZiA9IHJlZmVyZW5jZUluZm8ucmVzdWx0KSA9PSBudWxsID8gdm9pZCAwIDogX2YucmVmVmFsdWUpID8gLyogQF9fUFVSRV9fICovanN4cyhGcmFnbWVudCwge1xuICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICAgICAgZmxleDogMSxcbiAgICAgICAgICAgIG1hcmdpbkxlZnQ6IDMsXG4gICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFRleHRPbmVMaW5lLCB7XG4gICAgICAgICAgICAgIHRpdGxlOiBcIlRoaXMgcmVmZXJlbmNlIGhhcyBjaGFuZ2VkIHNpbmNlIHlvdSBvcGVuZWQgaXQuXCIsXG4gICAgICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBcIlRoaXMgcmVmZXJlbmNlIGhhcyBjaGFuZ2VkIHNpbmNlIHlvdSBvcGVuZWQgaXQuXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgICAgIG1hcmdpbkxlZnQ6IDMsXG4gICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEJ1dHRvbiwge1xuICAgICAgICAgICAgICBvbkNsaWNrOiBoYW5kbGVSZWxvYWRSZWZlcmVuY2UsXG4gICAgICAgICAgICAgIGljb246IFN5bmNJY29uLFxuICAgICAgICAgICAgICBmb250U2l6ZTogMSxcbiAgICAgICAgICAgICAgbW9kZTogXCJnaG9zdFwiLFxuICAgICAgICAgICAgICBwYWRkaW5nOiAyLFxuICAgICAgICAgICAgICBzcGFjZTogMixcbiAgICAgICAgICAgICAgdGV4dDogXCJSZWxvYWQgcmVmZXJlbmNlXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pIDogLyogQF9fUFVSRV9fICovanN4cyhGcmFnbWVudCwge1xuICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICAgICAgZmxleDogMSxcbiAgICAgICAgICAgIG1hcmdpbkxlZnQ6IDMsXG4gICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFRleHRPbmVMaW5lLCB7XG4gICAgICAgICAgICAgIHRpdGxlOiBcIlRoaXMgcmVmZXJlbmNlIGhhcyBiZWVuIHJlbW92ZWQgc2luY2UgeW91IG9wZW5lZCBpdC5cIixcbiAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFwiVGhpcyByZWZlcmVuY2UgaGFzIGJlZW4gcmVtb3ZlZCBzaW5jZSB5b3Ugb3BlbmVkIGl0LlwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgICAgICBtYXJnaW5MZWZ0OiAzLFxuICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChCdXR0b24sIHtcbiAgICAgICAgICAgICAgYXM6IEJhY2tMaW5rLFxuICAgICAgICAgICAgICBpY29uOiBDbG9zZUljb24sXG4gICAgICAgICAgICAgIGZvbnRTaXplOiAxLFxuICAgICAgICAgICAgICBtb2RlOiBcImdob3N0XCIsXG4gICAgICAgICAgICAgIHBhZGRpbmc6IDIsXG4gICAgICAgICAgICAgIHNwYWNlOiAyLFxuICAgICAgICAgICAgICB0ZXh0OiBcIkNsb3NlIHJlZmVyZW5jZVwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXVxuICAgICAgICB9KV1cbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG59KTtcblJlZmVyZW5jZUNoYW5nZWRCYW5uZXIuZGlzcGxheU5hbWUgPSBcIlJlZmVyZW5jZUNoYW5nZWRCYW5uZXJcIjtcbmNvbnN0IFJvb3QkMSA9IHN0eWxlZChDYXJkKShfdGVtcGxhdGVPYmplY3QxOCB8fCAoX3RlbXBsYXRlT2JqZWN0MTggPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFtcIlxcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgei1pbmRleDogNTA7XFxuXCJdKSkpO1xuZnVuY3Rpb24gUGVybWlzc2lvbkNoZWNrQmFubmVyKF9yZWYyOCkge1xuICBsZXQge1xuICAgIGdyYW50ZWQsXG4gICAgcmVxdWlyZWRQZXJtaXNzaW9uXG4gIH0gPSBfcmVmMjg7XG4gIHZhciBfYSwgX2I7XG4gIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlQ3VycmVudFVzZXIoKTtcbiAgY29uc3QgcGx1cmFsID0gKChfYSA9IGN1cnJlbnRVc2VyID09IG51bGwgPyB2b2lkIDAgOiBjdXJyZW50VXNlci5yb2xlcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkgIT09IDE7XG4gIGNvbnN0IHJvbGVzID0gam9pbigoKF9iID0gY3VycmVudFVzZXIgPT0gbnVsbCA/IHZvaWQgMCA6IGN1cnJlbnRVc2VyLnJvbGVzKSA9PSBudWxsID8gdm9pZCAwIDogX2IubWFwKHIgPT4gLyogQF9fUFVSRV9fICovanN4KFwiY29kZVwiLCB7XG4gICAgY2hpbGRyZW46IHIudGl0bGVcbiAgfSwgci5uYW1lKSkpIHx8IFtdLCBcIiwgXCIpO1xuICBpZiAoZ3JhbnRlZCkgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUm9vdCQxLCB7XG4gICAgXCJkYXRhLXRlc3RpZFwiOiBcInBlcm1pc3Npb24tY2hlY2stYmFubmVyXCIsXG4gICAgc2hhZG93OiAxLFxuICAgIHRvbmU6IFwidHJhbnNwYXJlbnRcIixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KENvbnRhaW5lciwge1xuICAgICAgcGFkZGluZ1g6IDQsXG4gICAgICBwYWRkaW5nWTogMyxcbiAgICAgIHNpemluZzogXCJib3JkZXJcIixcbiAgICAgIHdpZHRoOiAxLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgICAgICBhbGlnbjogXCJmbGV4LXN0YXJ0XCIsXG4gICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goUmVhZE9ubHlJY29uLCB7fSlcbiAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgICBmbGV4OiAxLFxuICAgICAgICAgIG1hcmdpbkxlZnQ6IDMsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoVGV4dCwge1xuICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXCJZb3VyIHJvbGVcIiwgcGx1cmFsICYmIFwic1wiLCBcIiBcIiwgcm9sZXMsIFwiIFwiLCBwbHVyYWwgPyBcImRvXCIgOiBcImRvZXNcIiwgXCIgbm90IGhhdmUgcGVybWlzc2lvbnMgdG9cIiwgXCIgXCIsIHJlcXVpcmVkUGVybWlzc2lvbiwgXCIgdGhpcyBkb2N1bWVudC5cIl1cbiAgICAgICAgICB9KVxuICAgICAgICB9KV1cbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG59XG5mdW5jdGlvbiBqb2luKGFycmF5LCBzZXApIHtcbiAgcmV0dXJuIGFycmF5LnJlZHVjZSgocmVzdWx0LCBpdGVtKSA9PiB7XG4gICAgaWYgKHJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIFtpdGVtXTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC5jb25jYXQoW3NlcCwgaXRlbV0pO1xuICB9LCBudWxsKTtcbn1cbmZ1bmN0aW9uIHVzZVByZXZpb3VzKHZhbHVlKSB7XG4gIGNvbnN0IHJlZiA9IHVzZVJlZigpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlZi5jdXJyZW50ID0gdmFsdWU7XG4gIH0sIFt2YWx1ZV0pO1xuICByZXR1cm4gcmVmLmN1cnJlbnQ7XG59XG5jb25zdCBMT05HX0VOT1VHSF9CVVRfTk9UX1RPT19MT05HID0gMWUzICogNjAgKiA2MCAqIDI0ICogMjQ7XG5mdW5jdGlvbiB1c2VDb25kaXRpb25hbFRvYXN0KHBhcmFtcykge1xuICBjb25zdCB0b2FzdCA9IHVzZVRvYXN0KCk7XG4gIGNvbnN0IHdhc0VuYWJsZWQgPSB1c2VQcmV2aW91cyhwYXJhbXMuZW5hYmxlZCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF3YXNFbmFibGVkICYmIHBhcmFtcy5lbmFibGVkKSB7XG4gICAgICB0b2FzdC5wdXNoKHtcbiAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICBkdXJhdGlvbjogTE9OR19FTk9VR0hfQlVUX05PVF9UT09fTE9OR1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh3YXNFbmFibGVkICYmICFwYXJhbXMuZW5hYmxlZCkge1xuICAgICAgdG9hc3QucHVzaCh7XG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgLy8gTm90ZTogQHNhbml0eS91aSBmYWxsYmFja3MgdG8gdGhlIGRlZmF1bHQgZHVyYXRpb24gb2YgNHMgaW4gY2FzZSBvZiBmYWxzZXkgdmFsdWVzXG4gICAgICAgIGR1cmF0aW9uOiAwLjAxXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwYXJhbXMsIHRvYXN0LCB3YXNFbmFibGVkXSk7XG59XG5jb25zdCBwcmV2ZW50RGVmYXVsdCA9IGV2ID0+IGV2LnByZXZlbnREZWZhdWx0KCk7XG5mdW5jdGlvbiBGb3JtVmlldyhwcm9wcykge1xuICB2YXIgX2E7XG4gIGNvbnN0IHtcbiAgICBoaWRkZW4sXG4gICAgbWFyZ2luc1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBjb2xsYXBzZWRGaWVsZFNldHMsXG4gICAgY29sbGFwc2VkUGF0aHMsXG4gICAgZGlzcGxheWVkOiB2YWx1ZSxcbiAgICBlZGl0U3RhdGUsXG4gICAgZG9jdW1lbnRJZCxcbiAgICBkb2N1bWVudFR5cGUsXG4gICAgb25DaGFuZ2UsXG4gICAgdmFsaWRhdGlvbixcbiAgICByZWFkeSxcbiAgICBmb3JtU3RhdGUsXG4gICAgb25Gb2N1cyxcbiAgICBvbkJsdXIsXG4gICAgb25TZXRDb2xsYXBzZWRQYXRoLFxuICAgIG9uUGF0aE9wZW4sXG4gICAgb25TZXRDb2xsYXBzZWRGaWVsZFNldCxcbiAgICBvblNldEFjdGl2ZUZpZWxkR3JvdXBcbiAgfSA9IHVzZURvY3VtZW50UGFuZSgpO1xuICBjb25zdCBkb2N1bWVudFN0b3JlID0gdXNlRG9jdW1lbnRTdG9yZSgpO1xuICBjb25zdCBwcmVzZW5jZSA9IHVzZURvY3VtZW50UHJlc2VuY2UoZG9jdW1lbnRJZCk7XG4gIGNvbnN0IHBhdGNoQ2hhbm5lbCA9IHVzZU1lbW8oKCkgPT4gY3JlYXRlUGF0Y2hDaGFubmVsKCksIFtdKTtcbiAgY29uc3QgaXNMb2NrZWQgPSAoX2EgPSBlZGl0U3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IGVkaXRTdGF0ZS50cmFuc2FjdGlvblN5bmNMb2NrKSA9PSBudWxsID8gdm9pZCAwIDogX2EuZW5hYmxlZDtcbiAgdXNlQ29uZGl0aW9uYWxUb2FzdCh7XG4gICAgaWQ6IFwic3luYy1sb2NrLVwiLmNvbmNhdChkb2N1bWVudElkKSxcbiAgICBzdGF0dXM6IFwid2FybmluZ1wiLFxuICAgIGVuYWJsZWQ6IGlzTG9ja2VkLFxuICAgIHRpdGxlOiBcIlN5bmNpbmcgZG9jdW1lbnRcXHUyMDI2XCIsXG4gICAgZGVzY3JpcHRpb246IFwiUGxlYXNlIGhvbGQgdGlnaHQgd2hpbGUgdGhlIGRvY3VtZW50IGlzIHN5bmNlZC4gVGhpcyB1c3VhbGx5IGhhcHBlbnMgcmlnaHQgYWZ0ZXIgdGhlIGRvY3VtZW50IGhhcyBiZWVuIHB1Ymxpc2hlZCwgYW5kIGl0IHNob3VsZG4ndCB0YWtlIG1vcmUgdGhhbiBhIGZldyBzZWNvbmRzXCJcbiAgfSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgc3ViID0gZG9jdW1lbnRTdG9yZS5wYWlyLmRvY3VtZW50RXZlbnRzKGRvY3VtZW50SWQsIGRvY3VtZW50VHlwZSkucGlwZSh0YXAoZXZlbnQgPT4ge1xuICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IFwibXV0YXRpb25cIikge1xuICAgICAgICBwYXRjaENoYW5uZWwucHVibGlzaChwcmVwYXJlTXV0YXRpb25FdmVudChldmVudCkpO1xuICAgICAgfVxuICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IFwicmViYXNlXCIpIHtcbiAgICAgICAgcGF0Y2hDaGFubmVsLnB1Ymxpc2gocHJlcGFyZVJlYmFzZUV2ZW50KGV2ZW50KSk7XG4gICAgICB9XG4gICAgfSkpLnN1YnNjcmliZSgpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzdWIudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICB9LCBbZG9jdW1lbnRJZCwgZG9jdW1lbnRTdG9yZSwgZG9jdW1lbnRUeXBlLCBwYXRjaENoYW5uZWxdKTtcbiAgY29uc3QgaGFzUmV2ID0gQm9vbGVhbih2YWx1ZSA9PSBudWxsID8gdm9pZCAwIDogdmFsdWUuX3Jldik7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGhhc1Jldikge1xuICAgICAgcGF0Y2hDaGFubmVsLnB1Ymxpc2goe1xuICAgICAgICB0eXBlOiBcIm11dGF0aW9uXCIsXG4gICAgICAgIHBhdGNoZXM6IFtdLFxuICAgICAgICBzbmFwc2hvdDogdmFsdWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2hhc1Jldl0pO1xuICBjb25zdCBmb3JtUmVmID0gdXNlUmVmKG51bGwpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyZWFkeSAmJiAhKGZvcm1TdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogZm9ybVN0YXRlLmZvY3VzUGF0aC5sZW5ndGgpKSB7XG4gICAgICBmb2N1c0ZpcnN0RGVzY2VuZGFudChmb3JtUmVmLmN1cnJlbnQpO1xuICAgIH1cbiAgfSwgW3JlYWR5XSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goQ29udGFpbmVyLCB7XG4gICAgaGlkZGVuLFxuICAgIHBhZGRpbmdYOiA0LFxuICAgIHBhZGRpbmdUb3A6IDUsXG4gICAgcGFkZGluZ0JvdHRvbTogOSxcbiAgICBzaXppbmc6IFwiYm9yZGVyXCIsXG4gICAgd2lkdGg6IDEsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChQcmVzZW5jZU92ZXJsYXksIHtcbiAgICAgIG1hcmdpbnMsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICBhczogXCJmb3JtXCIsXG4gICAgICAgIG9uU3VibWl0OiBwcmV2ZW50RGVmYXVsdCxcbiAgICAgICAgcmVmOiBmb3JtUmVmLFxuICAgICAgICBjaGlsZHJlbjogcmVhZHkgPyBmb3JtU3RhdGUgPT09IG51bGwgPyAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgICAgcGFkZGluZzogMixcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBcIlRoaXMgZm9ybSBpcyBoaWRkZW5cIlxuICAgICAgICAgIH0pXG4gICAgICAgIH0pIDogLyogQF9fUFVSRV9fICovanN4KEZvcm1CdWlsZGVyLCB7XG4gICAgICAgICAgX19pbnRlcm5hbF9wYXRjaENoYW5uZWw6IHBhdGNoQ2hhbm5lbCxcbiAgICAgICAgICBjb2xsYXBzZWRGaWVsZFNldHMsXG4gICAgICAgICAgY29sbGFwc2VkUGF0aHMsXG4gICAgICAgICAgZm9jdXNQYXRoOiBmb3JtU3RhdGUuZm9jdXNQYXRoLFxuICAgICAgICAgIGNoYW5nZWQ6IGZvcm1TdGF0ZS5jaGFuZ2VkLFxuICAgICAgICAgIGZvY3VzZWQ6IGZvcm1TdGF0ZS5mb2N1c2VkLFxuICAgICAgICAgIGdyb3VwczogZm9ybVN0YXRlLmdyb3VwcyxcbiAgICAgICAgICBpZDogXCJyb290XCIsXG4gICAgICAgICAgbWVtYmVyczogZm9ybVN0YXRlLm1lbWJlcnMsXG4gICAgICAgICAgb25DaGFuZ2UsXG4gICAgICAgICAgb25GaWVsZEdyb3VwU2VsZWN0OiBvblNldEFjdGl2ZUZpZWxkR3JvdXAsXG4gICAgICAgICAgb25QYXRoQmx1cjogb25CbHVyLFxuICAgICAgICAgIG9uUGF0aEZvY3VzOiBvbkZvY3VzLFxuICAgICAgICAgIG9uUGF0aE9wZW4sXG4gICAgICAgICAgb25TZXRGaWVsZFNldENvbGxhcHNlZDogb25TZXRDb2xsYXBzZWRGaWVsZFNldCxcbiAgICAgICAgICBvblNldFBhdGhDb2xsYXBzZWQ6IG9uU2V0Q29sbGFwc2VkUGF0aCxcbiAgICAgICAgICBwcmVzZW5jZSxcbiAgICAgICAgICByZWFkT25seTogZm9ybVN0YXRlLnJlYWRPbmx5LFxuICAgICAgICAgIHNjaGVtYVR5cGU6IGZvcm1TdGF0ZS5zY2hlbWFUeXBlLFxuICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgdmFsdWU6IGZvcm1TdGF0ZS52YWx1ZVxuICAgICAgICB9KSA6IC8qIEBfX1BVUkVfXyAqL2pzeChEZWxheSwge1xuICAgICAgICAgIG1zOiAzMDAsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgICAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgICAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICAgICAgICBoZWlnaHQ6IFwiZmlsbFwiLFxuICAgICAgICAgICAganVzdGlmeTogXCJjZW50ZXJcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFNwaW5uZXIsIHtcbiAgICAgICAgICAgICAgbXV0ZWQ6IHRydWVcbiAgICAgICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgICAgICAgIG1hcmdpblRvcDogMyxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgICAgICAgICAgbXV0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJMb2FkaW5nIGRvY3VtZW50XCJcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufVxuZnVuY3Rpb24gcHJlcGFyZU11dGF0aW9uRXZlbnQoZXZlbnQpIHtcbiAgY29uc3QgcGF0Y2hlcyA9IGV2ZW50Lm11dGF0aW9ucy5tYXAobXV0ID0+IG11dC5wYXRjaCkuZmlsdGVyKEJvb2xlYW4pO1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwibXV0YXRpb25cIixcbiAgICBzbmFwc2hvdDogZXZlbnQuZG9jdW1lbnQsXG4gICAgcGF0Y2hlczogZnJvbU11dGF0aW9uUGF0Y2hlcyhldmVudC5vcmlnaW4sIHBhdGNoZXMpXG4gIH07XG59XG5mdW5jdGlvbiBwcmVwYXJlUmViYXNlRXZlbnQoZXZlbnQpIHtcbiAgY29uc3QgcmVtb3RlUGF0Y2hlcyA9IGV2ZW50LnJlbW90ZU11dGF0aW9ucy5tYXAobXV0ID0+IG11dC5wYXRjaCkuZmlsdGVyKEJvb2xlYW4pO1xuICBjb25zdCBsb2NhbFBhdGNoZXMgPSBldmVudC5sb2NhbE11dGF0aW9ucy5tYXAobXV0ID0+IG11dC5wYXRjaCkuZmlsdGVyKEJvb2xlYW4pO1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwicmViYXNlXCIsXG4gICAgc25hcHNob3Q6IGV2ZW50LmRvY3VtZW50LFxuICAgIHBhdGNoZXM6IGZyb21NdXRhdGlvblBhdGNoZXMoXCJyZW1vdGVcIiwgcmVtb3RlUGF0Y2hlcykuY29uY2F0KGZyb21NdXRhdGlvblBhdGNoZXMoXCJsb2NhbFwiLCBsb2NhbFBhdGNoZXMpKVxuICB9O1xufVxuZnVuY3Rpb24gRG9jdW1lbnRIZWFkZXJUYWJzKCkge1xuICBjb25zdCB7XG4gICAgYWN0aXZlVmlld0lkLFxuICAgIHBhbmVLZXksXG4gICAgdmlld3NcbiAgfSA9IHVzZURvY3VtZW50UGFuZSgpO1xuICBjb25zdCB0YWJQYW5lbElkID0gXCJcIi5jb25jYXQocGFuZUtleSwgXCJ0YWJwYW5lbFwiKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChUYWJMaXN0LCB7XG4gICAgc3BhY2U6IDEsXG4gICAgY2hpbGRyZW46IHZpZXdzLm1hcCgodmlldywgaW5kZXgpID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goRG9jdW1lbnRIZWFkZXJUYWIsIHtcbiAgICAgICAgaWNvbjogdmlldy5pY29uLFxuICAgICAgICBpZDogXCJcIi5jb25jYXQocGFuZUtleSwgXCJ0YWItXCIpLmNvbmNhdCh2aWV3LmlkKSxcbiAgICAgICAgaXNBY3RpdmU6IGFjdGl2ZVZpZXdJZCA9PT0gdmlldy5pZCxcbiAgICAgICAgbGFiZWw6IC8qIEBfX1BVUkVfXyAqL2pzeChGcmFnbWVudCwge1xuICAgICAgICAgIGNoaWxkcmVuOiB2aWV3LnRpdGxlXG4gICAgICAgIH0pLFxuICAgICAgICB0YWJQYW5lbElkLFxuICAgICAgICB2aWV3SWQ6IGluZGV4ID09PSAwID8gbnVsbCA6IChfYSA9IHZpZXcuaWQpICE9IG51bGwgPyBfYSA6IG51bGxcbiAgICAgIH0sIHZpZXcuaWQpO1xuICAgIH0pXG4gIH0pO1xufVxuZnVuY3Rpb24gRG9jdW1lbnRIZWFkZXJUYWIocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGlzQWN0aXZlLFxuICAgIHRhYlBhbmVsSWQsXG4gICAgdmlld0lkXG4gIH0gPSBwcm9wcztcbiAgY29uc3Qge1xuICAgIHJlYWR5XG4gIH0gPSB1c2VEb2N1bWVudFBhbmUoKTtcbiAgY29uc3Qge1xuICAgIHNldFZpZXdcbiAgfSA9IHVzZVBhbmVSb3V0ZXIoKTtcbiAgY29uc3QgaGFuZGxlQ2xpY2sgPSB1c2VDYWxsYmFjaygoKSA9PiBzZXRWaWV3KHZpZXdJZCksIFtzZXRWaWV3LCB2aWV3SWRdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChUYWIsIHtcbiAgICAuLi5wcm9wcyxcbiAgICBcImFyaWEtY29udHJvbHNcIjogdGFiUGFuZWxJZCxcbiAgICBkaXNhYmxlZDogIXJlYWR5LFxuICAgIGZvbnRTaXplOiAxLFxuICAgIHNlbGVjdGVkOiBpc0FjdGl2ZSxcbiAgICBvbkNsaWNrOiBoYW5kbGVDbGlja1xuICB9KTtcbn1cbmNvbnN0IEJVVFRPTl9QUk9QUyA9IHtcbiAgZXJyb3I6IHtcbiAgICB0b25lOiBcImNyaXRpY2FsXCIsXG4gICAgaWNvbjogRXJyb3JPdXRsaW5lSWNvblxuICB9LFxuICB3YXJuaW5nOiB7XG4gICAgdG9uZTogXCJjYXV0aW9uXCIsXG4gICAgaWNvbjogV2FybmluZ091dGxpbmVJY29uXG4gIH0sXG4gIGluZm86IHtcbiAgICB0b25lOiBcInByaW1hcnlcIixcbiAgICBpY29uOiBJbmZvT3V0bGluZUljb25cbiAgfVxufTtcbmZ1bmN0aW9uIFZhbGlkYXRpb25NZW51KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBib3VuZGFyeUVsZW1lbnQsXG4gICAgaXNPcGVuLFxuICAgIHNldE9wZW5cbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgb25Gb2N1cyxcbiAgICBvblBhdGhPcGVuLFxuICAgIHNjaGVtYVR5cGUsXG4gICAgdmFsaWRhdGlvblxuICB9ID0gdXNlRG9jdW1lbnRQYW5lKCk7XG4gIGNvbnN0IGlkID0gdXNlSWQoKTtcbiAgY29uc3QgaGFzVmFsaWRhdGlvbk1hcmtlcnMgPSB2YWxpZGF0aW9uLmxlbmd0aCA+IDA7XG4gIGNvbnN0IGhhc0Vycm9yTWFya2VycyA9IHZhbGlkYXRpb24uc29tZShpc1ZhbGlkYXRpb25FcnJvck1hcmtlcik7XG4gIGNvbnN0IGhhc1dhcm5pbmdNYXJrZXJzID0gdmFsaWRhdGlvbi5zb21lKGlzVmFsaWRhdGlvbldhcm5pbmdNYXJrZXIpO1xuICBjb25zdCBoYXNJbmZvTWFya2VycyA9IHZhbGlkYXRpb24uc29tZShpc1ZhbGlkYXRpb25JbmZvTWFya2VyKTtcbiAgY29uc3QgYnV0dG9uUHJvcHMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoaGFzRXJyb3JNYXJrZXJzKSByZXR1cm4gQlVUVE9OX1BST1BTLmVycm9yO1xuICAgIGlmIChoYXNXYXJuaW5nTWFya2VycykgcmV0dXJuIEJVVFRPTl9QUk9QUy53YXJuaW5nO1xuICAgIGlmIChoYXNJbmZvTWFya2VycykgcmV0dXJuIEJVVFRPTl9QUk9QUy5pbmZvO1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH0sIFtoYXNFcnJvck1hcmtlcnMsIGhhc0luZm9NYXJrZXJzLCBoYXNXYXJuaW5nTWFya2Vyc10pO1xuICBjb25zdCBoYW5kbGVPcGVuID0gdXNlQ2FsbGJhY2socGF0aCA9PiB7XG4gICAgb25QYXRoT3BlbihwYXRoKTtcbiAgICBvbkZvY3VzKHBhdGgpO1xuICB9LCBbb25Gb2N1cywgb25QYXRoT3Blbl0pO1xuICBjb25zdCBoYW5kbGVDbG9zZSA9IHVzZUNhbGxiYWNrKCgpID0+IHNldE9wZW4oZmFsc2UpLCBbc2V0T3Blbl0pO1xuICBpZiAoIWhhc1ZhbGlkYXRpb25NYXJrZXJzKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChNZW51QnV0dG9uLCB7XG4gICAgaWQ6IGlkIHx8IFwiXCIsXG4gICAgYnV0dG9uOiAvKiBAX19QVVJFX18gKi9qc3goQnV0dG9uLCB7XG4gICAgICAuLi5idXR0b25Qcm9wcyxcbiAgICAgIHRpdGxlOiBcIlNob3cgdmFsaWRhdGlvbiBpc3N1ZXNcIixcbiAgICAgIG1vZGU6IFwiYmxlZWRcIixcbiAgICAgIFwiZGF0YS10ZXN0aWRcIjogXCJ2YWxpZGF0aW9uLWxpc3QtYnV0dG9uXCJcbiAgICB9KSxcbiAgICBtZW51OiAvKiBAX19QVVJFX18gKi9qc3goTWVudSwge1xuICAgICAgb3BlbjogaXNPcGVuLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChWYWxpZGF0aW9uTGlzdCwge1xuICAgICAgICBkb2N1bWVudFR5cGU6IHNjaGVtYVR5cGUsXG4gICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgIG9uQ2xvc2U6IGhhbmRsZUNsb3NlLFxuICAgICAgICBvbkZvY3VzOiBoYW5kbGVPcGVuXG4gICAgICB9KVxuICAgIH0pLFxuICAgIHBvcG92ZXI6IHtcbiAgICAgIHBvcnRhbDogdHJ1ZSxcbiAgICAgIGJvdW5kYXJ5RWxlbWVudCxcbiAgICAgIGNvbnN0cmFpblNpemU6IHRydWUsXG4gICAgICBwcmV2ZW50T3ZlcmZsb3c6IHRydWUsXG4gICAgICB3aWR0aDogMFxuICAgIH0sXG4gICAgcGxhY2VtZW50OiBcImJvdHRvbVwiXG4gIH0pO1xufVxuZnVuY3Rpb24gRG9jdW1lbnRIZWFkZXJUaXRsZSgpIHtcbiAgY29uc3Qge1xuICAgIGNvbm5lY3Rpb25TdGF0ZSxcbiAgICBzY2hlbWFUeXBlLFxuICAgIHRpdGxlLFxuICAgIHZhbHVlOiBkb2N1bWVudFZhbHVlXG4gIH0gPSB1c2VEb2N1bWVudFBhbmUoKTtcbiAgY29uc3Qgc3Vic2NyaWJlZCA9IEJvb2xlYW4oZG9jdW1lbnRWYWx1ZSkgJiYgY29ubmVjdGlvblN0YXRlID09PSBcImNvbm5lY3RlZFwiO1xuICBjb25zdCB7XG4gICAgZXJyb3IsXG4gICAgdmFsdWVcbiAgfSA9IHVuc3RhYmxlX3VzZVZhbHVlUHJldmlldyh7XG4gICAgZW5hYmxlZDogc3Vic2NyaWJlZCxcbiAgICBzY2hlbWFUeXBlLFxuICAgIHZhbHVlOiBkb2N1bWVudFZhbHVlXG4gIH0pO1xuICBpZiAoY29ubmVjdGlvblN0YXRlICE9PSBcImNvbm5lY3RlZFwiKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChGcmFnbWVudCwge30pO1xuICB9XG4gIGlmICh0aXRsZSkge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goRnJhZ21lbnQsIHtcbiAgICAgIGNoaWxkcmVuOiB0aXRsZVxuICAgIH0pO1xuICB9XG4gIGlmICghZG9jdW1lbnRWYWx1ZSkge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3hzKEZyYWdtZW50LCB7XG4gICAgICBjaGlsZHJlbjogW1wiTmV3IFwiLCAoc2NoZW1hVHlwZSA9PSBudWxsID8gdm9pZCAwIDogc2NoZW1hVHlwZS50aXRsZSkgfHwgKHNjaGVtYVR5cGUgPT0gbnVsbCA/IHZvaWQgMCA6IHNjaGVtYVR5cGUubmFtZSldXG4gICAgfSk7XG4gIH1cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeHMoRnJhZ21lbnQsIHtcbiAgICAgIGNoaWxkcmVuOiBbXCJFcnJvcjogXCIsIGVycm9yLm1lc3NhZ2VdXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChGcmFnbWVudCwge1xuICAgIGNoaWxkcmVuOiAodmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlLnRpdGxlKSB8fCAvKiBAX19QVVJFX18gKi9qc3goXCJzcGFuXCIsIHtcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIGNvbG9yOiBcInZhcigtLWNhcmQtbXV0ZWQtZmctY29sb3IpXCJcbiAgICAgIH0sXG4gICAgICBjaGlsZHJlbjogXCJVbnRpdGxlZFwiXG4gICAgfSlcbiAgfSk7XG59XG5jb25zdCBpc0FjdGlvbkJ1dHRvbiA9IGl0ZW0gPT4gQm9vbGVhbihpdGVtLnNob3dBc0FjdGlvbik7XG5jb25zdCBpc01lbnVCdXR0b24gPSBuZWdhdGUoaXNBY3Rpb25CdXR0b24pO1xuY29uc3QgRG9jdW1lbnRQYW5lbEhlYWRlciA9IG1lbW8oZm9yd2FyZFJlZigoX3JlZjI5LCByZWYpID0+IHtcbiAgbGV0IHtcbiAgICByb290RWxlbWVudFxuICB9ID0gX3JlZjI5O1xuICBjb25zdCB7XG4gICAgb25NZW51QWN0aW9uLFxuICAgIG9uUGFuZUNsb3NlLFxuICAgIG9uUGFuZVNwbGl0LFxuICAgIHZhbGlkYXRpb24sXG4gICAgbWVudUl0ZW1zLFxuICAgIG1lbnVJdGVtR3JvdXBzLFxuICAgIHNjaGVtYVR5cGUsXG4gICAgdGltZWxpbmVTdG9yZSxcbiAgICByZWFkeSxcbiAgICB2aWV3cyxcbiAgICB1bnN0YWJsZV9sYW5ndWFnZUZpbHRlclxuICB9ID0gdXNlRG9jdW1lbnRQYW5lKCk7XG4gIGNvbnN0IHtcbiAgICBmZWF0dXJlc1xuICB9ID0gdXNlRGVza1Rvb2woKTtcbiAgY29uc3Qge1xuICAgIGluZGV4LFxuICAgIEJhY2tMaW5rLFxuICAgIGhhc0dyb3VwU2libGluZ3NcbiAgfSA9IHVzZVBhbmVSb3V0ZXIoKTtcbiAgY29uc3QgY29udGV4dE1lbnVJdGVtcyA9IHVzZU1lbW8oKCkgPT4gbWVudUl0ZW1zLmZpbHRlcihpc01lbnVCdXR0b24pLCBbbWVudUl0ZW1zXSk7XG4gIGNvbnN0IFtpc1ZhbGlkYXRpb25PcGVuLCBzZXRWYWxpZGF0aW9uT3Blbl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHNob3dUYWJzID0gdmlld3MubGVuZ3RoID4gMTtcbiAgY29uc3Qgc2hvd1ZlcnNpb25NZW51ID0gZmVhdHVyZXMucmV2aWV3Q2hhbmdlcztcbiAgY29uc3QgcmV2ID0gdXNlVGltZWxpbmVTZWxlY3Rvcih0aW1lbGluZVN0b3JlLCBzdGF0ZSA9PiBzdGF0ZS5yZXZUaW1lKTtcbiAgY29uc3Qge1xuICAgIGNvbGxhcHNlZCxcbiAgICBpc0xhc3RcbiAgfSA9IHVzZVBhbmUoKTtcbiAgY29uc3QgdGFiSW5kZXggPSBpc0xhc3QgJiYgIWNvbGxhcHNlZCA/IC0xIDogMDtcbiAgY29uc3Qgc2hvd1NwbGl0UGFuZUJ1dHRvbiA9IGZlYXR1cmVzLnNwbGl0Vmlld3MgJiYgb25QYW5lU3BsaXQgJiYgdmlld3MubGVuZ3RoID4gMTtcbiAgY29uc3Qgc2hvd1NwbGl0UGFuZUNsb3NlQnV0dG9uID0gc2hvd1NwbGl0UGFuZUJ1dHRvbiAmJiBoYXNHcm91cFNpYmxpbmdzO1xuICBjb25zdCBzaG93UGFuZUdyb3VwQ2xvc2VCdXR0b24gPSAhc2hvd1NwbGl0UGFuZUNsb3NlQnV0dG9uICYmICFmZWF0dXJlcy5iYWNrQnV0dG9uO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFBhbmVIZWFkZXIsIHtcbiAgICByZWYsXG4gICAgbG9hZGluZzogIXJlYWR5LFxuICAgIHRpdGxlOiAvKiBAX19QVVJFX18gKi9qc3goRG9jdW1lbnRIZWFkZXJUaXRsZSwge30pLFxuICAgIHRhYnM6IHNob3dUYWJzICYmIC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudEhlYWRlclRhYnMsIHt9KSxcbiAgICB0YWJJbmRleCxcbiAgICBiYWNrQnV0dG9uOiBmZWF0dXJlcy5iYWNrQnV0dG9uICYmIGluZGV4ID4gMCAmJiAvKiBAX19QVVJFX18gKi9qc3goQnV0dG9uLCB7XG4gICAgICBhczogQmFja0xpbmssXG4gICAgICBcImRhdGEtYXNcIjogXCJhXCIsXG4gICAgICBpY29uOiBBcnJvd0xlZnRJY29uLFxuICAgICAgbW9kZTogXCJibGVlZFwiXG4gICAgfSksXG4gICAgc3ViQWN0aW9uczogc2hvd1ZlcnNpb25NZW51ICYmIC8qIEBfX1BVUkVfXyAqL2pzeChUaW1lbGluZU1lbnUsIHtcbiAgICAgIGNodW5rOiByZXYsXG4gICAgICBtb2RlOiBcInJldlwiLFxuICAgICAgcGxhY2VtZW50OiBcImJvdHRvbS1lbmRcIlxuICAgIH0pLFxuICAgIGFjdGlvbnM6IC8qIEBfX1BVUkVfXyAqL2pzeHMoSW5saW5lLCB7XG4gICAgICBzcGFjZTogMSxcbiAgICAgIGNoaWxkcmVuOiBbdW5zdGFibGVfbGFuZ3VhZ2VGaWx0ZXIubGVuZ3RoID4gMCAmJiAvKiBAX19QVVJFX18gKi9qc3goRnJhZ21lbnQsIHtcbiAgICAgICAgY2hpbGRyZW46IHVuc3RhYmxlX2xhbmd1YWdlRmlsdGVyLm1hcCgobGFuZ3VhZ2VGaWx0ZXJDb21wb25lbnQsIGlkeCkgPT4ge1xuICAgICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KGxhbmd1YWdlRmlsdGVyQ29tcG9uZW50LCB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3Qvbm8tYXJyYXktaW5kZXgta2V5XG4gICAgICAgICAgICBrZXk6IFwibGFuZ3VhZ2UtZmlsdGVyLVwiLmNvbmNhdChpZHgpLFxuICAgICAgICAgICAgc2NoZW1hVHlwZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgfSksIHZhbGlkYXRpb24ubGVuZ3RoID4gMCAmJiAvKiBAX19QVVJFX18gKi9qc3goVmFsaWRhdGlvbk1lbnUsIHtcbiAgICAgICAgYm91bmRhcnlFbGVtZW50OiByb290RWxlbWVudCxcbiAgICAgICAgaXNPcGVuOiBpc1ZhbGlkYXRpb25PcGVuLFxuICAgICAgICBzZXRPcGVuOiBzZXRWYWxpZGF0aW9uT3BlblxuICAgICAgfSwgXCJ2YWxpZGF0aW9uLW1lbnVcIiksIC8qIEBfX1BVUkVfXyAqL2pzeChQYW5lQ29udGV4dE1lbnVCdXR0b24sIHtcbiAgICAgICAgaXRlbUdyb3VwczogbWVudUl0ZW1Hcm91cHMsXG4gICAgICAgIGl0ZW1zOiBjb250ZXh0TWVudUl0ZW1zLFxuICAgICAgICBvbkFjdGlvbjogb25NZW51QWN0aW9uXG4gICAgICB9LCBcImNvbnRleHQtbWVudVwiKSwgc2hvd1NwbGl0UGFuZUJ1dHRvbiAmJiAvKiBAX19QVVJFX18gKi9qc3goQnV0dG9uLCB7XG4gICAgICAgIGljb246IFNwbGl0VmVydGljYWxJY29uLFxuICAgICAgICBtb2RlOiBcImJsZWVkXCIsXG4gICAgICAgIG9uQ2xpY2s6IG9uUGFuZVNwbGl0LFxuICAgICAgICB0aXRsZTogXCJTcGxpdCBwYW5lIHJpZ2h0XCJcbiAgICAgIH0sIFwic3BsaXQtcGFuZS1idXR0b25cIiksIHNob3dTcGxpdFBhbmVDbG9zZUJ1dHRvbiAmJiAvKiBAX19QVVJFX18gKi9qc3goQnV0dG9uLCB7XG4gICAgICAgIGljb246IENsb3NlSWNvbixcbiAgICAgICAgbW9kZTogXCJibGVlZFwiLFxuICAgICAgICBvbkNsaWNrOiBvblBhbmVDbG9zZSxcbiAgICAgICAgdGl0bGU6IFwiQ2xvc2Ugc3BsaXQgcGFuZVwiXG4gICAgICB9LCBcImNsb3NlLXZpZXctYnV0dG9uXCIpLCBzaG93UGFuZUdyb3VwQ2xvc2VCdXR0b24gJiYgLyogQF9fUFVSRV9fICovanN4KEJ1dHRvbiwge1xuICAgICAgICBpY29uOiBDbG9zZUljb24sXG4gICAgICAgIG1vZGU6IFwiYmxlZWRcIixcbiAgICAgICAgdGl0bGU6IFwiQ2xvc2UgcGFuZSBncm91cFwiLFxuICAgICAgICBhczogQmFja0xpbmtcbiAgICAgIH0sIFwiY2xvc2Utdmlldy1idXR0b25cIildXG4gICAgfSlcbiAgfSk7XG59KSk7XG5Eb2N1bWVudFBhbmVsSGVhZGVyLmRpc3BsYXlOYW1lID0gXCJEb2N1bWVudFBhbmVsSGVhZGVyXCI7XG5jb25zdCBTY3JvbGxlciA9IHN0eWxlZChTY3JvbGxDb250YWluZXIpKF9yZWYzMCA9PiB7XG4gIGxldCB7XG4gICAgJGRpc2FibGVkXG4gIH0gPSBfcmVmMzA7XG4gIGlmICgkZGlzYWJsZWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGVpZ2h0OiBcIjEwMCVcIlxuICAgIH07XG4gIH1cbiAgcmV0dXJuIGNzcyhfdGVtcGxhdGVPYmplY3QxOSB8fCAoX3RlbXBsYXRlT2JqZWN0MTkgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFtcIlxcbiAgICBoZWlnaHQ6IDEwMCU7XFxuICAgIG92ZXJmbG93OiBhdXRvO1xcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICAgIHNjcm9sbC1iZWhhdmlvcjogc21vb3RoO1xcbiAgICBvdXRsaW5lOiBub25lO1xcbiAgXCJdKSkpO1xufSk7XG5jb25zdCBEb2N1bWVudFBhbmVsID0gZnVuY3Rpb24gRG9jdW1lbnRQYW5lbDIocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGZvb3RlckhlaWdodCxcbiAgICBpc0luc3BlY3RPcGVuLFxuICAgIHJvb3RFbGVtZW50LFxuICAgIHNldERvY3VtZW50UGFuZWxQb3J0YWxFbGVtZW50XG4gIH0gPSBwcm9wcztcbiAgY29uc3Qge1xuICAgIGFjdGl2ZVZpZXdJZCxcbiAgICBkaXNwbGF5ZWQsXG4gICAgZG9jdW1lbnRJZCxcbiAgICBlZGl0U3RhdGUsXG4gICAgdmFsdWUsXG4gICAgdmlld3MsXG4gICAgcmVhZHksXG4gICAgc2NoZW1hVHlwZSxcbiAgICBwZXJtaXNzaW9ucyxcbiAgICBpc1Blcm1pc3Npb25zTG9hZGluZ1xuICB9ID0gdXNlRG9jdW1lbnRQYW5lKCk7XG4gIGNvbnN0IHtcbiAgICBjb2xsYXBzZWQ6IGxheW91dENvbGxhcHNlZFxuICB9ID0gdXNlUGFuZUxheW91dCgpO1xuICBjb25zdCBwYXJlbnRQb3J0YWwgPSB1c2VQb3J0YWwoKTtcbiAgY29uc3Qge1xuICAgIGZlYXR1cmVzXG4gIH0gPSB1c2VEZXNrVG9vbCgpO1xuICBjb25zdCBbaGVhZGVyRWxlbWVudCwgc2V0SGVhZGVyRWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgaGVhZGVyUmVjdCA9IHVzZUVsZW1lbnRSZWN0KGhlYWRlckVsZW1lbnQpO1xuICBjb25zdCBwb3J0YWxSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IFtkb2N1bWVudFNjcm9sbEVsZW1lbnQsIHNldERvY3VtZW50U2Nyb2xsRWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgcmVxdWlyZWRQZXJtaXNzaW9uID0gdmFsdWUuX2NyZWF0ZWRBdCA/IFwidXBkYXRlXCIgOiBcImNyZWF0ZVwiO1xuICBjb25zdCBhY3RpdmVWaWV3ID0gdXNlTWVtbygoKSA9PiB2aWV3cy5maW5kKHZpZXcgPT4gdmlldy5pZCA9PT0gYWN0aXZlVmlld0lkKSB8fCB2aWV3c1swXSB8fCB7XG4gICAgdHlwZTogXCJmb3JtXCJcbiAgfSwgW2FjdGl2ZVZpZXdJZCwgdmlld3NdKTtcbiAgY29uc3QgcG9ydGFsRWxlbWVudCA9IGZlYXR1cmVzLnNwbGl0UGFuZXMgPyBwb3J0YWxSZWYuY3VycmVudCB8fCBwYXJlbnRQb3J0YWwuZWxlbWVudCA6IHBhcmVudFBvcnRhbC5lbGVtZW50O1xuICBjb25zdCBtYXJnaW5zID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGxheW91dENvbGxhcHNlZCkge1xuICAgICAgcmV0dXJuIFsoaGVhZGVyUmVjdCA9PSBudWxsID8gdm9pZCAwIDogaGVhZGVyUmVjdC5oZWlnaHQpIHx8IDAsIDAsIGZvb3RlckhlaWdodCA/IGZvb3RlckhlaWdodCArIDIgOiAyLCAwXTtcbiAgICB9XG4gICAgcmV0dXJuIFswLCAwLCAyLCAwXTtcbiAgfSwgW2xheW91dENvbGxhcHNlZCwgZm9vdGVySGVpZ2h0LCBoZWFkZXJSZWN0XSk7XG4gIGNvbnN0IGZvcm1WaWV3SGlkZGVuID0gYWN0aXZlVmlldy50eXBlICE9PSBcImZvcm1cIjtcbiAgY29uc3QgYWN0aXZlVmlld05vZGUgPSB1c2VNZW1vKCgpID0+IGFjdGl2ZVZpZXcudHlwZSA9PT0gXCJjb21wb25lbnRcIiAmJiBhY3RpdmVWaWV3LmNvbXBvbmVudCAmJiBjcmVhdGVFbGVtZW50KGFjdGl2ZVZpZXcuY29tcG9uZW50LCB7XG4gICAgZG9jdW1lbnQ6IHtcbiAgICAgIGRyYWZ0OiAoZWRpdFN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBlZGl0U3RhdGUuZHJhZnQpIHx8IG51bGwsXG4gICAgICBkaXNwbGF5ZWQ6IGRpc3BsYXllZCB8fCB2YWx1ZSxcbiAgICAgIGhpc3RvcmljYWw6IGRpc3BsYXllZCxcbiAgICAgIHB1Ymxpc2hlZDogKGVkaXRTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogZWRpdFN0YXRlLnB1Ymxpc2hlZCkgfHwgbnVsbFxuICAgIH0sXG4gICAgZG9jdW1lbnRJZCxcbiAgICBvcHRpb25zOiBhY3RpdmVWaWV3Lm9wdGlvbnMsXG4gICAgc2NoZW1hVHlwZVxuICB9KSwgW2FjdGl2ZVZpZXcsIGRpc3BsYXllZCwgZG9jdW1lbnRJZCwgZWRpdFN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBlZGl0U3RhdGUuZHJhZnQsIGVkaXRTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogZWRpdFN0YXRlLnB1Ymxpc2hlZCwgc2NoZW1hVHlwZSwgdmFsdWVdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIShkb2N1bWVudFNjcm9sbEVsZW1lbnQgPT0gbnVsbCA/IHZvaWQgMCA6IGRvY3VtZW50U2Nyb2xsRWxlbWVudC5zY3JvbGxUbykpIHJldHVybjtcbiAgICBkb2N1bWVudFNjcm9sbEVsZW1lbnQuc2Nyb2xsVG8oMCwgMCk7XG4gIH0sIFtkb2N1bWVudElkLCBkb2N1bWVudFNjcm9sbEVsZW1lbnRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocG9ydGFsRWxlbWVudCkge1xuICAgICAgc2V0RG9jdW1lbnRQYW5lbFBvcnRhbEVsZW1lbnQocG9ydGFsRWxlbWVudCk7XG4gICAgfVxuICB9LCBbcG9ydGFsRWxlbWVudCwgc2V0RG9jdW1lbnRQYW5lbFBvcnRhbEVsZW1lbnRdKTtcbiAgY29uc3QgaW5zcGVjdERpYWxvZyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBpc0luc3BlY3RPcGVuID8gLyogQF9fUFVSRV9fICovanN4KEluc3BlY3REaWFsb2csIHtcbiAgICAgIHZhbHVlOiBkaXNwbGF5ZWQgfHwgdmFsdWVcbiAgICB9KSA6IG51bGw7XG4gIH0sIFtpc0luc3BlY3RPcGVuLCBkaXNwbGF5ZWQsIHZhbHVlXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3hzKEZsZXgsIHtcbiAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgZmxleDogMixcbiAgICBvdmVyZmxvdzogbGF5b3V0Q29sbGFwc2VkID8gdm9pZCAwIDogXCJoaWRkZW5cIixcbiAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudFBhbmVsSGVhZGVyLCB7XG4gICAgICByb290RWxlbWVudCxcbiAgICAgIHJlZjogc2V0SGVhZGVyRWxlbWVudFxuICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goUGFuZUNvbnRlbnQsIHtcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goUG9ydGFsUHJvdmlkZXIsIHtcbiAgICAgICAgZWxlbWVudDogcG9ydGFsRWxlbWVudCxcbiAgICAgICAgX191bnN0YWJsZV9lbGVtZW50czoge1xuICAgICAgICAgIGRvY3VtZW50U2Nyb2xsRWxlbWVudFxuICAgICAgICB9LFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEJvdW5kYXJ5RWxlbWVudFByb3ZpZGVyLCB7XG4gICAgICAgICAgZWxlbWVudDogZG9jdW1lbnRTY3JvbGxFbGVtZW50LFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hzKFZpcnR1YWxpemVyU2Nyb2xsSW5zdGFuY2VQcm92aWRlciwge1xuICAgICAgICAgICAgc2Nyb2xsRWxlbWVudDogZG9jdW1lbnRTY3JvbGxFbGVtZW50LFxuICAgICAgICAgICAgY2hpbGRyZW46IFthY3RpdmVWaWV3LnR5cGUgPT09IFwiZm9ybVwiICYmICFpc1Blcm1pc3Npb25zTG9hZGluZyAmJiByZWFkeSAmJiAvKiBAX19QVVJFX18gKi9qc3hzKEZyYWdtZW50LCB7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFBlcm1pc3Npb25DaGVja0Jhbm5lciwge1xuICAgICAgICAgICAgICAgIGdyYW50ZWQ6IEJvb2xlYW4ocGVybWlzc2lvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IHBlcm1pc3Npb25zLmdyYW50ZWQpLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkUGVybWlzc2lvblxuICAgICAgICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KFJlZmVyZW5jZUNoYW5nZWRCYW5uZXIsIHt9KV1cbiAgICAgICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3hzKFNjcm9sbGVyLCB7XG4gICAgICAgICAgICAgICRkaXNhYmxlZDogbGF5b3V0Q29sbGFwc2VkIHx8IGZhbHNlLFxuICAgICAgICAgICAgICBcImRhdGEtdGVzdGlkXCI6IFwiZG9jdW1lbnQtcGFuZWwtc2Nyb2xsZXJcIixcbiAgICAgICAgICAgICAgcmVmOiBzZXREb2N1bWVudFNjcm9sbEVsZW1lbnQsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KEZvcm1WaWV3LCB7XG4gICAgICAgICAgICAgICAgaGlkZGVuOiBmb3JtVmlld0hpZGRlbixcbiAgICAgICAgICAgICAgICBtYXJnaW5zXG4gICAgICAgICAgICAgIH0sIGRvY3VtZW50SWQgKyAocmVhZHkgPyBcIl9yZWFkeVwiIDogXCJfcGVuZGluZ1wiKSksIGFjdGl2ZVZpZXdOb2RlXVxuICAgICAgICAgICAgfSksIGluc3BlY3REaWFsb2csIC8qIEBfX1BVUkVfXyAqL2pzeChcImRpdlwiLCB7XG4gICAgICAgICAgICAgIFwiZGF0YS10ZXN0aWRcIjogXCJkb2N1bWVudC1wYW5lbC1wb3J0YWxcIixcbiAgICAgICAgICAgICAgcmVmOiBwb3J0YWxSZWZcbiAgICAgICAgICAgIH0pXVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn07XG5jb25zdCBQT1BPVkVSX0ZBTExCQUNLX1BMQUNFTUVOVFMgPSBbXCJsZWZ0XCIsIFwiYm90dG9tXCJdO1xuY29uc3QgRElBTE9HX1dJRFRIX1RPX1VJX1dJRFRIID0ge1xuICBzbWFsbDogMCxcbiAgbWVkaXVtOiAxLFxuICBsYXJnZTogMixcbiAgZnVsbDogXCJhdXRvXCJcbn07XG5mdW5jdGlvbiBDb25maXJtRGlhbG9nKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBkaWFsb2csXG4gICAgcmVmZXJlbmNlRWxlbWVudFxuICB9ID0gcHJvcHM7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUG9wb3Zlciwge1xuICAgIGNvbnRlbnQ6IC8qIEBfX1BVUkVfXyAqL2pzeChDb25maXJtRGlhbG9nQ29udGVudCwge1xuICAgICAgZGlhbG9nXG4gICAgfSksXG4gICAgZmFsbGJhY2tQbGFjZW1lbnRzOiBQT1BPVkVSX0ZBTExCQUNLX1BMQUNFTUVOVFMsXG4gICAgb3BlbjogdHJ1ZSxcbiAgICBwbGFjZW1lbnQ6IFwidG9wXCIsXG4gICAgcG9ydGFsOiB0cnVlLFxuICAgIHByZXZlbnRPdmVyZmxvdzogdHJ1ZSxcbiAgICByZWZlcmVuY2VFbGVtZW50XG4gIH0pO1xufVxuZnVuY3Rpb24gQ29uZmlybURpYWxvZ0NvbnRlbnQocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGRpYWxvZ1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBjYW5jZWxCdXR0b25JY29uLFxuICAgIGNhbmNlbEJ1dHRvblRleHQsXG4gICAgY29uZmlybUJ1dHRvbkljb24sXG4gICAgY29uZmlybUJ1dHRvblRleHQsXG4gICAgLy8gY29sb3IsXG4gICAgbWVzc2FnZSxcbiAgICBvbkNhbmNlbCxcbiAgICBvbkNvbmZpcm0sXG4gICAgdG9uZVxuICB9ID0gZGlhbG9nO1xuICBjb25zdCB7XG4gICAgaXNUb3BMYXllclxuICB9ID0gdXNlTGF5ZXIoKTtcbiAgY29uc3QgW2VsZW1lbnQsIHNldEVsZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IGhhbmRsZUNsaWNrT3V0c2lkZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoaXNUb3BMYXllcikgb25DYW5jZWwoKTtcbiAgfSwgW2lzVG9wTGF5ZXIsIG9uQ2FuY2VsXSk7XG4gIGNvbnN0IGhhbmRsZUdsb2JhbEtleURvd24gPSB1c2VDYWxsYmFjayhldmVudCA9PiB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIiAmJiBpc1RvcExheWVyKSBvbkNhbmNlbCgpO1xuICB9LCBbaXNUb3BMYXllciwgb25DYW5jZWxdKTtcbiAgdXNlQ2xpY2tPdXRzaWRlKGhhbmRsZUNsaWNrT3V0c2lkZSwgW2VsZW1lbnRdKTtcbiAgdXNlR2xvYmFsS2V5RG93bihoYW5kbGVHbG9iYWxLZXlEb3duKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICByZWY6IHNldEVsZW1lbnQsXG4gICAgc3R5bGU6IHtcbiAgICAgIG1pbldpZHRoOiAzMjAgLSAxNixcbiAgICAgIG1heFdpZHRoOiA0MDBcbiAgICB9LFxuICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgZmxleDogMSxcbiAgICAgIG92ZXJmbG93OiBcImF1dG9cIixcbiAgICAgIHBhZGRpbmc6IDQsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgY2hpbGRyZW46IG1lc3NhZ2VcbiAgICAgIH0pXG4gICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgIHBhZGRpbmdYOiA0LFxuICAgICAgcGFkZGluZ1k6IDMsXG4gICAgICBzdHlsZToge1xuICAgICAgICBib3JkZXJUb3A6IFwiMXB4IHNvbGlkIHZhcigtLWNhcmQtYm9yZGVyLWNvbG9yKVwiXG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoR3JpZCwge1xuICAgICAgICBjb2x1bW5zOiAyLFxuICAgICAgICBnYXA6IDIsXG4gICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KEJ1dHRvbiwge1xuICAgICAgICAgIGljb246IGNhbmNlbEJ1dHRvbkljb24sXG4gICAgICAgICAgb25DbGljazogb25DYW5jZWwsXG4gICAgICAgICAgbW9kZTogXCJnaG9zdFwiLFxuICAgICAgICAgIHRleHQ6IGNhbmNlbEJ1dHRvblRleHQgfHwgXCJDYW5jZWxcIlxuICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KEJ1dHRvbiwge1xuICAgICAgICAgIGljb246IGNvbmZpcm1CdXR0b25JY29uLFxuICAgICAgICAgIG9uQ2xpY2s6IG9uQ29uZmlybSxcbiAgICAgICAgICB0ZXh0OiBjb25maXJtQnV0dG9uVGV4dCB8fCBcIkNvbmZpcm1cIixcbiAgICAgICAgICB0b25lXG4gICAgICAgIH0pXVxuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG59XG5mdW5jdGlvbiBNb2RhbERpYWxvZyhwcm9wcykge1xuICBjb25zdCB7XG4gICAgZGlhbG9nXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGlhbG9nSWQgPSB1c2VJZCgpO1xuICBjb25zdCBmb290ZXIgPSBkaWFsb2cuZm9vdGVyICYmIC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICBwYWRkaW5nWDogNCxcbiAgICBwYWRkaW5nWTogMyxcbiAgICBjaGlsZHJlbjogZGlhbG9nLmZvb3RlclxuICB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChMZWdhY3lMYXllclByb3ZpZGVyLCB7XG4gICAgek9mZnNldDogXCJmdWxsc2NyZWVuXCIsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChEaWFsb2csIHtcbiAgICAgIF9fdW5zdGFibGVfaGlkZUNsb3NlQnV0dG9uOiBkaWFsb2cuc2hvd0Nsb3NlQnV0dG9uID09PSBmYWxzZSxcbiAgICAgIGZvb3RlcixcbiAgICAgIGhlYWRlcjogZGlhbG9nLmhlYWRlcixcbiAgICAgIGlkOiBkaWFsb2dJZCxcbiAgICAgIG9uQ2xvc2U6IGRpYWxvZy5vbkNsb3NlLFxuICAgICAgb25DbGlja091dHNpZGU6IGRpYWxvZy5vbkNsb3NlLFxuICAgICAgd2lkdGg6IGRpYWxvZy53aWR0aCA9PT0gdm9pZCAwID8gMSA6IERJQUxPR19XSURUSF9UT19VSV9XSURUSFtkaWFsb2cud2lkdGhdLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgcGFkZGluZzogNCxcbiAgICAgICAgY2hpbGRyZW46IGRpYWxvZy5jb250ZW50XG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufVxuZnVuY3Rpb24gUG9wb3ZlckRpYWxvZyhwcm9wcykge1xuICBjb25zdCB7XG4gICAgZGlhbG9nLFxuICAgIHJlZmVyZW5jZUVsZW1lbnRcbiAgfSA9IHByb3BzO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFBvcG92ZXIsIHtcbiAgICBjb250ZW50OiAvKiBAX19QVVJFX18gKi9qc3goUG9wb3ZlckRpYWxvZ0NvbnRlbnQsIHtcbiAgICAgIGRpYWxvZ1xuICAgIH0pLFxuICAgIGZhbGxiYWNrUGxhY2VtZW50czogUE9QT1ZFUl9GQUxMQkFDS19QTEFDRU1FTlRTLFxuICAgIG9wZW46IHRydWUsXG4gICAgcGxhY2VtZW50OiBcInRvcFwiLFxuICAgIHBvcnRhbDogdHJ1ZSxcbiAgICBwcmV2ZW50T3ZlcmZsb3c6IHRydWUsXG4gICAgcmVmZXJlbmNlRWxlbWVudFxuICB9KTtcbn1cbmZ1bmN0aW9uIFBvcG92ZXJEaWFsb2dDb250ZW50KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBkaWFsb2dcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgY29udGVudCxcbiAgICBvbkNsb3NlXG4gIH0gPSBkaWFsb2c7XG4gIGNvbnN0IHtcbiAgICBpc1RvcExheWVyXG4gIH0gPSB1c2VMYXllcigpO1xuICBjb25zdCBbZWxlbWVudCwgc2V0RWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgaGFuZGxlQ2xpY2tPdXRzaWRlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChpc1RvcExheWVyKSBvbkNsb3NlKCk7XG4gIH0sIFtpc1RvcExheWVyLCBvbkNsb3NlXSk7XG4gIGNvbnN0IGhhbmRsZUdsb2JhbEtleURvd24gPSB1c2VDYWxsYmFjayhldmVudCA9PiB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIiAmJiBpc1RvcExheWVyKSBvbkNsb3NlKCk7XG4gIH0sIFtpc1RvcExheWVyLCBvbkNsb3NlXSk7XG4gIHVzZUNsaWNrT3V0c2lkZShoYW5kbGVDbGlja091dHNpZGUsIFtlbGVtZW50XSk7XG4gIHVzZUdsb2JhbEtleURvd24oaGFuZGxlR2xvYmFsS2V5RG93bik7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goXCJkaXZcIiwge1xuICAgIHJlZjogc2V0RWxlbWVudCxcbiAgICBjaGlsZHJlbjogY29udGVudFxuICB9KTtcbn1cbmZ1bmN0aW9uIERvY3VtZW50QWN0aW9uUG9ydGFsUHJvdmlkZXIocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGNoaWxkcmVuXG4gIH0gPSBwcm9wcztcbiAgY29uc3Qge1xuICAgIGVsZW1lbnQsXG4gICAgZWxlbWVudHNcbiAgfSA9IHVzZVBvcnRhbCgpO1xuICBjb25zdCBwb3J0YWxFbGVtZW50ID0gKGVsZW1lbnRzID09IG51bGwgPyB2b2lkIDAgOiBlbGVtZW50c1tET0NVTUVOVF9QQU5FTF9QT1JUQUxfRUxFTUVOVF0pIHx8IGVsZW1lbnQ7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUG9ydGFsUHJvdmlkZXIsIHtcbiAgICBlbGVtZW50OiBwb3J0YWxFbGVtZW50LFxuICAgIGNoaWxkcmVuXG4gIH0pO1xufVxuZnVuY3Rpb24gQWN0aW9uU3RhdGVEaWFsb2cocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGRpYWxvZyxcbiAgICByZWZlcmVuY2VFbGVtZW50ID0gbnVsbFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IG1vZGFsSWQgPSB1c2VJZCgpO1xuICBpZiAoZGlhbG9nLnR5cGUgPT09IFwiY29uZmlybVwiKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChDb25maXJtRGlhbG9nLCB7XG4gICAgICBkaWFsb2csXG4gICAgICByZWZlcmVuY2VFbGVtZW50XG4gICAgfSk7XG4gIH1cbiAgaWYgKGRpYWxvZy50eXBlID09PSBcInBvcG92ZXJcIikge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUG9wb3ZlckRpYWxvZywge1xuICAgICAgZGlhbG9nLFxuICAgICAgcmVmZXJlbmNlRWxlbWVudFxuICAgIH0pO1xuICB9XG4gIGlmIChkaWFsb2cudHlwZSA9PT0gXCJkaWFsb2dcIiB8fCAhZGlhbG9nLnR5cGUpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KERvY3VtZW50QWN0aW9uUG9ydGFsUHJvdmlkZXIsIHtcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goTW9kYWxEaWFsb2csIHtcbiAgICAgICAgZGlhbG9nXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG4gIGlmIChkaWFsb2cudHlwZSA9PT0gXCJjdXN0b21cIikge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goRG9jdW1lbnRBY3Rpb25Qb3J0YWxQcm92aWRlciwge1xuICAgICAgY2hpbGRyZW46IGRpYWxvZyA9PSBudWxsID8gdm9pZCAwIDogZGlhbG9nLmNvbXBvbmVudFxuICAgIH0pO1xuICB9XG4gIGNvbnN0IHVua25vd25Nb2RhbCA9IGRpYWxvZztcbiAgY29uc29sZS53YXJuKFwiVW5zdXBwb3J0ZWQgbW9kYWwgdHlwZSBcIi5jb25jYXQodW5rbm93bk1vZGFsLnR5cGUpKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChEaWFsb2csIHtcbiAgICBpZDogbW9kYWxJZCxcbiAgICBvbkNsb3NlOiB1bmtub3duTW9kYWwub25DbG9zZSxcbiAgICBvbkNsaWNrT3V0c2lkZTogdW5rbm93bk1vZGFsLm9uQ2xvc2UsXG4gICAgd2lkdGg6IDIsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgIHBhZGRpbmc6IDQsXG4gICAgICBjaGlsZHJlbjogdW5rbm93bk1vZGFsLmNvbnRlbnQgfHwgLyogQF9fUFVSRV9fICovanN4cyhGcmFnbWVudCwge1xuICAgICAgICBjaGlsZHJlbjogW1wiVW5leHBlY3RlZCBtb2RhbCB0eXBlIChcIiwgLyogQF9fUFVSRV9fICovanN4KFwiY29kZVwiLCB7XG4gICAgICAgICAgY2hpbGRyZW46IHVua25vd25Nb2RhbC50eXBlXG4gICAgICAgIH0pLCBcIilcIl1cbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG59XG5mdW5jdGlvbiBBY3Rpb25NZW51QnV0dG9uKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBhY3Rpb25TdGF0ZXMsXG4gICAgZGlzYWJsZWRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBpZFByZWZpeCA9IHVzZUlkKCk7XG4gIGNvbnN0IGJ1dHRvblJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgW2FjdGlvbkluZGV4LCBzZXRBY3Rpb25JbmRleF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtyZWZlcmVuY2VFbGVtZW50LCBzZXRSZWZlcmVuY2VFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBoYW5kbGVBY3Rpb24gPSB1c2VDYWxsYmFjayhpZHggPT4ge1xuICAgIHNldEFjdGlvbkluZGV4KGlkeCk7XG4gIH0sIFtdKTtcbiAgY29uc3QgcG9wb3ZlclByb3BzID0gdXNlTWVtbygoKSA9PiAoe1xuICAgIHBsYWNlbWVudDogXCJ0b3AtZW5kXCIsXG4gICAgcG9ydGFsOiB0cnVlLFxuICAgIHByZXZlbnRPdmVyZmxvdzogdHJ1ZVxuICB9KSwgW10pO1xuICBjb25zdCBjdXJyZW50QWN0aW9uID0gYWN0aW9uU3RhdGVzW2FjdGlvbkluZGV4XTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeHMoRnJhZ21lbnQsIHtcbiAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChNZW51QnV0dG9uLCB7XG4gICAgICBpZDogXCJcIi5jb25jYXQoaWRQcmVmaXgsIFwiLWFjdGlvbi1tZW51XCIpLFxuICAgICAgYnV0dG9uOiAvKiBAX19QVVJFX18gKi9qc3goQnV0dG9uLCB7XG4gICAgICAgIFwiZGF0YS10ZXN0aWRcIjogXCJhY3Rpb24tbWVudS1idXR0b25cIixcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IFwiT3BlbiBkb2N1bWVudCBhY3Rpb25zXCIsXG4gICAgICAgIGRpc2FibGVkLFxuICAgICAgICBpY29uOiBDaGV2cm9uRG93bkljb24sXG4gICAgICAgIG1vZGU6IFwiZ2hvc3RcIixcbiAgICAgICAgcmVmOiBidXR0b25SZWZcbiAgICAgIH0pLFxuICAgICAgbWVudTogLyogQF9fUFVSRV9fICovanN4KE1lbnUsIHtcbiAgICAgICAgcGFkZGluZzogMSxcbiAgICAgICAgY2hpbGRyZW46IGFjdGlvblN0YXRlcy5tYXAoKGFjdGlvblN0YXRlLCBpZHgpID0+IC8qIEBfX1BVUkVfXyAqL2pzeChBY3Rpb25NZW51TGlzdEl0ZW0sIHtcbiAgICAgICAgICBhY3Rpb25TdGF0ZSxcbiAgICAgICAgICBkaXNhYmxlZCxcbiAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgIG9uQWN0aW9uOiBoYW5kbGVBY3Rpb25cbiAgICAgICAgfSwgaWR4KSlcbiAgICAgIH0pLFxuICAgICAgcG9wb3ZlcjogcG9wb3ZlclByb3BzLFxuICAgICAgcmVmOiBzZXRSZWZlcmVuY2VFbGVtZW50XG4gICAgfSksIGN1cnJlbnRBY3Rpb24gJiYgY3VycmVudEFjdGlvbi5kaWFsb2cgJiYgLyogQF9fUFVSRV9fICovanN4KExlZ2FjeUxheWVyUHJvdmlkZXIsIHtcbiAgICAgIHpPZmZzZXQ6IFwicGFuZUZvb3RlclwiLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChBY3Rpb25TdGF0ZURpYWxvZywge1xuICAgICAgICBkaWFsb2c6IGN1cnJlbnRBY3Rpb24uZGlhbG9nLFxuICAgICAgICByZWZlcmVuY2VFbGVtZW50XG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cbmZ1bmN0aW9uIEFjdGlvbk1lbnVMaXN0SXRlbShwcm9wcykge1xuICBjb25zdCB7XG4gICAgYWN0aW9uU3RhdGUsXG4gICAgZGlzYWJsZWQsXG4gICAgaW5kZXgsXG4gICAgb25BY3Rpb25cbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgb25IYW5kbGVcbiAgfSA9IGFjdGlvblN0YXRlO1xuICBjb25zdCBoYW5kbGVDbGljayA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBvbkFjdGlvbihpbmRleCk7XG4gICAgaWYgKG9uSGFuZGxlKSBvbkhhbmRsZSgpO1xuICB9LCBbaW5kZXgsIG9uQWN0aW9uLCBvbkhhbmRsZV0pO1xuICBjb25zdCB0b29sdGlwQ29udGVudCA9IGFjdGlvblN0YXRlLnRpdGxlICYmIC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICBwYWRkaW5nOiAyLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgc2l6ZTogMSxcbiAgICAgIGNoaWxkcmVuOiBhY3Rpb25TdGF0ZS50aXRsZVxuICAgIH0pXG4gIH0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KE1lbnVJdGVtLCB7XG4gICAgXCJkYXRhLXRlc3RpZFwiOiBcImFjdGlvbi1cIi5jb25jYXQoYWN0aW9uU3RhdGUubGFiZWwucmVwbGFjZShcIiBcIiwgXCJcIikpLFxuICAgIGRpc2FibGVkOiBkaXNhYmxlZCB8fCBCb29sZWFuKGFjdGlvblN0YXRlLmRpc2FibGVkKSxcbiAgICBvbkNsaWNrOiBoYW5kbGVDbGljayxcbiAgICBwYWRkaW5nOiAwLFxuICAgIHRvbmU6IGFjdGlvblN0YXRlLnRvbmUsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUb29sdGlwLCB7XG4gICAgICBjb250ZW50OiB0b29sdGlwQ29udGVudCxcbiAgICAgIGRpc2FibGVkOiAhdG9vbHRpcENvbnRlbnQsXG4gICAgICBmYWxsYmFja1BsYWNlbWVudHM6IFtcImxlZnRcIiwgXCJib3R0b21cIl0sXG4gICAgICBwbGFjZW1lbnQ6IFwidG9wXCIsXG4gICAgICBwb3J0YWw6IHRydWUsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhGbGV4LCB7XG4gICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICBwYWRkaW5nWDogMyxcbiAgICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3hzKEZsZXgsIHtcbiAgICAgICAgICBmbGV4OiAxLFxuICAgICAgICAgIHBhZGRpbmdZOiAzLFxuICAgICAgICAgIGNoaWxkcmVuOiBbYWN0aW9uU3RhdGUuaWNvbiAmJiAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgICAgICBtYXJnaW5SaWdodDogMyxcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hzKFRleHQsIHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtpc1ZhbGlkRWxlbWVudChhY3Rpb25TdGF0ZS5pY29uKSAmJiBhY3Rpb25TdGF0ZS5pY29uLCBpc1ZhbGlkRWxlbWVudFR5cGUoYWN0aW9uU3RhdGUuaWNvbikgJiYgY3JlYXRlRWxlbWVudChhY3Rpb25TdGF0ZS5pY29uKV1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogYWN0aW9uU3RhdGUubGFiZWxcbiAgICAgICAgICB9KV1cbiAgICAgICAgfSksIGFjdGlvblN0YXRlLnNob3J0Y3V0ICYmIC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgICBtYXJnaW5MZWZ0OiAzLFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goSG90a2V5cywge1xuICAgICAgICAgICAga2V5czogU3RyaW5nKGFjdGlvblN0YXRlLnNob3J0Y3V0KS5zcGxpdChcIitcIikubWFwKHMgPT4gcy5zbGljZSgwLCAxKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KV1cbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG59XG5mdW5jdGlvbiBEb2N1bWVudFN0YXR1c0JhckFjdGlvbnNJbm5lcihwcm9wcykge1xuICBjb25zdCB7XG4gICAgZGlzYWJsZWQsXG4gICAgc2hvd01lbnUsXG4gICAgc3RhdGVzXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgW2ZpcnN0QWN0aW9uU3RhdGUsIC4uLm1lbnVBY3Rpb25TdGF0ZXNdID0gc3RhdGVzO1xuICBjb25zdCBbYnV0dG9uRWxlbWVudCwgc2V0QnV0dG9uRWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgdG9vbHRpcENvbnRlbnQgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIWZpcnN0QWN0aW9uU3RhdGUgfHwgIWZpcnN0QWN0aW9uU3RhdGUudGl0bGUgJiYgIWZpcnN0QWN0aW9uU3RhdGUuc2hvcnRjdXQpIHJldHVybiBudWxsO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3hzKEZsZXgsIHtcbiAgICAgIHBhZGRpbmc6IDIsXG4gICAgICBzdHlsZToge1xuICAgICAgICBtYXhXaWR0aDogMzAwXG4gICAgICB9LFxuICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgIHNpemU6IDEsXG4gICAgICAgIGNoaWxkcmVuOiBmaXJzdEFjdGlvblN0YXRlLnRpdGxlXG4gICAgICB9KSwgZmlyc3RBY3Rpb25TdGF0ZS5zaG9ydGN1dCAmJiAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgIG1hcmdpbkxlZnQ6IGZpcnN0QWN0aW9uU3RhdGUudGl0bGUgPyAyIDogMCxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChIb3RrZXlzLCB7XG4gICAgICAgICAga2V5czogU3RyaW5nKGZpcnN0QWN0aW9uU3RhdGUuc2hvcnRjdXQpLnNwbGl0KFwiK1wiKS5tYXAocyA9PiBzLnNsaWNlKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgIH0pXG4gICAgICB9KV1cbiAgICB9KTtcbiAgfSwgW2ZpcnN0QWN0aW9uU3RhdGVdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgIGNoaWxkcmVuOiBbZmlyc3RBY3Rpb25TdGF0ZSAmJiAvKiBAX19QVVJFX18gKi9qc3goTGF5ZXJQcm92aWRlciwge1xuICAgICAgek9mZnNldDogMjAwLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUb29sdGlwLCB7XG4gICAgICAgIGRpc2FibGVkOiAhdG9vbHRpcENvbnRlbnQsXG4gICAgICAgIGNvbnRlbnQ6IHRvb2x0aXBDb250ZW50LFxuICAgICAgICBwb3J0YWw6IHRydWUsXG4gICAgICAgIHBsYWNlbWVudDogXCJ0b3BcIixcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChTdGFjaywge1xuICAgICAgICAgIGZsZXg6IDEsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChCdXR0b24sIHtcbiAgICAgICAgICAgIFwiZGF0YS10ZXN0aWRcIjogXCJhY3Rpb24tXCIuY29uY2F0KGZpcnN0QWN0aW9uU3RhdGUubGFiZWwpLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkIHx8IEJvb2xlYW4oZmlyc3RBY3Rpb25TdGF0ZS5kaXNhYmxlZCksXG4gICAgICAgICAgICBpY29uOiBmaXJzdEFjdGlvblN0YXRlLmljb24sXG4gICAgICAgICAgICBvbkNsaWNrOiBmaXJzdEFjdGlvblN0YXRlLm9uSGFuZGxlLFxuICAgICAgICAgICAgcmVmOiBzZXRCdXR0b25FbGVtZW50LFxuICAgICAgICAgICAgdGV4dDogZmlyc3RBY3Rpb25TdGF0ZS5sYWJlbCxcbiAgICAgICAgICAgIHRvbmU6IGZpcnN0QWN0aW9uU3RhdGUudG9uZSB8fCBcInByaW1hcnlcIlxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pLCBzaG93TWVudSAmJiBtZW51QWN0aW9uU3RhdGVzLmxlbmd0aCA+IDAgJiYgLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgbWFyZ2luTGVmdDogMSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQWN0aW9uTWVudUJ1dHRvbiwge1xuICAgICAgICBhY3Rpb25TdGF0ZXM6IG1lbnVBY3Rpb25TdGF0ZXMsXG4gICAgICAgIGRpc2FibGVkXG4gICAgICB9KVxuICAgIH0pLCBmaXJzdEFjdGlvblN0YXRlICYmIGZpcnN0QWN0aW9uU3RhdGUuZGlhbG9nICYmIC8qIEBfX1BVUkVfXyAqL2pzeChBY3Rpb25TdGF0ZURpYWxvZywge1xuICAgICAgZGlhbG9nOiBmaXJzdEFjdGlvblN0YXRlLmRpYWxvZyxcbiAgICAgIHJlZmVyZW5jZUVsZW1lbnQ6IGJ1dHRvbkVsZW1lbnRcbiAgICB9KV1cbiAgfSk7XG59XG5jb25zdCBEb2N1bWVudFN0YXR1c0JhckFjdGlvbnMgPSBtZW1vKGZ1bmN0aW9uIERvY3VtZW50U3RhdHVzQmFyQWN0aW9uczIoKSB7XG4gIGNvbnN0IHtcbiAgICBhY3Rpb25zLFxuICAgIGNvbm5lY3Rpb25TdGF0ZSxcbiAgICBkb2N1bWVudElkLFxuICAgIGVkaXRTdGF0ZVxuICB9ID0gdXNlRG9jdW1lbnRQYW5lKCk7XG4gIGlmICghYWN0aW9ucyB8fCAhZWRpdFN0YXRlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChSZW5kZXJBY3Rpb25Db2xsZWN0aW9uU3RhdGUsIHtcbiAgICBhY3Rpb25zLFxuICAgIGFjdGlvblByb3BzOiBlZGl0U3RhdGUsXG4gICAgY2hpbGRyZW46IF9yZWYzMSA9PiB7XG4gICAgICBsZXQge1xuICAgICAgICBzdGF0ZXNcbiAgICAgIH0gPSBfcmVmMzE7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KERvY3VtZW50U3RhdHVzQmFyQWN0aW9uc0lubmVyLCB7XG4gICAgICAgIGRpc2FibGVkOiBjb25uZWN0aW9uU3RhdGUgIT09IFwiY29ubmVjdGVkXCIsXG4gICAgICAgIHNob3dNZW51OiBhY3Rpb25zLmxlbmd0aCA+IDEsXG4gICAgICAgIHN0YXRlc1xuICAgICAgfSwgZG9jdW1lbnRJZCk7XG4gICAgfVxuICB9KTtcbn0pO1xuY29uc3QgSGlzdG9yeVN0YXR1c0JhckFjdGlvbnMgPSBtZW1vKGZ1bmN0aW9uIEhpc3RvcnlTdGF0dXNCYXJBY3Rpb25zMigpIHtcbiAgY29uc3Qge1xuICAgIGNvbm5lY3Rpb25TdGF0ZSxcbiAgICBlZGl0U3RhdGUsXG4gICAgdGltZWxpbmVTdG9yZVxuICB9ID0gdXNlRG9jdW1lbnRQYW5lKCk7XG4gIGNvbnN0IHJldlRpbWUgPSB1c2VUaW1lbGluZVNlbGVjdG9yKHRpbWVsaW5lU3RvcmUsIHN0YXRlID0+IHN0YXRlLnJldlRpbWUpO1xuICBjb25zdCByZXZpc2lvbiA9IChyZXZUaW1lID09IG51bGwgPyB2b2lkIDAgOiByZXZUaW1lLmlkKSB8fCBcIlwiO1xuICBjb25zdCBkaXNhYmxlZCA9ICgoZWRpdFN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBlZGl0U3RhdGUuZHJhZnQpIHx8IChlZGl0U3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IGVkaXRTdGF0ZS5wdWJsaXNoZWQpIHx8IHt9KS5fcmV2ID09PSByZXZpc2lvbjtcbiAgY29uc3QgYWN0aW9uUHJvcHMgPSB1c2VNZW1vKCgpID0+ICh7XG4gICAgLi4uKGVkaXRTdGF0ZSB8fCB7fSksXG4gICAgcmV2aXNpb25cbiAgfSksIFtlZGl0U3RhdGUsIHJldmlzaW9uXSk7XG4gIGNvbnN0IGhpc3RvcnlBY3Rpb25zID0gdXNlTWVtbygoKSA9PiBbSGlzdG9yeVJlc3RvcmVBY3Rpb25dLCBbXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUmVuZGVyQWN0aW9uQ29sbGVjdGlvblN0YXRlLCB7XG4gICAgYWN0aW9uczogaGlzdG9yeUFjdGlvbnMsXG4gICAgYWN0aW9uUHJvcHMsXG4gICAgY2hpbGRyZW46IF9yZWYzMiA9PiB7XG4gICAgICBsZXQge1xuICAgICAgICBzdGF0ZXNcbiAgICAgIH0gPSBfcmVmMzI7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KERvY3VtZW50U3RhdHVzQmFyQWN0aW9uc0lubmVyLCB7XG4gICAgICAgIGRpc2FibGVkOiBjb25uZWN0aW9uU3RhdGUgIT09IFwiY29ubmVjdGVkXCIgfHwgQm9vbGVhbihkaXNhYmxlZCksXG4gICAgICAgIHNob3dNZW51OiBmYWxzZSxcbiAgICAgICAgc3RhdGVzXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufSk7XG5jb25zdCBCQURHRV9UT05FUyA9IHtcbiAgcHJpbWFyeTogXCJwcmltYXJ5XCIsXG4gIHN1Y2Nlc3M6IFwicG9zaXRpdmVcIixcbiAgd2FybmluZzogXCJjYXV0aW9uXCIsXG4gIGRhbmdlcjogXCJjcml0aWNhbFwiXG59O1xuZnVuY3Rpb24gRG9jdW1lbnRCYWRnZXNJbm5lcihfcmVmMzMpIHtcbiAgbGV0IHtcbiAgICBzdGF0ZXNcbiAgfSA9IF9yZWYzMztcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChJbmxpbmUsIHtcbiAgICBzcGFjZTogMSxcbiAgICBjaGlsZHJlbjogc3RhdGVzLm1hcCgoYmFkZ2UsIGluZGV4KSA9PiAvKiBAX19QVVJFX18gKi9qc3goVG9vbHRpcCwge1xuICAgICAgY29udGVudDogYmFkZ2UudGl0bGUgJiYgLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICBwYWRkaW5nOiAyLFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgIGNoaWxkcmVuOiBiYWRnZS50aXRsZVxuICAgICAgICB9KVxuICAgICAgfSksXG4gICAgICBkaXNhYmxlZDogIWJhZGdlLnRpdGxlLFxuICAgICAgcGxhY2VtZW50OiBcInRvcFwiLFxuICAgICAgcG9ydGFsOiB0cnVlLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChCYWRnZSwge1xuICAgICAgICBmb250U2l6ZTogMSxcbiAgICAgICAgbW9kZTogXCJvdXRsaW5lXCIsXG4gICAgICAgIHBhZGRpbmdYOiAyLFxuICAgICAgICBwYWRkaW5nWTogMSxcbiAgICAgICAgcmFkaXVzOiA0LFxuICAgICAgICB0b25lOiBiYWRnZS5jb2xvciA/IEJBREdFX1RPTkVTW2JhZGdlLmNvbG9yXSA6IHZvaWQgMCxcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiXG4gICAgICAgIH0sXG4gICAgICAgIGNoaWxkcmVuOiBiYWRnZS5sYWJlbFxuICAgICAgfSlcbiAgICB9LCBTdHJpbmcoaW5kZXgpKSlcbiAgfSk7XG59XG5mdW5jdGlvbiBEb2N1bWVudEJhZGdlcygpIHtcbiAgY29uc3Qge1xuICAgIGJhZGdlcyxcbiAgICBlZGl0U3RhdGVcbiAgfSA9IHVzZURvY3VtZW50UGFuZSgpO1xuICBpZiAoIWVkaXRTdGF0ZSB8fCAhYmFkZ2VzKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChSZW5kZXJCYWRnZUNvbGxlY3Rpb25TdGF0ZSwge1xuICAgIGJhZGdlcyxcbiAgICBiYWRnZVByb3BzOiBlZGl0U3RhdGUsXG4gICAgY2hpbGRyZW46IF9yZWYzNCA9PiB7XG4gICAgICBsZXQge1xuICAgICAgICBzdGF0ZXNcbiAgICAgIH0gPSBfcmVmMzQ7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KERvY3VtZW50QmFkZ2VzSW5uZXIsIHtcbiAgICAgICAgc3RhdGVzXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufVxuY29uc3QgUm9vdCA9IHN0eWxlZChGbGV4KShfdGVtcGxhdGVPYmplY3QyMCB8fCAoX3RlbXBsYXRlT2JqZWN0MjAgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFtcIlxcbiAgY3Vyc29yOiBkZWZhdWx0O1xcblwiXSkpKTtcbmZ1bmN0aW9uIFB1Ymxpc2hTdGF0dXMocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGNvbGxhcHNlZCxcbiAgICBkaXNhYmxlZCxcbiAgICBsYXN0UHVibGlzaGVkLFxuICAgIGxhc3RVcGRhdGVkLFxuICAgIGxpdmVFZGl0XG4gIH0gPSBwcm9wcztcbiAgY29uc3QgbGFzdFB1Ymxpc2hlZFRpbWVBZ28gPSB1c2VUaW1lQWdvKGxhc3RQdWJsaXNoZWQgfHwgXCJcIiwge1xuICAgIG1pbmltYWw6IHRydWUsXG4gICAgYWdvU3VmZml4OiB0cnVlXG4gIH0pO1xuICBjb25zdCBsYXN0UHVibGlzaGVkVGltZSA9IHVzZVRpbWVBZ28obGFzdFB1Ymxpc2hlZCB8fCBcIlwiLCB7XG4gICAgbWluaW1hbDogdHJ1ZVxuICB9KTtcbiAgY29uc3QgbGFzdFVwZGF0ZWRUaW1lQWdvID0gdXNlVGltZUFnbyhsYXN0VXBkYXRlZCB8fCBcIlwiLCB7XG4gICAgbWluaW1hbDogdHJ1ZSxcbiAgICBhZ29TdWZmaXg6IHRydWVcbiAgfSk7XG4gIGNvbnN0IGxhc3RVcGRhdGVkVGltZSA9IHVzZVRpbWVBZ28obGFzdFVwZGF0ZWQgfHwgXCJcIiwge1xuICAgIG1pbmltYWw6IHRydWVcbiAgfSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUm9vdCwge1xuICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgIFwiZGF0YS11aVwiOiBcIlNlc3Npb25MYXlvdXRcIixcbiAgICBzaXppbmc6IFwiYm9yZGVyXCIsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUb29sdGlwLCB7XG4gICAgICBwbGFjZW1lbnQ6IFwidG9wXCIsXG4gICAgICBwb3J0YWw6IHRydWUsXG4gICAgICBjb250ZW50OiAvKiBAX19QVVJFX18gKi9qc3goU3RhY2ssIHtcbiAgICAgICAgcGFkZGluZzogMyxcbiAgICAgICAgc3BhY2U6IDMsXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgbXV0ZWQ6IHRydWUsXG4gICAgICAgICAgY2hpbGRyZW46IGxpdmVFZGl0ID8gLyogQF9fUFVSRV9fICovanN4cyhGcmFnbWVudCwge1xuICAgICAgICAgICAgY2hpbGRyZW46IFtcIkxhc3QgdXBkYXRlZCBcIiwgbGFzdFVwZGF0ZWQgPyBsYXN0VXBkYXRlZFRpbWVBZ28gOiBsYXN0UHVibGlzaGVkVGltZUFnb11cbiAgICAgICAgICB9KSA6IC8qIEBfX1BVUkVfXyAqL2pzeHMoRnJhZ21lbnQsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXCJMYXN0IHB1Ymxpc2hlZCBcIiwgbGFzdFB1Ymxpc2hlZFRpbWVBZ29dXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChCdXR0b24sIHtcbiAgICAgICAgbW9kZTogXCJibGVlZFwiLFxuICAgICAgICB0b25lOiBsaXZlRWRpdCA/IFwiY3JpdGljYWxcIiA6IFwicG9zaXRpdmVcIixcbiAgICAgICAgdGFiSW5kZXg6IC0xLFxuICAgICAgICBkaXNhYmxlZCxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IGNvbGxhcHNlZCA/IDAgOiAzLFxuICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgICAgIHNpemU6IDIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBsaXZlRWRpdCA/IC8qIEBfX1BVUkVfXyAqL2pzeChQbGF5SWNvbiwge30pIDogLyogQF9fUFVSRV9fICovanN4KFB1Ymxpc2hJY29uLCB7fSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSksICFjb2xsYXBzZWQgJiYgLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgICB3ZWlnaHQ6IFwibWVkaXVtXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogbGl2ZUVkaXQgPyAvKiBAX19QVVJFX18gKi9qc3goRnJhZ21lbnQsIHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IGxhc3RVcGRhdGVkID8gbGFzdFVwZGF0ZWRUaW1lIDogbGFzdFB1Ymxpc2hlZFRpbWVcbiAgICAgICAgICAgIH0pIDogbGFzdFB1Ymxpc2hlZFRpbWVcbiAgICAgICAgICB9KV1cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG59XG5jb25zdCBTdHlsZWRNb3Rpb25QYXRoID0gc3R5bGVkKG1vdGlvbi5wYXRoKShfdGVtcGxhdGVPYmplY3QyMSB8fCAoX3RlbXBsYXRlT2JqZWN0MjEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFtcIlxcbiAgdHJhbnNmb3JtLW9yaWdpbjogY2VudGVyO1xcblwiXSkpKTtcbmNvbnN0IENpcmNsZSA9IHByb3BzID0+IC8qIEBfX1BVUkVfXyAqL2pzeChtb3Rpb24uY2lyY2xlLCB7XG4gIGZpbGw6IFwibm9uZVwiLFxuICByOiBcIjhcIixcbiAgY3g6IFwiMTIuNVwiLFxuICBjeTogXCIxMi41XCIsXG4gIHN0cm9rZVdpZHRoOiBcIjEuMlwiLFxuICAuLi5wcm9wc1xufSk7XG5jb25zdCBBcnJvd3MgPSBwcm9wcyA9PiAvKiBAX19QVVJFX18gKi9qc3goU3R5bGVkTW90aW9uUGF0aCwge1xuICBmaWxsOiBcIm5vbmVcIixcbiAgZDogXCJNMTQgMTcuNTYxOUwxMS41IDIwLjVMMTQuNSAyMy4wNjE5TTExIDcuNDM4MTFMMTMuNSA0LjUwMDAxTDEwLjUgMS45MzgxMVwiLFxuICAuLi5wcm9wc1xufSk7XG5jb25zdCBDaGVja21hcmsgPSBwcm9wcyA9PiAvKiBAX19QVVJFX18gKi9qc3gobW90aW9uLnBhdGgsIHtcbiAgZDogXCJNOS41IDEyLjEzMTZMMTEuNzQxNCAxNC41TDE2IDEwXCIsXG4gIC4uLnByb3BzXG59KTtcbmNvbnN0IEVkaXQgPSBwcm9wcyA9PiAvKiBAX19QVVJFX18gKi9qc3gobW90aW9uLnBhdGgsIHtcbiAgZDogXCJNMTUgN0wxOCAxME02IDE5TDcgMTVMMTcgNUwyMCA4TDEwIDE4TDYgMTlaXCIsXG4gIC4uLnByb3BzXG59KTtcbmNvbnN0IHJvdGF0ZUFuaW1hdGlvbiA9IGtleWZyYW1lcyhfdGVtcGxhdGVPYmplY3QyMiB8fCAoX3RlbXBsYXRlT2JqZWN0MjIgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFtcIlxcbiAgMCUge1xcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwKTtcXG4gIH1cXG4gIDEwMCUge1xcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xcbiAgfVxcblwiXSkpKTtcbmNvbnN0IFJvdGF0ZUdyb3VwID0gc3R5bGVkLmcoX3RlbXBsYXRlT2JqZWN0MjMgfHwgKF90ZW1wbGF0ZU9iamVjdDIzID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbXCJcXG4gIHRyYW5zZm9ybS1vcmlnaW46IGNlbnRlcjtcXG5cXG4gICZbZGF0YS1yb3RhdGVdIHtcXG4gICAgYW5pbWF0aW9uOiBcIiwgXCIgMXMgZWFzZS1pbi1vdXQgaW5maW5pdGU7XFxuICB9XFxuXCJdKSksIHJvdGF0ZUFuaW1hdGlvbik7XG5jb25zdCByb290ID0ge1xuICBzeW5jaW5nOiB7XG4gICAgc2NhbGU6IDEsXG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZHVyYXRpb246IDBcbiAgICB9XG4gIH0sXG4gIHNhdmVkOiB7XG4gICAgc2NhbGU6IFsxLCAwLjgsIDEuMiwgMC45LCAxLjEsIDAuOTUsIDEuMDUsIDAuOTksIDFdLFxuICAgIHRyYW5zaXRpb246IHtcbiAgICAgIGR1cmF0aW9uOiAwLjUsXG4gICAgICBkZWxheTogMC4yXG4gICAgfVxuICB9LFxuICBjaGFuZ2VzOiB7XG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZHVyYXRpb246IDBcbiAgICB9XG4gIH1cbn07XG5jb25zdCBjaXJjbGUgPSB7XG4gIHN5bmNpbmc6IHtcbiAgICBzdHJva2VEYXNoYXJyYXk6IFwiMCwgMCwgMjMsIDMsIDIzLCAzXCIsXG4gICAgc3Ryb2tlRGFzaG9mZnNldDogMTAsXG4gICAgb3BhY2l0eTogMSxcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogMFxuICAgIH1cbiAgfSxcbiAgc2F2ZWQ6IHtcbiAgICBzdHJva2VEYXNoYXJyYXk6IFwiMCwgMCwgMjMsIDAsIDIzLCAwXCIsXG4gICAgc3Ryb2tlRGFzaG9mZnNldDogMTAsXG4gICAgb3BhY2l0eTogMSxcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogMC4yXG4gICAgfVxuICB9LFxuICBjaGFuZ2VzOiB7XG4gICAgc3Ryb2tlRGFzaGFycmF5OiBcIjAsIDYwLCAyMywgMCwgMjMsIDBcIixcbiAgICBzdHJva2VEYXNob2Zmc2V0OiAwLFxuICAgIG9wYWNpdHk6IDAsXG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZHVyYXRpb246IDAuNVxuICAgIH1cbiAgfVxufTtcbmNvbnN0IGFycm93cyA9IHtcbiAgc3luY2luZzoge1xuICAgIG9wYWNpdHk6IDEsXG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZHVyYXRpb246IDBcbiAgICB9XG4gIH0sXG4gIHNhdmVkOiB7XG4gICAgb3BhY2l0eTogMCxcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogMC4yXG4gICAgfVxuICB9LFxuICBjaGFuZ2VzOiB7XG4gICAgb3BhY2l0eTogMFxuICB9XG59O1xuY29uc3QgY2hlY2ttYXJrID0ge1xuICBzeW5jaW5nOiB7XG4gICAgcGF0aExlbmd0aDogMCxcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogMFxuICAgIH1cbiAgfSxcbiAgc2F2ZWQ6IHtcbiAgICBwYXRoTGVuZ3RoOiAxLFxuICAgIHRyYW5zaXRpb246IHtcbiAgICAgIGRlbGF5OiAwLjQsXG4gICAgICBkdXJhdGlvbjogMC4zXG4gICAgfVxuICB9LFxuICBjaGFuZ2VzOiB7XG4gICAgcGF0aExlbmd0aDogMCxcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogMC4yXG4gICAgfVxuICB9XG59O1xuY29uc3QgZWRpdCA9IHtcbiAgc3luY2luZzoge1xuICAgIHBhdGhMZW5ndGg6IDAsXG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZHVyYXRpb246IDBcbiAgICB9XG4gIH0sXG4gIHNhdmVkOiB7XG4gICAgcGF0aExlbmd0aDogMCxcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogMFxuICAgIH1cbiAgfSxcbiAgY2hhbmdlczoge1xuICAgIHBhdGhMZW5ndGg6IDEsXG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZHVyYXRpb246IDAuNCxcbiAgICAgIGRlbGF5OiAwLjVcbiAgICB9XG4gIH1cbn07XG5mdW5jdGlvbiBBbmltYXRlZFN0YXR1c0ljb24ocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHN0YXR1c1xuICB9ID0gcHJvcHM7XG4gIGlmICghc3RhdHVzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChcInN2Z1wiLCB7XG4gICAgd2lkdGg6IFwiMWVtXCIsXG4gICAgaGVpZ2h0OiBcIjFlbVwiLFxuICAgIHZpZXdCb3g6IFwiMCAwIDI1IDI1XCIsXG4gICAgZmlsbDogXCJub25lXCIsXG4gICAgc3Ryb2tlOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIHN0cm9rZVdpZHRoOiBcIjEuMlwiLFxuICAgIFwiZGF0YS1zYW5pdHktaWNvblwiOiBcIlwiLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hzKG1vdGlvbi5nLCB7XG4gICAgICB2YXJpYW50czogcm9vdCxcbiAgICAgIGluaXRpYWw6IHN0YXR1cyxcbiAgICAgIGFuaW1hdGU6IHN0YXR1cyxcbiAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4cyhSb3RhdGVHcm91cCwge1xuICAgICAgICBcImRhdGEtcm90YXRlXCI6IHN0YXR1cyA9PT0gXCJjaGFuZ2VzXCIgPyB2b2lkIDAgOiBcIlwiLFxuICAgICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChBcnJvd3MsIHtcbiAgICAgICAgICB2YXJpYW50czogYXJyb3dzLFxuICAgICAgICAgIGluaXRpYWw6IHN0YXR1cyxcbiAgICAgICAgICBhbmltYXRlOiBzdGF0dXNcbiAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChDaXJjbGUsIHtcbiAgICAgICAgICB2YXJpYW50czogY2lyY2xlLFxuICAgICAgICAgIGluaXRpYWw6IHN0YXR1cyxcbiAgICAgICAgICBhbmltYXRlOiBzdGF0dXNcbiAgICAgICAgfSldXG4gICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KENoZWNrbWFyaywge1xuICAgICAgICB2YXJpYW50czogY2hlY2ttYXJrLFxuICAgICAgICBpbml0aWFsOiBzdGF0dXMsXG4gICAgICAgIGFuaW1hdGU6IHN0YXR1c1xuICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChFZGl0LCB7XG4gICAgICAgIHZhcmlhbnRzOiBlZGl0LFxuICAgICAgICBpbml0aWFsOiBzdGF0dXMsXG4gICAgICAgIGFuaW1hdGU6IHN0YXR1c1xuICAgICAgfSldXG4gICAgfSlcbiAgfSk7XG59XG5jb25zdCBSZXZpZXdCdXR0b24gPSBSZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIFJldmlld0J1dHRvbjIocHJvcHMsIHJlZikge1xuICBjb25zdCB7XG4gICAgY29sbGFwc2VkLFxuICAgIHN0YXR1cyxcbiAgICBsYXN0VXBkYXRlZCxcbiAgICAuLi5yZXN0XG4gIH0gPSBwcm9wcztcbiAgY29uc3QgbGFzdFVwZGF0ZWRUaW1lID0gdXNlVGltZUFnbyhsYXN0VXBkYXRlZCB8fCBcIlwiLCB7XG4gICAgbWluaW1hbDogdHJ1ZVxuICB9KTtcbiAgY29uc3QgbGFzdFVwZGF0ZWRUaW1lQWdvID0gdXNlVGltZUFnbyhsYXN0VXBkYXRlZCB8fCBcIlwiLCB7XG4gICAgbWluaW1hbDogdHJ1ZSxcbiAgICBhZ29TdWZmaXg6IHRydWVcbiAgfSk7XG4gIGNvbnN0IGJ1dHRvblByb3BzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKHN0YXR1cyA9PT0gXCJzeW5jaW5nXCIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRleHQ6IFwiU2F2aW5nLi4uXCIsXG4gICAgICAgIHRvbmU6IHZvaWQgMFxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHN0YXR1cyA9PT0gXCJjaGFuZ2VzXCIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRleHQ6IGxhc3RVcGRhdGVkVGltZSxcbiAgICAgICAgdG9uZTogXCJjYXV0aW9uXCJcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChzdGF0dXMgPT09IFwic2F2ZWRcIikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGV4dDogXCJTYXZlZCFcIixcbiAgICAgICAgdG9uZTogXCJwb3NpdGl2ZVwiXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge307XG4gIH0sIFtzdGF0dXMsIGxhc3RVcGRhdGVkVGltZV0pO1xuICBpZiAoIXN0YXR1cykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goVG9vbHRpcCwge1xuICAgIHBsYWNlbWVudDogXCJ0b3BcIixcbiAgICBwb3J0YWw6IHRydWUsXG4gICAgZGlzYWJsZWQ6IHN0YXR1cyAhPT0gXCJjaGFuZ2VzXCIsXG4gICAgY29udGVudDogLyogQF9fUFVSRV9fICovanN4cyhTdGFjaywge1xuICAgICAgcGFkZGluZzogMyxcbiAgICAgIHNwYWNlOiAzLFxuICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICBzaXplOiAxLFxuICAgICAgICB3ZWlnaHQ6IFwic2VtaWJvbGRcIixcbiAgICAgICAgY2hpbGRyZW46IFwiUmV2aWV3IGNoYW5nZXNcIlxuICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeHMoVGV4dCwge1xuICAgICAgICBzaXplOiAxLFxuICAgICAgICBtdXRlZDogdHJ1ZSxcbiAgICAgICAgY2hpbGRyZW46IFtcIkNoYW5nZXMgc2F2ZWQgXCIsIGxhc3RVcGRhdGVkVGltZUFnb11cbiAgICAgIH0pXVxuICAgIH0pLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQnV0dG9uLCB7XG4gICAgICBtb2RlOiBcImJsZWVkXCIsXG4gICAgICBqdXN0aWZ5OiBcImZsZXgtc3RhcnRcIixcbiAgICAgIHRvbmU6IGJ1dHRvblByb3BzID09IG51bGwgPyB2b2lkIDAgOiBidXR0b25Qcm9wcy50b25lLFxuICAgICAgLi4ucmVzdCxcbiAgICAgIFwiZGF0YS10ZXN0aWRcIjogXCJyZXZpZXctY2hhbmdlcy1idXR0b25cIixcbiAgICAgIHJlZixcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hzKEZsZXgsIHtcbiAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICAgIG1hcmdpblJpZ2h0OiBjb2xsYXBzZWQgPyAwIDogMyxcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQW5pbWF0ZWRTdGF0dXNJY29uLCB7XG4gICAgICAgICAgICAgIHN0YXR1c1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KSwgIWNvbGxhcHNlZCAmJiAvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgd2VpZ2h0OiBcIm1lZGl1bVwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBidXR0b25Qcm9wcyA9PSBudWxsID8gdm9pZCAwIDogYnV0dG9uUHJvcHMudGV4dFxuICAgICAgICB9KV1cbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG59KTtcbmNvbnN0IFJldmlld0NoYW5nZXNCdXR0b24gPSBSZWFjdC5tZW1vKFJldmlld0J1dHRvbik7XG5jb25zdCBTWU5DSU5HX1RJTUVPVVQgPSAxZTM7XG5jb25zdCBTQVZFRF9USU1FT1VUID0gM2UzO1xuY29uc3QgRG9jdW1lbnRTcGFya2xpbmUgPSBtZW1vKGZ1bmN0aW9uIERvY3VtZW50U3BhcmtsaW5lMigpIHtcbiAgdmFyIF9hO1xuICBjb25zdCB7XG4gICAgY2hhbmdlc09wZW4sXG4gICAgZG9jdW1lbnRJZCxcbiAgICBkb2N1bWVudFR5cGUsXG4gICAgZWRpdFN0YXRlLFxuICAgIG9uSGlzdG9yeUNsb3NlLFxuICAgIG9uSGlzdG9yeU9wZW4sXG4gICAgdGltZWxpbmVTdG9yZSxcbiAgICB2YWx1ZVxuICB9ID0gdXNlRG9jdW1lbnRQYW5lKCk7XG4gIGNvbnN0IHN5bmNTdGF0ZSA9IHVzZVN5bmNTdGF0ZShkb2N1bWVudElkLCBkb2N1bWVudFR5cGUpO1xuICBjb25zdCBsYXN0VXBkYXRlZCA9IHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiB2YWx1ZS5fdXBkYXRlZEF0O1xuICBjb25zdCBsYXN0UHVibGlzaGVkID0gKF9hID0gZWRpdFN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBlZGl0U3RhdGUucHVibGlzaGVkKSA9PSBudWxsID8gdm9pZCAwIDogX2EuX3VwZGF0ZWRBdDtcbiAgY29uc3QgbGl2ZUVkaXQgPSBCb29sZWFuKGVkaXRTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogZWRpdFN0YXRlLmxpdmVFZGl0KTtcbiAgY29uc3QgcHVibGlzaGVkID0gQm9vbGVhbihlZGl0U3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IGVkaXRTdGF0ZS5wdWJsaXNoZWQpO1xuICBjb25zdCBjaGFuZ2VkID0gQm9vbGVhbihlZGl0U3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IGVkaXRTdGF0ZS5kcmFmdCk7XG4gIGNvbnN0IFtyb290RmxleEVsZW1lbnQsIHNldFJvb3RGbGV4RWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3Qgcm9vdEZsZXhSZWN0ID0gdXNlRWxlbWVudFJlY3Qocm9vdEZsZXhFbGVtZW50KTtcbiAgY29uc3QgY29sbGFwc2VkID0gIXJvb3RGbGV4UmVjdCB8fCAocm9vdEZsZXhSZWN0ID09IG51bGwgPyB2b2lkIDAgOiByb290RmxleFJlY3Qud2lkdGgpIDwgMzAwO1xuICBjb25zdCBbc3RhdHVzLCBzZXRTdGF0dXNdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IHNob3dpbmdSZXZpc2lvbiA9IHVzZVRpbWVsaW5lU2VsZWN0b3IodGltZWxpbmVTdG9yZSwgc3RhdGUgPT4gc3RhdGUub25PbGRlclJldmlzaW9uKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc3RhdHVzID09PSBcInN5bmNpbmdcIiAmJiAhc3luY1N0YXRlLmlzU3luY2luZykge1xuICAgICAgY29uc3QgdGltZXJJZCA9IHNldFRpbWVvdXQoKCkgPT4gc2V0U3RhdHVzKFwic2F2ZWRcIiksIFNZTkNJTkdfVElNRU9VVCk7XG4gICAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgICBpZiAoc3RhdHVzID09PSBcInNhdmVkXCIpIHtcbiAgICAgIGNvbnN0IHRpbWVySWQgPSBzZXRUaW1lb3V0KCgpID0+IHNldFN0YXR1cyhudWxsKSwgU0FWRURfVElNRU9VVCk7XG4gICAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgfSwgW3N0YXR1cywgbGFzdFVwZGF0ZWQsIHN5bmNTdGF0ZS5pc1N5bmNpbmddKTtcbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBzZXRTdGF0dXMobnVsbCk7XG4gIH0sIFtkb2N1bWVudElkXSk7XG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN5bmNTdGF0ZS5pc1N5bmNpbmcpIHtcbiAgICAgIHNldFN0YXR1cyhcInN5bmNpbmdcIik7XG4gICAgfVxuICB9LCBbc3luY1N0YXRlLmlzU3luY2luZywgbGFzdFVwZGF0ZWRdKTtcbiAgY29uc3QgcmV2aWV3QnV0dG9uID0gdXNlTWVtbygoKSA9PiAvKiBAX19QVVJFX18gKi9qc3goUmV2aWV3Q2hhbmdlc0J1dHRvbiwge1xuICAgIGxhc3RVcGRhdGVkLFxuICAgIHN0YXR1czogc3RhdHVzIHx8IChjaGFuZ2VkID8gXCJjaGFuZ2VzXCIgOiB2b2lkIDApLFxuICAgIG9uQ2xpY2s6IGNoYW5nZXNPcGVuID8gb25IaXN0b3J5Q2xvc2UgOiBvbkhpc3RvcnlPcGVuLFxuICAgIGRpc2FibGVkOiBzaG93aW5nUmV2aXNpb24sXG4gICAgc2VsZWN0ZWQ6IGNoYW5nZXNPcGVuLFxuICAgIGNvbGxhcHNlZFxuICB9KSwgW2NoYW5nZWQsIGNoYW5nZXNPcGVuLCBvbkhpc3RvcnlDbG9zZSwgb25IaXN0b3J5T3BlbiwgbGFzdFVwZGF0ZWQsIHNob3dpbmdSZXZpc2lvbiwgc3RhdHVzLCBjb2xsYXBzZWRdKTtcbiAgY29uc3QgcHVibGlzaFN0YXR1cyA9IHVzZU1lbW8oKCkgPT4gKGxpdmVFZGl0IHx8IHB1Ymxpc2hlZCkgJiYgLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgIG1hcmdpblJpZ2h0OiAxLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goUHVibGlzaFN0YXR1cywge1xuICAgICAgZGlzYWJsZWQ6IHNob3dpbmdSZXZpc2lvbixcbiAgICAgIGxhc3RQdWJsaXNoZWQsXG4gICAgICBsYXN0VXBkYXRlZCxcbiAgICAgIGxpdmVFZGl0LFxuICAgICAgY29sbGFwc2VkXG4gICAgfSlcbiAgfSksIFtjb2xsYXBzZWQsIGxhc3RQdWJsaXNoZWQsIGxhc3RVcGRhdGVkLCBsaXZlRWRpdCwgcHVibGlzaGVkLCBzaG93aW5nUmV2aXNpb25dKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgIFwiZGF0YS11aVwiOiBcIkRvY3VtZW50U3BhcmtsaW5lXCIsXG4gICAgcmVmOiBzZXRSb290RmxleEVsZW1lbnQsXG4gICAgY2hpbGRyZW46IFtwdWJsaXNoU3RhdHVzLCAvKiBAX19QVVJFX18gKi9qc3hzKEZsZXgsIHtcbiAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgZmxleDogMSxcbiAgICAgIGNoaWxkcmVuOiBbcmV2aWV3QnV0dG9uLCAhY29sbGFwc2VkICYmIC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgbWFyZ2luTGVmdDogMyxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudEJhZGdlcywge30pXG4gICAgICB9KV1cbiAgICB9KV1cbiAgfSk7XG59KTtcbmNvbnN0IERvY3VtZW50QWN0aW9uc0JveCA9IHN0eWxlZChCb3gpKF90ZW1wbGF0ZU9iamVjdDI0IHx8IChfdGVtcGxhdGVPYmplY3QyNCA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoW1wiXFxuICBtaW4td2lkdGg6IDEwZW07XFxuICBtYXgtd2lkdGg6IDE2ZW07XFxuXCJdKSkpO1xuZnVuY3Rpb24gRG9jdW1lbnRTdGF0dXNCYXIocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGFjdGlvbnNCb3hSZWZcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgYmFkZ2VzLFxuICAgIHRpbWVsaW5lU3RvcmVcbiAgfSA9IHVzZURvY3VtZW50UGFuZSgpO1xuICBjb25zdCBzaG93aW5nUmV2aXNpb24gPSB1c2VUaW1lbGluZVNlbGVjdG9yKHRpbWVsaW5lU3RvcmUsIHN0YXRlID0+IHN0YXRlLm9uT2xkZXJSZXZpc2lvbik7XG4gIHJldHVybiB1c2VNZW1vKCgpID0+IC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICBwYWRkaW5nTGVmdDogMixcbiAgICBwYWRkaW5nUmlnaHQ6IFsyLCAzXSxcbiAgICBwYWRkaW5nWTogMixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhGbGV4LCB7XG4gICAgICBhbGlnbjogXCJjZW50ZXJcIixcbiAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICBmbGV4OiBbMSwgMl0sXG4gICAgICAgIGNoaWxkcmVuOiBiYWRnZXMgJiYgLyogQF9fUFVSRV9fICovanN4KERvY3VtZW50U3BhcmtsaW5lLCB7fSlcbiAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goRG9jdW1lbnRBY3Rpb25zQm94LCB7XG4gICAgICAgIGZsZXg6IDEsXG4gICAgICAgIG1hcmdpbkxlZnQ6IFsxLCAzXSxcbiAgICAgICAgcmVmOiBhY3Rpb25zQm94UmVmLFxuICAgICAgICBjaGlsZHJlbjogc2hvd2luZ1JldmlzaW9uID8gLyogQF9fUFVSRV9fICovanN4KEhpc3RvcnlTdGF0dXNCYXJBY3Rpb25zLCB7fSkgOiAvKiBAX19QVVJFX18gKi9qc3goRG9jdW1lbnRTdGF0dXNCYXJBY3Rpb25zLCB7fSlcbiAgICAgIH0pXVxuICAgIH0pXG4gIH0pLCBbYWN0aW9uc0JveFJlZiwgYmFkZ2VzLCBzaG93aW5nUmV2aXNpb25dKTtcbn1cbmZ1bmN0aW9uIEtleWJvYXJkU2hvcnRjdXRSZXNwb25kZXIocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGFjdGlvbnNCb3hFbGVtZW50LFxuICAgIGFjdGl2ZUluZGV4LFxuICAgIGNoaWxkcmVuLFxuICAgIGlkLFxuICAgIG9uQWN0aW9uU3RhcnQsXG4gICAgb25LZXlEb3duLFxuICAgIHJvb3RSZWYsXG4gICAgc3RhdGVzLFxuICAgIC4uLnJlc3RcbiAgfSA9IHByb3BzO1xuICBjb25zdCBhY3RpdmVBY3Rpb24gPSBzdGF0ZXNbYWN0aXZlSW5kZXhdO1xuICBjb25zdCBoYW5kbGVLZXlEb3duID0gdXNlQ2FsbGJhY2soZXZlbnQgPT4ge1xuICAgIGNvbnN0IG1hdGNoaW5nU3RhdGVzID0gc3RhdGVzLmZpbHRlcihzdGF0ZSA9PiBzdGF0ZS5zaG9ydGN1dCAmJiBpc0hvdGtleShzdGF0ZS5zaG9ydGN1dCwgZXZlbnQpKTtcbiAgICBjb25zdCBtYXRjaGluZ1N0YXRlID0gbWF0Y2hpbmdTdGF0ZXNbMF07XG4gICAgaWYgKG1hdGNoaW5nU3RhdGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIktleWJvYXJkIHNob3J0Y3V0IGNvbmZsaWN0OiBNb3JlIHRoYW4gb25lIGRvY3VtZW50IGFjdGlvbiBtYXRjaGVzIHRoZSBzaG9ydGN1dCBcXFwiXCIuY29uY2F0KG1hdGNoaW5nU3RhdGUuc2hvcnRjdXQsIFwiXFxcIlwiKSk7XG4gICAgfVxuICAgIGlmIChtYXRjaGluZ1N0YXRlICYmICFtYXRjaGluZ1N0YXRlLmRpc2FibGVkICYmIG1hdGNoaW5nU3RhdGUub25IYW5kbGUpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBtYXRjaGluZ1N0YXRlLm9uSGFuZGxlKCk7XG4gICAgICBvbkFjdGlvblN0YXJ0KHN0YXRlcy5pbmRleE9mKG1hdGNoaW5nU3RhdGUpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG9uS2V5RG93bikge1xuICAgICAgb25LZXlEb3duKGV2ZW50KTtcbiAgICB9XG4gIH0sIFtvbkFjdGlvblN0YXJ0LCBvbktleURvd24sIHN0YXRlc10pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4cyhQYW5lLCB7XG4gICAgaWQsXG4gICAgb25LZXlEb3duOiBoYW5kbGVLZXlEb3duLFxuICAgIHRhYkluZGV4OiAtMSxcbiAgICAuLi5yZXN0LFxuICAgIHJlZjogcm9vdFJlZixcbiAgICBjaGlsZHJlbjogW2NoaWxkcmVuLCBhY3RpdmVBY3Rpb24gJiYgYWN0aXZlQWN0aW9uLmRpYWxvZyAmJiAvKiBAX19QVVJFX18gKi9qc3goTGVnYWN5TGF5ZXJQcm92aWRlciwge1xuICAgICAgek9mZnNldDogXCJwYW5lRm9vdGVyXCIsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEFjdGlvblN0YXRlRGlhbG9nLCB7XG4gICAgICAgIGRpYWxvZzogYWN0aXZlQWN0aW9uLmRpYWxvZyxcbiAgICAgICAgcmVmZXJlbmNlRWxlbWVudDogYWN0aW9uc0JveEVsZW1lbnRcbiAgICAgIH0pXG4gICAgfSldXG4gIH0pO1xufVxuY29uc3QgRG9jdW1lbnRBY3Rpb25TaG9ydGN1dHMgPSBSZWFjdC5tZW1vKHByb3BzID0+IHtcbiAgY29uc3Qge1xuICAgIGFjdGlvbnNCb3hFbGVtZW50LFxuICAgIGNoaWxkcmVuLFxuICAgIC4uLnJlc3RcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgYWN0aW9ucyxcbiAgICBlZGl0U3RhdGVcbiAgfSA9IHVzZURvY3VtZW50UGFuZSgpO1xuICBjb25zdCBbYWN0aXZlSW5kZXgsIHNldEFjdGl2ZUluZGV4XSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3Qgb25BY3Rpb25TdGFydCA9IHVzZUNhbGxiYWNrKGlkeCA9PiB7XG4gICAgc2V0QWN0aXZlSW5kZXgoaWR4KTtcbiAgfSwgW10pO1xuICBjb25zdCBhY3Rpb25Qcm9wcyA9IHVzZU1lbW8oKCkgPT4gZWRpdFN0YXRlICYmIHtcbiAgICAuLi5lZGl0U3RhdGUsXG4gICAgLy8gQHRvZG86IHdoYXQgdG8gY2FsbCBoZXJlP1xuICAgIG9uQ29tcGxldGU6ICgpID0+IHZvaWQgMCxcbiAgICAvLyBAdG9kbzogZ2V0IHJldmlzaW9uIHN0cmluZ1xuICAgIHJldmlzaW9uOiB2b2lkIDBcbiAgfSwgW2VkaXRTdGF0ZV0pO1xuICBpZiAoIWFjdGlvblByb3BzIHx8ICFhY3Rpb25zKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChSZW5kZXJBY3Rpb25Db2xsZWN0aW9uU3RhdGUsIHtcbiAgICBhY3Rpb25Qcm9wcyxcbiAgICBhY3Rpb25zLFxuICAgIGNoaWxkcmVuOiBfcmVmMzUgPT4ge1xuICAgICAgbGV0IHtcbiAgICAgICAgc3RhdGVzXG4gICAgICB9ID0gX3JlZjM1O1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChLZXlib2FyZFNob3J0Y3V0UmVzcG9uZGVyLCB7XG4gICAgICAgIC4uLnJlc3QsXG4gICAgICAgIGFjdGl2ZUluZGV4LFxuICAgICAgICBhY3Rpb25zQm94RWxlbWVudCxcbiAgICAgICAgb25BY3Rpb25TdGFydCxcbiAgICAgICAgc3RhdGVzLFxuICAgICAgICBjaGlsZHJlblxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn0pO1xuRG9jdW1lbnRBY3Rpb25TaG9ydGN1dHMuZGlzcGxheU5hbWUgPSBcIkRvY3VtZW50QWN0aW9uU2hvcnRjdXRzXCI7XG5jb25zdCBET0NVTUVOVF9QQU5FTF9NSU5fV0lEVEggPSAzMjA7XG5jb25zdCBET0NVTUVOVF9QQU5FTF9JTklUSUFMX01JTl9XSURUSCA9IDYwMDtcbmNvbnN0IENIQU5HRVNfUEFORUxfTUlOX1dJRFRIID0gMzIwO1xuY29uc3QgRElBTE9HX1BST1ZJREVSX1BPU0lUSU9OID0gW1xuLy8gV2UgdXNlIHRoZSBgcG9zaXRpb246IGZpeGVkYCBmb3IgZGlhbG9ncyBvbiBuYXJyb3cgc2NyZWVucyAoPCA1MTJweCkuXG5cImZpeGVkXCIsXG4vLyBBbmQgd2UgdXNlIHRoZSBgcG9zaXRpb246IGFic29sdXRlYCBzdHJhdGVneSAod2l0aGluIHBhbmVzKSBvbiB3aWRlIHNjcmVlbnMuXG5cImFic29sdXRlXCJdO1xuY29uc3QgU3R5bGVkQ2hhbmdlQ29ubmVjdG9yUm9vdCA9IHN0eWxlZChDaGFuZ2VDb25uZWN0b3JSb290KShfdGVtcGxhdGVPYmplY3QyNSB8fCAoX3RlbXBsYXRlT2JqZWN0MjUgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFtcIlxcbiAgZmxleDogMTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBtaW4taGVpZ2h0OiAwO1xcbiAgbWluLXdpZHRoOiAwO1xcblwiXSkpKTtcbmNvbnN0IERvY3VtZW50UGFuZSA9IG1lbW8oZnVuY3Rpb24gRG9jdW1lbnRQYW5lMihwcm9wcykge1xuICBjb25zdCB7XG4gICAgbmFtZTogcGFyZW50U291cmNlTmFtZVxuICB9ID0gdXNlU291cmNlKCk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goU291cmNlUHJvdmlkZXIsIHtcbiAgICBuYW1lOiBwcm9wcy5wYW5lLnNvdXJjZSB8fCBwYXJlbnRTb3VyY2VOYW1lLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goRG9jdW1lbnRQYW5lSW5uZXIsIHtcbiAgICAgIC4uLnByb3BzXG4gICAgfSlcbiAgfSk7XG59KTtcbmZ1bmN0aW9uIERvY3VtZW50UGFuZUlubmVyKHByb3BzKSB7XG4gIHZhciBfYTtcbiAgY29uc3Qge1xuICAgIHBhbmUsXG4gICAgcGFuZUtleVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICByZXNvbHZlTmV3RG9jdW1lbnRPcHRpb25zXG4gIH0gPSB1c2VTb3VyY2UoKS5kb2N1bWVudDtcbiAgY29uc3QgcGFuZVJvdXRlciA9IHVzZVBhbmVSb3V0ZXIoKTtcbiAgY29uc3Qgb3B0aW9ucyA9IHVzZVBhbmVPcHRpb25zKHBhbmUub3B0aW9ucywgcGFuZVJvdXRlci5wYXJhbXMpO1xuICBjb25zdCB7XG4gICAgZG9jdW1lbnRUeXBlLFxuICAgIGlzTG9hZGVkOiBpc0RvY3VtZW50TG9hZGVkXG4gIH0gPSB1c2VEb2N1bWVudFR5cGUob3B0aW9ucy5pZCwgb3B0aW9ucy50eXBlKTtcbiAgY29uc3QgdGVtcGxhdGVJdGVtcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiByZXNvbHZlTmV3RG9jdW1lbnRPcHRpb25zKHtcbiAgICAgIHR5cGU6IFwiZ2xvYmFsXCJcbiAgICB9KTtcbiAgfSwgW3Jlc29sdmVOZXdEb2N1bWVudE9wdGlvbnNdKTtcbiAgY29uc3QgW3RlbXBsYXRlUGVybWlzc2lvbnMsIGlzVGVtcGxhdGVQZXJtaXNzaW9uc0xvYWRpbmddID0gdXNlVGVtcGxhdGVQZXJtaXNzaW9ucyh7XG4gICAgdGVtcGxhdGVJdGVtc1xuICB9KTtcbiAgY29uc3QgaXNMb2FkZWQgPSBpc0RvY3VtZW50TG9hZGVkICYmICFpc1RlbXBsYXRlUGVybWlzc2lvbnNMb2FkaW5nO1xuICBjb25zdCBwcm92aWRlclByb3BzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGlzTG9hZGVkICYmIGRvY3VtZW50VHlwZSAmJiBvcHRpb25zLnR5cGUgIT09IGRvY3VtZW50VHlwZSA/IG1lcmdlRG9jdW1lbnRUeXBlKHByb3BzLCBvcHRpb25zLCBkb2N1bWVudFR5cGUpIDogcHJvcHM7XG4gIH0sIFtwcm9wcywgZG9jdW1lbnRUeXBlLCBpc0xvYWRlZCwgb3B0aW9uc10pO1xuICBjb25zdCB7XG4gICAgUmVmZXJlbmNlQ2hpbGRMaW5rLFxuICAgIGhhbmRsZUVkaXRSZWZlcmVuY2UsXG4gICAgZ3JvdXBJbmRleCxcbiAgICByb3V0ZXJQYW5lc1N0YXRlXG4gIH0gPSBwYW5lUm91dGVyO1xuICBjb25zdCBjaGlsZFBhcmFtcyA9ICgoX2EgPSByb3V0ZXJQYW5lc1N0YXRlW2dyb3VwSW5kZXggKyAxXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hWzBdLnBhcmFtcykgfHwge307XG4gIGNvbnN0IHJvdXRlclBhbmVzU3RhdGVMZW5ndGggPSByb3V0ZXJQYW5lc1N0YXRlLmxlbmd0aDtcbiAgY29uc3Qge1xuICAgIHBhcmVudFJlZlBhdGhcbiAgfSA9IGNoaWxkUGFyYW1zO1xuICBjb25zdCBhY3RpdmVQYXRoID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHBhcmVudFJlZlBhdGggPyB7XG4gICAgICBwYXRoOiBmcm9tU3RyaW5nKHBhcmVudFJlZlBhdGgpLFxuICAgICAgc3RhdGU6XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmVzdGVkLXRlcm5hcnlcbiAgICAgIGdyb3VwSW5kZXggPj0gcm91dGVyUGFuZXNTdGF0ZUxlbmd0aCAtIDEgPyBcIm5vbmVcIiA6IGdyb3VwSW5kZXggPj0gcm91dGVyUGFuZXNTdGF0ZUxlbmd0aCAtIDIgPyBcInNlbGVjdGVkXCIgOiBcInByZXNzZWRcIlxuICAgIH0gOiB7XG4gICAgICBwYXRoOiBbXSxcbiAgICAgIHN0YXRlOiBcIm5vbmVcIlxuICAgIH07XG4gIH0sIFtwYXJlbnRSZWZQYXRoLCBncm91cEluZGV4LCByb3V0ZXJQYW5lc1N0YXRlTGVuZ3RoXSk7XG4gIGlmIChvcHRpb25zLnR5cGUgPT09IFwiKlwiICYmICFpc0xvYWRlZCkge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goTG9hZGluZ1BhbmUsIHtcbiAgICAgIGZsZXg6IDIuNSxcbiAgICAgIG1pbldpZHRoOiAzMjAsXG4gICAgICBwYW5lS2V5LFxuICAgICAgdGl0bGU6IFwiTG9hZGluZyBkb2N1bWVudFxcdTIwMjZcIlxuICAgIH0pO1xuICB9XG4gIGlmICghZG9jdW1lbnRUeXBlKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChFcnJvclBhbmUsIHtcbiAgICAgIGZsZXg6IDIuNSxcbiAgICAgIG1pbldpZHRoOiAzMjAsXG4gICAgICBwYW5lS2V5LFxuICAgICAgdGl0bGU6IC8qIEBfX1BVUkVfXyAqL2pzeChGcmFnbWVudCwge1xuICAgICAgICBjaGlsZHJlbjogXCJUaGUgZG9jdW1lbnQgd2FzIG5vdCBmb3VuZFwiXG4gICAgICB9KSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goU3RhY2ssIHtcbiAgICAgICAgc3BhY2U6IDQsXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hzKFRleHQsIHtcbiAgICAgICAgICBhczogXCJwXCIsXG4gICAgICAgICAgY2hpbGRyZW46IFtcIlRoZSBkb2N1bWVudCB0eXBlIGlzIG5vdCBkZWZpbmVkLCBhbmQgYSBkb2N1bWVudCB3aXRoIHRoZSBcIiwgLyogQF9fUFVSRV9fICovanN4KFwiY29kZVwiLCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogb3B0aW9ucy5pZFxuICAgICAgICAgIH0pLCBcIiBcIiwgXCJpZGVudGlmaWVyIGNvdWxkIG5vdCBiZSBmb3VuZC5cIl1cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudFBhbmVQcm92aWRlciwge1xuICAgIC4uLnByb3ZpZGVyUHJvcHMsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChSZWZlcmVuY2VJbnB1dE9wdGlvbnNQcm92aWRlciwge1xuICAgICAgRWRpdFJlZmVyZW5jZUxpbmtDb21wb25lbnQ6IFJlZmVyZW5jZUNoaWxkTGluayxcbiAgICAgIG9uRWRpdFJlZmVyZW5jZTogaGFuZGxlRWRpdFJlZmVyZW5jZSxcbiAgICAgIGluaXRpYWxWYWx1ZVRlbXBsYXRlSXRlbXM6IHRlbXBsYXRlUGVybWlzc2lvbnMsXG4gICAgICBhY3RpdmVQYXRoLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChJbm5lckRvY3VtZW50UGFuZSwge30pXG4gICAgfSlcbiAgfSwgXCJcIi5jb25jYXQoZG9jdW1lbnRUeXBlLCBcIi1cIikuY29uY2F0KG9wdGlvbnMuaWQpKTtcbn1cbmZ1bmN0aW9uIHVzZVBhbmVPcHRpb25zKG9wdGlvbnMpIHtcbiAgbGV0IHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gIGNvbnN0IHRlbXBsYXRlcyA9IHVzZVRlbXBsYXRlcygpO1xuICByZXR1cm4gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKG9wdGlvbnMudHlwZSAmJiBvcHRpb25zLnR5cGUgIT09IFwiKlwiKSB7XG4gICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG4gICAgY29uc3QgdGVtcGxhdGVOYW1lID0gb3B0aW9ucy50ZW1wbGF0ZSB8fCBwYXJhbXMudGVtcGxhdGU7XG4gICAgY29uc3QgdGVtcGxhdGUgPSB0ZW1wbGF0ZU5hbWUgPyB0ZW1wbGF0ZXMuZmluZCh0ID0+IHQuaWQgPT09IHRlbXBsYXRlTmFtZSkgOiB2b2lkIDA7XG4gICAgY29uc3QgZG9jdW1lbnRUeXBlID0gdGVtcGxhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IHRlbXBsYXRlLnNjaGVtYVR5cGU7XG4gICAgaWYgKCFkb2N1bWVudFR5cGUpIHtcbiAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHR5cGU6IGRvY3VtZW50VHlwZVxuICAgIH07XG4gIH0sIFtvcHRpb25zLCBwYXJhbXMudGVtcGxhdGUsIHRlbXBsYXRlc10pO1xufVxuZnVuY3Rpb24gbWVyZ2VEb2N1bWVudFR5cGUocHJvcHMsIG9wdGlvbnMsIGRvY3VtZW50VHlwZSkge1xuICByZXR1cm4ge1xuICAgIC4uLnByb3BzLFxuICAgIHBhbmU6IHtcbiAgICAgIC4uLnByb3BzLnBhbmUsXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIHR5cGU6IGRvY3VtZW50VHlwZVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIElubmVyRG9jdW1lbnRQYW5lKCkge1xuICBjb25zdCB7XG4gICAgY2hhbmdlc09wZW4sXG4gICAgZG9jdW1lbnRUeXBlLFxuICAgIG9uRm9jdXMsXG4gICAgb25QYXRoT3BlbixcbiAgICBvbkhpc3RvcnlPcGVuLFxuICAgIG9uS2V5VXAsXG4gICAgaW5zcGVjdE9wZW4sXG4gICAgcGFuZUtleSxcbiAgICBzY2hlbWFUeXBlLFxuICAgIHZhbHVlXG4gIH0gPSB1c2VEb2N1bWVudFBhbmUoKTtcbiAgY29uc3Qge1xuICAgIGZlYXR1cmVzXG4gIH0gPSB1c2VEZXNrVG9vbCgpO1xuICBjb25zdCB7XG4gICAgY29sbGFwc2VkOiBsYXlvdXRDb2xsYXBzZWRcbiAgfSA9IHVzZVBhbmVMYXlvdXQoKTtcbiAgY29uc3Qgek9mZnNldHMgPSB1c2VaSW5kZXgoKTtcbiAgY29uc3QgW3Jvb3RFbGVtZW50LCBzZXRSb290RWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW2Zvb3RlckVsZW1lbnQsIHNldEZvb3RlckVsZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFthY3Rpb25zQm94RWxlbWVudCwgc2V0QWN0aW9uc0JveEVsZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFtkb2N1bWVudFBhbmVsUG9ydGFsRWxlbWVudCwgc2V0RG9jdW1lbnRQYW5lbFBvcnRhbEVsZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IGZvb3RlclJlY3QgPSB1c2VFbGVtZW50UmVjdChmb290ZXJFbGVtZW50KTtcbiAgY29uc3QgZm9vdGVySCA9IGZvb3RlclJlY3QgPT0gbnVsbCA/IHZvaWQgMCA6IGZvb3RlclJlY3QuaGVpZ2h0O1xuICBjb25zdCBkb2N1bWVudFBhbmVsID0gdXNlTWVtbygoKSA9PiAvKiBAX19QVVJFX18gKi9qc3goRG9jdW1lbnRQYW5lbCwge1xuICAgIGZvb3RlckhlaWdodDogZm9vdGVySCB8fCBudWxsLFxuICAgIGlzSW5zcGVjdE9wZW46IGluc3BlY3RPcGVuLFxuICAgIHJvb3RFbGVtZW50LFxuICAgIHNldERvY3VtZW50UGFuZWxQb3J0YWxFbGVtZW50XG4gIH0pLCBbZm9vdGVySCwgcm9vdEVsZW1lbnQsIGluc3BlY3RPcGVuXSk7XG4gIGNvbnN0IGZvb3RlciA9IHVzZU1lbW8oKCkgPT4gLyogQF9fUFVSRV9fICovanN4KFBvcnRhbFByb3ZpZGVyLCB7XG4gICAgX191bnN0YWJsZV9lbGVtZW50czoge1xuICAgICAgW0RPQ1VNRU5UX1BBTkVMX1BPUlRBTF9FTEVNRU5UXTogZG9jdW1lbnRQYW5lbFBvcnRhbEVsZW1lbnRcbiAgICB9LFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goRGlhbG9nUHJvdmlkZXIsIHtcbiAgICAgIHBvc2l0aW9uOiBESUFMT0dfUFJPVklERVJfUE9TSVRJT04sXG4gICAgICB6T2Zmc2V0OiB6T2Zmc2V0cy5wb3J0YWwsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFBhbmVGb290ZXIsIHtcbiAgICAgICAgcmVmOiBzZXRGb290ZXJFbGVtZW50LFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KERvY3VtZW50U3RhdHVzQmFyLCB7XG4gICAgICAgICAgYWN0aW9uc0JveFJlZjogc2V0QWN0aW9uc0JveEVsZW1lbnRcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfSksIFtkb2N1bWVudFBhbmVsUG9ydGFsRWxlbWVudCwgek9mZnNldHMucG9ydGFsXSk7XG4gIGNvbnN0IGNoYW5nZXNQYW5lbCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghZmVhdHVyZXMucmV2aWV3Q2hhbmdlcykgcmV0dXJuIG51bGw7XG4gICAgaWYgKCFjaGFuZ2VzT3BlbikgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChCb3VuZGFyeUVsZW1lbnRQcm92aWRlciwge1xuICAgICAgZWxlbWVudDogcm9vdEVsZW1lbnQsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KENoYW5nZXNQYW5lbCwge30pXG4gICAgfSk7XG4gIH0sIFtjaGFuZ2VzT3BlbiwgZmVhdHVyZXMucmV2aWV3Q2hhbmdlcywgcm9vdEVsZW1lbnRdKTtcbiAgY29uc3Qgb25Db25uZWN0b3JTZXRGb2N1cyA9IHVzZUNhbGxiYWNrKHBhdGggPT4ge1xuICAgIG9uUGF0aE9wZW4ocGF0aCk7XG4gICAgb25Gb2N1cyhwYXRoKTtcbiAgfSwgW29uUGF0aE9wZW4sIG9uRm9jdXNdKTtcbiAgY29uc3QgY2hpbGRyZW4gPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIXNjaGVtYVR5cGUpIHtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goRXJyb3JQYW5lLCB7XG4gICAgICAgIGZsZXg6IDIuNSxcbiAgICAgICAgbWluV2lkdGg6IDMyMCxcbiAgICAgICAgcGFuZUtleSxcbiAgICAgICAgdGl0bGU6IC8qIEBfX1BVUkVfXyAqL2pzeHMoRnJhZ21lbnQsIHtcbiAgICAgICAgICBjaGlsZHJlbjogW1wiVW5rbm93biBkb2N1bWVudCB0eXBlOiBcIiwgLyogQF9fUFVSRV9fICovanN4KFwiY29kZVwiLCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogZG9jdW1lbnRUeXBlXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pLFxuICAgICAgICB0b25lOiBcImNhdXRpb25cIixcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoU3RhY2ssIHtcbiAgICAgICAgICBzcGFjZTogNCxcbiAgICAgICAgICBjaGlsZHJlbjogW2RvY3VtZW50VHlwZSAmJiAvKiBAX19QVVJFX18gKi9qc3hzKFRleHQsIHtcbiAgICAgICAgICAgIGFzOiBcInBcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXCJUaGlzIGRvY3VtZW50IGhhcyB0aGUgc2NoZW1hIHR5cGUgXCIsIC8qIEBfX1BVUkVfXyAqL2pzeChcImNvZGVcIiwge1xuICAgICAgICAgICAgICBjaGlsZHJlbjogZG9jdW1lbnRUeXBlXG4gICAgICAgICAgICB9KSwgXCIsIHdoaWNoIGlzIG5vdCBkZWZpbmVkIGFzIGEgdHlwZSBpbiB0aGUgbG9jYWwgY29udGVudCBzdHVkaW8gc2NoZW1hLlwiXVxuICAgICAgICAgIH0pLCAhZG9jdW1lbnRUeXBlICYmIC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgICBhczogXCJwXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogXCJUaGlzIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0LCBhbmQgbm8gc2NoZW1hIHR5cGUgd2FzIHNwZWNpZmllZCBmb3IgaXQuXCJcbiAgICAgICAgICB9KSwgaXNEZXYgJiYgdmFsdWUgJiYgLyogQF9fUFVSRV9fICovanN4cyhGcmFnbWVudCwge1xuICAgICAgICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgICBhczogXCJwXCIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBcIkhlcmUgaXMgdGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIGRvY3VtZW50OlwiXG4gICAgICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KENhcmQsIHtcbiAgICAgICAgICAgICAgcGFkZGluZzogMyxcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IFwiYXV0b1wiLFxuICAgICAgICAgICAgICByYWRpdXM6IDIsXG4gICAgICAgICAgICAgIHNoYWRvdzogMSxcbiAgICAgICAgICAgICAgdG9uZTogXCJpbmhlcml0XCIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQ29kZSwge1xuICAgICAgICAgICAgICAgIGxhbmd1YWdlOiBcImpzb25cIixcbiAgICAgICAgICAgICAgICBzaXplOiBbMSwgMSwgMl0sXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IEpTT04uc3RyaW5naWZ5KHZhbHVlLCBudWxsLCAyKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSldXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeHMoRnJhZ21lbnQsIHtcbiAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KERpYWxvZ1Byb3ZpZGVyLCB7XG4gICAgICAgIHBvc2l0aW9uOiBESUFMT0dfUFJPVklERVJfUE9TSVRJT04sXG4gICAgICAgIHpPZmZzZXQ6IHpPZmZzZXRzLnBvcnRhbCxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChGbGV4LCB7XG4gICAgICAgICAgZGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgICAgICAgIGZsZXg6IDEsXG4gICAgICAgICAgaGVpZ2h0OiBsYXlvdXRDb2xsYXBzZWQgPyB2b2lkIDAgOiBcImZpbGxcIixcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhTdHlsZWRDaGFuZ2VDb25uZWN0b3JSb290LCB7XG4gICAgICAgICAgICBcImRhdGEtdGVzdGlkXCI6IFwiY2hhbmdlLWNvbm5lY3Rvci1yb290XCIsXG4gICAgICAgICAgICBpc1Jldmlld0NoYW5nZXNPcGVuOiBjaGFuZ2VzT3BlbixcbiAgICAgICAgICAgIG9uT3BlblJldmlld0NoYW5nZXM6IG9uSGlzdG9yeU9wZW4sXG4gICAgICAgICAgICBvblNldEZvY3VzOiBvbkNvbm5lY3RvclNldEZvY3VzLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtkb2N1bWVudFBhbmVsLCBjaGFuZ2VzUGFuZWxdXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pLCBmb290ZXIsIC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudE9wZXJhdGlvblJlc3VsdHMsIHt9KV1cbiAgICB9KTtcbiAgfSwgW3NjaGVtYVR5cGUsIHpPZmZzZXRzLnBvcnRhbCwgbGF5b3V0Q29sbGFwc2VkLCBjaGFuZ2VzT3Blbiwgb25IaXN0b3J5T3Blbiwgb25Db25uZWN0b3JTZXRGb2N1cywgZG9jdW1lbnRQYW5lbCwgY2hhbmdlc1BhbmVsLCBmb290ZXIsIHBhbmVLZXksIGRvY3VtZW50VHlwZSwgdmFsdWVdKTtcbiAgY29uc3QgY3VycmVudE1pbldpZHRoID0gY2hhbmdlc09wZW4gPyBET0NVTUVOVF9QQU5FTF9JTklUSUFMX01JTl9XSURUSCArIENIQU5HRVNfUEFORUxfTUlOX1dJRFRIIDogRE9DVU1FTlRfUEFORUxfSU5JVElBTF9NSU5fV0lEVEg7XG4gIGNvbnN0IG1pbldpZHRoID0gY2hhbmdlc09wZW4gPyBET0NVTUVOVF9QQU5FTF9NSU5fV0lEVEggKyBDSEFOR0VTX1BBTkVMX01JTl9XSURUSCA6IERPQ1VNRU5UX1BBTkVMX01JTl9XSURUSDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudEFjdGlvblNob3J0Y3V0cywge1xuICAgIGFjdGlvbnNCb3hFbGVtZW50LFxuICAgIGN1cnJlbnRNaW5XaWR0aCxcbiAgICBcImRhdGEtdGVzdGlkXCI6IFwiZG9jdW1lbnQtcGFuZVwiLFxuICAgIGZsZXg6IDIuNSxcbiAgICBpZDogcGFuZUtleSxcbiAgICBtaW5XaWR0aCxcbiAgICBvbktleVVwLFxuICAgIHJvb3RSZWY6IHNldFJvb3RFbGVtZW50LFxuICAgIGNoaWxkcmVuXG4gIH0pO1xufVxuZnVuY3Rpb24gTm9Eb2N1bWVudFR5cGVzU2NyZWVuKCkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KENhcmQsIHtcbiAgICBoZWlnaHQ6IFwiZmlsbFwiLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goRmxleCwge1xuICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICBoZWlnaHQ6IFwiZmlsbFwiLFxuICAgICAganVzdGlmeTogXCJjZW50ZXJcIixcbiAgICAgIHBhZGRpbmc6IDQsXG4gICAgICBzaXppbmc6IFwiYm9yZGVyXCIsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KENvbnRhaW5lciwge1xuICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChDYXJkLCB7XG4gICAgICAgICAgcGFkZGluZzogNCxcbiAgICAgICAgICByYWRpdXM6IDIsXG4gICAgICAgICAgc2hhZG93OiAxLFxuICAgICAgICAgIHRvbmU6IFwiY2F1dGlvblwiLFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hzKEZsZXgsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goV2FybmluZ091dGxpbmVJY29uLCB7fSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3hzKFN0YWNrLCB7XG4gICAgICAgICAgICAgIGZsZXg6IDEsXG4gICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IDMsXG4gICAgICAgICAgICAgIHNwYWNlOiAzLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgICAgICAgYXM6IFwiaDFcIixcbiAgICAgICAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgICAgICAgIHdlaWdodDogXCJib2xkXCIsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiTm8gZG9jdW1lbnQgdHlwZXNcIlxuICAgICAgICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICAgICAgICBhczogXCJwXCIsXG4gICAgICAgICAgICAgICAgbXV0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJQbGVhc2UgZGVmaW5lIGF0IGxlYXN0IG9uZSBkb2N1bWVudCB0eXBlIGluIHlvdXIgc2NoZW1hLlwiXG4gICAgICAgICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgICAgIGFzOiBcInBcIixcbiAgICAgICAgICAgICAgICBtdXRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goXCJhXCIsIHtcbiAgICAgICAgICAgICAgICAgIGhyZWY6IFwiaHR0cHM6Ly93d3cuc2FuaXR5LmlvL2RvY3MvY3JlYXRlLWEtc2NoZW1hLWFuZC1jb25maWd1cmUtc2FuaXR5LXN0dWRpb1wiLFxuICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICAgICAgICAgICAgICAgICAgcmVsOiBcIm5vcmVmZXJyZXJcIixcbiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBcIkxlYXJuIGhvdyB0byBhZGQgYSBkb2N1bWVudCB0eXBlIFxcdTIxOTJcIlxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgfSldXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG59XG5jb25zdCBTdHlsZWRQYW5lTGF5b3V0ID0gc3R5bGVkKFBhbmVMYXlvdXQpKF90ZW1wbGF0ZU9iamVjdDI2IHx8IChfdGVtcGxhdGVPYmplY3QyNiA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoW1wiXFxuICBtaW4taGVpZ2h0OiAxMDAlO1xcbiAgbWluLXdpZHRoOiAzMjBweDtcXG5cIl0pKSk7XG5jb25zdCBpc1NhdmVIb3RrZXkgPSBpc0hvdGtleShcIm1vZCtzXCIpO1xuY29uc3QgRGVza1Rvb2wgPSBtZW1vKGZ1bmN0aW9uIERlc2tUb29sMihfcmVmMzYpIHtcbiAgbGV0IHtcbiAgICBvblBhbmVDaGFuZ2VcbiAgfSA9IF9yZWYzNjtcbiAgdmFyIF9hO1xuICBjb25zdCB7XG4gICAgcHVzaDogcHVzaFRvYXN0XG4gIH0gPSB1c2VUb2FzdCgpO1xuICBjb25zdCBzY2hlbWEgPSB1c2VTY2hlbWEoKTtcbiAgY29uc3Qge1xuICAgIGxheW91dENvbGxhcHNlZCxcbiAgICBzZXRMYXlvdXRDb2xsYXBzZWRcbiAgfSA9IHVzZURlc2tUb29sKCk7XG4gIGNvbnN0IHtcbiAgICBwYW5lRGF0YUl0ZW1zLFxuICAgIHJlc29sdmVkUGFuZXNcbiAgfSA9IHVzZVJlc29sdmVkUGFuZXMoKTtcbiAgY29uc3QgaXNSZXNvbHZpbmdJbnRlbnQgPSB1c2VSb3V0ZXJTdGF0ZSh1c2VDYWxsYmFjayhyb3V0ZXJTdGF0ZSA9PiB0eXBlb2Ygcm91dGVyU3RhdGUuaW50ZW50ID09PSBcInN0cmluZ1wiLCBbXSkpO1xuICBjb25zdCBbcG9ydGFsRWxlbWVudCwgc2V0UG9ydGFsRWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgaGFuZGxlUm9vdENvbGxhcHNlID0gdXNlQ2FsbGJhY2soKCkgPT4gc2V0TGF5b3V0Q29sbGFwc2VkKHRydWUpLCBbc2V0TGF5b3V0Q29sbGFwc2VkXSk7XG4gIGNvbnN0IGhhbmRsZVJvb3RFeHBhbmQgPSB1c2VDYWxsYmFjaygoKSA9PiBzZXRMYXlvdXRDb2xsYXBzZWQoZmFsc2UpLCBbc2V0TGF5b3V0Q29sbGFwc2VkXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJlc29sdmVkUGFuZXMubGVuZ3RoKSB7XG4gICAgICBvblBhbmVDaGFuZ2UocmVzb2x2ZWRQYW5lcyk7XG4gICAgfVxuICB9LCBbb25QYW5lQ2hhbmdlLCByZXNvbHZlZFBhbmVzXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlR2xvYmFsS2V5RG93biA9IGV2ZW50ID0+IHtcbiAgICAgIGlmIChpc1NhdmVIb3RrZXkoZXZlbnQpKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHB1c2hUb2FzdCh7XG4gICAgICAgICAgY2xvc2FibGU6IHRydWUsXG4gICAgICAgICAgaWQ6IFwiYXV0by1zYXZlLW1lc3NhZ2VcIixcbiAgICAgICAgICBzdGF0dXM6IFwiaW5mb1wiLFxuICAgICAgICAgIHRpdGxlOiBcIllvdXIgd29yayBpcyBhdXRvbWF0aWNhbGx5IHNhdmVkIVwiLFxuICAgICAgICAgIGR1cmF0aW9uOiA0ZTNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlR2xvYmFsS2V5RG93bik7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVHbG9iYWxLZXlEb3duKTtcbiAgfSwgW3B1c2hUb2FzdF0pO1xuICBjb25zdCBoYXNEZWZpbmVkRG9jdW1lbnRUeXBlcyA9IChfYSA9IHNjaGVtYS5fb3JpZ2luYWwpID09IG51bGwgPyB2b2lkIDAgOiBfYS50eXBlcy5zb21lKF9pc0N1c3RvbURvY3VtZW50VHlwZURlZmluaXRpb24pO1xuICBpZiAoIWhhc0RlZmluZWREb2N1bWVudFR5cGVzKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChOb0RvY3VtZW50VHlwZXNTY3JlZW4sIHt9KTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4cyhQb3J0YWxQcm92aWRlciwge1xuICAgIGVsZW1lbnQ6IHBvcnRhbEVsZW1lbnQgfHwgbnVsbCxcbiAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeHMoU3R5bGVkUGFuZUxheW91dCwge1xuICAgICAgZmxleDogMSxcbiAgICAgIGhlaWdodDogbGF5b3V0Q29sbGFwc2VkID8gdm9pZCAwIDogXCJmaWxsXCIsXG4gICAgICBtaW5XaWR0aDogNTEyLFxuICAgICAgb25Db2xsYXBzZTogaGFuZGxlUm9vdENvbGxhcHNlLFxuICAgICAgb25FeHBhbmQ6IGhhbmRsZVJvb3RFeHBhbmQsXG4gICAgICBjaGlsZHJlbjogW3BhbmVEYXRhSXRlbXMubWFwKF9yZWYzNyA9PiB7XG4gICAgICAgIGxldCB7XG4gICAgICAgICAgYWN0aXZlLFxuICAgICAgICAgIGNoaWxkSXRlbUlkLFxuICAgICAgICAgIGdyb3VwSW5kZXgsXG4gICAgICAgICAgaXRlbUlkLFxuICAgICAgICAgIGtleTogcGFuZUtleSxcbiAgICAgICAgICBwYW5lLFxuICAgICAgICAgIGluZGV4OiBwYW5lSW5kZXgsXG4gICAgICAgICAgcGFyYW1zOiBwYW5lUGFyYW1zLFxuICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICBzaWJsaW5nSW5kZXgsXG4gICAgICAgICAgc2VsZWN0ZWRcbiAgICAgICAgfSA9IF9yZWYzNztcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChGcmFnbWVudCQxLCB7XG4gICAgICAgICAgY2hpbGRyZW46IHBhbmUgPT09IExPQURJTkdfUEFORSA/IC8qIEBfX1BVUkVfXyAqL2pzeChMb2FkaW5nUGFuZSwge1xuICAgICAgICAgICAgcGFuZUtleSxcbiAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICBzZWxlY3RlZFxuICAgICAgICAgIH0pIDogLyogQF9fUFVSRV9fICovanN4KERlc2tUb29sUGFuZSwge1xuICAgICAgICAgICAgYWN0aXZlLFxuICAgICAgICAgICAgZ3JvdXBJbmRleCxcbiAgICAgICAgICAgIGluZGV4OiBwYW5lSW5kZXgsXG4gICAgICAgICAgICBwYW5lLFxuICAgICAgICAgICAgY2hpbGRJdGVtSWQsXG4gICAgICAgICAgICBpdGVtSWQsXG4gICAgICAgICAgICBwYW5lS2V5LFxuICAgICAgICAgICAgcGFyYW1zOiBwYW5lUGFyYW1zLFxuICAgICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICBzZWxlY3RlZCxcbiAgICAgICAgICAgIHNpYmxpbmdJbmRleFxuICAgICAgICAgIH0pXG4gICAgICAgIH0sIFwiXCIuY29uY2F0KHBhbmUgPT09IExPQURJTkdfUEFORSA/IFwibG9hZGluZ1wiIDogcGFuZS50eXBlLCBcIi1cIikuY29uY2F0KHBhbmVJbmRleCkpO1xuICAgICAgfSksIHBhbmVEYXRhSXRlbXMubGVuZ3RoIDw9IDEgJiYgaXNSZXNvbHZpbmdJbnRlbnQgJiYgLyogQF9fUFVSRV9fICovanN4KExvYWRpbmdQYW5lLCB7XG4gICAgICAgIHBhbmVLZXk6IFwiaW50ZW50LXJlc29sdmVyXCJcbiAgICAgIH0pXVxuICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goXCJkaXZcIiwge1xuICAgICAgXCJkYXRhLXBvcnRhbFwiOiBcIlwiLFxuICAgICAgcmVmOiBzZXRQb3J0YWxFbGVtZW50XG4gICAgfSldXG4gIH0pO1xufSk7XG5mdW5jdGlvbiBEZXNrVG9vbEJvdW5kYXJ5KF9yZWYzOCkge1xuICBsZXQge1xuICAgIHRvb2w6IHtcbiAgICAgIG9wdGlvbnNcbiAgICB9XG4gIH0gPSBfcmVmMzg7XG4gIGNvbnN0IHtcbiAgICB1bnN0YWJsZV9zb3VyY2VzOiBzb3VyY2VzXG4gIH0gPSB1c2VXb3Jrc3BhY2UoKTtcbiAgY29uc3QgW2ZpcnN0U291cmNlXSA9IHNvdXJjZXM7XG4gIGNvbnN0IHtcbiAgICBzb3VyY2UsXG4gICAgZGVmYXVsdERvY3VtZW50Tm9kZSxcbiAgICBzdHJ1Y3R1cmVcbiAgfSA9IG9wdGlvbnMgfHwge307XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0QWN0aXZlUGFuZXMoW10pO1xuICAgIHJldHVybiAoKSA9PiBzZXRBY3RpdmVQYW5lcyhbXSk7XG4gIH0sIFtdKTtcbiAgY29uc3QgW3tcbiAgICBlcnJvclxuICB9LCBzZXRFcnJvcl0gPSB1c2VTdGF0ZSh7XG4gICAgZXJyb3I6IG51bGxcbiAgfSk7XG4gIGlmIChlcnJvcikgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChTdHJ1Y3R1cmVFcnJvciwge1xuICAgIGVycm9yXG4gIH0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KEVycm9yQm91bmRhcnksIHtcbiAgICBvbkNhdGNoOiBzZXRFcnJvcixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFNvdXJjZVByb3ZpZGVyLCB7XG4gICAgICBuYW1lOiBzb3VyY2UgfHwgZmlyc3RTb3VyY2UubmFtZSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hzKERlc2tUb29sUHJvdmlkZXIsIHtcbiAgICAgICAgZGVmYXVsdERvY3VtZW50Tm9kZSxcbiAgICAgICAgc3RydWN0dXJlLFxuICAgICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChEZXNrVG9vbCwge1xuICAgICAgICAgIG9uUGFuZUNoYW5nZTogc2V0QWN0aXZlUGFuZXNcbiAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChJbnRlbnRSZXNvbHZlciwge30pXVxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn1cbnZhciBpbmRleCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBkZWZhdWx0OiBEZXNrVG9vbEJvdW5kYXJ5XG59KTtcbmV4cG9ydCB7IERlbGF5LCBEb2N1bWVudFBhbmUsIERvY3VtZW50UGFuZVByb3ZpZGVyLCBpbmRleCwgdXNlRGVza1Rvb2wsIHVzZURlc2tUb29sU2V0dGluZyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgtNzQxNTQ5NmQuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-client)/./node_modules/sanity/lib/_chunks/index-7415496d.js\n"));

/***/ })

}]);